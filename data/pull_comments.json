[
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/31869873",
    "pull_request_review_id": null,
    "id": 31869873,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMxODY5ODcz",
    "diff_hunk": "@@ -200,7 +200,7 @@ def clear(args):\n     dagbag = DagBag(args.subdir)\n \n     if args.dag_id not in dagbag.dags:\n-        raise Exception('dag_id could not be found')\n+        raise Exception('dag_id could not be fouud')",
    "path": "airflow/bin/cli.py",
    "commit_id": "e46c807b55460cfed50eb8369e84d298a6092a73",
    "original_commit_id": "2574507de27552c82507bcdab99d61694accf871",
    "user": {
      "login": "Mause",
      "id": 1405026,
      "node_id": "MDQ6VXNlcjE0MDUwMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1405026?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Mause",
      "html_url": "https://github.com/Mause",
      "followers_url": "https://api.github.com/users/Mause/followers",
      "following_url": "https://api.github.com/users/Mause/following{/other_user}",
      "gists_url": "https://api.github.com/users/Mause/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Mause/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Mause/subscriptions",
      "organizations_url": "https://api.github.com/users/Mause/orgs",
      "repos_url": "https://api.github.com/users/Mause/repos",
      "events_url": "https://api.github.com/users/Mause/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Mause/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "This creates a spelling error, rather than correcting it\n",
    "created_at": "2015-06-06T17:24:27Z",
    "updated_at": "2015-06-06T21:18:54Z",
    "html_url": "https://github.com/apache/airflow/pull/5#discussion_r31869873",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/5",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/31869873"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/5#discussion_r31869873"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/5"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/31869873/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "NONE",
    "original_position": 5,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/31871640",
    "pull_request_review_id": null,
    "id": 31871640,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMxODcxNjQw",
    "diff_hunk": "@@ -200,7 +200,7 @@ def clear(args):\n     dagbag = DagBag(args.subdir)\n \n     if args.dag_id not in dagbag.dags:\n-        raise Exception('dag_id could not be found')\n+        raise Exception('dag_id could not be fouud')",
    "path": "airflow/bin/cli.py",
    "commit_id": "e46c807b55460cfed50eb8369e84d298a6092a73",
    "original_commit_id": "2574507de27552c82507bcdab99d61694accf871",
    "user": {
      "login": "eerwitt",
      "id": 1329385,
      "node_id": "MDQ6VXNlcjEzMjkzODU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1329385?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eerwitt",
      "html_url": "https://github.com/eerwitt",
      "followers_url": "https://api.github.com/users/eerwitt/followers",
      "following_url": "https://api.github.com/users/eerwitt/following{/other_user}",
      "gists_url": "https://api.github.com/users/eerwitt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eerwitt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eerwitt/subscriptions",
      "organizations_url": "https://api.github.com/users/eerwitt/orgs",
      "repos_url": "https://api.github.com/users/eerwitt/repos",
      "events_url": "https://api.github.com/users/eerwitt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eerwitt/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": ":disappointed: oops sorry, good catch\n",
    "created_at": "2015-06-06T21:17:35Z",
    "updated_at": "2015-06-06T21:18:54Z",
    "html_url": "https://github.com/apache/airflow/pull/5#discussion_r31871640",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/5",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/31871640"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/5#discussion_r31871640"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/5"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/31871640/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 5,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/32376015",
    "pull_request_review_id": null,
    "id": 32376015,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMyMzc2MDE1",
    "diff_hunk": "@@ -123,8 +124,9 @@ We also pass the default argument dictionary that we just define.\n \n Tasks\n -----\n-Tasks are generated when instantiating objects from operators. The first\n-argument ``task_id`` acts as a unique identifier for the task.\n+Tasks are generated when instantiating objects from operators. An object\n+instatiated from an operator is called a constructor. The first argument",
    "path": "docs/tutorial.rst",
    "commit_id": "20f773b0bedd9fb7a9c3ce231e8809da4e60327e",
    "original_commit_id": "20f773b0bedd9fb7a9c3ce231e8809da4e60327e",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "\"constructor\" is the name of the special method that define how the object is created. It's an OOP term, not specific to Airflow or anything.\n",
    "created_at": "2015-06-14T03:43:47Z",
    "updated_at": "2015-06-14T03:43:58Z",
    "html_url": "https://github.com/apache/airflow/pull/25#discussion_r32376015",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/25",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/32376015"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/25#discussion_r32376015"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/25"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/32376015/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 128,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 15,
    "position": 15,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/32376031",
    "pull_request_review_id": null,
    "id": 32376031,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMyMzc2MDMx",
    "diff_hunk": "@@ -123,8 +124,9 @@ We also pass the default argument dictionary that we just define.\n \n Tasks\n -----\n-Tasks are generated when instantiating objects from operators. The first\n-argument ``task_id`` acts as a unique identifier for the task.\n+Tasks are generated when instantiating objects from operators. An object\n+instatiated from an operator is called a constructor. The first argument",
    "path": "docs/tutorial.rst",
    "commit_id": "20f773b0bedd9fb7a9c3ce231e8809da4e60327e",
    "original_commit_id": "20f773b0bedd9fb7a9c3ce231e8809da4e60327e",
    "user": {
      "login": "statwonk",
      "id": 1160090,
      "node_id": "MDQ6VXNlcjExNjAwOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1160090?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/statwonk",
      "html_url": "https://github.com/statwonk",
      "followers_url": "https://api.github.com/users/statwonk/followers",
      "following_url": "https://api.github.com/users/statwonk/following{/other_user}",
      "gists_url": "https://api.github.com/users/statwonk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/statwonk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/statwonk/subscriptions",
      "organizations_url": "https://api.github.com/users/statwonk/orgs",
      "repos_url": "https://api.github.com/users/statwonk/repos",
      "events_url": "https://api.github.com/users/statwonk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/statwonk/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Got it, apologies, I'm coming from a FP background (R). :)\n",
    "created_at": "2015-06-14T03:47:54Z",
    "updated_at": "2015-06-14T03:47:54Z",
    "html_url": "https://github.com/apache/airflow/pull/25#discussion_r32376031",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/25",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/32376031"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/25#discussion_r32376031"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/25"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/32376031/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 128,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 15,
    "position": 15,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/32440712",
    "pull_request_review_id": null,
    "id": 32440712,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMyNDQwNzEy",
    "diff_hunk": "@@ -1,14 +1,16 @@\n-__version__ = \"1.0.1\"\n-\n \"\"\"\n Authentication is implemented using flask_login and different environments can\n implement their own login mechanisms by providing an `airflow_login` module\n in their PYTHONPATH. airflow_login should be based off the\n `airflow.www.login`\n \"\"\"\n+__version__ = \"1.0.1\"",
    "path": "airflow/__init__.py",
    "commit_id": "22ac771af1623b1c16d1a8f98fc2a7724d7be866",
    "original_commit_id": "ee85fedbfbe4cca4c3ccb25f9321306397f4b604",
    "user": {
      "login": "artwr",
      "id": 1518713,
      "node_id": "MDQ6VXNlcjE1MTg3MTM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1518713?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/artwr",
      "html_url": "https://github.com/artwr",
      "followers_url": "https://api.github.com/users/artwr/followers",
      "following_url": "https://api.github.com/users/artwr/following{/other_user}",
      "gists_url": "https://api.github.com/users/artwr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/artwr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/artwr/subscriptions",
      "organizations_url": "https://api.github.com/users/artwr/orgs",
      "repos_url": "https://api.github.com/users/artwr/repos",
      "events_url": "https://api.github.com/users/artwr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/artwr/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Maybe minor bump in the version?\n",
    "created_at": "2015-06-15T16:46:22Z",
    "updated_at": "2015-06-17T00:01:08Z",
    "html_url": "https://github.com/apache/airflow/pull/32#discussion_r32440712",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/32",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/32440712"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/32#discussion_r32440712"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/32"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/32440712/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 7,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 9,
    "position": 9,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/32447446",
    "pull_request_review_id": null,
    "id": 32447446,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMyNDQ3NDQ2",
    "diff_hunk": "@@ -1,14 +1,16 @@\n-__version__ = \"1.0.1\"\n-\n \"\"\"\n Authentication is implemented using flask_login and different environments can\n implement their own login mechanisms by providing an `airflow_login` module\n in their PYTHONPATH. airflow_login should be based off the\n `airflow.www.login`\n \"\"\"\n+__version__ = \"1.0.1\"",
    "path": "airflow/__init__.py",
    "commit_id": "22ac771af1623b1c16d1a8f98fc2a7724d7be866",
    "original_commit_id": "ee85fedbfbe4cca4c3ccb25f9321306397f4b604",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "I bump as part of the process when I decide to upload to pypi\n",
    "created_at": "2015-06-15T17:53:38Z",
    "updated_at": "2015-06-17T00:01:08Z",
    "html_url": "https://github.com/apache/airflow/pull/32#discussion_r32447446",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/32",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/32447446"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/32#discussion_r32447446"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/32"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/32447446/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 7,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 9,
    "position": 9,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/33230306",
    "pull_request_review_id": null,
    "id": 33230306,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMzMjMwMzA2",
    "diff_hunk": "@@ -108,13 +105,26 @@ def decorated_function(*args, **kwargs):\n QUERY_LIMIT = 100000\n CHART_LIMIT = 200000\n \n-special_attrs = {\n-    'sql': SqlLexer,\n-    'hql': SqlLexer,\n-    'doc_yaml': YamlLexer,\n-    'doc_json': JsonLexer,\n-    'doc': TextLexer,\n-    'bash_command': BashLexer,\n+def pygment_html_render(s, lexer=lexers.TextLexer):\n+    return highlight(\n+        s,\n+        lexer(),\n+        HtmlFormatter(linenos=True),\n+    )\n+    return s",
    "path": "airflow/www/app.py",
    "commit_id": "ec7422334bd2d6aa4a12d4dff2abbc4eb8a1edf1",
    "original_commit_id": "ec7422334bd2d6aa4a12d4dff2abbc4eb8a1edf1",
    "user": {
      "login": "Mause",
      "id": 1405026,
      "node_id": "MDQ6VXNlcjE0MDUwMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1405026?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Mause",
      "html_url": "https://github.com/Mause",
      "followers_url": "https://api.github.com/users/Mause/followers",
      "following_url": "https://api.github.com/users/Mause/following{/other_user}",
      "gists_url": "https://api.github.com/users/Mause/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Mause/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Mause/subscriptions",
      "organizations_url": "https://api.github.com/users/Mause/orgs",
      "repos_url": "https://api.github.com/users/Mause/repos",
      "events_url": "https://api.github.com/users/Mause/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Mause/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Which is it that you wish to return? :P\n",
    "created_at": "2015-06-25T08:00:18Z",
    "updated_at": "2015-06-25T08:00:18Z",
    "html_url": "https://github.com/apache/airflow/pull/74#discussion_r33230306",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/74",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/33230306"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/74#discussion_r33230306"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/74"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/33230306/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 114,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "NONE",
    "original_position": 29,
    "position": 29,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/33290570",
    "pull_request_review_id": null,
    "id": 33290570,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMzMjkwNTcw",
    "diff_hunk": "@@ -108,13 +105,26 @@ def decorated_function(*args, **kwargs):\n QUERY_LIMIT = 100000\n CHART_LIMIT = 200000\n \n-special_attrs = {\n-    'sql': SqlLexer,\n-    'hql': SqlLexer,\n-    'doc_yaml': YamlLexer,\n-    'doc_json': JsonLexer,\n-    'doc': TextLexer,\n-    'bash_command': BashLexer,\n+def pygment_html_render(s, lexer=lexers.TextLexer):\n+    return highlight(\n+        s,\n+        lexer(),\n+        HtmlFormatter(linenos=True),\n+    )\n+    return s",
    "path": "airflow/www/app.py",
    "commit_id": "ec7422334bd2d6aa4a12d4dff2abbc4eb8a1edf1",
    "original_commit_id": "ec7422334bd2d6aa4a12d4dff2abbc4eb8a1edf1",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Oops. I'll trim the second return out\n",
    "created_at": "2015-06-25T18:46:49Z",
    "updated_at": "2015-06-25T18:46:49Z",
    "html_url": "https://github.com/apache/airflow/pull/74#discussion_r33290570",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/74",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/33290570"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/74#discussion_r33290570"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/74"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/33290570/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 114,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 29,
    "position": 29,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/33291785",
    "pull_request_review_id": null,
    "id": 33291785,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMzMjkxNzg1",
    "diff_hunk": "@@ -962,11 +962,11 @@ class derived from this one results in the creation of a task object,\n         sequentially while relying on the previous task's schedule to\n         succeed. The task instance for the start_date is allowed to run.\n     :type depends_on_past: bool\n-    :param wait_for_downstream: when set to true, the task instances\n-        of task X will wait for the dependencies of the previous instance\n-        of task X to finish before it moves on the to next schedule.\n-        This is useful if the different instances of a task X alter\n-        the same asset, and this asset is used by the dependencies of task X.\n+    :param wait_for_downstream: when set to true, an instance of task\n+        X will wait for the dependents of the previous instance of task X\n+        to finish successfully before it runs. This is useful if the\n+        different instances of a task X alter the same asset, and this asset\n+        is used by the dependencies of task X.",
    "path": "airflow/models.py",
    "commit_id": "af8479ba242d3f209b13e0787c21f4134ea68c75",
    "original_commit_id": "6ee8c3734693bf7c0ffd50c423530724169f424b",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "dependencies->dependents on this line too\n\nI try to avoid using the words dependents and dependencies in the docs and favor upstream and downstream instead. The language should probably say \"immediately downstream\"\n",
    "created_at": "2015-06-25T18:57:19Z",
    "updated_at": "2015-06-25T19:47:51Z",
    "html_url": "https://github.com/apache/airflow/pull/78#discussion_r33291785",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/78",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/33291785"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/78#discussion_r33291785"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/78"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/33291785/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 13,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/33296384",
    "pull_request_review_id": null,
    "id": 33296384,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMzMjk2Mzg0",
    "diff_hunk": "@@ -962,11 +962,11 @@ class derived from this one results in the creation of a task object,\n         sequentially while relying on the previous task's schedule to\n         succeed. The task instance for the start_date is allowed to run.\n     :type depends_on_past: bool\n-    :param wait_for_downstream: when set to true, the task instances\n-        of task X will wait for the dependencies of the previous instance\n-        of task X to finish before it moves on the to next schedule.\n-        This is useful if the different instances of a task X alter\n-        the same asset, and this asset is used by the dependencies of task X.\n+    :param wait_for_downstream: when set to true, an instance of task\n+        X will wait for the dependents of the previous instance of task X\n+        to finish successfully before it runs. This is useful if the\n+        different instances of a task X alter the same asset, and this asset\n+        is used by the dependencies of task X.",
    "path": "airflow/models.py",
    "commit_id": "af8479ba242d3f209b13e0787c21f4134ea68c75",
    "original_commit_id": "6ee8c3734693bf7c0ffd50c423530724169f424b",
    "user": {
      "login": "woodlee",
      "id": 316636,
      "node_id": "MDQ6VXNlcjMxNjYzNg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/316636?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/woodlee",
      "html_url": "https://github.com/woodlee",
      "followers_url": "https://api.github.com/users/woodlee/followers",
      "following_url": "https://api.github.com/users/woodlee/following{/other_user}",
      "gists_url": "https://api.github.com/users/woodlee/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/woodlee/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/woodlee/subscriptions",
      "organizations_url": "https://api.github.com/users/woodlee/orgs",
      "repos_url": "https://api.github.com/users/woodlee/repos",
      "events_url": "https://api.github.com/users/woodlee/events{/privacy}",
      "received_events_url": "https://api.github.com/users/woodlee/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Ah, yes... the \"immediacy\" aspect is important... will fix.\n",
    "created_at": "2015-06-25T19:44:37Z",
    "updated_at": "2015-06-25T19:47:51Z",
    "html_url": "https://github.com/apache/airflow/pull/78#discussion_r33296384",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/78",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/33296384"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/78#discussion_r33296384"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/78"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/33296384/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "NONE",
    "original_position": 13,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/33296710",
    "pull_request_review_id": null,
    "id": 33296710,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMzMjk2NzEw",
    "diff_hunk": "@@ -962,11 +962,11 @@ class derived from this one results in the creation of a task object,\n         sequentially while relying on the previous task's schedule to\n         succeed. The task instance for the start_date is allowed to run.\n     :type depends_on_past: bool\n-    :param wait_for_downstream: when set to true, the task instances\n-        of task X will wait for the dependencies of the previous instance\n-        of task X to finish before it moves on the to next schedule.\n-        This is useful if the different instances of a task X alter\n-        the same asset, and this asset is used by the dependencies of task X.\n+    :param wait_for_downstream: when set to true, an instance of task\n+        X will wait for the dependents of the previous instance of task X\n+        to finish successfully before it runs. This is useful if the\n+        different instances of a task X alter the same asset, and this asset\n+        is used by the dependencies of task X.",
    "path": "airflow/models.py",
    "commit_id": "af8479ba242d3f209b13e0787c21f4134ea68c75",
    "original_commit_id": "6ee8c3734693bf7c0ffd50c423530724169f424b",
    "user": {
      "login": "woodlee",
      "id": 316636,
      "node_id": "MDQ6VXNlcjMxNjYzNg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/316636?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/woodlee",
      "html_url": "https://github.com/woodlee",
      "followers_url": "https://api.github.com/users/woodlee/followers",
      "following_url": "https://api.github.com/users/woodlee/following{/other_user}",
      "gists_url": "https://api.github.com/users/woodlee/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/woodlee/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/woodlee/subscriptions",
      "organizations_url": "https://api.github.com/users/woodlee/orgs",
      "repos_url": "https://api.github.com/users/woodlee/repos",
      "events_url": "https://api.github.com/users/woodlee/events{/privacy}",
      "received_events_url": "https://api.github.com/users/woodlee/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Fixed in https://github.com/woodlee/airflow/commit/af8479ba242d3f209b13e0787c21f4134ea68c75\n",
    "created_at": "2015-06-25T19:48:03Z",
    "updated_at": "2015-06-25T19:48:03Z",
    "html_url": "https://github.com/apache/airflow/pull/78#discussion_r33296710",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/78",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/33296710"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/78#discussion_r33296710"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/78"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/33296710/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "NONE",
    "original_position": 13,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/33386007",
    "pull_request_review_id": null,
    "id": 33386007,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMzMzg2MDA3",
    "diff_hunk": "@@ -628,14 +642,29 @@ def are_dependencies_met(self, main_session=None):\n         # Checking that all upstream dependencies have succeeded\n         if task._upstream_list:\n             upstream_task_ids = [t.task_id for t in task._upstream_list]\n-            ti = session.query(func.count(TI.task_id)).filter(\n-                TI.dag_id == self.dag_id,\n-                TI.task_id.in_(upstream_task_ids),\n-                TI.execution_date == self.execution_date,\n-                TI.state == State.SUCCESS,\n+            qry = (\n+                session\n+                .query(\n+                    func.sum(\n+                        case([(TI.state==State.SUCCESS, 1)], else_=0)),\n+                    func.count(TI.task_id),\n+                )\n+                .filter(\n+                    TI.dag_id == self.dag_id,\n+                    TI.task_id.in_(upstream_task_ids),\n+                    TI.execution_date == self.execution_date,\n+                    TI.state.in_([\n+                        State.SUCCESS, State.FAILED, State.UPSTREAM_FAILED]),\n+                )\n             )\n-            count = ti[0][0]\n-            if count < len(task._upstream_list):\n+            successes, done  = qry[0]\n+            if successes < done >= len(task._upstream_list):",
    "path": "airflow/models.py",
    "commit_id": "447bb088b87c9ad5d9f5747e95ba011f3e29982c",
    "original_commit_id": "447bb088b87c9ad5d9f5747e95ba011f3e29982c",
    "user": {
      "login": "artwr",
      "id": 1518713,
      "node_id": "MDQ6VXNlcjE1MTg3MTM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1518713?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/artwr",
      "html_url": "https://github.com/artwr",
      "followers_url": "https://api.github.com/users/artwr/followers",
      "following_url": "https://api.github.com/users/artwr/following{/other_user}",
      "gists_url": "https://api.github.com/users/artwr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/artwr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/artwr/subscriptions",
      "organizations_url": "https://api.github.com/users/artwr/orgs",
      "repos_url": "https://api.github.com/users/artwr/repos",
      "events_url": "https://api.github.com/users/artwr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/artwr/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "What is an example of the second inequality being strict?\n",
    "created_at": "2015-06-26T19:07:45Z",
    "updated_at": "2015-06-26T19:07:45Z",
    "html_url": "https://github.com/apache/airflow/pull/83#discussion_r33386007",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/83",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/33386007"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/83#discussion_r33386007"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/83"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/33386007/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 661,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 86,
    "position": 86,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/33389329",
    "pull_request_review_id": null,
    "id": 33389329,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMzMzg5MzI5",
    "diff_hunk": "@@ -628,14 +642,29 @@ def are_dependencies_met(self, main_session=None):\n         # Checking that all upstream dependencies have succeeded\n         if task._upstream_list:\n             upstream_task_ids = [t.task_id for t in task._upstream_list]\n-            ti = session.query(func.count(TI.task_id)).filter(\n-                TI.dag_id == self.dag_id,\n-                TI.task_id.in_(upstream_task_ids),\n-                TI.execution_date == self.execution_date,\n-                TI.state == State.SUCCESS,\n+            qry = (\n+                session\n+                .query(\n+                    func.sum(\n+                        case([(TI.state==State.SUCCESS, 1)], else_=0)),\n+                    func.count(TI.task_id),\n+                )\n+                .filter(\n+                    TI.dag_id == self.dag_id,\n+                    TI.task_id.in_(upstream_task_ids),\n+                    TI.execution_date == self.execution_date,\n+                    TI.state.in_([\n+                        State.SUCCESS, State.FAILED, State.UPSTREAM_FAILED]),\n+                )\n             )\n-            count = ti[0][0]\n-            if count < len(task._upstream_list):\n+            successes, done  = qry[0]\n+            if successes < done >= len(task._upstream_list):",
    "path": "airflow/models.py",
    "commit_id": "447bb088b87c9ad5d9f5747e95ba011f3e29982c",
    "original_commit_id": "447bb088b87c9ad5d9f5747e95ba011f3e29982c",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "if should actually read  `if successes < done == len(task._upstream_list):` but I didn't know whether it would parse. But yeah, it's basically skipping tasks that have one or many `failed` or `upstream_failed` upstream and they may have other succeeded tasks, but they have to be all finished processing.\n",
    "created_at": "2015-06-26T19:46:36Z",
    "updated_at": "2015-06-26T19:46:36Z",
    "html_url": "https://github.com/apache/airflow/pull/83#discussion_r33389329",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/83",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/33389329"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/83#discussion_r33389329"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/83"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/33389329/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 661,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 86,
    "position": 86,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/33498425",
    "pull_request_review_id": null,
    "id": 33498425,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMzNDk4NDI1",
    "diff_hunk": "@@ -262,22 +276,21 @@ something like this:\n \n     t2 = BashOperator(\n         task_id='sleep',\n-        email_on_failure=False,\n         bash_command='sleep 5',\n         dag=dag)\n \n     templated_command = \"\"\"\n-    {% for i in range(5) %}\n-        echo \"{{ ds }}\"\n-        echo \"{{ macros.ds_add(ds, 7)}}\"\n-        echo \"{{ params.my_param }}\"\n-    {% endfor %}\n+        {% for i in range(5) %}\n+            echo \"{{ ds }}\"\n+            echo \"{{ macros.ds_add(ds, 7)}}\"\n+            echo \"{{ params.my_param }}\"\n+        {% endfor %}\n     \"\"\"\n \n     t3 = BashOperator(\n         task_id='templated',\n         bash_command=templated_command,\n-        params={'my_param': 'Parameter I passed in'},\n+        params={'my_param': 'Paramater I passed in'},",
    "path": "docs/tutorial.rst",
    "commit_id": "d346e64eb62a40d160c4bea519543b277f4bb0b3",
    "original_commit_id": "097dbae64ac1c600ee3d9cfc078ab8ff7020386c",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "oops\n",
    "created_at": "2015-06-29T18:53:15Z",
    "updated_at": "2015-06-29T18:58:57Z",
    "html_url": "https://github.com/apache/airflow/pull/89#discussion_r33498425",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/89",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/33498425"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/89#discussion_r33498425"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/89"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/33498425/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 107,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/33532243",
    "pull_request_review_id": null,
    "id": 33532243,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMzNTMyMjQz",
    "diff_hunk": "@@ -373,6 +375,10 @@ Note that if you use ``depends_on_past=True``, individual task instances\n will depend on the success of the preceding task instance, except for the\n start_date specified itself, for which this dependency is disregarded.\n \n+The date range in this context is a ``start-date`` and optionally an ``end-date``,",
    "path": "docs/tutorial.rst",
    "commit_id": "4d4954990885f390eb0cfc7800711efbd9f2250d",
    "original_commit_id": "025cafedcdf14ff09c99ae5466e38dd3ba429eed",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "use `_` for `start_date` and `end_date` to match `airflow backfill -h` 's params\n",
    "created_at": "2015-06-30T01:10:39Z",
    "updated_at": "2015-06-30T10:48:57Z",
    "html_url": "https://github.com/apache/airflow/pull/90#discussion_r33532243",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/90",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/33532243"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/90#discussion_r33532243"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/90"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/33532243/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 15,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/33532541",
    "pull_request_review_id": null,
    "id": 33532541,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMzNTMyNTQx",
    "diff_hunk": "@@ -373,6 +375,10 @@ Note that if you use ``depends_on_past=True``, individual task instances\n will depend on the success of the preceding task instance, except for the\n start_date specified itself, for which this dependency is disregarded.\n \n+The date range in this context is a ``start-date`` and optionally an ``end-date``,\n+which are both passed to the scheduler and used to populate the run schedule ",
    "path": "docs/tutorial.rst",
    "commit_id": "4d4954990885f390eb0cfc7800711efbd9f2250d",
    "original_commit_id": "025cafedcdf14ff09c99ae5466e38dd3ba429eed",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "\"which are used to execute a backfill on this date range. The backfill command proceed by submitting task instances to the executor while respecting the dependencies as they evolve.\"\n\nThis is a technicality, but the backfill process doesn't talk to the scheduler process at any point in time.\n",
    "created_at": "2015-06-30T01:17:01Z",
    "updated_at": "2015-06-30T10:48:57Z",
    "html_url": "https://github.com/apache/airflow/pull/90#discussion_r33532541",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/90",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/33532541"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/90#discussion_r33532541"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/90"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/33532541/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 16,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/33728872",
    "pull_request_review_id": null,
    "id": 33728872,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMzNzI4ODcy",
    "diff_hunk": "@@ -18,6 +18,7 @@\n     'samba_hook': ['SambaHook'],\n     'sqlite_hook': ['SqliteHook'],\n     'S3_hook': ['S3Hook'],\n+    'http_hook': [ 'HttpHook' ]",
    "path": "airflow/hooks/__init__.py",
    "commit_id": "12ab4a4fe49172982a427db30d75bd90d6e7a497",
    "original_commit_id": "cee7b5f68e51cd65e11bd1f0b222db5f419276d9",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "nit: I like to leave trailing comas\n",
    "created_at": "2015-07-01T21:52:45Z",
    "updated_at": "2015-07-02T10:52:45Z",
    "html_url": "https://github.com/apache/airflow/pull/99#discussion_r33728872",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/99",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/33728872"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/99#discussion_r33728872"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/99"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/33728872/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 4,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/33729256",
    "pull_request_review_id": null,
    "id": 33729256,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMzNzI5MjU2",
    "diff_hunk": "@@ -0,0 +1,84 @@\n+import logging\n+\n+import requests\n+\n+from airflow import utils\n+from airflow.hooks.base_hook import BaseHook\n+\n+\n+class HttpHook(BaseHook):\n+\n+    \"\"\"\n+    Interact with HTTP servers.\n+    \"\"\"\n+\n+    def __init__(\n+            self, method='POST', http_conn_id='http_default'):\n+        self.http_conn_id = http_conn_id\n+        self.method = method\n+\n+    def get_conn(self, headers):",
    "path": "airflow/hooks/http_hook.py",
    "commit_id": "12ab4a4fe49172982a427db30d75bd90d6e7a497",
    "original_commit_id": "cee7b5f68e51cd65e11bd1f0b222db5f419276d9",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "I'm thinking about where the `headers` info should live. Maybe in the `extra` section of the connection (when static for a connection) and/or in the Hook's constructor. Or maybe they exist in all these places and one overrides the other....\n",
    "created_at": "2015-07-01T21:57:16Z",
    "updated_at": "2015-07-02T10:52:45Z",
    "html_url": "https://github.com/apache/airflow/pull/99#discussion_r33729256",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/99",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/33729256"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/99#discussion_r33729256"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/99"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/33729256/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 19,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 20,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/33729328",
    "pull_request_review_id": null,
    "id": 33729328,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMzNzI5MzI4",
    "diff_hunk": "@@ -0,0 +1,84 @@\n+import logging\n+\n+import requests\n+\n+from airflow import utils\n+from airflow.hooks.base_hook import BaseHook\n+\n+\n+class HttpHook(BaseHook):\n+\n+    \"\"\"\n+    Interact with HTTP servers.\n+    \"\"\"\n+\n+    def __init__(\n+            self, method='POST', http_conn_id='http_default'):\n+        self.http_conn_id = http_conn_id\n+        self.method = method\n+\n+    def get_conn(self, headers):",
    "path": "airflow/hooks/http_hook.py",
    "commit_id": "12ab4a4fe49172982a427db30d75bd90d6e7a497",
    "original_commit_id": "cee7b5f68e51cd65e11bd1f0b222db5f419276d9",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Shouldn't default should be None for headers\n`def get_conn(self, headers=None):`\n",
    "created_at": "2015-07-01T21:58:12Z",
    "updated_at": "2015-07-02T10:52:45Z",
    "html_url": "https://github.com/apache/airflow/pull/99#discussion_r33729328",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/99",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/33729328"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/99#discussion_r33729328"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/99"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/33729328/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 19,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 20,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/33729529",
    "pull_request_review_id": null,
    "id": 33729529,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMzNzI5NTI5",
    "diff_hunk": "@@ -0,0 +1,84 @@\n+import logging\n+\n+import requests\n+\n+from airflow import utils\n+from airflow.hooks.base_hook import BaseHook\n+\n+\n+class HttpHook(BaseHook):\n+\n+    \"\"\"\n+    Interact with HTTP servers.\n+    \"\"\"\n+\n+    def __init__(\n+            self, method='POST', http_conn_id='http_default'):\n+        self.http_conn_id = http_conn_id\n+        self.method = method\n+\n+    def get_conn(self, headers):\n+        \"\"\"\n+        Returns http session for use with requests\n+        \"\"\"\n+        conn = self.get_connection(self.http_conn_id)\n+        session = requests.Session()\n+        self.base_url = conn.host\n+\n+        if conn.port != None and conn.port > 0:",
    "path": "airflow/hooks/http_hook.py",
    "commit_id": "12ab4a4fe49172982a427db30d75bd90d6e7a497",
    "original_commit_id": "cee7b5f68e51cd65e11bd1f0b222db5f419276d9",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "in Python everything but `None`, `{}`, `[]`, `\"\"`, and `0` evals to True, so you can:\n`if conn.port and conn.port:`\n\nOh and what about \n`conn.port = conn.port or 80` (sets a default port of 80)\n",
    "created_at": "2015-07-01T22:00:23Z",
    "updated_at": "2015-07-02T10:52:45Z",
    "html_url": "https://github.com/apache/airflow/pull/99#discussion_r33729529",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/99",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/33729529"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/99#discussion_r33729529"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/99"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/33729529/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 28,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/33729594",
    "pull_request_review_id": null,
    "id": 33729594,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMzNzI5NTk0",
    "diff_hunk": "@@ -0,0 +1,84 @@\n+import logging\n+\n+import requests\n+\n+from airflow import utils\n+from airflow.hooks.base_hook import BaseHook\n+\n+\n+class HttpHook(BaseHook):\n+\n+    \"\"\"\n+    Interact with HTTP servers.\n+    \"\"\"\n+\n+    def __init__(\n+            self, method='POST', http_conn_id='http_default'):\n+        self.http_conn_id = http_conn_id\n+        self.method = method\n+\n+    def get_conn(self, headers):\n+        \"\"\"\n+        Returns http session for use with requests\n+        \"\"\"\n+        conn = self.get_connection(self.http_conn_id)\n+        session = requests.Session()\n+        self.base_url = conn.host\n+\n+        if conn.port != None and conn.port > 0:\n+            self.base_url = self.base_url + \":%d/\"%( conn.port )\n+\n+        if len(conn.login) > 0:\n+            session.auth = (conn.login, conn.password)\n+        if headers != None:\n+            session.headers.update(headers)\n+\n+        return session\n+\n+    def run(self, url, data=None, headers=None, extra_options={}):\n+        \"\"\"\n+        Performs the request\n+        \"\"\"\n+        s = self.get_conn( headers )\n+\n+        url = self.base_url + url\n+        req = None\n+        if self.method == 'GET':\n+            req = requests.Request( self.method, \n+                url,\n+                params=data,\n+                headers=headers\n+            )\n+        else:\n+            req = requests.Request( self.method, \n+                url,\n+                data=data,\n+                headers=headers\n+            )",
    "path": "airflow/hooks/http_hook.py",
    "commit_id": "12ab4a4fe49172982a427db30d75bd90d6e7a497",
    "original_commit_id": "cee7b5f68e51cd65e11bd1f0b222db5f419276d9",
    "user": {
      "login": "artwr",
      "id": 1518713,
      "node_id": "MDQ6VXNlcjE1MTg3MTM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1518713?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/artwr",
      "html_url": "https://github.com/artwr",
      "followers_url": "https://api.github.com/users/artwr/followers",
      "following_url": "https://api.github.com/users/artwr/following{/other_user}",
      "gists_url": "https://api.github.com/users/artwr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/artwr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/artwr/subscriptions",
      "organizations_url": "https://api.github.com/users/artwr/orgs",
      "repos_url": "https://api.github.com/users/artwr/repos",
      "events_url": "https://api.github.com/users/artwr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/artwr/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "I might be missing something, but what is the point of the conditional branching here? It looks like the two branches are the same.\n",
    "created_at": "2015-07-01T22:00:50Z",
    "updated_at": "2015-07-02T10:52:45Z",
    "html_url": "https://github.com/apache/airflow/pull/99#discussion_r33729594",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/99",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/33729594"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/99#discussion_r33729594"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/99"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/33729594/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 57,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/33729807",
    "pull_request_review_id": null,
    "id": 33729807,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMzNzI5ODA3",
    "diff_hunk": "@@ -0,0 +1,84 @@\n+import logging\n+\n+import requests\n+\n+from airflow import utils\n+from airflow.hooks.base_hook import BaseHook\n+\n+\n+class HttpHook(BaseHook):\n+\n+    \"\"\"\n+    Interact with HTTP servers.\n+    \"\"\"\n+\n+    def __init__(\n+            self, method='POST', http_conn_id='http_default'):\n+        self.http_conn_id = http_conn_id\n+        self.method = method\n+\n+    def get_conn(self, headers):\n+        \"\"\"\n+        Returns http session for use with requests\n+        \"\"\"\n+        conn = self.get_connection(self.http_conn_id)\n+        session = requests.Session()\n+        self.base_url = conn.host\n+\n+        if conn.port != None and conn.port > 0:\n+            self.base_url = self.base_url + \":%d/\"%( conn.port )",
    "path": "airflow/hooks/http_hook.py",
    "commit_id": "12ab4a4fe49172982a427db30d75bd90d6e7a497",
    "original_commit_id": "cee7b5f68e51cd65e11bd1f0b222db5f419276d9",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "The Airflow codebase doesn't use the modulo operator for strings anywhere. Most people are moving away from this syntax in favor of the `format` string method, though here you could just \n`self.base_url + str(conn.port)`\n",
    "created_at": "2015-07-01T22:03:39Z",
    "updated_at": "2015-07-02T10:52:45Z",
    "html_url": "https://github.com/apache/airflow/pull/99#discussion_r33729807",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/99",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/33729807"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/99#discussion_r33729807"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/99"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/33729807/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 29,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/33729832",
    "pull_request_review_id": null,
    "id": 33729832,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMzNzI5ODMy",
    "diff_hunk": "@@ -403,6 +403,11 @@ def is_in(obj, l):\n     return False\n \n \n+def get_val_or_default( context, key, default ):\n+    if key in context:\n+        return context[key]\n+    return default\n+",
    "path": "airflow/utils.py",
    "commit_id": "12ab4a4fe49172982a427db30d75bd90d6e7a497",
    "original_commit_id": "cee7b5f68e51cd65e11bd1f0b222db5f419276d9",
    "user": {
      "login": "artwr",
      "id": 1518713,
      "node_id": "MDQ6VXNlcjE1MTg3MTM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1518713?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/artwr",
      "html_url": "https://github.com/artwr",
      "followers_url": "https://api.github.com/users/artwr/followers",
      "following_url": "https://api.github.com/users/artwr/following{/other_user}",
      "gists_url": "https://api.github.com/users/artwr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/artwr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/artwr/subscriptions",
      "organizations_url": "https://api.github.com/users/artwr/orgs",
      "repos_url": "https://api.github.com/users/artwr/repos",
      "events_url": "https://api.github.com/users/artwr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/artwr/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "`return context.get(key) if key in context else default` maybe?\n",
    "created_at": "2015-07-01T22:04:00Z",
    "updated_at": "2015-07-02T10:52:45Z",
    "html_url": "https://github.com/apache/airflow/pull/99#discussion_r33729832",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/99",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/33729832"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/99#discussion_r33729832"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/99"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/33729832/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 8,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/33729842",
    "pull_request_review_id": null,
    "id": 33729842,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMzNzI5ODQy",
    "diff_hunk": "@@ -0,0 +1,84 @@\n+import logging\n+\n+import requests\n+\n+from airflow import utils\n+from airflow.hooks.base_hook import BaseHook\n+\n+\n+class HttpHook(BaseHook):\n+\n+    \"\"\"\n+    Interact with HTTP servers.\n+    \"\"\"\n+\n+    def __init__(\n+            self, method='POST', http_conn_id='http_default'):\n+        self.http_conn_id = http_conn_id\n+        self.method = method\n+\n+    def get_conn(self, headers):\n+        \"\"\"\n+        Returns http session for use with requests\n+        \"\"\"\n+        conn = self.get_connection(self.http_conn_id)\n+        session = requests.Session()\n+        self.base_url = conn.host\n+\n+        if conn.port != None and conn.port > 0:\n+            self.base_url = self.base_url + \":%d/\"%( conn.port )\n+\n+        if len(conn.login) > 0:",
    "path": "airflow/hooks/http_hook.py",
    "commit_id": "12ab4a4fe49172982a427db30d75bd90d6e7a497",
    "original_commit_id": "cee7b5f68e51cd65e11bd1f0b222db5f419276d9",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "`if conn.login:`\n",
    "created_at": "2015-07-01T22:04:09Z",
    "updated_at": "2015-07-02T10:52:45Z",
    "html_url": "https://github.com/apache/airflow/pull/99#discussion_r33729842",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/99",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/33729842"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/99#discussion_r33729842"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/99"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/33729842/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 31,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/33729917",
    "pull_request_review_id": null,
    "id": 33729917,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMzNzI5OTE3",
    "diff_hunk": "@@ -0,0 +1,84 @@\n+import logging\n+\n+import requests\n+\n+from airflow import utils\n+from airflow.hooks.base_hook import BaseHook\n+\n+\n+class HttpHook(BaseHook):\n+\n+    \"\"\"\n+    Interact with HTTP servers.\n+    \"\"\"\n+\n+    def __init__(\n+            self, method='POST', http_conn_id='http_default'):\n+        self.http_conn_id = http_conn_id\n+        self.method = method\n+\n+    def get_conn(self, headers):\n+        \"\"\"\n+        Returns http session for use with requests\n+        \"\"\"\n+        conn = self.get_connection(self.http_conn_id)\n+        session = requests.Session()\n+        self.base_url = conn.host\n+\n+        if conn.port != None and conn.port > 0:\n+            self.base_url = self.base_url + \":%d/\"%( conn.port )\n+\n+        if len(conn.login) > 0:\n+            session.auth = (conn.login, conn.password)\n+        if headers != None:",
    "path": "airflow/hooks/http_hook.py",
    "commit_id": "12ab4a4fe49172982a427db30d75bd90d6e7a497",
    "original_commit_id": "cee7b5f68e51cd65e11bd1f0b222db5f419276d9",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "`if headers:`\n",
    "created_at": "2015-07-01T22:04:57Z",
    "updated_at": "2015-07-02T10:52:45Z",
    "html_url": "https://github.com/apache/airflow/pull/99#discussion_r33729917",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/99",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/33729917"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/99#discussion_r33729917"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/99"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/33729917/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 33,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/33729998",
    "pull_request_review_id": null,
    "id": 33729998,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMzNzI5OTk4",
    "diff_hunk": "@@ -0,0 +1,84 @@\n+import logging\n+\n+import requests\n+\n+from airflow import utils\n+from airflow.hooks.base_hook import BaseHook\n+\n+\n+class HttpHook(BaseHook):\n+\n+    \"\"\"\n+    Interact with HTTP servers.\n+    \"\"\"\n+\n+    def __init__(\n+            self, method='POST', http_conn_id='http_default'):\n+        self.http_conn_id = http_conn_id\n+        self.method = method\n+\n+    def get_conn(self, headers):\n+        \"\"\"\n+        Returns http session for use with requests\n+        \"\"\"\n+        conn = self.get_connection(self.http_conn_id)\n+        session = requests.Session()\n+        self.base_url = conn.host\n+\n+        if conn.port != None and conn.port > 0:\n+            self.base_url = self.base_url + \":%d/\"%( conn.port )\n+\n+        if len(conn.login) > 0:\n+            session.auth = (conn.login, conn.password)\n+        if headers != None:\n+            session.headers.update(headers)\n+\n+        return session\n+\n+    def run(self, url, data=None, headers=None, extra_options={}):\n+        \"\"\"\n+        Performs the request\n+        \"\"\"\n+        s = self.get_conn( headers )",
    "path": "airflow/hooks/http_hook.py",
    "commit_id": "12ab4a4fe49172982a427db30d75bd90d6e7a497",
    "original_commit_id": "cee7b5f68e51cd65e11bd1f0b222db5f419276d9",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "PEP8 says not spaces around function calls. Please PEP8 your code. You can:\n\n```\npip install flake8\nflake8 foo.py\n```\n",
    "created_at": "2015-07-01T22:05:59Z",
    "updated_at": "2015-07-02T10:52:45Z",
    "html_url": "https://github.com/apache/airflow/pull/99#discussion_r33729998",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/99",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/33729998"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/99#discussion_r33729998"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/99"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/33729998/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 42,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/33730175",
    "pull_request_review_id": null,
    "id": 33730175,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMzNzMwMTc1",
    "diff_hunk": "@@ -0,0 +1,84 @@\n+import logging\n+\n+import requests\n+\n+from airflow import utils\n+from airflow.hooks.base_hook import BaseHook\n+\n+\n+class HttpHook(BaseHook):\n+\n+    \"\"\"\n+    Interact with HTTP servers.\n+    \"\"\"\n+\n+    def __init__(\n+            self, method='POST', http_conn_id='http_default'):\n+        self.http_conn_id = http_conn_id\n+        self.method = method\n+\n+    def get_conn(self, headers):\n+        \"\"\"\n+        Returns http session for use with requests\n+        \"\"\"\n+        conn = self.get_connection(self.http_conn_id)\n+        session = requests.Session()\n+        self.base_url = conn.host\n+\n+        if conn.port != None and conn.port > 0:\n+            self.base_url = self.base_url + \":%d/\"%( conn.port )\n+\n+        if len(conn.login) > 0:\n+            session.auth = (conn.login, conn.password)\n+        if headers != None:\n+            session.headers.update(headers)\n+\n+        return session\n+\n+    def run(self, url, data=None, headers=None, extra_options={}):\n+        \"\"\"\n+        Performs the request\n+        \"\"\"\n+        s = self.get_conn( headers )\n+\n+        url = self.base_url + url\n+        req = None\n+        if self.method == 'GET':\n+            req = requests.Request( self.method, \n+                url,\n+                params=data,\n+                headers=headers\n+            )\n+        else:\n+            req = requests.Request( self.method, \n+                url,\n+                data=data,\n+                headers=headers\n+            )\n+        prepped = s.prepare_request( req )\n+        logging.info(\"Posting to url: \" + url)\n+        return self.run_and_check( s, prepped, extra_options )    \n+\n+    def run_and_check( self, s, prepped, extra_options ):\n+        stream = utils.get_val_or_default( extra_options, \"stream\", False )",
    "path": "airflow/hooks/http_hook.py",
    "commit_id": "12ab4a4fe49172982a427db30d75bd90d6e7a497",
    "original_commit_id": "cee7b5f68e51cd65e11bd1f0b222db5f419276d9",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "oh I think you just re-implement `dict().get`. You can just `dict(foo='bar').get('foo', 'default_if_key_not_found')`\n",
    "created_at": "2015-07-01T22:08:52Z",
    "updated_at": "2015-07-02T10:52:45Z",
    "html_url": "https://github.com/apache/airflow/pull/99#discussion_r33730175",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/99",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/33730175"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/99#discussion_r33730175"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/99"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/33730175/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 63,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/33730264",
    "pull_request_review_id": null,
    "id": 33730264,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMzNzMwMjY0",
    "diff_hunk": "@@ -0,0 +1,84 @@\n+import logging\n+\n+import requests\n+\n+from airflow import utils\n+from airflow.hooks.base_hook import BaseHook\n+\n+\n+class HttpHook(BaseHook):\n+\n+    \"\"\"\n+    Interact with HTTP servers.\n+    \"\"\"\n+\n+    def __init__(\n+            self, method='POST', http_conn_id='http_default'):\n+        self.http_conn_id = http_conn_id\n+        self.method = method\n+\n+    def get_conn(self, headers):\n+        \"\"\"\n+        Returns http session for use with requests\n+        \"\"\"\n+        conn = self.get_connection(self.http_conn_id)\n+        session = requests.Session()\n+        self.base_url = conn.host\n+\n+        if conn.port != None and conn.port > 0:\n+            self.base_url = self.base_url + \":%d/\"%( conn.port )\n+\n+        if len(conn.login) > 0:\n+            session.auth = (conn.login, conn.password)\n+        if headers != None:\n+            session.headers.update(headers)\n+\n+        return session\n+\n+    def run(self, url, data=None, headers=None, extra_options={}):\n+        \"\"\"\n+        Performs the request\n+        \"\"\"\n+        s = self.get_conn( headers )\n+\n+        url = self.base_url + url\n+        req = None\n+        if self.method == 'GET':\n+            req = requests.Request( self.method, \n+                url,\n+                params=data,\n+                headers=headers\n+            )\n+        else:\n+            req = requests.Request( self.method, \n+                url,\n+                data=data,\n+                headers=headers\n+            )\n+        prepped = s.prepare_request( req )\n+        logging.info(\"Posting to url: \" + url)\n+        return self.run_and_check( s, prepped, extra_options )    \n+\n+    def run_and_check( self, s, prepped, extra_options ):",
    "path": "airflow/hooks/http_hook.py",
    "commit_id": "12ab4a4fe49172982a427db30d75bd90d6e7a497",
    "original_commit_id": "cee7b5f68e51cd65e11bd1f0b222db5f419276d9",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "A docstring would help here, I'm not sure what these 3 params are, `s` in a function header is bad\n",
    "created_at": "2015-07-01T22:10:20Z",
    "updated_at": "2015-07-02T10:52:45Z",
    "html_url": "https://github.com/apache/airflow/pull/99#discussion_r33730264",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/99",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/33730264"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/99#discussion_r33730264"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/99"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/33730264/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 62,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/33730286",
    "pull_request_review_id": null,
    "id": 33730286,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMzNzMwMjg2",
    "diff_hunk": "@@ -0,0 +1,84 @@\n+import logging\n+\n+import requests\n+\n+from airflow import utils\n+from airflow.hooks.base_hook import BaseHook\n+\n+\n+class HttpHook(BaseHook):\n+\n+    \"\"\"\n+    Interact with HTTP servers.\n+    \"\"\"\n+\n+    def __init__(\n+            self, method='POST', http_conn_id='http_default'):\n+        self.http_conn_id = http_conn_id\n+        self.method = method\n+\n+    def get_conn(self, headers):\n+        \"\"\"\n+        Returns http session for use with requests\n+        \"\"\"\n+        conn = self.get_connection(self.http_conn_id)\n+        session = requests.Session()\n+        self.base_url = conn.host\n+\n+        if conn.port != None and conn.port > 0:\n+            self.base_url = self.base_url + \":%d/\"%( conn.port )\n+\n+        if len(conn.login) > 0:\n+            session.auth = (conn.login, conn.password)\n+        if headers != None:\n+            session.headers.update(headers)\n+\n+        return session\n+\n+    def run(self, url, data=None, headers=None, extra_options={}):\n+        \"\"\"\n+        Performs the request\n+        \"\"\"\n+        s = self.get_conn( headers )\n+\n+        url = self.base_url + url\n+        req = None\n+        if self.method == 'GET':\n+            req = requests.Request( self.method, \n+                url,\n+                params=data,\n+                headers=headers\n+            )\n+        else:\n+            req = requests.Request( self.method, \n+                url,\n+                data=data,\n+                headers=headers\n+            )\n+        prepped = s.prepare_request( req )\n+        logging.info(\"Posting to url: \" + url)\n+        return self.run_and_check( s, prepped, extra_options )    \n+\n+    def run_and_check( self, s, prepped, extra_options ):\n+        stream = utils.get_val_or_default( extra_options, \"stream\", False )\n+        verify = utils.get_val_or_default( extra_options, \"verify\", False )\n+        proxies= utils.get_val_or_default( extra_options, \"proxies\", {} )\n+        cert = utils.get_val_or_default( extra_options, \"cert\", None )\n+        timeout = utils.get_val_or_default( extra_options, \"timeout\", None )\n+        allow_redirects = utils.get_val_or_default( extra_options, \"allow_redirects\", True )\n+\n+        response = s.send(prepped,\n+            stream=stream,\n+            verify=verify,\n+            proxies=proxies,\n+            cert=cert,\n+            timeout=timeout,\n+            allow_redirects=allow_redirects\n+        )\n+        if response.status_code != requests.codes.ok:\n+            logging.error(\"HTTP call failed: %d[%s]\"%( response.status_code, response.reason ))",
    "path": "airflow/hooks/http_hook.py",
    "commit_id": "12ab4a4fe49172982a427db30d75bd90d6e7a497",
    "original_commit_id": "cee7b5f68e51cd65e11bd1f0b222db5f419276d9",
    "user": {
      "login": "artwr",
      "id": 1518713,
      "node_id": "MDQ6VXNlcjE1MTg3MTM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1518713?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/artwr",
      "html_url": "https://github.com/artwr",
      "followers_url": "https://api.github.com/users/artwr/followers",
      "following_url": "https://api.github.com/users/artwr/following{/other_user}",
      "gists_url": "https://api.github.com/users/artwr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/artwr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/artwr/subscriptions",
      "organizations_url": "https://api.github.com/users/artwr/orgs",
      "repos_url": "https://api.github.com/users/artwr/repos",
      "events_url": "https://api.github.com/users/artwr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/artwr/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "using `format()` instead of `%` is now recommended.\n",
    "created_at": "2015-07-01T22:10:41Z",
    "updated_at": "2015-07-02T10:52:45Z",
    "html_url": "https://github.com/apache/airflow/pull/99#discussion_r33730286",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/99",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/33730286"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/99#discussion_r33730286"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/99"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/33730286/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 79,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/33730515",
    "pull_request_review_id": null,
    "id": 33730515,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMzNzMwNTE1",
    "diff_hunk": "@@ -331,3 +331,44 @@ def poke(self, context):\n         logging.info(\n             'Checking if the time ({0}) has come'.format(self.target_time))\n         return datetime.now().time() > self.target_time\n+\n+class HttpSensor(BaseSensorOperator):\n+    \"\"\"\n+    Executes an HTTP get statement until the specified criteria is met.\n+\n+    :param conn_id: The connection to run the sensor against\n+    :type conn_id: string\n+    :param url: To pass, the url must respond with \n+    \"\"\"\n+\n+    @apply_defaults\n+    def __init__(self, conn_id, url, params={}, headers=None, extra_options={}, *args, **kwargs):\n+        super(HttpSensor, self).__init__(*args, **kwargs)\n+\n+        self.url = url\n+        self.conn_id = conn_id\n+        self.params = params\n+        self.headers = headers\n+        self.extra_options = extra_options\n+\n+        session = settings.Session()\n+        site = session.query(DB).filter(DB.conn_id == conn_id).first()\n+        if not site:\n+            raise AirflowException(\"conn_id doesn't exist in the repository\")\n+        self.conn_id = conn_id\n+        self.hook = hooks.HttpHook( method='GET', http_conn_id=self.conn_id )\n+        session.commit()\n+        session.close()\n+\n+    def poke(self, regex=None):\n+        logging.info('Poking: ' + self.url)\n+        result, content = self.hook.run( self.url, data=self.params, headers=self.headers, extra_options=self.extra_options )\n+        if not result:\n+            return False",
    "path": "airflow/operators/sensors.py",
    "commit_id": "12ab4a4fe49172982a427db30d75bd90d6e7a497",
    "original_commit_id": "cee7b5f68e51cd65e11bd1f0b222db5f419276d9",
    "user": {
      "login": "artwr",
      "id": 1518713,
      "node_id": "MDQ6VXNlcjE1MTg3MTM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1518713?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/artwr",
      "html_url": "https://github.com/artwr",
      "followers_url": "https://api.github.com/users/artwr/followers",
      "following_url": "https://api.github.com/users/artwr/following{/other_user}",
      "gists_url": "https://api.github.com/users/artwr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/artwr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/artwr/subscriptions",
      "organizations_url": "https://api.github.com/users/artwr/orgs",
      "repos_url": "https://api.github.com/users/artwr/repos",
      "events_url": "https://api.github.com/users/artwr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/artwr/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "`return not result`\n",
    "created_at": "2015-07-01T22:14:07Z",
    "updated_at": "2015-07-02T10:52:45Z",
    "html_url": "https://github.com/apache/airflow/pull/99#discussion_r33730515",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/99",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/33730515"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/99#discussion_r33730515"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/99"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/33730515/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 37,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/33730542",
    "pull_request_review_id": null,
    "id": 33730542,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMzNzMwNTQy",
    "diff_hunk": "@@ -0,0 +1,84 @@\n+import logging\n+\n+import requests\n+\n+from airflow import utils\n+from airflow.hooks.base_hook import BaseHook\n+\n+\n+class HttpHook(BaseHook):\n+\n+    \"\"\"\n+    Interact with HTTP servers.\n+    \"\"\"\n+\n+    def __init__(\n+            self, method='POST', http_conn_id='http_default'):\n+        self.http_conn_id = http_conn_id\n+        self.method = method\n+\n+    def get_conn(self, headers):\n+        \"\"\"\n+        Returns http session for use with requests\n+        \"\"\"\n+        conn = self.get_connection(self.http_conn_id)\n+        session = requests.Session()\n+        self.base_url = conn.host\n+\n+        if conn.port != None and conn.port > 0:\n+            self.base_url = self.base_url + \":%d/\"%( conn.port )\n+\n+        if len(conn.login) > 0:\n+            session.auth = (conn.login, conn.password)\n+        if headers != None:\n+            session.headers.update(headers)\n+\n+        return session\n+\n+    def run(self, url, data=None, headers=None, extra_options={}):\n+        \"\"\"\n+        Performs the request",
    "path": "airflow/hooks/http_hook.py",
    "commit_id": "12ab4a4fe49172982a427db30d75bd90d6e7a497",
    "original_commit_id": "cee7b5f68e51cd65e11bd1f0b222db5f419276d9",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "`endpoint` may be more clear than `url` as you're expecting only that part of the url here\n",
    "created_at": "2015-07-01T22:14:32Z",
    "updated_at": "2015-07-02T10:52:45Z",
    "html_url": "https://github.com/apache/airflow/pull/99#discussion_r33730542",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/99",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/33730542"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/99#discussion_r33730542"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/99"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/33730542/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 38,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 40,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/33730573",
    "pull_request_review_id": null,
    "id": 33730573,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMzNzMwNTcz",
    "diff_hunk": "@@ -331,3 +331,44 @@ def poke(self, context):\n         logging.info(\n             'Checking if the time ({0}) has come'.format(self.target_time))\n         return datetime.now().time() > self.target_time\n+\n+class HttpSensor(BaseSensorOperator):\n+    \"\"\"\n+    Executes an HTTP get statement until the specified criteria is met.\n+\n+    :param conn_id: The connection to run the sensor against\n+    :type conn_id: string\n+    :param url: To pass, the url must respond with \n+    \"\"\"\n+\n+    @apply_defaults\n+    def __init__(self, conn_id, url, params={}, headers=None, extra_options={}, *args, **kwargs):\n+        super(HttpSensor, self).__init__(*args, **kwargs)\n+\n+        self.url = url\n+        self.conn_id = conn_id\n+        self.params = params\n+        self.headers = headers\n+        self.extra_options = extra_options\n+\n+        session = settings.Session()\n+        site = session.query(DB).filter(DB.conn_id == conn_id).first()\n+        if not site:\n+            raise AirflowException(\"conn_id doesn't exist in the repository\")\n+        self.conn_id = conn_id\n+        self.hook = hooks.HttpHook( method='GET', http_conn_id=self.conn_id )\n+        session.commit()\n+        session.close()\n+\n+    def poke(self, regex=None):\n+        logging.info('Poking: ' + self.url)\n+        result, content = self.hook.run( self.url, data=self.params, headers=self.headers, extra_options=self.extra_options )\n+        if not result:\n+            return False\n+\n+        if regex != None:\n+            # run regex for fail condition\n+            pass",
    "path": "airflow/operators/sensors.py",
    "commit_id": "12ab4a4fe49172982a427db30d75bd90d6e7a497",
    "original_commit_id": "cee7b5f68e51cd65e11bd1f0b222db5f419276d9",
    "user": {
      "login": "artwr",
      "id": 1518713,
      "node_id": "MDQ6VXNlcjE1MTg3MTM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1518713?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/artwr",
      "html_url": "https://github.com/artwr",
      "followers_url": "https://api.github.com/users/artwr/followers",
      "following_url": "https://api.github.com/users/artwr/following{/other_user}",
      "gists_url": "https://api.github.com/users/artwr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/artwr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/artwr/subscriptions",
      "organizations_url": "https://api.github.com/users/artwr/orgs",
      "repos_url": "https://api.github.com/users/artwr/repos",
      "events_url": "https://api.github.com/users/artwr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/artwr/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "This seems to be still a draft of the regex test implementation.\n",
    "created_at": "2015-07-01T22:14:50Z",
    "updated_at": "2015-07-02T10:52:45Z",
    "html_url": "https://github.com/apache/airflow/pull/99#discussion_r33730573",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/99",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/33730573"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/99#discussion_r33730573"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/99"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/33730573/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 41,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/33731643",
    "pull_request_review_id": null,
    "id": 33731643,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMzNzMxNjQz",
    "diff_hunk": "@@ -0,0 +1,84 @@\n+import logging\n+\n+import requests\n+\n+from airflow import utils\n+from airflow.hooks.base_hook import BaseHook\n+\n+\n+class HttpHook(BaseHook):\n+\n+    \"\"\"\n+    Interact with HTTP servers.\n+    \"\"\"\n+\n+    def __init__(\n+            self, method='POST', http_conn_id='http_default'):\n+        self.http_conn_id = http_conn_id\n+        self.method = method\n+\n+    def get_conn(self, headers):\n+        \"\"\"\n+        Returns http session for use with requests\n+        \"\"\"\n+        conn = self.get_connection(self.http_conn_id)\n+        session = requests.Session()\n+        self.base_url = conn.host\n+\n+        if conn.port != None and conn.port > 0:\n+            self.base_url = self.base_url + \":%d/\"%( conn.port )\n+\n+        if len(conn.login) > 0:\n+            session.auth = (conn.login, conn.password)\n+        if headers != None:\n+            session.headers.update(headers)\n+\n+        return session\n+\n+    def run(self, url, data=None, headers=None, extra_options={}):\n+        \"\"\"\n+        Performs the request\n+        \"\"\"\n+        s = self.get_conn( headers )\n+\n+        url = self.base_url + url\n+        req = None\n+        if self.method == 'GET':\n+            req = requests.Request( self.method, \n+                url,\n+                params=data,\n+                headers=headers\n+            )\n+        else:\n+            req = requests.Request( self.method, \n+                url,\n+                data=data,\n+                headers=headers\n+            )\n+        prepped = s.prepare_request( req )\n+        logging.info(\"Posting to url: \" + url)\n+        return self.run_and_check( s, prepped, extra_options )    \n+\n+    def run_and_check( self, s, prepped, extra_options ):\n+        stream = utils.get_val_or_default( extra_options, \"stream\", False )\n+        verify = utils.get_val_or_default( extra_options, \"verify\", False )\n+        proxies= utils.get_val_or_default( extra_options, \"proxies\", {} )\n+        cert = utils.get_val_or_default( extra_options, \"cert\", None )\n+        timeout = utils.get_val_or_default( extra_options, \"timeout\", None )\n+        allow_redirects = utils.get_val_or_default( extra_options, \"allow_redirects\", True )\n+\n+        response = s.send(prepped,\n+            stream=stream,\n+            verify=verify,\n+            proxies=proxies,\n+            cert=cert,\n+            timeout=timeout,\n+            allow_redirects=allow_redirects\n+        )\n+        if response.status_code != requests.codes.ok:\n+            logging.error(\"HTTP call failed: %d[%s]\"%( response.status_code, response.reason ))\n+            if self.method != 'GET':\n+                logging.error( response.text )\n+            return False, response.reason\n+        return True, response.content",
    "path": "airflow/hooks/http_hook.py",
    "commit_id": "12ab4a4fe49172982a427db30d75bd90d6e7a497",
    "original_commit_id": "cee7b5f68e51cd65e11bd1f0b222db5f419276d9",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "I'm not big on returning tuples... would it make sense to raise an exception here? If so you could just return the response object or response.content on success\n\nOh and always NamedTuple over tuples whenever the tuple makes it beyond a paragraph of code\n",
    "created_at": "2015-07-01T22:29:24Z",
    "updated_at": "2015-07-02T10:52:45Z",
    "html_url": "https://github.com/apache/airflow/pull/99#discussion_r33731643",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/99",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/33731643"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/99#discussion_r33731643"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/99"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/33731643/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 83,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/33731958",
    "pull_request_review_id": null,
    "id": 33731958,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMzNzMxOTU4",
    "diff_hunk": "@@ -0,0 +1,33 @@\n+import logging\n+\n+from airflow.hooks import HttpHook\n+from airflow.models import BaseOperator\n+from airflow.utils import apply_defaults\n+from airflow.utils import AirflowException\n+\n+class SimpleHttpOperator(BaseOperator):\n+    \"\"\"\n+    Calls a url \n+    \"\"\"\n+\n+    template_fields = ('url',)\n+    template_ext = ()\n+    ui_color = '#f4a460'\n+\n+    @apply_defaults\n+    def __init__(self, url, method='POST', data=None, headers={}, http_conn_id='http_default', *args, **kwargs):\n+        super(SimpleHttpOperator, self).__init__(*args, **kwargs)\n+        self.http_conn_id = http_conn_id\n+        self.method = method\n+        self.url = url\n+        self.data = data\n+        self.headers = headers\n+\n+    def execute(self, context):",
    "path": "airflow/operators/http_operator.py",
    "commit_id": "12ab4a4fe49172982a427db30d75bd90d6e7a497",
    "original_commit_id": "cee7b5f68e51cd65e11bd1f0b222db5f419276d9",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "As you mentioned it could be nice to accept an optional regex to try to match against the response, or even better: a function (or lambda) that expects to receive a response object and returns a bool. Then you `raise` if the calls evals to False.\n",
    "created_at": "2015-07-01T22:34:14Z",
    "updated_at": "2015-07-02T10:52:45Z",
    "html_url": "https://github.com/apache/airflow/pull/99#discussion_r33731958",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/99",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/33731958"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/99#discussion_r33731958"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/99"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/33731958/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 33,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 26,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/33732088",
    "pull_request_review_id": null,
    "id": 33732088,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMzNzMyMDg4",
    "diff_hunk": "@@ -331,3 +331,44 @@ def poke(self, context):\n         logging.info(\n             'Checking if the time ({0}) has come'.format(self.target_time))\n         return datetime.now().time() > self.target_time\n+\n+class HttpSensor(BaseSensorOperator):\n+    \"\"\"\n+    Executes an HTTP get statement until the specified criteria is met.\n+\n+    :param conn_id: The connection to run the sensor against\n+    :type conn_id: string\n+    :param url: To pass, the url must respond with \n+    \"\"\"\n+\n+    @apply_defaults\n+    def __init__(self, conn_id, url, params={}, headers=None, extra_options={}, *args, **kwargs):\n+        super(HttpSensor, self).__init__(*args, **kwargs)\n+\n+        self.url = url\n+        self.conn_id = conn_id\n+        self.params = params\n+        self.headers = headers\n+        self.extra_options = extra_options\n+\n+        session = settings.Session()\n+        site = session.query(DB).filter(DB.conn_id == conn_id).first()\n+        if not site:\n+            raise AirflowException(\"conn_id doesn't exist in the repository\")\n+        self.conn_id = conn_id\n+        self.hook = hooks.HttpHook( method='GET', http_conn_id=self.conn_id )\n+        session.commit()\n+        session.close()\n+\n+    def poke(self, regex=None):\n+        logging.info('Poking: ' + self.url)\n+        result, content = self.hook.run( self.url, data=self.params, headers=self.headers, extra_options=self.extra_options )\n+        if not result:\n+            return False\n+\n+        if regex != None:\n+            # run regex for fail condition\n+            pass\n+\n+        return result",
    "path": "airflow/operators/sensors.py",
    "commit_id": "12ab4a4fe49172982a427db30d75bd90d6e7a497",
    "original_commit_id": "cee7b5f68e51cd65e11bd1f0b222db5f419276d9",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "BaseSensorOperator expects poke to return `True` or `False`. Though result here would eval to `True`\n",
    "created_at": "2015-07-01T22:35:56Z",
    "updated_at": "2015-07-02T10:52:45Z",
    "html_url": "https://github.com/apache/airflow/pull/99#discussion_r33732088",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/99",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/33732088"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/99#discussion_r33732088"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/99"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/33732088/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 43,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/33732126",
    "pull_request_review_id": null,
    "id": 33732126,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMzNzMyMTI2",
    "diff_hunk": "@@ -333,7 +333,9 @@ Let's run a few commands to validate this script further.\n \n Testing\n '''''''\n-Let's test by running the actual task instances on a specific date.\n+Let's test by running the actual task instances on a specific date. The ",
    "path": "docs/tutorial.rst",
    "commit_id": "12ab4a4fe49172982a427db30d75bd90d6e7a497",
    "original_commit_id": "cee7b5f68e51cd65e11bd1f0b222db5f419276d9",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "I think you need to rebase\n",
    "created_at": "2015-07-01T22:36:28Z",
    "updated_at": "2015-07-02T10:52:45Z",
    "html_url": "https://github.com/apache/airflow/pull/99#discussion_r33732126",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/99",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/33732126"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/99#discussion_r33732126"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/99"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/33732126/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 336,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 5,
    "position": 5,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/33734393",
    "pull_request_review_id": null,
    "id": 33734393,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMzNzM0Mzkz",
    "diff_hunk": "@@ -331,3 +331,44 @@ def poke(self, context):\n         logging.info(\n             'Checking if the time ({0}) has come'.format(self.target_time))\n         return datetime.now().time() > self.target_time\n+",
    "path": "airflow/operators/sensors.py",
    "commit_id": "12ab4a4fe49172982a427db30d75bd90d6e7a497",
    "original_commit_id": "cee7b5f68e51cd65e11bd1f0b222db5f419276d9",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "+1 blank line\n",
    "created_at": "2015-07-01T23:06:04Z",
    "updated_at": "2015-07-02T10:52:45Z",
    "html_url": "https://github.com/apache/airflow/pull/99#discussion_r33734393",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/99",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/33734393"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/99#discussion_r33734393"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/99"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/33734393/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 334,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 4,
    "position": 4,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/33734408",
    "pull_request_review_id": null,
    "id": 33734408,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMzNzM0NDA4",
    "diff_hunk": "@@ -0,0 +1,33 @@\n+import logging\n+\n+from airflow.hooks import HttpHook\n+from airflow.models import BaseOperator\n+from airflow.utils import apply_defaults\n+from airflow.utils import AirflowException\n+\n+class SimpleHttpOperator(BaseOperator):\n+    \"\"\"\n+    Calls a url \n+    \"\"\"\n+\n+    template_fields = ('url',)\n+    template_ext = ()\n+    ui_color = '#f4a460'\n+\n+    @apply_defaults\n+    def __init__(self, url, method='POST', data=None, headers={}, http_conn_id='http_default', *args, **kwargs):\n+        super(SimpleHttpOperator, self).__init__(*args, **kwargs)\n+        self.http_conn_id = http_conn_id\n+        self.method = method\n+        self.url = url\n+        self.data = data\n+        self.headers = headers\n+\n+    def execute(self, context):\n+        http = HttpHook(self.method, http_conn_id=self.http_conn_id)\n+        logging.info(\"Calling HTTP method\")\n+        result, content = http.run( self.url, self.data, self.headers )\n+        if not result:\n+            raise AirflowException( \"HTTP call failed\" )\n+",
    "path": "airflow/operators/http_operator.py",
    "commit_id": "12ab4a4fe49172982a427db30d75bd90d6e7a497",
    "original_commit_id": "cee7b5f68e51cd65e11bd1f0b222db5f419276d9",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "dd 2 blank lines\n",
    "created_at": "2015-07-01T23:06:20Z",
    "updated_at": "2015-07-02T10:52:45Z",
    "html_url": "https://github.com/apache/airflow/pull/99#discussion_r33734408",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/99",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/33734408"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/99#discussion_r33734408"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/99"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/33734408/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 32,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/33737332",
    "pull_request_review_id": null,
    "id": 33737332,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMzNzM3MzMy",
    "diff_hunk": "@@ -0,0 +1,84 @@\n+import logging\n+\n+import requests\n+\n+from airflow import utils\n+from airflow.hooks.base_hook import BaseHook\n+\n+\n+class HttpHook(BaseHook):\n+\n+    \"\"\"\n+    Interact with HTTP servers.\n+    \"\"\"\n+\n+    def __init__(\n+            self, method='POST', http_conn_id='http_default'):\n+        self.http_conn_id = http_conn_id\n+        self.method = method\n+\n+    def get_conn(self, headers):",
    "path": "airflow/hooks/http_hook.py",
    "commit_id": "12ab4a4fe49172982a427db30d75bd90d6e7a497",
    "original_commit_id": "cee7b5f68e51cd65e11bd1f0b222db5f419276d9",
    "user": {
      "login": "gtoonstra",
      "id": 441978,
      "node_id": "MDQ6VXNlcjQ0MTk3OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/441978?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gtoonstra",
      "html_url": "https://github.com/gtoonstra",
      "followers_url": "https://api.github.com/users/gtoonstra/followers",
      "following_url": "https://api.github.com/users/gtoonstra/following{/other_user}",
      "gists_url": "https://api.github.com/users/gtoonstra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gtoonstra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gtoonstra/subscriptions",
      "organizations_url": "https://api.github.com/users/gtoonstra/orgs",
      "repos_url": "https://api.github.com/users/gtoonstra/repos",
      "events_url": "https://api.github.com/users/gtoonstra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gtoonstra/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "headers appears required here, because I think specifying the content-type is essential for correct HTTP communication. Browsers probably use a very common default that's only valid for how the internet was ages ago. And I have no idea whether someone wants to upload some image to a binary HTTP interface or whatever. The function doesn't specifically check for the presence of Content-Type though. Do you agree it's a good idea to require the specification of Content-Type?\n",
    "created_at": "2015-07-02T00:03:33Z",
    "updated_at": "2015-07-02T10:52:45Z",
    "html_url": "https://github.com/apache/airflow/pull/99#discussion_r33737332",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/99",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/33737332"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/99#discussion_r33737332"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/99"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/33737332/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 19,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 20,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/33737476",
    "pull_request_review_id": null,
    "id": 33737476,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMzNzM3NDc2",
    "diff_hunk": "@@ -0,0 +1,84 @@\n+import logging\n+\n+import requests\n+\n+from airflow import utils\n+from airflow.hooks.base_hook import BaseHook\n+\n+\n+class HttpHook(BaseHook):\n+\n+    \"\"\"\n+    Interact with HTTP servers.\n+    \"\"\"\n+\n+    def __init__(\n+            self, method='POST', http_conn_id='http_default'):\n+        self.http_conn_id = http_conn_id\n+        self.method = method\n+\n+    def get_conn(self, headers):\n+        \"\"\"\n+        Returns http session for use with requests\n+        \"\"\"\n+        conn = self.get_connection(self.http_conn_id)\n+        session = requests.Session()\n+        self.base_url = conn.host\n+\n+        if conn.port != None and conn.port > 0:",
    "path": "airflow/hooks/http_hook.py",
    "commit_id": "12ab4a4fe49172982a427db30d75bd90d6e7a497",
    "original_commit_id": "cee7b5f68e51cd65e11bd1f0b222db5f419276d9",
    "user": {
      "login": "gtoonstra",
      "id": 441978,
      "node_id": "MDQ6VXNlcjQ0MTk3OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/441978?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gtoonstra",
      "html_url": "https://github.com/gtoonstra",
      "followers_url": "https://api.github.com/users/gtoonstra/followers",
      "following_url": "https://api.github.com/users/gtoonstra/following{/other_user}",
      "gists_url": "https://api.github.com/users/gtoonstra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gtoonstra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gtoonstra/subscriptions",
      "organizations_url": "https://api.github.com/users/gtoonstra/orgs",
      "repos_url": "https://api.github.com/users/gtoonstra/repos",
      "events_url": "https://api.github.com/users/gtoonstra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gtoonstra/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "80 is default if not specified already, so reduced to `if conn.port` only.\n",
    "created_at": "2015-07-02T00:06:22Z",
    "updated_at": "2015-07-02T10:52:45Z",
    "html_url": "https://github.com/apache/airflow/pull/99#discussion_r33737476",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/99",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/33737476"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/99#discussion_r33737476"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/99"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/33737476/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 28,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/33737509",
    "pull_request_review_id": null,
    "id": 33737509,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMzNzM3NTA5",
    "diff_hunk": "@@ -0,0 +1,84 @@\n+import logging\n+\n+import requests\n+\n+from airflow import utils\n+from airflow.hooks.base_hook import BaseHook\n+\n+\n+class HttpHook(BaseHook):\n+\n+    \"\"\"\n+    Interact with HTTP servers.\n+    \"\"\"\n+\n+    def __init__(\n+            self, method='POST', http_conn_id='http_default'):\n+        self.http_conn_id = http_conn_id\n+        self.method = method\n+\n+    def get_conn(self, headers):\n+        \"\"\"\n+        Returns http session for use with requests\n+        \"\"\"\n+        conn = self.get_connection(self.http_conn_id)\n+        session = requests.Session()\n+        self.base_url = conn.host\n+\n+        if conn.port != None and conn.port > 0:\n+            self.base_url = self.base_url + \":%d/\"%( conn.port )\n+\n+        if len(conn.login) > 0:\n+            session.auth = (conn.login, conn.password)\n+        if headers != None:\n+            session.headers.update(headers)\n+\n+        return session\n+\n+    def run(self, url, data=None, headers=None, extra_options={}):\n+        \"\"\"\n+        Performs the request\n+        \"\"\"\n+        s = self.get_conn( headers )\n+\n+        url = self.base_url + url\n+        req = None\n+        if self.method == 'GET':\n+            req = requests.Request( self.method, \n+                url,\n+                params=data,\n+                headers=headers\n+            )\n+        else:\n+            req = requests.Request( self.method, \n+                url,\n+                data=data,\n+                headers=headers\n+            )",
    "path": "airflow/hooks/http_hook.py",
    "commit_id": "12ab4a4fe49172982a427db30d75bd90d6e7a497",
    "original_commit_id": "cee7b5f68e51cd65e11bd1f0b222db5f419276d9",
    "user": {
      "login": "gtoonstra",
      "id": 441978,
      "node_id": "MDQ6VXNlcjQ0MTk3OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/441978?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gtoonstra",
      "html_url": "https://github.com/gtoonstra",
      "followers_url": "https://api.github.com/users/gtoonstra/followers",
      "following_url": "https://api.github.com/users/gtoonstra/following{/other_user}",
      "gists_url": "https://api.github.com/users/gtoonstra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gtoonstra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gtoonstra/subscriptions",
      "organizations_url": "https://api.github.com/users/gtoonstra/orgs",
      "repos_url": "https://api.github.com/users/gtoonstra/repos",
      "events_url": "https://api.github.com/users/gtoonstra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gtoonstra/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "minute detail. GET uses params, POST uses data. It's a constructor, so couldn't see a nicer way to override for example. Comments added in the code to point out this detail.\n",
    "created_at": "2015-07-02T00:07:05Z",
    "updated_at": "2015-07-02T10:52:45Z",
    "html_url": "https://github.com/apache/airflow/pull/99#discussion_r33737509",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/99",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/33737509"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/99#discussion_r33737509"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/99"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/33737509/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 57,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/33738005",
    "pull_request_review_id": null,
    "id": 33738005,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMzNzM4MDA1",
    "diff_hunk": "@@ -0,0 +1,84 @@\n+import logging\n+\n+import requests\n+\n+from airflow import utils\n+from airflow.hooks.base_hook import BaseHook\n+\n+\n+class HttpHook(BaseHook):\n+\n+    \"\"\"\n+    Interact with HTTP servers.\n+    \"\"\"\n+\n+    def __init__(\n+            self, method='POST', http_conn_id='http_default'):\n+        self.http_conn_id = http_conn_id\n+        self.method = method\n+\n+    def get_conn(self, headers):\n+        \"\"\"\n+        Returns http session for use with requests\n+        \"\"\"\n+        conn = self.get_connection(self.http_conn_id)\n+        session = requests.Session()\n+        self.base_url = conn.host\n+\n+        if conn.port != None and conn.port > 0:\n+            self.base_url = self.base_url + \":%d/\"%( conn.port )\n+\n+        if len(conn.login) > 0:\n+            session.auth = (conn.login, conn.password)\n+        if headers != None:\n+            session.headers.update(headers)\n+\n+        return session\n+\n+    def run(self, url, data=None, headers=None, extra_options={}):\n+        \"\"\"\n+        Performs the request\n+        \"\"\"\n+        s = self.get_conn( headers )\n+\n+        url = self.base_url + url\n+        req = None\n+        if self.method == 'GET':\n+            req = requests.Request( self.method, \n+                url,\n+                params=data,\n+                headers=headers\n+            )\n+        else:\n+            req = requests.Request( self.method, \n+                url,\n+                data=data,\n+                headers=headers\n+            )",
    "path": "airflow/hooks/http_hook.py",
    "commit_id": "12ab4a4fe49172982a427db30d75bd90d6e7a497",
    "original_commit_id": "cee7b5f68e51cd65e11bd1f0b222db5f419276d9",
    "user": {
      "login": "artwr",
      "id": 1518713,
      "node_id": "MDQ6VXNlcjE1MTg3MTM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1518713?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/artwr",
      "html_url": "https://github.com/artwr",
      "followers_url": "https://api.github.com/users/artwr/followers",
      "following_url": "https://api.github.com/users/artwr/following{/other_user}",
      "gists_url": "https://api.github.com/users/artwr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/artwr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/artwr/subscriptions",
      "organizations_url": "https://api.github.com/users/artwr/orgs",
      "repos_url": "https://api.github.com/users/artwr/repos",
      "events_url": "https://api.github.com/users/artwr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/artwr/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Yet I couldn't see it :disappointed: . Thanks for the explanation!\n",
    "created_at": "2015-07-02T00:17:44Z",
    "updated_at": "2015-07-02T10:52:45Z",
    "html_url": "https://github.com/apache/airflow/pull/99#discussion_r33738005",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/99",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/33738005"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/99#discussion_r33738005"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/99"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/33738005/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 57,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/33738243",
    "pull_request_review_id": null,
    "id": 33738243,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMzNzM4MjQz",
    "diff_hunk": "@@ -403,6 +403,11 @@ def is_in(obj, l):\n     return False\n \n \n+def get_val_or_default( context, key, default ):\n+    if key in context:\n+        return context[key]\n+    return default\n+",
    "path": "airflow/utils.py",
    "commit_id": "12ab4a4fe49172982a427db30d75bd90d6e7a497",
    "original_commit_id": "cee7b5f68e51cd65e11bd1f0b222db5f419276d9",
    "user": {
      "login": "gtoonstra",
      "id": 441978,
      "node_id": "MDQ6VXNlcjQ0MTk3OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/441978?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gtoonstra",
      "html_url": "https://github.com/gtoonstra",
      "followers_url": "https://api.github.com/users/gtoonstra/followers",
      "following_url": "https://api.github.com/users/gtoonstra/following{/other_user}",
      "gists_url": "https://api.github.com/users/gtoonstra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gtoonstra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gtoonstra/subscriptions",
      "organizations_url": "https://api.github.com/users/gtoonstra/orgs",
      "repos_url": "https://api.github.com/users/gtoonstra/repos",
      "events_url": "https://api.github.com/users/gtoonstra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gtoonstra/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "removed util function and changed to `dict(foo='bar').get('foo', 'default_if_key_not_found')` style.\n",
    "created_at": "2015-07-02T00:23:34Z",
    "updated_at": "2015-07-02T10:52:45Z",
    "html_url": "https://github.com/apache/airflow/pull/99#discussion_r33738243",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/99",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/33738243"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/99#discussion_r33738243"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/99"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/33738243/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 8,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/33739523",
    "pull_request_review_id": null,
    "id": 33739523,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMzNzM5NTIz",
    "diff_hunk": "@@ -0,0 +1,84 @@\n+import logging\n+\n+import requests\n+\n+from airflow import utils\n+from airflow.hooks.base_hook import BaseHook\n+\n+\n+class HttpHook(BaseHook):\n+\n+    \"\"\"\n+    Interact with HTTP servers.\n+    \"\"\"\n+\n+    def __init__(\n+            self, method='POST', http_conn_id='http_default'):\n+        self.http_conn_id = http_conn_id\n+        self.method = method\n+\n+    def get_conn(self, headers):\n+        \"\"\"\n+        Returns http session for use with requests\n+        \"\"\"\n+        conn = self.get_connection(self.http_conn_id)\n+        session = requests.Session()\n+        self.base_url = conn.host\n+\n+        if conn.port != None and conn.port > 0:\n+            self.base_url = self.base_url + \":%d/\"%( conn.port )\n+\n+        if len(conn.login) > 0:\n+            session.auth = (conn.login, conn.password)\n+        if headers != None:\n+            session.headers.update(headers)\n+\n+        return session\n+\n+    def run(self, url, data=None, headers=None, extra_options={}):\n+        \"\"\"\n+        Performs the request\n+        \"\"\"\n+        s = self.get_conn( headers )\n+\n+        url = self.base_url + url\n+        req = None\n+        if self.method == 'GET':\n+            req = requests.Request( self.method, \n+                url,\n+                params=data,\n+                headers=headers\n+            )\n+        else:\n+            req = requests.Request( self.method, \n+                url,\n+                data=data,\n+                headers=headers\n+            )\n+        prepped = s.prepare_request( req )\n+        logging.info(\"Posting to url: \" + url)\n+        return self.run_and_check( s, prepped, extra_options )    \n+\n+    def run_and_check( self, s, prepped, extra_options ):\n+        stream = utils.get_val_or_default( extra_options, \"stream\", False )\n+        verify = utils.get_val_or_default( extra_options, \"verify\", False )\n+        proxies= utils.get_val_or_default( extra_options, \"proxies\", {} )\n+        cert = utils.get_val_or_default( extra_options, \"cert\", None )\n+        timeout = utils.get_val_or_default( extra_options, \"timeout\", None )\n+        allow_redirects = utils.get_val_or_default( extra_options, \"allow_redirects\", True )\n+\n+        response = s.send(prepped,\n+            stream=stream,\n+            verify=verify,\n+            proxies=proxies,\n+            cert=cert,\n+            timeout=timeout,\n+            allow_redirects=allow_redirects\n+        )\n+        if response.status_code != requests.codes.ok:\n+            logging.error(\"HTTP call failed: %d[%s]\"%( response.status_code, response.reason ))\n+            if self.method != 'GET':\n+                logging.error( response.text )\n+            return False, response.reason\n+        return True, response.content",
    "path": "airflow/hooks/http_hook.py",
    "commit_id": "12ab4a4fe49172982a427db30d75bd90d6e7a497",
    "original_commit_id": "cee7b5f68e51cd65e11bd1f0b222db5f419276d9",
    "user": {
      "login": "gtoonstra",
      "id": 441978,
      "node_id": "MDQ6VXNlcjQ0MTk3OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/441978?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gtoonstra",
      "html_url": "https://github.com/gtoonstra",
      "followers_url": "https://api.github.com/users/gtoonstra/followers",
      "following_url": "https://api.github.com/users/gtoonstra/following{/other_user}",
      "gists_url": "https://api.github.com/users/gtoonstra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gtoonstra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gtoonstra/subscriptions",
      "organizations_url": "https://api.github.com/users/gtoonstra/orgs",
      "repos_url": "https://api.github.com/users/gtoonstra/repos",
      "events_url": "https://api.github.com/users/gtoonstra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gtoonstra/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Refactoring this into something else. It will raise an error on anything 40x/50x. Other codes just return the content.\n",
    "created_at": "2015-07-02T00:51:45Z",
    "updated_at": "2015-07-02T10:52:45Z",
    "html_url": "https://github.com/apache/airflow/pull/99#discussion_r33739523",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/99",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/33739523"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/99#discussion_r33739523"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/99"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/33739523/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 83,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/33834756",
    "pull_request_review_id": null,
    "id": 33834756,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMzODM0NzU2",
    "diff_hunk": "@@ -331,3 +331,57 @@ def poke(self, context):\n         logging.info(\n             'Checking if the time ({0}) has come'.format(self.target_time))\n         return datetime.now().time() > self.target_time\n+\n+\n+class HttpSensor(BaseSensorOperator):\n+    \"\"\"\n+    Executes an HTTP get statement until the specified criteria is met.\n+\n+    :param conn_id: The connection to run the sensor against\n+    :type conn_id: string\n+    :param url: To pass, the url must respond with\n+    \"\"\"\n+\n+    @apply_defaults\n+    def __init__(self,\n+                 conn_id,",
    "path": "airflow/operators/sensors.py",
    "commit_id": "5190f8ce88ba8934eca5e3a6ad6e7639b2c7a7bf",
    "original_commit_id": "bc0faf600ceaa3ce7aff124d2eeb17d0d54799d6",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "`http_conn_id` because of how you can set default_args at your DAGs level, `conn_id` would conflict for default settings\n",
    "created_at": "2015-07-03T00:39:45Z",
    "updated_at": "2015-07-08T15:50:53Z",
    "html_url": "https://github.com/apache/airflow/pull/103#discussion_r33834756",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/103",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/33834756"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/103#discussion_r33834756"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/103"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/33834756/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 17,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/33834923",
    "pull_request_review_id": null,
    "id": 33834923,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMzODM0OTIz",
    "diff_hunk": "@@ -331,3 +331,57 @@ def poke(self, context):\n         logging.info(\n             'Checking if the time ({0}) has come'.format(self.target_time))\n         return datetime.now().time() > self.target_time\n+\n+\n+class HttpSensor(BaseSensorOperator):\n+    \"\"\"\n+    Executes an HTTP get statement until the specified criteria is met.\n+\n+    :param conn_id: The connection to run the sensor against\n+    :type conn_id: string\n+    :param url: To pass, the url must respond with",
    "path": "airflow/operators/sensors.py",
    "commit_id": "5190f8ce88ba8934eca5e3a6ad6e7639b2c7a7bf",
    "original_commit_id": "bc0faf600ceaa3ce7aff124d2eeb17d0d54799d6",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "let's document the params\n",
    "created_at": "2015-07-03T00:45:33Z",
    "updated_at": "2015-07-08T15:50:53Z",
    "html_url": "https://github.com/apache/airflow/pull/103#discussion_r33834923",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/103",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/33834923"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/103#discussion_r33834923"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/103"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/33834923/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 12,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/33835399",
    "pull_request_review_id": null,
    "id": 33835399,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMzODM1Mzk5",
    "diff_hunk": "@@ -0,0 +1,39 @@\n+import logging\n+\n+from airflow.hooks import HttpHook\n+from airflow.models import BaseOperator\n+from airflow.utils import apply_defaults, AirflowException\n+\n+\n+class SimpleHttpOperator(BaseOperator):\n+    \"\"\"\n+    Calls an endpoint on an HTTP system to execute an action\n+    \"\"\"\n+\n+    template_fields = ('endpoint',)\n+    template_ext = ()\n+    ui_color = '#f4a460'\n+\n+    @apply_defaults\n+    def __init__(self,\n+                 endpoint,\n+                 method='POST',\n+                 data=None,\n+                 headers={},",
    "path": "airflow/operators/http_operator.py",
    "commit_id": "5190f8ce88ba8934eca5e3a6ad6e7639b2c7a7bf",
    "original_commit_id": "bc0faf600ceaa3ce7aff124d2eeb17d0d54799d6",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Instantiating objects in method headers is a python gotcha:\nhttp://stackoverflow.com/questions/9887180/the-value-of-an-empty-list-in-function-parameter-example-here\n`headers=None`\nand then in the function body\n\n```\nself.headers = headers or {}\n```\n",
    "created_at": "2015-07-03T01:03:41Z",
    "updated_at": "2015-07-08T15:50:53Z",
    "html_url": "https://github.com/apache/airflow/pull/103#discussion_r33835399",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/103",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/33835399"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/103#discussion_r33835399"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/103"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/33835399/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 22,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/33835466",
    "pull_request_review_id": null,
    "id": 33835466,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMzODM1NDY2",
    "diff_hunk": "@@ -0,0 +1,95 @@\n+import logging\n+\n+import requests\n+\n+from airflow.hooks.base_hook import BaseHook\n+from airflow.utils import AirflowException\n+\n+\n+class HttpHook(BaseHook):\n+    \"\"\"\n+    Interact with HTTP servers.\n+    \"\"\"\n+\n+    def __init__(self, method='POST', http_conn_id='http_default'):\n+        self.http_conn_id = http_conn_id\n+        self.method = method\n+\n+    # headers is required to make it required\n+    def get_conn(self, headers):\n+        \"\"\"\n+        Returns http session for use with requests\n+        \"\"\"\n+        conn = self.get_connection(self.http_conn_id)\n+        session = requests.Session()\n+        self.base_url = conn.host\n+\n+        if conn.port:\n+            self.base_url = self.base_url + \":\" + str(conn.port) + \"/\"\n+        if conn.login:\n+            session.auth = (conn.login, conn.password)\n+        if headers:\n+            session.headers.update(headers)\n+\n+        return session\n+\n+    def run(self, endpoint, data=None, headers=None, extra_options={}):\n+        \"\"\"\n+        Performs the request\n+        \"\"\"\n+        session = self.get_conn(headers)\n+\n+        url = self.base_url + endpoint\n+        req = None\n+        if self.method == 'GET':\n+            # GET uses params\n+            req = requests.Request(self.method,\n+                                   url,\n+                                   params=data,\n+                                   headers=headers)\n+        else:\n+            # Others use data\n+            req = requests.Request(self.method,\n+                                   url,\n+                                   data=data,\n+                                   headers=headers)\n+\n+        preppedRequest = session.prepare_request(req)",
    "path": "airflow/hooks/http_hook.py",
    "commit_id": "5190f8ce88ba8934eca5e3a6ad6e7639b2c7a7bf",
    "original_commit_id": "bc0faf600ceaa3ce7aff124d2eeb17d0d54799d6",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "no camel case pls\n",
    "created_at": "2015-07-03T01:06:27Z",
    "updated_at": "2015-07-08T15:50:53Z",
    "html_url": "https://github.com/apache/airflow/pull/103#discussion_r33835466",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/103",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/33835466"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/103#discussion_r33835466"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/103"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/33835466/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 57,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/34852299",
    "pull_request_review_id": null,
    "id": 34852299,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0ODUyMjk5",
    "diff_hunk": "@@ -48,3 +48,46 @@ def get_pandas_df(self, sql):\n \n     def run(self, sql):\n         raise NotImplemented()\n+\n+\n+class BaseSqlHook(BaseHook):\n+    \"\"\"",
    "path": "airflow/hooks/base_hook.py",
    "commit_id": "4184beaedf93c04d7250de79ff5c77914d2a157a",
    "original_commit_id": "38cf836fbb99d09002b450c41f440efd1c75ca2d",
    "user": {
      "login": "smarden1",
      "id": 549155,
      "node_id": "MDQ6VXNlcjU0OTE1NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/549155?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/smarden1",
      "html_url": "https://github.com/smarden1",
      "followers_url": "https://api.github.com/users/smarden1/followers",
      "following_url": "https://api.github.com/users/smarden1/following{/other_user}",
      "gists_url": "https://api.github.com/users/smarden1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/smarden1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/smarden1/subscriptions",
      "organizations_url": "https://api.github.com/users/smarden1/orgs",
      "repos_url": "https://api.github.com/users/smarden1/repos",
      "events_url": "https://api.github.com/users/smarden1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/smarden1/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "what do you think about also putting \"def insert_rows\" here as well and return a notImplemented?\n",
    "created_at": "2015-07-17T00:15:00Z",
    "updated_at": "2015-07-17T22:24:18Z",
    "html_url": "https://github.com/apache/airflow/pull/146#discussion_r34852299",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/146",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/34852299"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/146#discussion_r34852299"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/146"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/34852299/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 7,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/34903433",
    "pull_request_review_id": null,
    "id": 34903433,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0OTAzNDMz",
    "diff_hunk": "@@ -48,3 +48,46 @@ def get_pandas_df(self, sql):\n \n     def run(self, sql):\n         raise NotImplemented()\n+\n+\n+class BaseSqlHook(BaseHook):\n+    \"\"\"",
    "path": "airflow/hooks/base_hook.py",
    "commit_id": "4184beaedf93c04d7250de79ff5c77914d2a157a",
    "original_commit_id": "38cf836fbb99d09002b450c41f440efd1c75ca2d",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Sounds right. Unless the MySqlHook implementation works with other DBs. I think as look at it's vanilla SQL and DbApi it should be generalizable. PrestoHook should override it with `NotImplemented` though\n",
    "created_at": "2015-07-17T16:01:19Z",
    "updated_at": "2015-07-17T22:24:18Z",
    "html_url": "https://github.com/apache/airflow/pull/146#discussion_r34903433",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/146",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/34903433"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/146#discussion_r34903433"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/146"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/34903433/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 7,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/34904141",
    "pull_request_review_id": null,
    "id": 34904141,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0OTA0MTQx",
    "diff_hunk": "@@ -28,28 +28,6 @@ def get_conn(self):\n             conn.schema)\n         return conn\n \n-    def get_records(self, sql):\n-        '''\n-        Executes the sql and returns a set of records.\n-        '''\n-        conn = self.get_conn()\n-        cur = conn.cursor()\n-        cur.execute(sql)\n-        rows = cur.fetchall()\n-        cur.close()\n-        conn.close()\n-        return rows\n-\n-    def get_pandas_df(self, sql):\n-        '''\n-        Executes the sql and returns a pandas dataframe\n-        '''\n-        import pandas.io.sql as psql\n-        conn = self.get_conn()\n-        df = psql.read_sql(sql, con=conn)\n-        conn.close()\n-        return df\n-\n     def run(self, sql):",
    "path": "airflow/hooks/mysql_hook.py",
    "commit_id": "4184beaedf93c04d7250de79ff5c77914d2a157a",
    "original_commit_id": "38cf836fbb99d09002b450c41f440efd1c75ca2d",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Can this be moved to Base as well?\n",
    "created_at": "2015-07-17T16:08:17Z",
    "updated_at": "2015-07-17T22:24:18Z",
    "html_url": "https://github.com/apache/airflow/pull/146#discussion_r34904141",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/146",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/34904141"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/146#discussion_r34904141"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/146"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/34904141/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 39,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/34914408",
    "pull_request_review_id": null,
    "id": 34914408,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0OTE0NDA4",
    "diff_hunk": "@@ -1369,9 +1369,9 @@ def append_only_new(self, l, item):\n     def _set_relatives(self, task_or_task_list, upstream=False):\n         if isinstance(task_or_task_list, BaseOperator):\n             task_or_task_list = [task_or_task_list]\n+        if not isinstance(task_or_task_list, list):\n+            raise AirflowException('Expecting a task')\n         for task in task_or_task_list:\n-            if not isinstance(task_or_task_list, list):",
    "path": "airflow/models.py",
    "commit_id": "42d99d7dadb46ac0f4ad8cd15631e5d012aa6171",
    "original_commit_id": "477e37847d4aed43e119f8d7764afeb22853f973",
    "user": {
      "login": "artwr",
      "id": 1518713,
      "node_id": "MDQ6VXNlcjE1MTg3MTM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1518713?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/artwr",
      "html_url": "https://github.com/artwr",
      "followers_url": "https://api.github.com/users/artwr/followers",
      "following_url": "https://api.github.com/users/artwr/following{/other_user}",
      "gists_url": "https://api.github.com/users/artwr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/artwr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/artwr/subscriptions",
      "organizations_url": "https://api.github.com/users/artwr/orgs",
      "repos_url": "https://api.github.com/users/artwr/repos",
      "events_url": "https://api.github.com/users/artwr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/artwr/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "I think we should test inside the loop if `isinstance(task, BaseOperator)`, since we don't really care that this is a list.\n@mistercrunch?\n",
    "created_at": "2015-07-17T17:56:57Z",
    "updated_at": "2015-07-17T18:55:47Z",
    "html_url": "https://github.com/apache/airflow/pull/147#discussion_r34914408",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/147",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/34914408"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/147#discussion_r34914408"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/147"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/34914408/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 1373,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 7,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/34916566",
    "pull_request_review_id": null,
    "id": 34916566,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0OTE2NTY2",
    "diff_hunk": "@@ -1117,6 +1149,9 @@ def __init__(\n         self.pool = pool\n         self.sla = sla\n         self.execution_timeout = execution_timeout\n+        self.on_failure_callback = on_failure_callback\n+        self.on_success_callback = on_success_callback\n+        self.on_retry_callback = on_retry_callback",
    "path": "airflow/models.py",
    "commit_id": "4009a9e6b91afce2d8eedde1ed53b3b60d0d8e12",
    "original_commit_id": "915df2bee8d3f9beb81bf27196bd0254ab92bf8f",
    "user": {
      "login": "smarden1",
      "id": 549155,
      "node_id": "MDQ6VXNlcjU0OTE1NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/549155?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/smarden1",
      "html_url": "https://github.com/smarden1",
      "followers_url": "https://api.github.com/users/smarden1/followers",
      "following_url": "https://api.github.com/users/smarden1/following{/other_user}",
      "gists_url": "https://api.github.com/users/smarden1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/smarden1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/smarden1/subscriptions",
      "organizations_url": "https://api.github.com/users/smarden1/orgs",
      "repos_url": "https://api.github.com/users/smarden1/repos",
      "events_url": "https://api.github.com/users/smarden1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/smarden1/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "would it be possible to make this a list of callbacks?\n",
    "created_at": "2015-07-17T18:16:55Z",
    "updated_at": "2015-07-18T01:10:16Z",
    "html_url": "https://github.com/apache/airflow/pull/151#discussion_r34916566",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/151",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/34916566"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/151#discussion_r34916566"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/151"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/34916566/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 1154,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 81,
    "position": 81,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/34916909",
    "pull_request_review_id": null,
    "id": 34916909,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0OTE2OTA5",
    "diff_hunk": "@@ -869,7 +877,17 @@ def record_failure(self, error, test_mode=False):\n         except Exception as e2:\n             logging.error(\n                 'Failed to send email to: ' + str(task.email))\n-            logging.error(str(e2))\n+            logging.exception(e2)\n+\n+        # Handling callbacks pessimistically\n+        try:",
    "path": "airflow/models.py",
    "commit_id": "4009a9e6b91afce2d8eedde1ed53b3b60d0d8e12",
    "original_commit_id": "915df2bee8d3f9beb81bf27196bd0254ab92bf8f",
    "user": {
      "login": "smarden1",
      "id": 549155,
      "node_id": "MDQ6VXNlcjU0OTE1NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/549155?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/smarden1",
      "html_url": "https://github.com/smarden1",
      "followers_url": "https://api.github.com/users/smarden1/followers",
      "following_url": "https://api.github.com/users/smarden1/following{/other_user}",
      "gists_url": "https://api.github.com/users/smarden1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/smarden1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/smarden1/subscriptions",
      "organizations_url": "https://api.github.com/users/smarden1/orgs",
      "repos_url": "https://api.github.com/users/smarden1/repos",
      "events_url": "https://api.github.com/users/smarden1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/smarden1/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "it might be nice to also always email when the email is set.\n\nWould it be possible to have callbacks be a list and always seed the list with the email callback?\n",
    "created_at": "2015-07-17T18:20:36Z",
    "updated_at": "2015-07-18T01:10:16Z",
    "html_url": "https://github.com/apache/airflow/pull/151#discussion_r34916909",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/151",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/34916909"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/151#discussion_r34916909"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/151"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/34916909/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 883,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 36,
    "position": 36,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/34917075",
    "pull_request_review_id": null,
    "id": 34917075,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0OTE3MDc1",
    "diff_hunk": "@@ -1117,6 +1149,9 @@ def __init__(\n         self.pool = pool\n         self.sla = sla\n         self.execution_timeout = execution_timeout\n+        self.on_failure_callback = on_failure_callback\n+        self.on_success_callback = on_success_callback\n+        self.on_retry_callback = on_retry_callback",
    "path": "airflow/models.py",
    "commit_id": "4009a9e6b91afce2d8eedde1ed53b3b60d0d8e12",
    "original_commit_id": "915df2bee8d3f9beb81bf27196bd0254ab92bf8f",
    "user": {
      "login": "artwr",
      "id": 1518713,
      "node_id": "MDQ6VXNlcjE1MTg3MTM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1518713?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/artwr",
      "html_url": "https://github.com/artwr",
      "followers_url": "https://api.github.com/users/artwr/followers",
      "following_url": "https://api.github.com/users/artwr/following{/other_user}",
      "gists_url": "https://api.github.com/users/artwr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/artwr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/artwr/subscriptions",
      "organizations_url": "https://api.github.com/users/artwr/orgs",
      "repos_url": "https://api.github.com/users/artwr/repos",
      "events_url": "https://api.github.com/users/artwr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/artwr/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "If we are going that route, maybe a dictionary would make more sense ? \n\n```\n{\"on_success\": callback_callable, \"on_failure\": notification_callback, \"on_retry\": email_callback}\n```\n\nBut I think it's makes the interface less clear.\n",
    "created_at": "2015-07-17T18:22:12Z",
    "updated_at": "2015-07-18T01:10:16Z",
    "html_url": "https://github.com/apache/airflow/pull/151#discussion_r34917075",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/151",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/34917075"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/151#discussion_r34917075"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/151"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/34917075/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 1154,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 81,
    "position": 81,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/34918477",
    "pull_request_review_id": null,
    "id": 34918477,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0OTE4NDc3",
    "diff_hunk": "@@ -1117,6 +1149,9 @@ def __init__(\n         self.pool = pool\n         self.sla = sla\n         self.execution_timeout = execution_timeout\n+        self.on_failure_callback = on_failure_callback\n+        self.on_success_callback = on_success_callback\n+        self.on_retry_callback = on_retry_callback",
    "path": "airflow/models.py",
    "commit_id": "4009a9e6b91afce2d8eedde1ed53b3b60d0d8e12",
    "original_commit_id": "915df2bee8d3f9beb81bf27196bd0254ab92bf8f",
    "user": {
      "login": "smarden1",
      "id": 549155,
      "node_id": "MDQ6VXNlcjU0OTE1NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/549155?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/smarden1",
      "html_url": "https://github.com/smarden1",
      "followers_url": "https://api.github.com/users/smarden1/followers",
      "following_url": "https://api.github.com/users/smarden1/following{/other_user}",
      "gists_url": "https://api.github.com/users/smarden1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/smarden1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/smarden1/subscriptions",
      "organizations_url": "https://api.github.com/users/smarden1/orgs",
      "repos_url": "https://api.github.com/users/smarden1/repos",
      "events_url": "https://api.github.com/users/smarden1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/smarden1/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "oh... I meant, instead of passing a single callback for on_failure, pass a list, so you can do multiple things if a task fails without wrapping wrapping callbacks inside themselves.\n",
    "created_at": "2015-07-17T18:37:00Z",
    "updated_at": "2015-07-18T01:10:16Z",
    "html_url": "https://github.com/apache/airflow/pull/151#discussion_r34918477",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/151",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/34918477"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/151#discussion_r34918477"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/151"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/34918477/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 1154,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 81,
    "position": 81,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/34919472",
    "pull_request_review_id": null,
    "id": 34919472,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0OTE5NDcy",
    "diff_hunk": "@@ -1117,6 +1149,9 @@ def __init__(\n         self.pool = pool\n         self.sla = sla\n         self.execution_timeout = execution_timeout\n+        self.on_failure_callback = on_failure_callback\n+        self.on_success_callback = on_success_callback\n+        self.on_retry_callback = on_retry_callback",
    "path": "airflow/models.py",
    "commit_id": "4009a9e6b91afce2d8eedde1ed53b3b60d0d8e12",
    "original_commit_id": "915df2bee8d3f9beb81bf27196bd0254ab92bf8f",
    "user": {
      "login": "artwr",
      "id": 1518713,
      "node_id": "MDQ6VXNlcjE1MTg3MTM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1518713?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/artwr",
      "html_url": "https://github.com/artwr",
      "followers_url": "https://api.github.com/users/artwr/followers",
      "following_url": "https://api.github.com/users/artwr/following{/other_user}",
      "gists_url": "https://api.github.com/users/artwr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/artwr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/artwr/subscriptions",
      "organizations_url": "https://api.github.com/users/artwr/orgs",
      "repos_url": "https://api.github.com/users/artwr/repos",
      "events_url": "https://api.github.com/users/artwr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/artwr/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Sorry, I misunderstood. Sounds reasonable to me.\n",
    "created_at": "2015-07-17T18:47:11Z",
    "updated_at": "2015-07-18T01:10:16Z",
    "html_url": "https://github.com/apache/airflow/pull/151#discussion_r34919472",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/151",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/34919472"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/151#discussion_r34919472"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/151"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/34919472/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 1154,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 81,
    "position": 81,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/34919859",
    "pull_request_review_id": null,
    "id": 34919859,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0OTE5ODU5",
    "diff_hunk": "@@ -1369,9 +1369,9 @@ def append_only_new(self, l, item):\n     def _set_relatives(self, task_or_task_list, upstream=False):\n         if isinstance(task_or_task_list, BaseOperator):\n             task_or_task_list = [task_or_task_list]\n+        if not isinstance(task_or_task_list, list):\n+            raise AirflowException('Expecting a task')\n         for task in task_or_task_list:\n-            if not isinstance(task_or_task_list, list):",
    "path": "airflow/models.py",
    "commit_id": "42d99d7dadb46ac0f4ad8cd15631e5d012aa6171",
    "original_commit_id": "477e37847d4aed43e119f8d7764afeb22853f973",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "thassrite! leave it in the loop and check for BaseOperator\n",
    "created_at": "2015-07-17T18:51:04Z",
    "updated_at": "2015-07-17T18:55:47Z",
    "html_url": "https://github.com/apache/airflow/pull/147#discussion_r34919859",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/147",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/34919859"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/147#discussion_r34919859"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/147"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/34919859/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 1373,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 7,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/34920593",
    "pull_request_review_id": null,
    "id": 34920593,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0OTIwNTkz",
    "diff_hunk": "@@ -1117,6 +1149,9 @@ def __init__(\n         self.pool = pool\n         self.sla = sla\n         self.execution_timeout = execution_timeout\n+        self.on_failure_callback = on_failure_callback\n+        self.on_success_callback = on_success_callback\n+        self.on_retry_callback = on_retry_callback",
    "path": "airflow/models.py",
    "commit_id": "4009a9e6b91afce2d8eedde1ed53b3b60d0d8e12",
    "original_commit_id": "915df2bee8d3f9beb81bf27196bd0254ab92bf8f",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "I think it muddies the API to expect a list or either a callable or a list of callable and for the Airflow to have to deal with etheir using type inspection. If you need to call multiple things, write a function that calls multiple things, or wrap it in a lambda that calls something like this\n\n```\ndef calls(funcs, *args, **args):\n    return [f(*args, **args) for f in funcs]\n```\n",
    "created_at": "2015-07-17T18:59:16Z",
    "updated_at": "2015-07-18T01:10:16Z",
    "html_url": "https://github.com/apache/airflow/pull/151#discussion_r34920593",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/151",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/34920593"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/151#discussion_r34920593"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/151"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/34920593/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 1154,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 81,
    "position": 81,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/34921632",
    "pull_request_review_id": null,
    "id": 34921632,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0OTIxNjMy",
    "diff_hunk": "@@ -1367,10 +1367,12 @@ def append_only_new(self, l, item):\n             l.append(item)\n \n     def _set_relatives(self, task_or_task_list, upstream=False):\n-        if isinstance(task_or_task_list, BaseOperator):\n-            task_or_task_list = [task_or_task_list]\n-        for task in task_or_task_list:\n-            if not isinstance(task_or_task_list, list):\n+        try:\n+            task_list = list(task_or_task_list)",
    "path": "airflow/models.py",
    "commit_id": "42d99d7dadb46ac0f4ad8cd15631e5d012aa6171",
    "original_commit_id": "42d99d7dadb46ac0f4ad8cd15631e5d012aa6171",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "it's not super explicit here that list is used as a way to cast an iterable. btw:\n\n```\n>>> list('abc')\n['a', 'b', 'c']\n```\n\nwhat about, instead of the try block:\n\n```\nif not isinstance(task_list, (tuple, list):\n    task_list = [task_list]\n```\n",
    "created_at": "2015-07-17T19:11:44Z",
    "updated_at": "2015-07-17T19:11:44Z",
    "html_url": "https://github.com/apache/airflow/pull/147#discussion_r34921632",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/147",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/34921632"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/147#discussion_r34921632"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/147"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/34921632/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 1371,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 9,
    "position": 9,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/34922182",
    "pull_request_review_id": null,
    "id": 34922182,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0OTIyMTgy",
    "diff_hunk": "@@ -1367,10 +1367,12 @@ def append_only_new(self, l, item):\n             l.append(item)\n \n     def _set_relatives(self, task_or_task_list, upstream=False):\n-        if isinstance(task_or_task_list, BaseOperator):\n-            task_or_task_list = [task_or_task_list]\n-        for task in task_or_task_list:\n-            if not isinstance(task_or_task_list, list):\n+        try:\n+            task_list = list(task_or_task_list)",
    "path": "airflow/models.py",
    "commit_id": "42d99d7dadb46ac0f4ad8cd15631e5d012aa6171",
    "original_commit_id": "42d99d7dadb46ac0f4ad8cd15631e5d012aa6171",
    "user": {
      "login": "smarden1",
      "id": 549155,
      "node_id": "MDQ6VXNlcjU0OTE1NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/549155?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/smarden1",
      "html_url": "https://github.com/smarden1",
      "followers_url": "https://api.github.com/users/smarden1/followers",
      "following_url": "https://api.github.com/users/smarden1/following{/other_user}",
      "gists_url": "https://api.github.com/users/smarden1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/smarden1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/smarden1/subscriptions",
      "organizations_url": "https://api.github.com/users/smarden1/orgs",
      "repos_url": "https://api.github.com/users/smarden1/repos",
      "events_url": "https://api.github.com/users/smarden1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/smarden1/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "I can change it to that if you prefer, however it doesn't allow you to have custom classes where **iter** is defined to be passed in here. Would a comment alleviate your concerns?\n",
    "created_at": "2015-07-17T19:18:28Z",
    "updated_at": "2015-07-17T19:18:28Z",
    "html_url": "https://github.com/apache/airflow/pull/147#discussion_r34922182",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/147",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/34922182"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/147#discussion_r34922182"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/147"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/34922182/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 1371,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 9,
    "position": 9,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/34935783",
    "pull_request_review_id": null,
    "id": 34935783,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0OTM1Nzgz",
    "diff_hunk": "@@ -1117,6 +1149,9 @@ def __init__(\n         self.pool = pool\n         self.sla = sla\n         self.execution_timeout = execution_timeout\n+        self.on_failure_callback = on_failure_callback\n+        self.on_success_callback = on_success_callback\n+        self.on_retry_callback = on_retry_callback",
    "path": "airflow/models.py",
    "commit_id": "4009a9e6b91afce2d8eedde1ed53b3b60d0d8e12",
    "original_commit_id": "915df2bee8d3f9beb81bf27196bd0254ab92bf8f",
    "user": {
      "login": "smarden1",
      "id": 549155,
      "node_id": "MDQ6VXNlcjU0OTE1NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/549155?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/smarden1",
      "html_url": "https://github.com/smarden1",
      "followers_url": "https://api.github.com/users/smarden1/followers",
      "following_url": "https://api.github.com/users/smarden1/following{/other_user}",
      "gists_url": "https://api.github.com/users/smarden1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/smarden1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/smarden1/subscriptions",
      "organizations_url": "https://api.github.com/users/smarden1/orgs",
      "repos_url": "https://api.github.com/users/smarden1/repos",
      "events_url": "https://api.github.com/users/smarden1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/smarden1/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "that is fine for me. I can make it work either way. thanks!\n",
    "created_at": "2015-07-17T22:15:58Z",
    "updated_at": "2015-07-18T01:10:16Z",
    "html_url": "https://github.com/apache/airflow/pull/151#discussion_r34935783",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/151",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/34935783"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/151#discussion_r34935783"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/151"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/34935783/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 1154,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 81,
    "position": 81,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/34935908",
    "pull_request_review_id": null,
    "id": 34935908,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0OTM1OTA4",
    "diff_hunk": "@@ -1,77 +1,22 @@\n import psycopg2\n \n-from airflow import settings\n-from airflow.utils import AirflowException\n-from airflow.models import Connection\n+from airflow.hooks.dbapi_hook import DbApiHook\n \n \n-class PostgresHook(object):\n+class PostgresHook(DbApiHook):\n     '''\n     Interact with Postgres.\n     '''",
    "path": "airflow/hooks/postgres_hook.py",
    "commit_id": "4184beaedf93c04d7250de79ff5c77914d2a157a",
    "original_commit_id": "f77205994b8cf3d9385b403ffc633304e2f539bd",
    "user": {
      "login": "smarden1",
      "id": 549155,
      "node_id": "MDQ6VXNlcjU0OTE1NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/549155?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/smarden1",
      "html_url": "https://github.com/smarden1",
      "followers_url": "https://api.github.com/users/smarden1/followers",
      "following_url": "https://api.github.com/users/smarden1/following{/other_user}",
      "gists_url": "https://api.github.com/users/smarden1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/smarden1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/smarden1/subscriptions",
      "organizations_url": "https://api.github.com/users/smarden1/orgs",
      "repos_url": "https://api.github.com/users/smarden1/repos",
      "events_url": "https://api.github.com/users/smarden1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/smarden1/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "The postgres hook seemed to be different than the other ones... I removed the ability to set a host/login/password/etc separately... Do you think it is necessary to have that?\n",
    "created_at": "2015-07-17T22:18:27Z",
    "updated_at": "2015-07-17T22:24:18Z",
    "html_url": "https://github.com/apache/airflow/pull/146#discussion_r34935908",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/146",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/34935908"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/146#discussion_r34935908"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/146"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/34935908/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 9,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 13,
    "position": 13,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/35034472",
    "pull_request_review_id": null,
    "id": 35034472,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM1MDM0NDcy",
    "diff_hunk": "@@ -40,6 +40,7 @@\n         'flask-cache>=0.13.1',\n         'flask-login>=0.2.11',\n         'flower>=0.7.3',\n+        'jaydebeapi>=0.2.0',",
    "path": "setup.py",
    "commit_id": "01a7d466d7ba361f513fede4c454eefe7c6abdb9",
    "original_commit_id": "01a7d466d7ba361f513fede4c454eefe7c6abdb9",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Can you switch to using the `extra_requires` to make it optional? You can call it `jdbc`. What this does is that if you want to install this extra, you have to write something like `pip install airflow[jdbc]`\n",
    "created_at": "2015-07-20T19:37:07Z",
    "updated_at": "2015-07-20T19:37:07Z",
    "html_url": "https://github.com/apache/airflow/pull/155#discussion_r35034472",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/155",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/35034472"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/155#discussion_r35034472"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/155"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/35034472/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 43,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 4,
    "position": 4,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/35059543",
    "pull_request_review_id": null,
    "id": 35059543,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM1MDU5NTQz",
    "diff_hunk": "@@ -20,11 +20,13 @@ class PrestoHook(BaseHook):\n     >>> ph.get_records(sql)",
    "path": "airflow/hooks/presto_hook.py",
    "commit_id": "4184beaedf93c04d7250de79ff5c77914d2a157a",
    "original_commit_id": "4184beaedf93c04d7250de79ff5c77914d2a157a",
    "user": {
      "login": "artwr",
      "id": 1518713,
      "node_id": "MDQ6VXNlcjE1MTg3MTM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1518713?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/artwr",
      "html_url": "https://github.com/artwr",
      "followers_url": "https://api.github.com/users/artwr/followers",
      "following_url": "https://api.github.com/users/artwr/following{/other_user}",
      "gists_url": "https://api.github.com/users/artwr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/artwr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/artwr/subscriptions",
      "organizations_url": "https://api.github.com/users/artwr/orgs",
      "repos_url": "https://api.github.com/users/artwr/repos",
      "events_url": "https://api.github.com/users/artwr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/artwr/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "This test somehow fails during unit testing.\n`ph = PrestoHook(presto_conn_id='presto_default')` works though.\n",
    "created_at": "2015-07-21T00:26:33Z",
    "updated_at": "2015-07-21T00:26:33Z",
    "html_url": "https://github.com/apache/airflow/pull/146#discussion_r35059543",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/146",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/35059543"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/146#discussion_r35059543"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/146"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/35059543/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 20,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 19,
    "position": 19,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/35059633",
    "pull_request_review_id": null,
    "id": 35059633,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM1MDU5NjMz",
    "diff_hunk": "@@ -39,49 +36,21 @@ class PrestoCheckOperator(BaseOperator):\n     :type presto_conn_id: string\n     \"\"\"\n \n-    template_fields = ('sql',)\n-    template_ext = ('.hql', '.sql',)\n-    ui_color = '#fff7e6'\n-\n     @apply_defaults\n     def __init__(\n             self, sql,\n             presto_conn_id='presto_default',\n             *args, **kwargs):\n-        super(PrestoCheckOperator, self).__init__(*args, **kwargs)\n+        super(PrestoCheckOperator, self).__init__(sql, *args, **kwargs)",
    "path": "airflow/operators/presto_check_operator.py",
    "commit_id": "4184beaedf93c04d7250de79ff5c77914d2a157a",
    "original_commit_id": "4184beaedf93c04d7250de79ff5c77914d2a157a",
    "user": {
      "login": "artwr",
      "id": 1518713,
      "node_id": "MDQ6VXNlcjE1MTg3MTM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1518713?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/artwr",
      "html_url": "https://github.com/artwr",
      "followers_url": "https://api.github.com/users/artwr/followers",
      "following_url": "https://api.github.com/users/artwr/following{/other_user}",
      "gists_url": "https://api.github.com/users/artwr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/artwr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/artwr/subscriptions",
      "organizations_url": "https://api.github.com/users/artwr/orgs",
      "repos_url": "https://api.github.com/users/artwr/repos",
      "events_url": "https://api.github.com/users/artwr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/artwr/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "I do not think you need the sql parameter in this case. \n`super(PrestoCheckOperator, self).__init__(*args, **kwargs)` seems to pass the unit test while the other version does not.\n",
    "created_at": "2015-07-21T00:28:14Z",
    "updated_at": "2015-07-21T00:28:14Z",
    "html_url": "https://github.com/apache/airflow/pull/146#discussion_r35059633",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/146",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/35059633"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/146#discussion_r35059633"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/146"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/35059633/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 44,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 29,
    "position": 29,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/35060047",
    "pull_request_review_id": null,
    "id": 35060047,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM1MDYwMDQ3",
    "diff_hunk": "@@ -20,11 +20,13 @@ class PrestoHook(BaseHook):\n     >>> ph.get_records(sql)",
    "path": "airflow/hooks/presto_hook.py",
    "commit_id": "4184beaedf93c04d7250de79ff5c77914d2a157a",
    "original_commit_id": "4184beaedf93c04d7250de79ff5c77914d2a157a",
    "user": {
      "login": "smarden1",
      "id": 549155,
      "node_id": "MDQ6VXNlcjU0OTE1NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/549155?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/smarden1",
      "html_url": "https://github.com/smarden1",
      "followers_url": "https://api.github.com/users/smarden1/followers",
      "following_url": "https://api.github.com/users/smarden1/following{/other_user}",
      "gists_url": "https://api.github.com/users/smarden1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/smarden1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/smarden1/subscriptions",
      "organizations_url": "https://api.github.com/users/smarden1/orgs",
      "repos_url": "https://api.github.com/users/smarden1/repos",
      "events_url": "https://api.github.com/users/smarden1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/smarden1/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "ah. word. sorry for committing with errors... I've actually had trouble getting my tests to all run properly... the hive ones seem to always fail -- any advice?\n",
    "created_at": "2015-07-21T00:34:59Z",
    "updated_at": "2015-07-21T00:34:59Z",
    "html_url": "https://github.com/apache/airflow/pull/146#discussion_r35060047",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/146",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/35060047"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/146#discussion_r35060047"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/146"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/35060047/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 20,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 19,
    "position": 19,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/35060442",
    "pull_request_review_id": null,
    "id": 35060442,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM1MDYwNDQy",
    "diff_hunk": "@@ -20,11 +20,13 @@ class PrestoHook(BaseHook):\n     >>> ph.get_records(sql)",
    "path": "airflow/hooks/presto_hook.py",
    "commit_id": "4184beaedf93c04d7250de79ff5c77914d2a157a",
    "original_commit_id": "4184beaedf93c04d7250de79ff5c77914d2a157a",
    "user": {
      "login": "artwr",
      "id": 1518713,
      "node_id": "MDQ6VXNlcjE1MTg3MTM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1518713?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/artwr",
      "html_url": "https://github.com/artwr",
      "followers_url": "https://api.github.com/users/artwr/followers",
      "following_url": "https://api.github.com/users/artwr/following{/other_user}",
      "gists_url": "https://api.github.com/users/artwr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/artwr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/artwr/subscriptions",
      "organizations_url": "https://api.github.com/users/artwr/orgs",
      "repos_url": "https://api.github.com/users/artwr/repos",
      "events_url": "https://api.github.com/users/artwr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/artwr/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "No worries!\nI'll defer to @mistercrunch on this one. Because of the integration with a lot of different systems/dbs, it is usually hard to run all of them on the same machine and have them all succeed. It usually requires running each test subset on a machine that has the proper systems installed, or they error out... I wish we had a better system, but it is difficult to mock/fake every single interface.\n\nAmazing PR though. \n",
    "created_at": "2015-07-21T00:41:48Z",
    "updated_at": "2015-07-21T00:41:48Z",
    "html_url": "https://github.com/apache/airflow/pull/146#discussion_r35060442",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/146",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/35060442"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/146#discussion_r35060442"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/146"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/35060442/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 20,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 19,
    "position": 19,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/35294084",
    "pull_request_review_id": null,
    "id": 35294084,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM1Mjk0MDg0",
    "diff_hunk": "@@ -934,7 +934,8 @@ def get_template_context(self):\n             'task': task,\n             'task_instance': self,\n             'ti': self,\n-            'task_instance_key_str': ti_key_str\n+            'task_instance_key_str': ti_key_str,\n+            'conf': conf,",
    "path": "airflow/models.py",
    "commit_id": "3eeead06c72c638ad3f0451fbd727abcda2b1c46",
    "original_commit_id": "3eeead06c72c638ad3f0451fbd727abcda2b1c46",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "This line right here\n",
    "created_at": "2015-07-23T06:53:24Z",
    "updated_at": "2015-07-23T06:53:24Z",
    "html_url": "https://github.com/apache/airflow/pull/169#discussion_r35294084",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/169",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/35294084"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/169#discussion_r35294084"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/169"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/35294084/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 938,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 27,
    "position": 27,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/35564092",
    "pull_request_review_id": null,
    "id": 35564092,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM1NTY0MDky",
    "diff_hunk": "@@ -158,7 +158,16 @@ def initdb():\n         session.add(\n             models.Connection(\n                 conn_id='http_default', conn_type='http',\n-                host='http://www.google.com'))\n+                host='http://www.google.com',\n+                port=1433))",
    "path": "airflow/utils.py",
    "commit_id": "72db7258d2792ce198ddc9d5eeab39e2261e0539",
    "original_commit_id": "4ca3ba19e9a59b2eeef4b2dcd552d331c511284d",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "I think this belongs a few lines bellow\n",
    "created_at": "2015-07-27T17:44:23Z",
    "updated_at": "2015-07-28T22:51:30Z",
    "html_url": "https://github.com/apache/airflow/pull/183#discussion_r35564092",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/183",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/35564092"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/183#discussion_r35564092"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/183"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/35564092/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 6,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/35564980",
    "pull_request_review_id": null,
    "id": 35564980,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM1NTY0OTgw",
    "diff_hunk": "@@ -338,7 +338,10 @@ def chart_data(self):\n         pd.set_option('display.max_colwidth', 100)\n         hook = db.get_hook()\n         try:\n-            df = hook.get_pandas_df(wwwutils.limit_sql(sql, CHART_LIMIT))\n+            if db.conn_type == 'mssql':",
    "path": "airflow/www/app.py",
    "commit_id": "72db7258d2792ce198ddc9d5eeab39e2261e0539",
    "original_commit_id": "4ca3ba19e9a59b2eeef4b2dcd552d331c511284d",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "I'd prefer passing the conn_type to `limit_sql` and have the logic in there. \n\nA slightly more ambitious refactor would be to move `limit_sql` to the hook class, it would probably be set in DbApiHook as a LIMIT clause and overridden where needed (mssql, eventually OracleHook, ... ).\n",
    "created_at": "2015-07-27T17:52:21Z",
    "updated_at": "2015-07-28T22:51:30Z",
    "html_url": "https://github.com/apache/airflow/pull/183#discussion_r35564980",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/183",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/35564980"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/183#discussion_r35564980"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/183"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/35564980/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 5,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/35565946",
    "pull_request_review_id": null,
    "id": 35565946,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM1NTY1OTQ2",
    "diff_hunk": "@@ -338,7 +338,10 @@ def chart_data(self):\n         pd.set_option('display.max_colwidth', 100)\n         hook = db.get_hook()\n         try:\n-            df = hook.get_pandas_df(wwwutils.limit_sql(sql, CHART_LIMIT))\n+            if db.conn_type == 'mssql':",
    "path": "airflow/www/app.py",
    "commit_id": "72db7258d2792ce198ddc9d5eeab39e2261e0539",
    "original_commit_id": "4ca3ba19e9a59b2eeef4b2dcd552d331c511284d",
    "user": {
      "login": "syvineckruyk",
      "id": 335167,
      "node_id": "MDQ6VXNlcjMzNTE2Nw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/335167?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/syvineckruyk",
      "html_url": "https://github.com/syvineckruyk",
      "followers_url": "https://api.github.com/users/syvineckruyk/followers",
      "following_url": "https://api.github.com/users/syvineckruyk/following{/other_user}",
      "gists_url": "https://api.github.com/users/syvineckruyk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/syvineckruyk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/syvineckruyk/subscriptions",
      "organizations_url": "https://api.github.com/users/syvineckruyk/orgs",
      "repos_url": "https://api.github.com/users/syvineckruyk/repos",
      "events_url": "https://api.github.com/users/syvineckruyk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/syvineckruyk/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Agreed ... ill make that correction.\n",
    "created_at": "2015-07-27T18:00:30Z",
    "updated_at": "2015-07-28T22:51:30Z",
    "html_url": "https://github.com/apache/airflow/pull/183#discussion_r35565946",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/183",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/35565946"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/183#discussion_r35565946"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/183"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/35565946/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 5,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/35573468",
    "pull_request_review_id": null,
    "id": 35573468,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM1NTczNDY4",
    "diff_hunk": "@@ -25,64 +27,54 @@ class JdbcHook(BaseHook):\n     :type sql: string or string pointing to a template file. File must have\n         a '.sql' extensions.\n     \"\"\"\n+\n+\n+    conn_name_attr = 'jdbc_conn_id'\n+    default_conn_name = 'jdbc_default'\n+    supports_autocommit = True\n+\n     def __init__(\n-            self, jdbc_url, jdbc_driver_name, jdbc_driver_loc,host=None, login=None,\n-            psw=None, db=None, port=None, extra=None, conn_id=None):\n-        self.jdbc_driver_loc = jdbc_driver_loc\n-        self.jdbc_driver_name = jdbc_driver_name\n-\n-        if (conn_id is None):\n-            self.host = host\n-            self.login = login\n-            self.psw = psw\n-            self.db = db\n-            self.port = port\n-            self.extra = extra\n-        else:\n-            conn = self.get_connection(conn_id)\n-            self.host = conn.host\n-            self.login = conn.login\n-            self.psw = conn.password\n-            self.db = conn.schema\n-            self.port = conn.port\n-            self.extra = conn.extra\n-\n-\n-        self.jdbc_url = jdbc_url.format(self.host, self.port, self.db, self.extra)\n+            self, *args, **kwargs):\n+\n+        super(JdbcHook,self).__init__(*args,**kwargs)\n+",
    "path": "airflow/hooks/jdbc_hook.py",
    "commit_id": "5c2cdf4ed1173f7c6691aae1f63f202e3af899b8",
    "original_commit_id": "a61f28048fb16c2016c1684b9b1f6e30f65c8b9f",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "I think there's no need for an `__init__` anymore as `DbApiHook` should work just fine. \n\nYou can move the `get_connection` call into `get_conn` and pass the info straight into the `connect` call.\n",
    "created_at": "2015-07-27T19:04:06Z",
    "updated_at": "2015-07-28T08:39:34Z",
    "html_url": "https://github.com/apache/airflow/pull/185#discussion_r35573468",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/185",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/35573468"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/185#discussion_r35573468"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/185"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/35573468/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 58,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/35573704",
    "pull_request_review_id": null,
    "id": 35573704,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM1NTczNzA0",
    "diff_hunk": "@@ -25,64 +27,54 @@ class JdbcHook(BaseHook):\n     :type sql: string or string pointing to a template file. File must have\n         a '.sql' extensions.\n     \"\"\"\n+\n+\n+    conn_name_attr = 'jdbc_conn_id'\n+    default_conn_name = 'jdbc_default'\n+    supports_autocommit = True\n+\n     def __init__(\n-            self, jdbc_url, jdbc_driver_name, jdbc_driver_loc,host=None, login=None,\n-            psw=None, db=None, port=None, extra=None, conn_id=None):\n-        self.jdbc_driver_loc = jdbc_driver_loc\n-        self.jdbc_driver_name = jdbc_driver_name\n-\n-        if (conn_id is None):\n-            self.host = host\n-            self.login = login\n-            self.psw = psw\n-            self.db = db\n-            self.port = port\n-            self.extra = extra\n-        else:\n-            conn = self.get_connection(conn_id)\n-            self.host = conn.host\n-            self.login = conn.login\n-            self.psw = conn.password\n-            self.db = conn.schema\n-            self.port = conn.port\n-            self.extra = conn.extra\n-\n-\n-        self.jdbc_url = jdbc_url.format(self.host, self.port, self.db, self.extra)\n+            self, *args, **kwargs):\n+\n+        super(JdbcHook,self).__init__(*args,**kwargs)\n+\n+        #conn_id = getattr(self, self.conn_name_attr)\n+        #if (conn_id is None):\n+        #    self.host = host\n+        #    self.login = login\n+        #    self.psw = psw\n+        #    #self.db = db\n+        #    #self.port = port\n+        #    self.extra = extra\n+        #    self.jdbc_driver_loc = jdbc_driver_loc\n+        #   self.jdbc_driver_name = jdbc_driver_name\n+        #else:\n+        conn = self.get_connection(getattr(self, self.conn_name_attr))\n+        self.host = conn.host\n+        self.login = conn.login\n+        self.psw = conn.password\n+        #self.db = conn.schema\n+        #self.port = conn.port\n+        self.extra = conn.extra\n+        self.jdbc_driver_loc = conn.extra_dejson.get('jdbc_drv_path')\n+        self.jdbc_driver_name = conn.extra_dejson.get('jdbc_drv_clsname')\n+\n+\n+        #self.jdbc_url = jdbc_url.format(self.host, self.port, self.db, self.extra)\n \n     def get_conn(self):\n-        logging.info(\"Trying to connect using jdbc url: \" + self.jdbc_url)\n         conn = jaydebeapi.connect(self.jdbc_driver_name,\n-                           [str(self.jdbc_url), str(self.login), str(self.psw)],\n+                           [str(self.host), str(self.login), str(self.psw)],\n                                   self.jdbc_driver_loc,)\n         return conn\n \n-    def get_records(self, sql, autocommit=False):\n-        '''\n-        Executes the sql and returns a set of records.\n-        '''\n-        conn = self.get_conn()\n-        conn.jconn.autocommit = autocommit\n-        cur = conn.cursor()\n-        cur.execute(sql)\n-        rows = [] if not cur._rs else cur.fetchall()\n-        cur.close()\n-        conn.close()\n-        return rows\n-\n-    def get_pandas_df(self, sql):\n-        '''\n-        Executes the sql and returns a pandas dataframe\n-        '''\n-        import pandas.io.sql as psql\n-        conn = self.get_conn()\n-        df = psql.read_sql(sql, con=conn)\n-        conn.close()\n-        return df\n-\n-    def run(self, sql, autocommit=False):\n+    def run(self, sql, autocommit=False, parameters=None):\n+        \"\"\"\n+        Runs a command\n+        \"\"\"\n         conn = self.get_conn()\n-        conn.jconn.autocommit = autocommit\n+        if self.supports_autocommit:",
    "path": "airflow/hooks/jdbc_hook.py",
    "commit_id": "5c2cdf4ed1173f7c6691aae1f63f202e3af899b8",
    "original_commit_id": "a61f28048fb16c2016c1684b9b1f6e30f65c8b9f",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Eventually I'll change `DbApiHook` to define a `set_autocommit(conn)` that different hooks will have to override. This is ok as is until then.\n",
    "created_at": "2015-07-27T19:06:27Z",
    "updated_at": "2015-07-28T08:39:34Z",
    "html_url": "https://github.com/apache/airflow/pull/185#discussion_r35573704",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/185",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/35573704"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/185#discussion_r35573704"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/185"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/35573704/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 121,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/35601053",
    "pull_request_review_id": null,
    "id": 35601053,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM1NjAxMDUz",
    "diff_hunk": "@@ -158,7 +158,16 @@ def initdb():\n         session.add(\n             models.Connection(\n                 conn_id='http_default', conn_type='http',\n-                host='http://www.google.com'))\n+                host='http://www.google.com',\n+                port=1433))",
    "path": "airflow/utils.py",
    "commit_id": "72db7258d2792ce198ddc9d5eeab39e2261e0539",
    "original_commit_id": "4ca3ba19e9a59b2eeef4b2dcd552d331c511284d",
    "user": {
      "login": "syvineckruyk",
      "id": 335167,
      "node_id": "MDQ6VXNlcjMzNTE2Nw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/335167?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/syvineckruyk",
      "html_url": "https://github.com/syvineckruyk",
      "followers_url": "https://api.github.com/users/syvineckruyk/followers",
      "following_url": "https://api.github.com/users/syvineckruyk/following{/other_user}",
      "gists_url": "https://api.github.com/users/syvineckruyk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/syvineckruyk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/syvineckruyk/subscriptions",
      "organizations_url": "https://api.github.com/users/syvineckruyk/orgs",
      "repos_url": "https://api.github.com/users/syvineckruyk/repos",
      "events_url": "https://api.github.com/users/syvineckruyk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/syvineckruyk/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "good catch.\n",
    "created_at": "2015-07-27T23:44:38Z",
    "updated_at": "2015-07-28T22:51:30Z",
    "html_url": "https://github.com/apache/airflow/pull/183#discussion_r35601053",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/183",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/35601053"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/183#discussion_r35601053"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/183"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/35601053/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 6,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/35771923",
    "pull_request_review_id": null,
    "id": 35771923,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM1NzcxOTIz",
    "diff_hunk": "@@ -1948,6 +1948,7 @@ class KnownEvent(Base):\n     end_date = Column(DateTime)\n     user_id = Column(Integer(), ForeignKey('user.id'),)\n     known_event_type_id = Column(Integer(), ForeignKey('known_event_type.id'),)\n+    event_tags = Column(String(200))",
    "path": "airflow/models.py",
    "commit_id": "471c6838b53b383fb404f1ede0c38942eaff0580",
    "original_commit_id": "471c6838b53b383fb404f1ede0c38942eaff0580",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "200 might be short, 512?\n",
    "created_at": "2015-07-29T15:19:56Z",
    "updated_at": "2015-07-29T15:19:56Z",
    "html_url": "https://github.com/apache/airflow/pull/181#discussion_r35771923",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/181",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/35771923"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/181#discussion_r35771923"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/181"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/35771923/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 1951,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 4,
    "position": 4,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/35771961",
    "pull_request_review_id": null,
    "id": 35771961,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM1NzcxOTYx",
    "diff_hunk": "@@ -3,3 +3,5 @@ alter table task_instance add column queue varchar(50) NULL;\n alter table task_instance add column pool varchar(50) NULL;\n alter table task_instance add column priority_weight INT NULL;\n create index ti_pool on task_instance (pool, state) using btree;\n+// To 1.3\n+alter table known_events add column event_tags TEXT(200) NULL;",
    "path": "migrations.sql",
    "commit_id": "471c6838b53b383fb404f1ede0c38942eaff0580",
    "original_commit_id": "471c6838b53b383fb404f1ede0c38942eaff0580",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "`VARCHAR(512)`\n",
    "created_at": "2015-07-29T15:20:13Z",
    "updated_at": "2015-07-29T15:20:13Z",
    "html_url": "https://github.com/apache/airflow/pull/181#discussion_r35771961",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/181",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/35771961"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/181#discussion_r35771961"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/181"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/35771961/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 7,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 5,
    "position": 5,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/35795570",
    "pull_request_review_id": null,
    "id": 35795570,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM1Nzk1NTcw",
    "diff_hunk": "@@ -1607,24 +1608,27 @@ class ConnectionModelView(wwwutils.SuperUserMixin, AirflowModelView):\n             ('sqlite', 'Sqlite',),\n             ('mssql', 'Microsoft SQL Server'),\n         ]\n-\n     }\n \n     def on_model_change(self, form, model, is_created):\n         formdata = form.data\n-        if formdata['conn_type'] == 'jdbc':\n-            jdbc = {key:formdata[key] for key in ('jdbc_drv_path','jdbc_drv_clsname'\n-                                                  #, 'jdbc_conn_url'\n-                                                   ) if key in formdata}\n-            model.extra = json.dumps(jdbc)\n+        if formdata['conn_type'] in ['jdbc']:\n+            extra = {\n+                key:formdata[key]\n+                for key in self.form_extra_fields.keys() if key in formdata}\n+            model.extra = json.dumps(extra)\n \n     def on_form_prefill(self, form, id):\n-        data = form.data\n-        if 'extra' in data and data['extra'] != None:\n-            d = json.loads(data['extra'])\n-           #form.jdbc_conn_url.data = d['jdbc_conn_url']\n-            form.jdbc_drv_path.data = d['jdbc_drv_path']",
    "path": "airflow/www/app.py",
    "commit_id": "0d25e4d434173f872531103bee8fd5dea4ca4656",
    "original_commit_id": "73717b391bf5ed4861c41edc3153e8bdae52ffd7",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "This was the bug as not all extra configs have jdbc_drv_path\n",
    "created_at": "2015-07-29T18:36:57Z",
    "updated_at": "2015-07-29T18:44:37Z",
    "html_url": "https://github.com/apache/airflow/pull/201#discussion_r35795570",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/201",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/35795570"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/201#discussion_r35795570"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/201"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/35795570/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 1626,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 39,
    "position": 44,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/36031201",
    "pull_request_review_id": null,
    "id": 36031201,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MDMxMjAx",
    "diff_hunk": "@@ -261,7 +261,9 @@ def index(self):\n         session = Session()\n         DM = models.DagModel\n         qry = session.query(DM).filter(~DM.is_subdag, DM.is_active).all()\n+        paused = session.query(DM).filter(~DM.is_subdag, DM.is_paused).all()",
    "path": "airflow/www/app.py",
    "commit_id": "98bd8387fb7d90a5c2a17dfbe111fb22954e15b0",
    "original_commit_id": "065db76a6093b77e42f4c3d030052415e32e62eb",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "I don't think there's a need for this query as you'll be able to use dag.is_paused\n",
    "created_at": "2015-08-01T06:21:28Z",
    "updated_at": "2015-08-14T05:58:39Z",
    "html_url": "https://github.com/apache/airflow/pull/211#discussion_r36031201",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/211",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/36031201"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/211#discussion_r36031201"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/211"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/36031201/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 268,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 4,
    "position": 4,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/36031204",
    "pull_request_review_id": null,
    "id": 36031204,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MDMxMjA0",
    "diff_hunk": "@@ -261,7 +261,9 @@ def index(self):\n         session = Session()\n         DM = models.DagModel\n         qry = session.query(DM).filter(~DM.is_subdag, DM.is_active).all()\n+        paused = session.query(DM).filter(~DM.is_subdag, DM.is_paused).all()\n         orm_dags = {dag.dag_id: dag for dag in qry}\n+        paused_dags = {dag.dag_id: dag for dag in paused}",
    "path": "airflow/www/app.py",
    "commit_id": "98bd8387fb7d90a5c2a17dfbe111fb22954e15b0",
    "original_commit_id": "065db76a6093b77e42f4c3d030052415e32e62eb",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "no need for this line either\n",
    "created_at": "2015-08-01T06:21:37Z",
    "updated_at": "2015-08-14T05:58:39Z",
    "html_url": "https://github.com/apache/airflow/pull/211#discussion_r36031204",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/211",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/36031204"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/211#discussion_r36031204"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/211"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/36031204/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 6,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/36031205",
    "pull_request_review_id": null,
    "id": 36031205,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MDMxMjA1",
    "diff_hunk": "@@ -272,6 +274,7 @@ def index(self):\n             'airflow/dags.html',\n             dags=dags,\n             orm_dags=orm_dags,\n+            paused_dags=paused_dags,",
    "path": "airflow/www/app.py",
    "commit_id": "98bd8387fb7d90a5c2a17dfbe111fb22954e15b0",
    "original_commit_id": "065db76a6093b77e42f4c3d030052415e32e62eb",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "dd\n",
    "created_at": "2015-08-01T06:21:42Z",
    "updated_at": "2015-08-14T05:58:39Z",
    "html_url": "https://github.com/apache/airflow/pull/211#discussion_r36031205",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/211",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/36031205"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/211#discussion_r36031205"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/211"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/36031205/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 14,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/36031217",
    "pull_request_review_id": null,
    "id": 36031217,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MDMxMjE3",
    "diff_hunk": "@@ -1241,6 +1244,29 @@ def landing_times(self):\n             root=root,\n         )\n \n+    @expose('/paused')\n+    @login_required\n+    def paused(self):\n+        DagModel = models.DagModel\n+        dag_id = request.args.get('dag_id')\n+        session = settings.Session()\n+        orm_dag = session.query(",
    "path": "airflow/www/app.py",
    "commit_id": "98bd8387fb7d90a5c2a17dfbe111fb22954e15b0",
    "original_commit_id": "065db76a6093b77e42f4c3d030052415e32e62eb",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "I've started breaking the lines this way when method chaining:\n\n```\n(\n    session\n    .query(DagModel)\n    .filter(DagModel.dag_id == dag_id)\n    .first()\n)\n```\n",
    "created_at": "2015-08-01T06:23:09Z",
    "updated_at": "2015-08-14T05:58:39Z",
    "html_url": "https://github.com/apache/airflow/pull/211#discussion_r36031217",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/211",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/36031217"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/211#discussion_r36031217"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/211"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/36031217/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 1269,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 28,
    "position": 18,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/36031233",
    "pull_request_review_id": null,
    "id": 36031233,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MDMxMjMz",
    "diff_hunk": "@@ -1241,6 +1244,29 @@ def landing_times(self):\n             root=root,\n         )\n \n+    @expose('/paused')\n+    @login_required\n+    def paused(self):\n+        DagModel = models.DagModel\n+        dag_id = request.args.get('dag_id')\n+        session = settings.Session()\n+        orm_dag = session.query(\n+            DagModel).filter(DagModel.dag_id == dag_id).first()\n+",
    "path": "airflow/www/app.py",
    "commit_id": "98bd8387fb7d90a5c2a17dfbe111fb22954e15b0",
    "original_commit_id": "065db76a6093b77e42f4c3d030052415e32e62eb",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "orm_dag.is_paused = not orm_dag.is_paused\n",
    "created_at": "2015-08-01T06:24:57Z",
    "updated_at": "2015-08-14T05:58:39Z",
    "html_url": "https://github.com/apache/airflow/pull/211#discussion_r36031233",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/211",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/36031233"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/211#discussion_r36031233"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/211"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/36031233/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 30,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/36031234",
    "pull_request_review_id": null,
    "id": 36031234,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MDMxMjM0",
    "diff_hunk": "@@ -1241,6 +1244,29 @@ def landing_times(self):\n             root=root,\n         )\n \n+    @expose('/paused')\n+    @login_required\n+    def paused(self):\n+        DagModel = models.DagModel\n+        dag_id = request.args.get('dag_id')\n+        session = settings.Session()\n+        orm_dag = session.query(\n+            DagModel).filter(DagModel.dag_id == dag_id).first()\n+\n+        if orm_dag.is_paused == False:",
    "path": "airflow/www/app.py",
    "commit_id": "98bd8387fb7d90a5c2a17dfbe111fb22954e15b0",
    "original_commit_id": "065db76a6093b77e42f4c3d030052415e32e62eb",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "if orm_dag.is_paused:\n",
    "created_at": "2015-08-01T06:25:07Z",
    "updated_at": "2015-08-14T05:58:39Z",
    "html_url": "https://github.com/apache/airflow/pull/211#discussion_r36031234",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/211",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/36031234"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/211#discussion_r36031234"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/211"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/36031234/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 31,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/36031237",
    "pull_request_review_id": null,
    "id": 36031237,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MDMxMjM3",
    "diff_hunk": "@@ -49,8 +49,17 @@\n                 <td style=\"padding:0px; width:180px; height:10px;\">\n                     <svg height=\"10\" width=\"10\" id='{{ dag.dag_id }}' style=\"display: block;\"></svg>\n                 </td>\n-                <td class=\"text-center\" style=\"width:160px;\">\n+                <td class=\"text-center\" style=\"width:180px;\">\n                 {% if dag %}\n+                  {% if dag_id in paused_dags %}",
    "path": "airflow/www/templates/airflow/dags.html",
    "commit_id": "98bd8387fb7d90a5c2a17dfbe111fb22954e15b0",
    "original_commit_id": "065db76a6093b77e42f4c3d030052415e32e62eb",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "if dag_id.is_paused\n",
    "created_at": "2015-08-01T06:25:43Z",
    "updated_at": "2015-08-14T05:58:39Z",
    "html_url": "https://github.com/apache/airflow/pull/211#discussion_r36031237",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/211",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/36031237"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/211#discussion_r36031237"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/211"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/36031237/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 60,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 16,
    "position": 48,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/36031244",
    "pull_request_review_id": null,
    "id": 36031244,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MDMxMjQ0",
    "diff_hunk": "@@ -203,7 +203,7 @@\n \n   <script src=\"{{ url_for('static', filename='d3.v3.min.js') }}\"></script>\n   <script>\n-      d3.selectAll(\"span.glyphicon-pencil\").attr(\"class\", \"glyphicon glyphicon-search\");\n+      d3.selectAll(\"span.glyphicon-pencil\").attr(\"class\", \"glyphicon glyphicon-pencil\");",
    "path": "airflow/www/templates/airflow/list_dags.html",
    "commit_id": "98bd8387fb7d90a5c2a17dfbe111fb22954e15b0",
    "original_commit_id": "065db76a6093b77e42f4c3d030052415e32e62eb",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "I don't think this line is needed anymore\n",
    "created_at": "2015-08-01T06:26:48Z",
    "updated_at": "2015-08-14T05:58:39Z",
    "html_url": "https://github.com/apache/airflow/pull/211#discussion_r36031244",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/211",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/36031244"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/211#discussion_r36031244"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/211"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/36031244/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 206,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 5,
    "position": 5,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/36031256",
    "pull_request_review_id": null,
    "id": 36031256,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MDMxMjU2",
    "diff_hunk": "@@ -49,8 +49,17 @@\n                 <td style=\"padding:0px; width:180px; height:10px;\">\n                     <svg height=\"10\" width=\"10\" id='{{ dag.dag_id }}' style=\"display: block;\"></svg>\n                 </td>\n-                <td class=\"text-center\" style=\"width:160px;\">\n+                <td class=\"text-center\" style=\"width:180px;\">\n                 {% if dag %}\n+                  {% if dag_id in paused_dags %}\n+                    <a href=\"{{ url_for(\"airflow.paused\", dag_id=dag.dag_id) }}\" title=\"Paused\">\n+                        <span class=\"glyphicon glyphicon-pause\" aria-hidden=\"true\"></span>",
    "path": "airflow/www/templates/airflow/dags.html",
    "commit_id": "98bd8387fb7d90a5c2a17dfbe111fb22954e15b0",
    "original_commit_id": "065db76a6093b77e42f4c3d030052415e32e62eb",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "`title=\"Click this to pause this DAG\"`\n\nThese can be confusing as the pause sign can be interpreted as an action or as a state, not sure how to make that 100% clear\n",
    "created_at": "2015-08-01T06:29:10Z",
    "updated_at": "2015-08-14T05:58:39Z",
    "html_url": "https://github.com/apache/airflow/pull/211#discussion_r36031256",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/211",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/36031256"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/211#discussion_r36031256"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/211"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/36031256/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 62,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 18,
    "position": 50,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/36031262",
    "pull_request_review_id": null,
    "id": 36031262,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MDMxMjYy",
    "diff_hunk": "@@ -49,8 +49,17 @@\n                 <td style=\"padding:0px; width:180px; height:10px;\">\n                     <svg height=\"10\" width=\"10\" id='{{ dag.dag_id }}' style=\"display: block;\"></svg>\n                 </td>\n-                <td class=\"text-center\" style=\"width:160px;\">\n+                <td class=\"text-center\" style=\"width:180px;\">\n                 {% if dag %}\n+                  {% if dag_id in paused_dags %}\n+                    <a href=\"{{ url_for(\"airflow.paused\", dag_id=dag.dag_id) }}\" title=\"Paused\">\n+                        <span class=\"glyphicon glyphicon-pause\" aria-hidden=\"true\"></span>\n+                    </a>\n+                  {% else %}\n+                    <a href=\"{{ url_for(\"airflow.paused\", dag_id=dag.dag_id) }}\" title=\"Active\">\n+                        <span class=\"glyphicon glyphicon-play\" aria-hidden=\"true\"></span>",
    "path": "airflow/www/templates/airflow/dags.html",
    "commit_id": "98bd8387fb7d90a5c2a17dfbe111fb22954e15b0",
    "original_commit_id": "065db76a6093b77e42f4c3d030052415e32e62eb",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "`title=\"Click to resume this DAG\"`\n",
    "created_at": "2015-08-01T06:29:54Z",
    "updated_at": "2015-08-14T05:58:39Z",
    "html_url": "https://github.com/apache/airflow/pull/211#discussion_r36031262",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/211",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/36031262"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/211#discussion_r36031262"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/211"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/36031262/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 66,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 22,
    "position": 54,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/36058622",
    "pull_request_review_id": null,
    "id": 36058622,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MDU4NjIy",
    "diff_hunk": "@@ -0,0 +1,71 @@\n+from slackclient import SlackClient\n+from airflow.models import BaseOperator\n+\n+\n+class SlackAPIOperator(BaseOperator):\n+    \"\"\"\n+    Base Slack Operator\n+    The SlackAPIPostOperator is derived from this operator.\n+    In the future additional Slack API Operators will be derived from this class as well\n+\n+    :param token: Slack api token\n+    :type token: String",
    "path": "airflow/operators/slack_operator.py",
    "commit_id": "04d0916a8d950b1d48ee6c2de129ad346cbba781",
    "original_commit_id": "04d0916a8d950b1d48ee6c2de129ad346cbba781",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "`NameError: name 'String' is not defined` -> str\n",
    "created_at": "2015-08-03T06:21:10Z",
    "updated_at": "2015-08-03T06:21:10Z",
    "html_url": "https://github.com/apache/airflow/pull/212#discussion_r36058622",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/212",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/36058622"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/212#discussion_r36058622"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/212"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/36058622/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 12,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 12,
    "position": 12,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/36058812",
    "pull_request_review_id": null,
    "id": 36058812,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MDU4ODEy",
    "diff_hunk": "@@ -63,6 +63,8 @@ Operator API\n         PythonOperator,\n         S3KeySensor,\n         S3ToHiveTransfer,\n+        SlackAPIOperator,",
    "path": "docs/code.rst",
    "commit_id": "04d0916a8d950b1d48ee6c2de129ad346cbba781",
    "original_commit_id": "04d0916a8d950b1d48ee6c2de129ad346cbba781",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "I think sphinx won't be able to find this one if it's not added to `operators/__init__.py`\n",
    "created_at": "2015-08-03T06:27:25Z",
    "updated_at": "2015-08-03T06:27:25Z",
    "html_url": "https://github.com/apache/airflow/pull/212#discussion_r36058812",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/212",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/36058812"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/212#discussion_r36058812"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/212"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/36058812/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 66,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 4,
    "position": 4,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/36490825",
    "pull_request_review_id": null,
    "id": 36490825,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDkwODI1",
    "diff_hunk": "@@ -993,13 +993,19 @@ def tree(self):\n         else:\n             base_date = dateutil.parser.parse(base_date)\n \n+         start_date = dag.start_date",
    "path": "airflow/www/app.py",
    "commit_id": "b313bebf41374c2271b39128501ea0ed1a11fb0e",
    "original_commit_id": "2a6611a62f4ad810723325f59adb3eaef257f707",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "indent looks off\n",
    "created_at": "2015-08-07T04:48:37Z",
    "updated_at": "2015-08-07T08:51:54Z",
    "html_url": "https://github.com/apache/airflow/pull/235#discussion_r36490825",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/235",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/36490825"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/235#discussion_r36490825"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/235"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/36490825/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 4,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/37319800",
    "pull_request_review_id": null,
    "id": 37319800,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzE5ODAw",
    "diff_hunk": "@@ -2010,6 +2129,105 @@ def get(cls, key, session, deserialize_json=False):\n         return v\n \n \n+class XCom(Base):\n+    \"\"\"\n+    Base class for XCom objects.\n+    \"\"\"\n+    __tablename__ = \"xcom\"\n+\n+    id = Column(Integer, primary_key=True)\n+    key = Column(String)\n+    value = Column(PickleType(pickler=dill))\n+    timestamp = Column(DateTime, server_default=func.current_timestamp())\n+    visible_on = Column(DateTime, nullable=False)\n+\n+    # source information\n+    task = Column(String, nullable=False)",
    "path": "airflow/models.py",
    "commit_id": "0235a9bfc2a37e98f769228a2e50bc4dc8841e6b",
    "original_commit_id": "3bd84ccda554c593e43c491507cfbb3400b3db57",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "`task_id = Column(String(ID_LEN), nullable=False)`\n",
    "created_at": "2015-08-18T16:24:40Z",
    "updated_at": "2015-08-20T17:31:05Z",
    "html_url": "https://github.com/apache/airflow/pull/260#discussion_r37319800",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/260",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/37319800"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/260#discussion_r37319800"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/260"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/37319800/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 210,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/37319834",
    "pull_request_review_id": null,
    "id": 37319834,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzE5ODM0",
    "diff_hunk": "@@ -2010,6 +2129,105 @@ def get(cls, key, session, deserialize_json=False):\n         return v\n \n \n+class XCom(Base):\n+    \"\"\"\n+    Base class for XCom objects.\n+    \"\"\"\n+    __tablename__ = \"xcom\"\n+\n+    id = Column(Integer, primary_key=True)\n+    key = Column(String)\n+    value = Column(PickleType(pickler=dill))\n+    timestamp = Column(DateTime, server_default=func.current_timestamp())\n+    visible_on = Column(DateTime, nullable=False)\n+\n+    # source information\n+    task = Column(String, nullable=False)\n+    dag = Column(String, nullable=False)",
    "path": "airflow/models.py",
    "commit_id": "0235a9bfc2a37e98f769228a2e50bc4dc8841e6b",
    "original_commit_id": "3bd84ccda554c593e43c491507cfbb3400b3db57",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "`dag_id = Column(String(ID_LEN), nullable=False)`\n",
    "created_at": "2015-08-18T16:24:56Z",
    "updated_at": "2015-08-20T17:31:05Z",
    "html_url": "https://github.com/apache/airflow/pull/260#discussion_r37319834",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/260",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/37319834"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/260#discussion_r37319834"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/260"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/37319834/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 211,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/37320104",
    "pull_request_review_id": null,
    "id": 37320104,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzIwMTA0",
    "diff_hunk": "@@ -2010,6 +2129,105 @@ def get(cls, key, session, deserialize_json=False):\n         return v\n \n \n+class XCom(Base):\n+    \"\"\"\n+    Base class for XCom objects.\n+    \"\"\"\n+    __tablename__ = \"xcom\"\n+\n+    id = Column(Integer, primary_key=True)\n+    key = Column(String)\n+    value = Column(PickleType(pickler=dill))\n+    timestamp = Column(DateTime, server_default=func.current_timestamp())\n+    visible_on = Column(DateTime, nullable=False)",
    "path": "airflow/models.py",
    "commit_id": "0235a9bfc2a37e98f769228a2e50bc4dc8841e6b",
    "original_commit_id": "3bd84ccda554c593e43c491507cfbb3400b3db57",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "could also be called `execution_date` for consistency with the TaskInstance pk, but it may be confusing too. I'm ok with `visible_on`.\n",
    "created_at": "2015-08-18T16:27:27Z",
    "updated_at": "2015-08-20T17:31:05Z",
    "html_url": "https://github.com/apache/airflow/pull/260#discussion_r37320104",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/260",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/37320104"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/260#discussion_r37320104"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/260"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/37320104/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 207,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/37320290",
    "pull_request_review_id": null,
    "id": 37320290,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzIwMjkw",
    "diff_hunk": "@@ -2010,6 +2129,105 @@ def get(cls, key, session, deserialize_json=False):\n         return v\n \n \n+class XCom(Base):\n+    \"\"\"\n+    Base class for XCom objects.\n+    \"\"\"\n+    __tablename__ = \"xcom\"\n+\n+    id = Column(Integer, primary_key=True)\n+    key = Column(String)\n+    value = Column(PickleType(pickler=dill))\n+    timestamp = Column(DateTime, server_default=func.current_timestamp())\n+    visible_on = Column(DateTime, nullable=False)\n+\n+    # source information\n+    task = Column(String, nullable=False)\n+    dag = Column(String, nullable=False)\n+\n+    def __repr__(self):\n+        return '<XCom \"{key}\" ({task} @ {visible_on})>'.format(\n+            key=self.key,\n+            task=self.task,\n+            visible_on=self.visible_on)\n+\n+    @classmethod\n+    @provide_session\n+    def set(\n+            cls,\n+            key,\n+            value,\n+            visible_on,\n+            task,\n+            dag,\n+            session=None):\n+        \"\"\"\n+        Store an XCom value.\n+        \"\"\"\n+\n+        if not isinstance(task, basestring) or not isinstance(dag, basestring):\n+            raise TypeError('Expected string; received {}'.format(type(task)))\n+\n+        session.expunge_all()",
    "path": "airflow/models.py",
    "commit_id": "0235a9bfc2a37e98f769228a2e50bc4dc8841e6b",
    "original_commit_id": "3bd84ccda554c593e43c491507cfbb3400b3db57",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Is this needed?\n",
    "created_at": "2015-08-18T16:29:06Z",
    "updated_at": "2015-08-20T17:31:05Z",
    "html_url": "https://github.com/apache/airflow/pull/260#discussion_r37320290",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/260",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/37320290"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/260#discussion_r37320290"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/260"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/37320290/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 236,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/37320738",
    "pull_request_review_id": null,
    "id": 37320738,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzIwNzM4",
    "diff_hunk": "@@ -2010,6 +2129,105 @@ def get(cls, key, session, deserialize_json=False):\n         return v\n \n \n+class XCom(Base):\n+    \"\"\"\n+    Base class for XCom objects.\n+    \"\"\"\n+    __tablename__ = \"xcom\"\n+\n+    id = Column(Integer, primary_key=True)\n+    key = Column(String)\n+    value = Column(PickleType(pickler=dill))\n+    timestamp = Column(DateTime, server_default=func.current_timestamp())\n+    visible_on = Column(DateTime, nullable=False)\n+\n+    # source information\n+    task = Column(String, nullable=False)\n+    dag = Column(String, nullable=False)\n+\n+    def __repr__(self):\n+        return '<XCom \"{key}\" ({task} @ {visible_on})>'.format(\n+            key=self.key,\n+            task=self.task,\n+            visible_on=self.visible_on)\n+\n+    @classmethod\n+    @provide_session\n+    def set(\n+            cls,\n+            key,\n+            value,\n+            visible_on,\n+            task,\n+            dag,\n+            session=None):\n+        \"\"\"\n+        Store an XCom value.\n+        \"\"\"\n+\n+        if not isinstance(task, basestring) or not isinstance(dag, basestring):\n+            raise TypeError('Expected string; received {}'.format(type(task)))\n+\n+        session.expunge_all()\n+        session.add(XCom(\n+            key=key,\n+            value=value,\n+            visible_on=visible_on,\n+            task=task,\n+            dag=dag))\n+        session.commit()",
    "path": "airflow/models.py",
    "commit_id": "0235a9bfc2a37e98f769228a2e50bc4dc8841e6b",
    "original_commit_id": "3bd84ccda554c593e43c491507cfbb3400b3db57",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "the `@provide_session` decorator will commit for you if no external session is passed to the function, if a session is passed, it assumes the caller is in charge of the transaction and doesn't want the function to commit on its behalf. \n",
    "created_at": "2015-08-18T16:32:44Z",
    "updated_at": "2015-08-20T17:31:05Z",
    "html_url": "https://github.com/apache/airflow/pull/260#discussion_r37320738",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/260",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/37320738"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/260#discussion_r37320738"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/260"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/37320738/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 2192,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 243,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/37321734",
    "pull_request_review_id": null,
    "id": 37321734,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzIxNzM0",
    "diff_hunk": "@@ -2010,6 +2129,105 @@ def get(cls, key, session, deserialize_json=False):\n         return v\n \n \n+class XCom(Base):\n+    \"\"\"\n+    Base class for XCom objects.\n+    \"\"\"\n+    __tablename__ = \"xcom\"\n+\n+    id = Column(Integer, primary_key=True)\n+    key = Column(String)\n+    value = Column(PickleType(pickler=dill))\n+    timestamp = Column(DateTime, server_default=func.current_timestamp())\n+    visible_on = Column(DateTime, nullable=False)\n+\n+    # source information\n+    task = Column(String, nullable=False)\n+    dag = Column(String, nullable=False)\n+\n+    def __repr__(self):\n+        return '<XCom \"{key}\" ({task} @ {visible_on})>'.format(\n+            key=self.key,\n+            task=self.task,\n+            visible_on=self.visible_on)\n+\n+    @classmethod\n+    @provide_session\n+    def set(\n+            cls,\n+            key,\n+            value,\n+            visible_on,\n+            task,\n+            dag,\n+            session=None):\n+        \"\"\"\n+        Store an XCom value.\n+        \"\"\"\n+\n+        if not isinstance(task, basestring) or not isinstance(dag, basestring):\n+            raise TypeError('Expected string; received {}'.format(type(task)))\n+\n+        session.expunge_all()\n+        session.add(XCom(\n+            key=key,\n+            value=value,\n+            visible_on=visible_on,\n+            task=task,\n+            dag=dag))\n+        session.commit()\n+\n+    @classmethod\n+    @provide_session\n+    def get(\n+            cls,\n+            visible_on,\n+            key=None,\n+            tasks=None,\n+            dags=None,\n+            include_prior_dates=False,\n+            limit=None,\n+            session=None):\n+        \"\"\"\n+        Retrieve an XCom value, optionally meeting certain criteria\n+        \"\"\"\n+        filters = []\n+        if key:\n+            filters.append(cls.key == key)\n+        if tasks:\n+            filters.append(cls.task.in_(as_tuple(tasks)))\n+        if dags:\n+            filters.append(cls.dag.in_(as_tuple(dags)))\n+        if include_prior_dates:\n+            filters.append(cls.visible_on <= visible_on)\n+        else:\n+            filters.append(cls.visible_on == visible_on)\n+\n+        query = (\n+            session.query(cls)\n+            .filter(and_(*filters))\n+            .order_by(cls.visible_on.desc(), cls.timestamp.desc())\n+            .limit(limit or 1))\n+",
    "path": "airflow/models.py",
    "commit_id": "0235a9bfc2a37e98f769228a2e50bc4dc8841e6b",
    "original_commit_id": "3bd84ccda554c593e43c491507cfbb3400b3db57",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "As much as I like pandas dataframe, I still think that returning an array of expunged XCom objects would be more comprehensive. The XCom object has all the metadata and the value so it's ideal. \n\nAlso maybe there's a need for distinct methods to `get` one or `get_many`, and matching with `pull` and `pull_many`\n",
    "created_at": "2015-08-18T16:41:59Z",
    "updated_at": "2015-08-20T17:31:05Z",
    "html_url": "https://github.com/apache/airflow/pull/260#discussion_r37321734",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/260",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/37321734"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/260#discussion_r37321734"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/260"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/37321734/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 2224,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 276,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/37322063",
    "pull_request_review_id": null,
    "id": 37322063,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzIyMDYz",
    "diff_hunk": "@@ -2010,6 +2129,105 @@ def get(cls, key, session, deserialize_json=False):\n         return v\n \n \n+class XCom(Base):\n+    \"\"\"\n+    Base class for XCom objects.\n+    \"\"\"\n+    __tablename__ = \"xcom\"\n+\n+    id = Column(Integer, primary_key=True)\n+    key = Column(String)\n+    value = Column(PickleType(pickler=dill))\n+    timestamp = Column(DateTime, server_default=func.current_timestamp())\n+    visible_on = Column(DateTime, nullable=False)\n+\n+    # source information\n+    task = Column(String, nullable=False)\n+    dag = Column(String, nullable=False)\n+\n+    def __repr__(self):\n+        return '<XCom \"{key}\" ({task} @ {visible_on})>'.format(\n+            key=self.key,\n+            task=self.task,\n+            visible_on=self.visible_on)\n+\n+    @classmethod\n+    @provide_session\n+    def set(\n+            cls,\n+            key,\n+            value,\n+            visible_on,\n+            task,\n+            dag,\n+            session=None):\n+        \"\"\"\n+        Store an XCom value.\n+        \"\"\"\n+\n+        if not isinstance(task, basestring) or not isinstance(dag, basestring):\n+            raise TypeError('Expected string; received {}'.format(type(task)))\n+\n+        session.expunge_all()\n+        session.add(XCom(\n+            key=key,\n+            value=value,\n+            visible_on=visible_on,\n+            task=task,\n+            dag=dag))\n+        session.commit()\n+\n+    @classmethod\n+    @provide_session\n+    def get(\n+            cls,\n+            visible_on,\n+            key=None,\n+            tasks=None,\n+            dags=None,\n+            include_prior_dates=False,\n+            limit=None,\n+            session=None):\n+        \"\"\"\n+        Retrieve an XCom value, optionally meeting certain criteria\n+        \"\"\"\n+        filters = []\n+        if key:\n+            filters.append(cls.key == key)\n+        if tasks:\n+            filters.append(cls.task.in_(as_tuple(tasks)))\n+        if dags:\n+            filters.append(cls.dag.in_(as_tuple(dags)))\n+        if include_prior_dates:\n+            filters.append(cls.visible_on <= visible_on)\n+        else:\n+            filters.append(cls.visible_on == visible_on)\n+\n+        query = (\n+            session.query(cls)\n+            .filter(and_(*filters))\n+            .order_by(cls.visible_on.desc(), cls.timestamp.desc())\n+            .limit(limit or 1))\n+\n+        result = pd.read_sql(\n+            sql=query.statement,\n+            con=query.session.bind,\n+            index_col='id',\n+            parse_dates=['timestamp', 'visible_on'])\n+\n+        result.drop_duplicates(",
    "path": "airflow/models.py",
    "commit_id": "0235a9bfc2a37e98f769228a2e50bc4dc8841e6b",
    "original_commit_id": "3bd84ccda554c593e43c491507cfbb3400b3db57",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "I'd prevent the insertion of dups instead of doing this on the way out. I think you can simply add a `unique=True` on these 4 columns in the model. I wouldn't worry about error handling as sqlalchemy will raise errors for you.\n",
    "created_at": "2015-08-18T16:44:44Z",
    "updated_at": "2015-08-20T17:31:05Z",
    "html_url": "https://github.com/apache/airflow/pull/260#discussion_r37322063",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/260",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/37322063"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/260#discussion_r37322063"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/260"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/37322063/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 283,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/37322260",
    "pull_request_review_id": null,
    "id": 37322260,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzIyMjYw",
    "diff_hunk": "@@ -2010,6 +2129,105 @@ def get(cls, key, session, deserialize_json=False):\n         return v\n \n \n+class XCom(Base):\n+    \"\"\"\n+    Base class for XCom objects.\n+    \"\"\"\n+    __tablename__ = \"xcom\"\n+\n+    id = Column(Integer, primary_key=True)\n+    key = Column(String)\n+    value = Column(PickleType(pickler=dill))\n+    timestamp = Column(DateTime, server_default=func.current_timestamp())\n+    visible_on = Column(DateTime, nullable=False)\n+\n+    # source information\n+    task = Column(String, nullable=False)\n+    dag = Column(String, nullable=False)\n+\n+    def __repr__(self):\n+        return '<XCom \"{key}\" ({task} @ {visible_on})>'.format(\n+            key=self.key,\n+            task=self.task,\n+            visible_on=self.visible_on)\n+\n+    @classmethod\n+    @provide_session\n+    def set(\n+            cls,\n+            key,\n+            value,\n+            visible_on,\n+            task,\n+            dag,\n+            session=None):\n+        \"\"\"\n+        Store an XCom value.\n+        \"\"\"\n+\n+        if not isinstance(task, basestring) or not isinstance(dag, basestring):\n+            raise TypeError('Expected string; received {}'.format(type(task)))\n+\n+        session.expunge_all()\n+        session.add(XCom(\n+            key=key,\n+            value=value,\n+            visible_on=visible_on,\n+            task=task,\n+            dag=dag))\n+        session.commit()\n+\n+    @classmethod\n+    @provide_session\n+    def get(\n+            cls,\n+            visible_on,\n+            key=None,\n+            tasks=None,\n+            dags=None,\n+            include_prior_dates=False,\n+            limit=None,\n+            session=None):\n+        \"\"\"\n+        Retrieve an XCom value, optionally meeting certain criteria\n+        \"\"\"\n+        filters = []\n+        if key:\n+            filters.append(cls.key == key)\n+        if tasks:\n+            filters.append(cls.task.in_(as_tuple(tasks)))\n+        if dags:\n+            filters.append(cls.dag.in_(as_tuple(dags)))\n+        if include_prior_dates:\n+            filters.append(cls.visible_on <= visible_on)\n+        else:\n+            filters.append(cls.visible_on == visible_on)\n+\n+        query = (\n+            session.query(cls)\n+            .filter(and_(*filters))\n+            .order_by(cls.visible_on.desc(), cls.timestamp.desc())\n+            .limit(limit or 1))\n+\n+        result = pd.read_sql(\n+            sql=query.statement,\n+            con=query.session.bind,\n+            index_col='id',\n+            parse_dates=['timestamp', 'visible_on'])\n+\n+        result.drop_duplicates(\n+            subset=['key', 'visible_on', 'task', 'dag'],\n+            inplace=True)\n+\n+        if result.empty:\n+            raise XComException('No XCom values found.')",
    "path": "airflow/models.py",
    "commit_id": "0235a9bfc2a37e98f769228a2e50bc4dc8841e6b",
    "original_commit_id": "3bd84ccda554c593e43c491507cfbb3400b3db57",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "I'm not sure if I would raise or just return None...\n",
    "created_at": "2015-08-18T16:46:31Z",
    "updated_at": "2015-08-20T17:31:05Z",
    "html_url": "https://github.com/apache/airflow/pull/260#discussion_r37322260",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/260",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/37322260"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/260#discussion_r37322260"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/260"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/37322260/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 288,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/37322333",
    "pull_request_review_id": null,
    "id": 37322333,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzIyMzMz",
    "diff_hunk": "@@ -2010,6 +2129,105 @@ def get(cls, key, session, deserialize_json=False):\n         return v\n \n \n+class XCom(Base):\n+    \"\"\"\n+    Base class for XCom objects.\n+    \"\"\"\n+    __tablename__ = \"xcom\"\n+\n+    id = Column(Integer, primary_key=True)\n+    key = Column(String)\n+    value = Column(PickleType(pickler=dill))\n+    timestamp = Column(DateTime, server_default=func.current_timestamp())\n+    visible_on = Column(DateTime, nullable=False)\n+\n+    # source information\n+    task = Column(String, nullable=False)\n+    dag = Column(String, nullable=False)\n+\n+    def __repr__(self):\n+        return '<XCom \"{key}\" ({task} @ {visible_on})>'.format(\n+            key=self.key,\n+            task=self.task,\n+            visible_on=self.visible_on)\n+\n+    @classmethod\n+    @provide_session\n+    def set(\n+            cls,\n+            key,\n+            value,\n+            visible_on,\n+            task,\n+            dag,\n+            session=None):\n+        \"\"\"\n+        Store an XCom value.\n+        \"\"\"\n+\n+        if not isinstance(task, basestring) or not isinstance(dag, basestring):",
    "path": "airflow/models.py",
    "commit_id": "0235a9bfc2a37e98f769228a2e50bc4dc8841e6b",
    "original_commit_id": "3bd84ccda554c593e43c491507cfbb3400b3db57",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "You can also let the underlying library handle this and fail, but type checking isn't a bad thing to have...\n",
    "created_at": "2015-08-18T16:47:17Z",
    "updated_at": "2015-08-20T17:31:05Z",
    "html_url": "https://github.com/apache/airflow/pull/260#discussion_r37322333",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/260",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/37322333"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/260#discussion_r37322333"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/260"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/37322333/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 233,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/37373293",
    "pull_request_review_id": null,
    "id": 37373293,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzczMjkz",
    "diff_hunk": "@@ -2010,6 +2129,105 @@ def get(cls, key, session, deserialize_json=False):\n         return v\n \n \n+class XCom(Base):\n+    \"\"\"\n+    Base class for XCom objects.\n+    \"\"\"\n+    __tablename__ = \"xcom\"\n+\n+    id = Column(Integer, primary_key=True)\n+    key = Column(String)\n+    value = Column(PickleType(pickler=dill))\n+    timestamp = Column(DateTime, server_default=func.current_timestamp())\n+    visible_on = Column(DateTime, nullable=False)",
    "path": "airflow/models.py",
    "commit_id": "0235a9bfc2a37e98f769228a2e50bc4dc8841e6b",
    "original_commit_id": "3bd84ccda554c593e43c491507cfbb3400b3db57",
    "user": {
      "login": "jlowin",
      "id": 153965,
      "node_id": "MDQ6VXNlcjE1Mzk2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/153965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jlowin",
      "html_url": "https://github.com/jlowin",
      "followers_url": "https://api.github.com/users/jlowin/followers",
      "following_url": "https://api.github.com/users/jlowin/following{/other_user}",
      "gists_url": "https://api.github.com/users/jlowin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jlowin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jlowin/subscriptions",
      "organizations_url": "https://api.github.com/users/jlowin/orgs",
      "repos_url": "https://api.github.com/users/jlowin/repos",
      "events_url": "https://api.github.com/users/jlowin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jlowin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "execution_date is good -- will change.\n",
    "created_at": "2015-08-19T01:51:09Z",
    "updated_at": "2015-08-20T17:31:05Z",
    "html_url": "https://github.com/apache/airflow/pull/260#discussion_r37373293",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/260",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/37373293"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/260#discussion_r37373293"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/260"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/37373293/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 207,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/37373363",
    "pull_request_review_id": null,
    "id": 37373363,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzczMzYz",
    "diff_hunk": "@@ -2010,6 +2129,105 @@ def get(cls, key, session, deserialize_json=False):\n         return v\n \n \n+class XCom(Base):\n+    \"\"\"\n+    Base class for XCom objects.\n+    \"\"\"\n+    __tablename__ = \"xcom\"\n+\n+    id = Column(Integer, primary_key=True)\n+    key = Column(String)\n+    value = Column(PickleType(pickler=dill))\n+    timestamp = Column(DateTime, server_default=func.current_timestamp())\n+    visible_on = Column(DateTime, nullable=False)\n+\n+    # source information\n+    task = Column(String, nullable=False)\n+    dag = Column(String, nullable=False)\n+\n+    def __repr__(self):\n+        return '<XCom \"{key}\" ({task} @ {visible_on})>'.format(\n+            key=self.key,\n+            task=self.task,\n+            visible_on=self.visible_on)\n+\n+    @classmethod\n+    @provide_session\n+    def set(\n+            cls,\n+            key,\n+            value,\n+            visible_on,\n+            task,\n+            dag,\n+            session=None):\n+        \"\"\"\n+        Store an XCom value.\n+        \"\"\"\n+\n+        if not isinstance(task, basestring) or not isinstance(dag, basestring):\n+            raise TypeError('Expected string; received {}'.format(type(task)))\n+\n+        session.expunge_all()\n+        session.add(XCom(\n+            key=key,\n+            value=value,\n+            visible_on=visible_on,\n+            task=task,\n+            dag=dag))\n+        session.commit()",
    "path": "airflow/models.py",
    "commit_id": "0235a9bfc2a37e98f769228a2e50bc4dc8841e6b",
    "original_commit_id": "3bd84ccda554c593e43c491507cfbb3400b3db57",
    "user": {
      "login": "jlowin",
      "id": 153965,
      "node_id": "MDQ6VXNlcjE1Mzk2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/153965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jlowin",
      "html_url": "https://github.com/jlowin",
      "followers_url": "https://api.github.com/users/jlowin/followers",
      "following_url": "https://api.github.com/users/jlowin/following{/other_user}",
      "gists_url": "https://api.github.com/users/jlowin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jlowin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jlowin/subscriptions",
      "organizations_url": "https://api.github.com/users/jlowin/orgs",
      "repos_url": "https://api.github.com/users/jlowin/repos",
      "events_url": "https://api.github.com/users/jlowin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jlowin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "got it -- that's great. I think I copied all this boilerplate from somewhere to be safe. I'll pull it out.\n",
    "created_at": "2015-08-19T01:52:32Z",
    "updated_at": "2015-08-20T17:31:05Z",
    "html_url": "https://github.com/apache/airflow/pull/260#discussion_r37373363",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/260",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/37373363"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/260#discussion_r37373363"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/260"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/37373363/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 2192,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 243,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/37373808",
    "pull_request_review_id": null,
    "id": 37373808,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzczODA4",
    "diff_hunk": "@@ -2010,6 +2129,105 @@ def get(cls, key, session, deserialize_json=False):\n         return v\n \n \n+class XCom(Base):\n+    \"\"\"\n+    Base class for XCom objects.\n+    \"\"\"\n+    __tablename__ = \"xcom\"\n+\n+    id = Column(Integer, primary_key=True)\n+    key = Column(String)\n+    value = Column(PickleType(pickler=dill))\n+    timestamp = Column(DateTime, server_default=func.current_timestamp())\n+    visible_on = Column(DateTime, nullable=False)\n+\n+    # source information\n+    task = Column(String, nullable=False)\n+    dag = Column(String, nullable=False)\n+\n+    def __repr__(self):\n+        return '<XCom \"{key}\" ({task} @ {visible_on})>'.format(\n+            key=self.key,\n+            task=self.task,\n+            visible_on=self.visible_on)\n+\n+    @classmethod\n+    @provide_session\n+    def set(\n+            cls,\n+            key,\n+            value,\n+            visible_on,\n+            task,\n+            dag,\n+            session=None):\n+        \"\"\"\n+        Store an XCom value.\n+        \"\"\"\n+\n+        if not isinstance(task, basestring) or not isinstance(dag, basestring):\n+            raise TypeError('Expected string; received {}'.format(type(task)))\n+\n+        session.expunge_all()\n+        session.add(XCom(\n+            key=key,\n+            value=value,\n+            visible_on=visible_on,\n+            task=task,\n+            dag=dag))\n+        session.commit()\n+\n+    @classmethod\n+    @provide_session\n+    def get(\n+            cls,\n+            visible_on,\n+            key=None,\n+            tasks=None,\n+            dags=None,\n+            include_prior_dates=False,\n+            limit=None,\n+            session=None):\n+        \"\"\"\n+        Retrieve an XCom value, optionally meeting certain criteria\n+        \"\"\"\n+        filters = []\n+        if key:\n+            filters.append(cls.key == key)\n+        if tasks:\n+            filters.append(cls.task.in_(as_tuple(tasks)))\n+        if dags:\n+            filters.append(cls.dag.in_(as_tuple(dags)))\n+        if include_prior_dates:\n+            filters.append(cls.visible_on <= visible_on)\n+        else:\n+            filters.append(cls.visible_on == visible_on)\n+\n+        query = (\n+            session.query(cls)\n+            .filter(and_(*filters))\n+            .order_by(cls.visible_on.desc(), cls.timestamp.desc())\n+            .limit(limit or 1))\n+",
    "path": "airflow/models.py",
    "commit_id": "0235a9bfc2a37e98f769228a2e50bc4dc8841e6b",
    "original_commit_id": "3bd84ccda554c593e43c491507cfbb3400b3db57",
    "user": {
      "login": "jlowin",
      "id": 153965,
      "node_id": "MDQ6VXNlcjE1Mzk2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/153965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jlowin",
      "html_url": "https://github.com/jlowin",
      "followers_url": "https://api.github.com/users/jlowin/followers",
      "following_url": "https://api.github.com/users/jlowin/following{/other_user}",
      "gists_url": "https://api.github.com/users/jlowin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jlowin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jlowin/subscriptions",
      "organizations_url": "https://api.github.com/users/jlowin/orgs",
      "repos_url": "https://api.github.com/users/jlowin/repos",
      "events_url": "https://api.github.com/users/jlowin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jlowin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Ok. the DataFrame was more useful in the previous (more complicated) version, where there were more fields to query. Let's drop it. And while we're at it, maybe we drop the whole `limit` concept entirely? It was great for debugging but I think it just confuses things -- I'm not sure what the real world use case would be. If users really want the XCom objects instead of values (though I'm not sure they will), then maybe a `return_xcom=True` argument could be added.\n\nSo there are two return types:\n\n``` python\nti.xcom_pull(key=optional, task_id=t) # returns a value\nti.xcom_pull(key=optional, task_id=[t1, t2, t3]) # returns a list of 3 values\n```\n",
    "created_at": "2015-08-19T02:02:20Z",
    "updated_at": "2015-08-20T17:31:05Z",
    "html_url": "https://github.com/apache/airflow/pull/260#discussion_r37373808",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/260",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/37373808"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/260#discussion_r37373808"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/260"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/37373808/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 2224,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 276,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/37374131",
    "pull_request_review_id": null,
    "id": 37374131,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzc0MTMx",
    "diff_hunk": "@@ -2010,6 +2129,105 @@ def get(cls, key, session, deserialize_json=False):\n         return v\n \n \n+class XCom(Base):\n+    \"\"\"\n+    Base class for XCom objects.\n+    \"\"\"\n+    __tablename__ = \"xcom\"\n+\n+    id = Column(Integer, primary_key=True)\n+    key = Column(String)\n+    value = Column(PickleType(pickler=dill))\n+    timestamp = Column(DateTime, server_default=func.current_timestamp())\n+    visible_on = Column(DateTime, nullable=False)\n+\n+    # source information\n+    task = Column(String, nullable=False)\n+    dag = Column(String, nullable=False)\n+\n+    def __repr__(self):\n+        return '<XCom \"{key}\" ({task} @ {visible_on})>'.format(\n+            key=self.key,\n+            task=self.task,\n+            visible_on=self.visible_on)\n+\n+    @classmethod\n+    @provide_session\n+    def set(\n+            cls,\n+            key,\n+            value,\n+            visible_on,\n+            task,\n+            dag,\n+            session=None):\n+        \"\"\"\n+        Store an XCom value.\n+        \"\"\"\n+\n+        if not isinstance(task, basestring) or not isinstance(dag, basestring):\n+            raise TypeError('Expected string; received {}'.format(type(task)))\n+\n+        session.expunge_all()\n+        session.add(XCom(\n+            key=key,\n+            value=value,\n+            visible_on=visible_on,\n+            task=task,\n+            dag=dag))\n+        session.commit()\n+\n+    @classmethod\n+    @provide_session\n+    def get(\n+            cls,\n+            visible_on,\n+            key=None,\n+            tasks=None,\n+            dags=None,\n+            include_prior_dates=False,\n+            limit=None,\n+            session=None):\n+        \"\"\"\n+        Retrieve an XCom value, optionally meeting certain criteria\n+        \"\"\"\n+        filters = []\n+        if key:\n+            filters.append(cls.key == key)\n+        if tasks:\n+            filters.append(cls.task.in_(as_tuple(tasks)))\n+        if dags:\n+            filters.append(cls.dag.in_(as_tuple(dags)))\n+        if include_prior_dates:\n+            filters.append(cls.visible_on <= visible_on)\n+        else:\n+            filters.append(cls.visible_on == visible_on)\n+\n+        query = (\n+            session.query(cls)\n+            .filter(and_(*filters))\n+            .order_by(cls.visible_on.desc(), cls.timestamp.desc())\n+            .limit(limit or 1))\n+\n+        result = pd.read_sql(\n+            sql=query.statement,\n+            con=query.session.bind,\n+            index_col='id',\n+            parse_dates=['timestamp', 'visible_on'])\n+\n+        result.drop_duplicates(",
    "path": "airflow/models.py",
    "commit_id": "0235a9bfc2a37e98f769228a2e50bc4dc8841e6b",
    "original_commit_id": "3bd84ccda554c593e43c491507cfbb3400b3db57",
    "user": {
      "login": "jlowin",
      "id": 153965,
      "node_id": "MDQ6VXNlcjE1Mzk2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/153965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jlowin",
      "html_url": "https://github.com/jlowin",
      "followers_url": "https://api.github.com/users/jlowin/followers",
      "following_url": "https://api.github.com/users/jlowin/following{/other_user}",
      "gists_url": "https://api.github.com/users/jlowin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jlowin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jlowin/subscriptions",
      "organizations_url": "https://api.github.com/users/jlowin/orgs",
      "repos_url": "https://api.github.com/users/jlowin/repos",
      "events_url": "https://api.github.com/users/jlowin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jlowin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "SO this actually turns out to be tricky. I'm not sure an XCom is actually guaranteed to be unique because users could rerun a DAG for a given `execution_date` and if we don't delete the previously-generated XComs, it would violate the constraint when the new XComs are added.\n\nI suppose I could watch for constraint violations and then UPDATE that row rather than INSERT the new one.\n\nFurther complicating this, I couldn't find an efficient way to remove the duplicates in database-agnostic SQL (in Postgres it's simply `DISTINCT ON()`) so that's why I resorted to doing it in-memory. \n\nOpen to any suggestions!\n",
    "created_at": "2015-08-19T02:10:45Z",
    "updated_at": "2015-08-20T17:31:05Z",
    "html_url": "https://github.com/apache/airflow/pull/260#discussion_r37374131",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/260",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/37374131"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/260#discussion_r37374131"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/260"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/37374131/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 283,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/37374161",
    "pull_request_review_id": null,
    "id": 37374161,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzc0MTYx",
    "diff_hunk": "@@ -2010,6 +2129,105 @@ def get(cls, key, session, deserialize_json=False):\n         return v\n \n \n+class XCom(Base):\n+    \"\"\"\n+    Base class for XCom objects.\n+    \"\"\"\n+    __tablename__ = \"xcom\"\n+\n+    id = Column(Integer, primary_key=True)\n+    key = Column(String)\n+    value = Column(PickleType(pickler=dill))\n+    timestamp = Column(DateTime, server_default=func.current_timestamp())\n+    visible_on = Column(DateTime, nullable=False)\n+\n+    # source information\n+    task = Column(String, nullable=False)\n+    dag = Column(String, nullable=False)\n+\n+    def __repr__(self):\n+        return '<XCom \"{key}\" ({task} @ {visible_on})>'.format(\n+            key=self.key,\n+            task=self.task,\n+            visible_on=self.visible_on)\n+\n+    @classmethod\n+    @provide_session\n+    def set(\n+            cls,\n+            key,\n+            value,\n+            visible_on,\n+            task,\n+            dag,\n+            session=None):\n+        \"\"\"\n+        Store an XCom value.\n+        \"\"\"\n+\n+        if not isinstance(task, basestring) or not isinstance(dag, basestring):",
    "path": "airflow/models.py",
    "commit_id": "0235a9bfc2a37e98f769228a2e50bc4dc8841e6b",
    "original_commit_id": "3bd84ccda554c593e43c491507cfbb3400b3db57",
    "user": {
      "login": "jlowin",
      "id": 153965,
      "node_id": "MDQ6VXNlcjE1Mzk2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/153965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jlowin",
      "html_url": "https://github.com/jlowin",
      "followers_url": "https://api.github.com/users/jlowin/followers",
      "following_url": "https://api.github.com/users/jlowin/following{/other_user}",
      "gists_url": "https://api.github.com/users/jlowin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jlowin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jlowin/subscriptions",
      "organizations_url": "https://api.github.com/users/jlowin/orgs",
      "repos_url": "https://api.github.com/users/jlowin/repos",
      "events_url": "https://api.github.com/users/jlowin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jlowin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Holdover from the previous implementation. Consider it gone.\n",
    "created_at": "2015-08-19T02:11:33Z",
    "updated_at": "2015-08-20T17:31:05Z",
    "html_url": "https://github.com/apache/airflow/pull/260#discussion_r37374161",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/260",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/37374161"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/260#discussion_r37374161"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/260"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/37374161/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 233,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/37375474",
    "pull_request_review_id": null,
    "id": 37375474,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzc1NDc0",
    "diff_hunk": "@@ -2010,6 +2129,105 @@ def get(cls, key, session, deserialize_json=False):\n         return v\n \n \n+class XCom(Base):\n+    \"\"\"\n+    Base class for XCom objects.\n+    \"\"\"\n+    __tablename__ = \"xcom\"\n+\n+    id = Column(Integer, primary_key=True)\n+    key = Column(String)\n+    value = Column(PickleType(pickler=dill))\n+    timestamp = Column(DateTime, server_default=func.current_timestamp())\n+    visible_on = Column(DateTime, nullable=False)\n+\n+    # source information\n+    task = Column(String, nullable=False)\n+    dag = Column(String, nullable=False)\n+\n+    def __repr__(self):\n+        return '<XCom \"{key}\" ({task} @ {visible_on})>'.format(\n+            key=self.key,\n+            task=self.task,\n+            visible_on=self.visible_on)\n+\n+    @classmethod\n+    @provide_session\n+    def set(\n+            cls,\n+            key,\n+            value,\n+            visible_on,\n+            task,\n+            dag,\n+            session=None):\n+        \"\"\"\n+        Store an XCom value.\n+        \"\"\"\n+\n+        if not isinstance(task, basestring) or not isinstance(dag, basestring):\n+            raise TypeError('Expected string; received {}'.format(type(task)))\n+\n+        session.expunge_all()\n+        session.add(XCom(\n+            key=key,\n+            value=value,\n+            visible_on=visible_on,\n+            task=task,\n+            dag=dag))\n+        session.commit()",
    "path": "airflow/models.py",
    "commit_id": "0235a9bfc2a37e98f769228a2e50bc4dc8841e6b",
    "original_commit_id": "3bd84ccda554c593e43c491507cfbb3400b3db57",
    "user": {
      "login": "jlowin",
      "id": 153965,
      "node_id": "MDQ6VXNlcjE1Mzk2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/153965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jlowin",
      "html_url": "https://github.com/jlowin",
      "followers_url": "https://api.github.com/users/jlowin/followers",
      "following_url": "https://api.github.com/users/jlowin/following{/other_user}",
      "gists_url": "https://api.github.com/users/jlowin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jlowin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jlowin/subscriptions",
      "organizations_url": "https://api.github.com/users/jlowin/orgs",
      "repos_url": "https://api.github.com/users/jlowin/repos",
      "events_url": "https://api.github.com/users/jlowin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jlowin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Actually... looking at `@provide_session`, it calls `expunge_all()` _after_ the function runs (line 279 of `utils.py`), meaning the XCom is removed from the session before `commit` is called. I think that's why I needed to add these lines explicitly. It looks like all the other uses of `@provide_session` are for getting data, not setting it, so this hasn't been an issue in the past.\n",
    "created_at": "2015-08-19T02:46:12Z",
    "updated_at": "2015-08-20T17:31:05Z",
    "html_url": "https://github.com/apache/airflow/pull/260#discussion_r37375474",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/260",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/37375474"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/260#discussion_r37375474"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/260"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/37375474/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 2192,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 243,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/37496128",
    "pull_request_review_id": null,
    "id": 37496128,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDk2MTI4",
    "diff_hunk": "@@ -28,12 +29,15 @@\n from airflow.executors import DEFAULT_EXECUTOR, LocalExecutor\n from airflow.configuration import conf\n from airflow.utils import (\n-    AirflowException, State, apply_defaults, provide_session)\n+    AirflowException, State, apply_defaults, provide_session,\n+    is_container, as_tuple)\n \n Base = declarative_base()\n ID_LEN = 250\n SQL_ALCHEMY_CONN = conf.get('core', 'SQL_ALCHEMY_CONN')\n DAGS_FOLDER = os.path.expanduser(conf.get('core', 'DAGS_FOLDER'))\n+RETURN_XCOM = '<Returned XCom>'",
    "path": "airflow/models.py",
    "commit_id": "0235a9bfc2a37e98f769228a2e50bc4dc8841e6b",
    "original_commit_id": "f6ec5eedd3b4630a9a0a3dff1288c3ceed4319f0",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "No a big deal but I'd feel better with `return_value` or something simple (no upper/lower case, special characters), good thing it's in a constant, makes it easy to change.\n",
    "created_at": "2015-08-20T05:25:04Z",
    "updated_at": "2015-08-20T17:31:05Z",
    "html_url": "https://github.com/apache/airflow/pull/260#discussion_r37496128",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/260",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/37496128"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/260#discussion_r37496128"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/260"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/37496128/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 29,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/37497252",
    "pull_request_review_id": null,
    "id": 37497252,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDk3MjUy",
    "diff_hunk": "@@ -2010,6 +2130,130 @@ def get(cls, key, session, deserialize_json=False):\n         return v\n \n \n+class XCom(Base):\n+    \"\"\"\n+    Base class for XCom objects.\n+    \"\"\"\n+    __tablename__ = \"xcom\"\n+\n+    id = Column(Integer, primary_key=True)\n+    key = Column(String)",
    "path": "airflow/models.py",
    "commit_id": "0235a9bfc2a37e98f769228a2e50bc4dc8841e6b",
    "original_commit_id": "f6ec5eedd3b4630a9a0a3dff1288c3ceed4319f0",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "`sqlalchemy.exc.CompileError: (in table 'xcom', column 'key'): VARCHAR requires a length on dialect mysql`\n\n`String(512)` ?\n",
    "created_at": "2015-08-20T05:54:00Z",
    "updated_at": "2015-08-20T17:31:05Z",
    "html_url": "https://github.com/apache/airflow/pull/260#discussion_r37497252",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/260",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/37497252"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/260#discussion_r37497252"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/260"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/37497252/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 205,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/37524241",
    "pull_request_review_id": null,
    "id": 37524241,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTI0MjQx",
    "diff_hunk": "@@ -28,12 +29,15 @@\n from airflow.executors import DEFAULT_EXECUTOR, LocalExecutor\n from airflow.configuration import conf\n from airflow.utils import (\n-    AirflowException, State, apply_defaults, provide_session)\n+    AirflowException, State, apply_defaults, provide_session,\n+    is_container, as_tuple)\n \n Base = declarative_base()\n ID_LEN = 250\n SQL_ALCHEMY_CONN = conf.get('core', 'SQL_ALCHEMY_CONN')\n DAGS_FOLDER = os.path.expanduser(conf.get('core', 'DAGS_FOLDER'))\n+RETURN_XCOM = '<Returned XCom>'",
    "path": "airflow/models.py",
    "commit_id": "0235a9bfc2a37e98f769228a2e50bc4dc8841e6b",
    "original_commit_id": "f6ec5eedd3b4630a9a0a3dff1288c3ceed4319f0",
    "user": {
      "login": "jlowin",
      "id": 153965,
      "node_id": "MDQ6VXNlcjE1Mzk2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/153965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jlowin",
      "html_url": "https://github.com/jlowin",
      "followers_url": "https://api.github.com/users/jlowin/followers",
      "following_url": "https://api.github.com/users/jlowin/following{/other_user}",
      "gists_url": "https://api.github.com/users/jlowin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jlowin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jlowin/subscriptions",
      "organizations_url": "https://api.github.com/users/jlowin/orgs",
      "repos_url": "https://api.github.com/users/jlowin/repos",
      "events_url": "https://api.github.com/users/jlowin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jlowin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "I'm fine with `return_value` -- my thinking with the special characters was to minimize the chance of it overwriting any user-created XCom keys.\n",
    "created_at": "2015-08-20T12:44:48Z",
    "updated_at": "2015-08-20T17:31:05Z",
    "html_url": "https://github.com/apache/airflow/pull/260#discussion_r37524241",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/260",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/37524241"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/260#discussion_r37524241"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/260"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/37524241/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 29,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/37524422",
    "pull_request_review_id": null,
    "id": 37524422,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTI0NDIy",
    "diff_hunk": "@@ -28,12 +29,15 @@\n from airflow.executors import DEFAULT_EXECUTOR, LocalExecutor\n from airflow.configuration import conf\n from airflow.utils import (\n-    AirflowException, State, apply_defaults, provide_session)\n+    AirflowException, State, apply_defaults, provide_session,\n+    is_container, as_tuple)\n \n Base = declarative_base()\n ID_LEN = 250\n SQL_ALCHEMY_CONN = conf.get('core', 'SQL_ALCHEMY_CONN')\n DAGS_FOLDER = os.path.expanduser(conf.get('core', 'DAGS_FOLDER'))\n+RETURN_XCOM = '<Returned XCom>'",
    "path": "airflow/models.py",
    "commit_id": "0235a9bfc2a37e98f769228a2e50bc4dc8841e6b",
    "original_commit_id": "f6ec5eedd3b4630a9a0a3dff1288c3ceed4319f0",
    "user": {
      "login": "jlowin",
      "id": 153965,
      "node_id": "MDQ6VXNlcjE1Mzk2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/153965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jlowin",
      "html_url": "https://github.com/jlowin",
      "followers_url": "https://api.github.com/users/jlowin/followers",
      "following_url": "https://api.github.com/users/jlowin/following{/other_user}",
      "gists_url": "https://api.github.com/users/jlowin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jlowin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jlowin/subscriptions",
      "organizations_url": "https://api.github.com/users/jlowin/orgs",
      "repos_url": "https://api.github.com/users/jlowin/repos",
      "events_url": "https://api.github.com/users/jlowin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jlowin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "how about `__return_value__`, for the same reason? I expect the proper way to access this key is through the constant anyway:\n\n``` python\nti.xcom_pull(key=RETURN_XCOM, task=task)\n```\n",
    "created_at": "2015-08-20T12:46:59Z",
    "updated_at": "2015-08-20T17:31:05Z",
    "html_url": "https://github.com/apache/airflow/pull/260#discussion_r37524422",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/260",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/37524422"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/260#discussion_r37524422"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/260"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/37524422/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 29,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/37544126",
    "pull_request_review_id": null,
    "id": 37544126,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTQ0MTI2",
    "diff_hunk": "@@ -28,12 +29,15 @@\n from airflow.executors import DEFAULT_EXECUTOR, LocalExecutor\n from airflow.configuration import conf\n from airflow.utils import (\n-    AirflowException, State, apply_defaults, provide_session)\n+    AirflowException, State, apply_defaults, provide_session,\n+    is_container, as_tuple)\n \n Base = declarative_base()\n ID_LEN = 250\n SQL_ALCHEMY_CONN = conf.get('core', 'SQL_ALCHEMY_CONN')\n DAGS_FOLDER = os.path.expanduser(conf.get('core', 'DAGS_FOLDER'))\n+RETURN_XCOM = '<Returned XCom>'",
    "path": "airflow/models.py",
    "commit_id": "0235a9bfc2a37e98f769228a2e50bc4dc8841e6b",
    "original_commit_id": "f6ec5eedd3b4630a9a0a3dff1288c3ceed4319f0",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "I think `RETURN_XCOM` won't be in scope from where you call it (the pipeline).\n\nMaybe making `key` a required parameter and assuming `RETURN_XCOM` as the default?\n",
    "created_at": "2015-08-20T15:35:20Z",
    "updated_at": "2015-08-20T17:31:05Z",
    "html_url": "https://github.com/apache/airflow/pull/260#discussion_r37544126",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/260",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/37544126"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/260#discussion_r37544126"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/260"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/37544126/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 29,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/37544408",
    "pull_request_review_id": null,
    "id": 37544408,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTQ0NDA4",
    "diff_hunk": "@@ -999,6 +1010,85 @@ def set_duration(self):\n         else:\n             self.duration = None\n \n+    def xcom_push(\n+            self,\n+            key,\n+            value,\n+            execution_date=None):\n+        \"\"\"\n+        Make an XCom available for tasks to pull.\n+\n+        :param key: A key for the XCom\n+        :type key: string\n+        :param value: A value for the XCom. The value is pickled and stored\n+            in the database.\n+        :type value: any pickleable object\n+        :param execution_date: if provided, the XCom will not be visible until\n+            this date. This can be used, for example, to send a message to a\n+            task on a future date without it being immediately visible.\n+        :type execution_date: datetime\n+        \"\"\"\n+\n+        if execution_date and execution_date < self.execution_date:\n+            raise ValueError(\n+                'execution_date can not be in the past (current '\n+                'execution_date is {}; received {})'.format(\n+                    self.execution_date, execution_date))\n+\n+        XCom.set(\n+            key=key,\n+            value=value,\n+            task_id=self.task_id,\n+            dag_id=self.dag_id,\n+            execution_date=execution_date or self.execution_date)\n+\n+    def xcom_pull(\n+            self,\n+            key=None,",
    "path": "airflow/models.py",
    "commit_id": "0235a9bfc2a37e98f769228a2e50bc4dc8841e6b",
    "original_commit_id": "234d76641f1b23887fd60fe90fc4a1126e2a5d67",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "`key=RETURN_XCOM,`  ? As long as this behavior is well documented it seems like a sensible default.\n",
    "created_at": "2015-08-20T15:37:42Z",
    "updated_at": "2015-08-20T17:31:05Z",
    "html_url": "https://github.com/apache/airflow/pull/260#discussion_r37544408",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/260",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/37544408"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/260#discussion_r37544408"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/260"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/37544408/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 109,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/37544686",
    "pull_request_review_id": null,
    "id": 37544686,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTQ0Njg2",
    "diff_hunk": "@@ -2010,6 +2130,130 @@ def get(cls, key, session, deserialize_json=False):\n         return v\n \n \n+class XCom(Base):\n+    \"\"\"\n+    Base class for XCom objects.\n+    \"\"\"\n+    __tablename__ = \"xcom\"\n+\n+    id = Column(Integer, primary_key=True)\n+    key = Column(String(512))\n+    value = Column(PickleType(pickler=dill))\n+    timestamp = Column(DateTime, server_default=func.current_timestamp())\n+    execution_date = Column(DateTime, nullable=False)\n+\n+    # source information\n+    task_id = Column(String(ID_LEN), nullable=False)\n+    dag_id = Column(String(ID_LEN), nullable=False)\n+\n+    def __repr__(self):\n+        return '<XCom \"{key}\" ({task_id} @ {execution_date})>'.format(\n+            key=self.key,\n+            task_id=self.task_id,\n+            execution_date=self.execution_date)\n+\n+    @classmethod\n+    @provide_session\n+    def set(\n+            cls,\n+            key,\n+            value,\n+            execution_date,\n+            task_id,\n+            dag_id,\n+            session=None):\n+        \"\"\"\n+        Store an XCom value.\n+        \"\"\"\n+        session.expunge_all()\n+\n+        # remove any duplicate XComs\n+        session.query(cls).filter(\n+            cls.key == key,\n+            cls.execution_date == execution_date,\n+            cls.task_id == task_id,\n+            cls.dag_id == dag_id).delete()\n+\n+        # insert new XCom\n+        session.add(XCom(\n+            key=key,\n+            value=value,\n+            execution_date=execution_date,\n+            task_id=task_id,\n+            dag_id=dag_id))\n+\n+        session.commit()\n+\n+    @classmethod\n+    @provide_session\n+    def get_one(\n+            cls,\n+            execution_date,\n+            key=None,\n+            task_id=None,\n+            dag_id=None,\n+            include_prior_dates=False,\n+            session=None):\n+        \"\"\"\n+        Retrieve an XCom value, optionally meeting certain criteria\n+        \"\"\"\n+        filters = []\n+        if key is not None:",
    "path": "airflow/models.py",
    "commit_id": "0235a9bfc2a37e98f769228a2e50bc4dc8841e6b",
    "original_commit_id": "234d76641f1b23887fd60fe90fc4a1126e2a5d67",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "NIT: `if not key:` is more pythonesque, catches empty strings, same goes for most others `is not None:`\n",
    "created_at": "2015-08-20T15:39:59Z",
    "updated_at": "2015-08-20T17:31:05Z",
    "html_url": "https://github.com/apache/airflow/pull/260#discussion_r37544686",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/260",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/37544686"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/260#discussion_r37544686"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/260"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/37544686/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 266,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/37557085",
    "pull_request_review_id": null,
    "id": 37557085,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTU3MDg1",
    "diff_hunk": "@@ -999,6 +1010,85 @@ def set_duration(self):\n         else:\n             self.duration = None\n \n+    def xcom_push(\n+            self,\n+            key,\n+            value,\n+            execution_date=None):\n+        \"\"\"\n+        Make an XCom available for tasks to pull.\n+\n+        :param key: A key for the XCom\n+        :type key: string\n+        :param value: A value for the XCom. The value is pickled and stored\n+            in the database.\n+        :type value: any pickleable object\n+        :param execution_date: if provided, the XCom will not be visible until\n+            this date. This can be used, for example, to send a message to a\n+            task on a future date without it being immediately visible.\n+        :type execution_date: datetime\n+        \"\"\"\n+\n+        if execution_date and execution_date < self.execution_date:\n+            raise ValueError(\n+                'execution_date can not be in the past (current '\n+                'execution_date is {}; received {})'.format(\n+                    self.execution_date, execution_date))\n+\n+        XCom.set(\n+            key=key,\n+            value=value,\n+            task_id=self.task_id,\n+            dag_id=self.dag_id,\n+            execution_date=execution_date or self.execution_date)\n+\n+    def xcom_pull(\n+            self,\n+            key=None,",
    "path": "airflow/models.py",
    "commit_id": "0235a9bfc2a37e98f769228a2e50bc4dc8841e6b",
    "original_commit_id": "234d76641f1b23887fd60fe90fc4a1126e2a5d67",
    "user": {
      "login": "jlowin",
      "id": 153965,
      "node_id": "MDQ6VXNlcjE1Mzk2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/153965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jlowin",
      "html_url": "https://github.com/jlowin",
      "followers_url": "https://api.github.com/users/jlowin/followers",
      "following_url": "https://api.github.com/users/jlowin/following{/other_user}",
      "gists_url": "https://api.github.com/users/jlowin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jlowin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jlowin/subscriptions",
      "organizations_url": "https://api.github.com/users/jlowin/orgs",
      "repos_url": "https://api.github.com/users/jlowin/repos",
      "events_url": "https://api.github.com/users/jlowin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jlowin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "I like that idea. Done.\n",
    "created_at": "2015-08-20T17:31:13Z",
    "updated_at": "2015-08-20T17:31:13Z",
    "html_url": "https://github.com/apache/airflow/pull/260#discussion_r37557085",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/260",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/37557085"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/260#discussion_r37557085"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/260"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/37557085/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 109,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/37583549",
    "pull_request_review_id": null,
    "id": 37583549,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTgzNTQ5",
    "diff_hunk": "@@ -679,6 +682,10 @@ def are_dependencies_met(\n                         case([(TI.state == State.SUCCESS, 1)], else_=0)),\n                     func.sum(\n                         case([(TI.state == State.SKIPPED, 1)], else_=0)),\n+                    func.sum(",
    "path": "airflow/models.py",
    "commit_id": "da606caaedd37d77ce1e9bb38221d7a2e4a78611",
    "original_commit_id": "f6b789c0ec30bba2e477109dd50651e5d1073ee8",
    "user": {
      "login": "jlowin",
      "id": 153965,
      "node_id": "MDQ6VXNlcjE1Mzk2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/153965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jlowin",
      "html_url": "https://github.com/jlowin",
      "followers_url": "https://api.github.com/users/jlowin/followers",
      "following_url": "https://api.github.com/users/jlowin/following{/other_user}",
      "gists_url": "https://api.github.com/users/jlowin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jlowin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jlowin/subscriptions",
      "organizations_url": "https://api.github.com/users/jlowin/orgs",
      "repos_url": "https://api.github.com/users/jlowin/repos",
      "events_url": "https://api.github.com/users/jlowin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jlowin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Each `func.sum(...)` statement should be wrapped in `func.coalesce(func.sum(...), 0)` for Py3 compatibility. Otherwise `func.sum()` can return None if there are no rows, and that might create type errors because these results are treated as ints later.\n",
    "created_at": "2015-08-20T21:31:00Z",
    "updated_at": "2015-08-21T16:53:56Z",
    "html_url": "https://github.com/apache/airflow/pull/261#discussion_r37583549",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/261",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/37583549"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/261#discussion_r37583549"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/261"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/37583549/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 32,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/37699333",
    "pull_request_review_id": null,
    "id": 37699333,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Njk5MzMz",
    "diff_hunk": "@@ -0,0 +1,232 @@\n+\"\"\"current schema\n+\n+Revision ID: e3a246e0dc1\n+Revises:\n+Create Date: 2015-08-18 16:35:00.883495\n+\n+\"\"\"\n+\n+# revision identifiers, used by Alembic.\n+revision = 'e3a246e0dc1'\n+down_revision = None\n+branch_labels = None\n+depends_on = None\n+\n+from alembic import op\n+import sqlalchemy as sa\n+from sqlalchemy.engine.reflection import Inspector\n+\n+from airflow import settings\n+\n+\n+def upgrade():\n+    inspector = Inspector.from_engine(settings.engine)\n+    if 'connection' not in inspector.get_table_names():\n+        op.create_table(\n+            'connection',\n+            sa.Column('id', sa.Integer(), nullable=False),\n+            sa.Column('conn_id', sa.String(length=250), nullable=True),\n+            sa.Column('conn_type', sa.String(length=500), nullable=True),\n+            sa.Column('host', sa.String(length=500), nullable=True),\n+            sa.Column('schema', sa.String(length=500), nullable=True),\n+            sa.Column('login', sa.String(length=500), nullable=True),\n+            sa.Column('password', sa.String(length=500), nullable=True),\n+            sa.Column('is_encrypted', sa.Boolean(), nullable=True),\n+            sa.Column('port', sa.Integer(), nullable=True),\n+            sa.Column('extra', sa.String(length=5000), nullable=True),\n+            sa.PrimaryKeyConstraint('id')\n+        )\n+        op.create_table(\n+            'dag',\n+            sa.Column('dag_id', sa.String(length=250), nullable=False),\n+            sa.Column('is_paused', sa.Boolean(), nullable=True),\n+            sa.Column('is_subdag', sa.Boolean(), nullable=True),\n+            sa.Column('is_active', sa.Boolean(), nullable=True),\n+            sa.Column('last_scheduler_run', sa.DateTime(), nullable=True),\n+            sa.Column('last_pickled', sa.DateTime(), nullable=True),\n+            sa.Column('last_expired', sa.DateTime(), nullable=True),\n+            sa.Column('scheduler_lock', sa.Boolean(), nullable=True),\n+            sa.Column('pickle_id', sa.Integer(), nullable=True),\n+            sa.Column('fileloc', sa.String(length=2000), nullable=True),\n+            sa.Column('owners', sa.String(length=2000), nullable=True),\n+            sa.PrimaryKeyConstraint('dag_id')\n+        )\n+        op.create_table(\n+            'dag_pickle',\n+            sa.Column('id', sa.Integer(), nullable=False),\n+            sa.Column('pickle', sa.PickleType(), nullable=True),\n+            sa.Column('created_dttm', sa.DateTime(), nullable=True),\n+            sa.Column('pickle_hash', sa.BigInteger(), nullable=True),\n+            sa.PrimaryKeyConstraint('id')\n+        )\n+        op.create_table(\n+            'import_error',\n+            sa.Column('id', sa.Integer(), nullable=False),\n+            sa.Column('timestamp', sa.DateTime(), nullable=True),\n+            sa.Column('filename', sa.String(length=1024), nullable=True),\n+            sa.Column('stacktrace', sa.Text(), nullable=True),\n+            sa.PrimaryKeyConstraint('id')\n+        )\n+        op.create_table(\n+            'job',\n+            sa.Column('id', sa.Integer(), nullable=False),\n+            sa.Column('dag_id', sa.String(length=250), nullable=True),\n+            sa.Column('state', sa.String(length=20), nullable=True),\n+            sa.Column('job_type', sa.String(length=30), nullable=True),\n+            sa.Column('start_date', sa.DateTime(), nullable=True),\n+            sa.Column('end_date', sa.DateTime(), nullable=True),\n+            sa.Column('latest_heartbeat', sa.DateTime(), nullable=True),\n+            sa.Column('executor_class', sa.String(length=500), nullable=True),\n+            sa.Column('hostname', sa.String(length=500), nullable=True),\n+            sa.Column('unixname', sa.String(length=1000), nullable=True),\n+            sa.PrimaryKeyConstraint('id')\n+        )\n+        op.create_index(\n+            'job_type_heart',\n+            'job',\n+            ['job_type', 'latest_heartbeat'],\n+            unique=False\n+        )\n+        op.create_table(\n+            'known_event_type',\n+            sa.Column('id', sa.Integer(), nullable=False),\n+            sa.Column('know_event_type', sa.String(length=200), nullable=True),\n+            sa.PrimaryKeyConstraint('id')\n+        )\n+        op.create_table(\n+            'log',\n+            sa.Column('id', sa.Integer(), nullable=False),\n+            sa.Column('dttm', sa.DateTime(), nullable=True),\n+            sa.Column('dag_id', sa.String(length=250), nullable=True),\n+            sa.Column('task_id', sa.String(length=250), nullable=True),\n+            sa.Column('event', sa.String(length=30), nullable=True),\n+            sa.Column('execution_date', sa.DateTime(), nullable=True),\n+            sa.Column('owner', sa.String(length=500), nullable=True),\n+            sa.PrimaryKeyConstraint('id')\n+        )\n+        op.create_table(\n+            'sla_miss',\n+            sa.Column('task_id', sa.String(length=250), nullable=False),\n+            sa.Column('dag_id', sa.String(length=250), nullable=False),\n+            sa.Column('execution_date', sa.DateTime(), nullable=False),\n+            sa.Column('email_sent', sa.Boolean(), nullable=True),\n+            sa.Column('timestamp', sa.DateTime(), nullable=True),\n+            sa.Column('description', sa.Text(), nullable=True),\n+            sa.PrimaryKeyConstraint('task_id', 'dag_id', 'execution_date')\n+        )\n+        op.create_table(\n+            'slot_pool',\n+            sa.Column('id', sa.Integer(), nullable=False),\n+            sa.Column('pool', sa.String(length=50), nullable=True),\n+            sa.Column('slots', sa.Integer(), nullable=True),\n+            sa.Column('description', sa.Text(), nullable=True),\n+            sa.PrimaryKeyConstraint('id'),\n+            sa.UniqueConstraint('pool')\n+        )\n+        op.create_table(\n+            'task_instance',\n+            sa.Column('task_id', sa.String(length=250), nullable=False),\n+            sa.Column('dag_id', sa.String(length=250), nullable=False),\n+            sa.Column('execution_date', sa.DateTime(), nullable=False),\n+            sa.Column('start_date', sa.DateTime(), nullable=True),\n+            sa.Column('end_date', sa.DateTime(), nullable=True),\n+            sa.Column('duration', sa.Integer(), nullable=True),\n+            sa.Column('state', sa.String(length=20), nullable=True),\n+            sa.Column('try_number', sa.Integer(), nullable=True),\n+            sa.Column('hostname', sa.String(length=1000), nullable=True),\n+            sa.Column('unixname', sa.String(length=1000), nullable=True),\n+            sa.Column('job_id', sa.Integer(), nullable=True),\n+            sa.Column('pool', sa.String(length=50), nullable=True),\n+            sa.Column('queue', sa.String(length=50), nullable=True),\n+            sa.Column('priority_weight', sa.Integer(), nullable=True),\n+            sa.PrimaryKeyConstraint('task_id', 'dag_id', 'execution_date')\n+        )\n+        op.create_index(\n+            'ti_dag_state',\n+            'task_instance',\n+            ['dag_id', 'state'],\n+            unique=False\n+        )\n+        op.create_index(\n+            'ti_pool',\n+            'task_instance',\n+            ['pool', 'state', 'priority_weight'],\n+            unique=False\n+        )\n+        op.create_index(\n+            'ti_state_lkp',\n+            'task_instance',\n+            ['dag_id', 'task_id', 'execution_date', 'state'],\n+            unique=False\n+        )\n+        op.create_table(\n+            'user',\n+            sa.Column('id', sa.Integer(), nullable=False),\n+            sa.Column('username', sa.String(length=250), nullable=True),\n+            sa.Column('email', sa.String(length=500), nullable=True),\n+            sa.PrimaryKeyConstraint('id'),\n+            sa.UniqueConstraint('username')\n+        )\n+        op.create_table(\n+            'variable',\n+            sa.Column('id', sa.Integer(), nullable=False),\n+            sa.Column('key', sa.String(length=250), nullable=True),\n+            sa.Column('val', sa.Text(), nullable=True),\n+            sa.PrimaryKeyConstraint('id'),\n+            sa.UniqueConstraint('key')\n+        )\n+        op.create_table(\n+            'chart',\n+            sa.Column('id', sa.Integer(), nullable=False),\n+            sa.Column('label', sa.String(length=200), nullable=True),\n+            sa.Column('conn_id', sa.String(length=250), nullable=False),\n+            sa.Column('user_id', sa.Integer(), nullable=True),\n+            sa.Column('chart_type', sa.String(length=100), nullable=True),\n+            sa.Column('sql_layout', sa.String(length=50), nullable=True),\n+            sa.Column('sql', sa.Text(), nullable=True),\n+            sa.Column('y_log_scale', sa.Boolean(), nullable=True),\n+            sa.Column('show_datatable', sa.Boolean(), nullable=True),\n+            sa.Column('show_sql', sa.Boolean(), nullable=True),\n+            sa.Column('height', sa.Integer(), nullable=True),\n+            sa.Column('default_params', sa.String(length=5000), nullable=True),\n+            sa.Column('x_is_date', sa.Boolean(), nullable=True),\n+            sa.Column('iteration_no', sa.Integer(), nullable=True),\n+            sa.Column('last_modified', sa.DateTime(), nullable=True),\n+            sa.ForeignKeyConstraint(['user_id'], ['user.id'], ),\n+            sa.PrimaryKeyConstraint('id')\n+        )\n+        op.create_table(\n+            'known_event',\n+            sa.Column('id', sa.Integer(), nullable=False),\n+            sa.Column('label', sa.String(length=200), nullable=True),\n+            sa.Column('start_date', sa.DateTime(), nullable=True),\n+            sa.Column('end_date', sa.DateTime(), nullable=True),\n+            sa.Column('user_id', sa.Integer(), nullable=True),\n+            sa.Column('known_event_type_id', sa.Integer(), nullable=True),\n+            sa.Column('description', sa.Text(), nullable=True),\n+            sa.ForeignKeyConstraint(['known_event_type_id'],\n+                                    ['known_event_type.id'], ),\n+            sa.ForeignKeyConstraint(['user_id'], ['user.id'], ),\n+            sa.PrimaryKeyConstraint('id')\n+        )",
    "path": "airflow/migrations/versions/e3a246e0dc1_current_schema.py",
    "commit_id": "94931a1089ab865a073539b5097f551a0714e581",
    "original_commit_id": "94931a1089ab865a073539b5097f551a0714e581",
    "user": {
      "login": "jlowin",
      "id": 153965,
      "node_id": "MDQ6VXNlcjE1Mzk2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/153965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jlowin",
      "html_url": "https://github.com/jlowin",
      "followers_url": "https://api.github.com/users/jlowin/followers",
      "following_url": "https://api.github.com/users/jlowin/following{/other_user}",
      "gists_url": "https://api.github.com/users/jlowin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jlowin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jlowin/subscriptions",
      "organizations_url": "https://api.github.com/users/jlowin/orgs",
      "repos_url": "https://api.github.com/users/jlowin/repos",
      "events_url": "https://api.github.com/users/jlowin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jlowin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "This is awesome -- just want to point out that we added a new table `xcom`. Thanks!\n",
    "created_at": "2015-08-22T20:16:50Z",
    "updated_at": "2015-08-22T20:16:50Z",
    "html_url": "https://github.com/apache/airflow/pull/267#discussion_r37699333",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/267",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/37699333"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/267#discussion_r37699333"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/267"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/37699333/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 211,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 211,
    "position": 211,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/37705912",
    "pull_request_review_id": null,
    "id": 37705912,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzA1OTEy",
    "diff_hunk": "@@ -0,0 +1,247 @@\n+\"\"\"current schema\n+\n+Revision ID: e3a246e0dc1\n+Revises:\n+Create Date: 2015-08-18 16:35:00.883495\n+\n+\"\"\"\n+\n+# revision identifiers, used by Alembic.\n+revision = 'e3a246e0dc1'\n+down_revision = None\n+branch_labels = None\n+depends_on = None\n+\n+from alembic import op\n+import sqlalchemy as sa\n+from sqlalchemy.engine.reflection import Inspector\n+\n+from airflow import settings\n+\n+\n+def upgrade():\n+    inspector = Inspector.from_engine(settings.engine)\n+    tables = inspector.get_table_names()\n+    if 'connection' not in tables:\n+        op.create_table(\n+            'connection',\n+            sa.Column('id', sa.Integer(), nullable=False),\n+            sa.Column('conn_id', sa.String(length=250), nullable=True),\n+            sa.Column('conn_type', sa.String(length=500), nullable=True),\n+            sa.Column('host', sa.String(length=500), nullable=True),\n+            sa.Column('schema', sa.String(length=500), nullable=True),\n+            sa.Column('login', sa.String(length=500), nullable=True),\n+            sa.Column('password', sa.String(length=500), nullable=True),\n+            sa.Column('is_encrypted', sa.Boolean(), nullable=True),\n+            sa.Column('port', sa.Integer(), nullable=True),\n+            sa.Column('extra', sa.String(length=5000), nullable=True),\n+            sa.PrimaryKeyConstraint('id')\n+        )\n+    if 'dag' not in tables:\n+        op.create_table(\n+            'dag',\n+            sa.Column('dag_id', sa.String(length=250), nullable=False),\n+            sa.Column('is_paused', sa.Boolean(), nullable=True),\n+            sa.Column('is_subdag', sa.Boolean(), nullable=True),\n+            sa.Column('is_active', sa.Boolean(), nullable=True),\n+            sa.Column('last_scheduler_run', sa.DateTime(), nullable=True),\n+            sa.Column('last_pickled', sa.DateTime(), nullable=True),\n+            sa.Column('last_expired', sa.DateTime(), nullable=True),\n+            sa.Column('scheduler_lock', sa.Boolean(), nullable=True),\n+            sa.Column('pickle_id', sa.Integer(), nullable=True),\n+            sa.Column('fileloc', sa.String(length=2000), nullable=True),\n+            sa.Column('owners', sa.String(length=2000), nullable=True),\n+            sa.PrimaryKeyConstraint('dag_id')\n+        )\n+    if 'dag_pickle' not in tables:\n+        op.create_table(\n+            'dag_pickle',\n+            sa.Column('id', sa.Integer(), nullable=False),\n+            sa.Column('pickle', sa.PickleType(), nullable=True),\n+            sa.Column('created_dttm', sa.DateTime(), nullable=True),\n+            sa.Column('pickle_hash', sa.BigInteger(), nullable=True),\n+            sa.PrimaryKeyConstraint('id')\n+        )\n+    if 'import_error' not in tables:\n+        op.create_table(\n+            'import_error',\n+            sa.Column('id', sa.Integer(), nullable=False),\n+            sa.Column('timestamp', sa.DateTime(), nullable=True),\n+            sa.Column('filename', sa.String(length=1024), nullable=True),\n+            sa.Column('stacktrace', sa.Text(), nullable=True),\n+            sa.PrimaryKeyConstraint('id')\n+        )\n+    if 'job' not in tables:\n+        op.create_table(\n+            'job',\n+            sa.Column('id', sa.Integer(), nullable=False),\n+            sa.Column('dag_id', sa.String(length=250), nullable=True),\n+            sa.Column('state', sa.String(length=20), nullable=True),\n+            sa.Column('job_type', sa.String(length=30), nullable=True),\n+            sa.Column('start_date', sa.DateTime(), nullable=True),\n+            sa.Column('end_date', sa.DateTime(), nullable=True),\n+            sa.Column('latest_heartbeat', sa.DateTime(), nullable=True),\n+            sa.Column('executor_class', sa.String(length=500), nullable=True),\n+            sa.Column('hostname', sa.String(length=500), nullable=True),\n+            sa.Column('unixname', sa.String(length=1000), nullable=True),\n+            sa.PrimaryKeyConstraint('id')\n+        )\n+        op.create_index(\n+            'job_type_heart',\n+            'job',\n+            ['job_type', 'latest_heartbeat'],\n+            unique=False\n+        )\n+    if 'known_event_type' not in tables:\n+        op.create_table(\n+            'known_event_type',\n+            sa.Column('id', sa.Integer(), nullable=False),\n+            sa.Column('know_event_type', sa.String(length=200), nullable=True),\n+            sa.PrimaryKeyConstraint('id')\n+        )\n+    if 'log' not in tables:\n+        op.create_table(\n+            'log',\n+            sa.Column('id', sa.Integer(), nullable=False),\n+            sa.Column('dttm', sa.DateTime(), nullable=True),\n+            sa.Column('dag_id', sa.String(length=250), nullable=True),\n+            sa.Column('task_id', sa.String(length=250), nullable=True),\n+            sa.Column('event', sa.String(length=30), nullable=True),\n+            sa.Column('execution_date', sa.DateTime(), nullable=True),\n+            sa.Column('owner', sa.String(length=500), nullable=True),\n+            sa.PrimaryKeyConstraint('id')\n+        )\n+    if 'sla_miss' not in tables:\n+        op.create_table(\n+            'sla_miss',\n+            sa.Column('task_id', sa.String(length=250), nullable=False),\n+            sa.Column('dag_id', sa.String(length=250), nullable=False),\n+            sa.Column('execution_date', sa.DateTime(), nullable=False),\n+            sa.Column('email_sent', sa.Boolean(), nullable=True),\n+            sa.Column('timestamp', sa.DateTime(), nullable=True),\n+            sa.Column('description', sa.Text(), nullable=True),\n+            sa.PrimaryKeyConstraint('task_id', 'dag_id', 'execution_date')\n+        )\n+    if 'slot_pool' not in tables:\n+        op.create_table(\n+            'slot_pool',\n+            sa.Column('id', sa.Integer(), nullable=False),\n+            sa.Column('pool', sa.String(length=50), nullable=True),\n+            sa.Column('slots', sa.Integer(), nullable=True),\n+            sa.Column('description', sa.Text(), nullable=True),\n+            sa.PrimaryKeyConstraint('id'),\n+            sa.UniqueConstraint('pool')\n+        )\n+    if 'task_instance' not in tables:\n+        op.create_table(\n+            'task_instance',\n+            sa.Column('task_id', sa.String(length=250), nullable=False),\n+            sa.Column('dag_id', sa.String(length=250), nullable=False),\n+            sa.Column('execution_date', sa.DateTime(), nullable=False),\n+            sa.Column('start_date', sa.DateTime(), nullable=True),\n+            sa.Column('end_date', sa.DateTime(), nullable=True),\n+            sa.Column('duration', sa.Integer(), nullable=True),\n+            sa.Column('state', sa.String(length=20), nullable=True),\n+            sa.Column('try_number', sa.Integer(), nullable=True),\n+            sa.Column('hostname', sa.String(length=1000), nullable=True),\n+            sa.Column('unixname', sa.String(length=1000), nullable=True),\n+            sa.Column('job_id', sa.Integer(), nullable=True),\n+            sa.Column('pool', sa.String(length=50), nullable=True),\n+            sa.Column('queue', sa.String(length=50), nullable=True),\n+            sa.Column('priority_weight', sa.Integer(), nullable=True),\n+            sa.PrimaryKeyConstraint('task_id', 'dag_id', 'execution_date')\n+        )\n+        op.create_index(\n+            'ti_dag_state',\n+            'task_instance',\n+            ['dag_id', 'state'],\n+            unique=False\n+        )\n+        op.create_index(\n+            'ti_pool',\n+            'task_instance',\n+            ['pool', 'state', 'priority_weight'],\n+            unique=False\n+        )\n+        op.create_index(\n+            'ti_state_lkp',\n+            'task_instance',\n+            ['dag_id', 'task_id', 'execution_date', 'state'],\n+            unique=False\n+        )\n+\n+    if 'user' not in tables:\n+        op.create_table(\n+            'user',\n+            sa.Column('id', sa.Integer(), nullable=False),\n+            sa.Column('username', sa.String(length=250), nullable=True),\n+            sa.Column('email', sa.String(length=500), nullable=True),\n+            sa.PrimaryKeyConstraint('id'),\n+            sa.UniqueConstraint('username')\n+        )\n+    if 'variable' not in tables:\n+        op.create_table(\n+            'variable',\n+            sa.Column('id', sa.Integer(), nullable=False),\n+            sa.Column('key', sa.String(length=250), nullable=True),\n+            sa.Column('val', sa.Text(), nullable=True),\n+            sa.PrimaryKeyConstraint('id'),\n+            sa.UniqueConstraint('key')\n+        )\n+    if 'chart' not in tables:\n+        op.create_table(\n+            'chart',\n+            sa.Column('id', sa.Integer(), nullable=False),\n+            sa.Column('label', sa.String(length=200), nullable=True),\n+            sa.Column('conn_id', sa.String(length=250), nullable=False),\n+            sa.Column('user_id', sa.Integer(), nullable=True),\n+            sa.Column('chart_type', sa.String(length=100), nullable=True),\n+            sa.Column('sql_layout', sa.String(length=50), nullable=True),\n+            sa.Column('sql', sa.Text(), nullable=True),\n+            sa.Column('y_log_scale', sa.Boolean(), nullable=True),\n+            sa.Column('show_datatable', sa.Boolean(), nullable=True),\n+            sa.Column('show_sql', sa.Boolean(), nullable=True),\n+            sa.Column('height', sa.Integer(), nullable=True),\n+            sa.Column('default_params', sa.String(length=5000), nullable=True),\n+            sa.Column('x_is_date', sa.Boolean(), nullable=True),\n+            sa.Column('iteration_no', sa.Integer(), nullable=True),\n+            sa.Column('last_modified', sa.DateTime(), nullable=True),\n+            sa.ForeignKeyConstraint(['user_id'], ['user.id'], ),\n+            sa.PrimaryKeyConstraint('id')\n+        )\n+    if 'known_event' not in tables:\n+        op.create_table(\n+            'known_event',\n+            sa.Column('id', sa.Integer(), nullable=False),\n+            sa.Column('label', sa.String(length=200), nullable=True),\n+            sa.Column('start_date', sa.DateTime(), nullable=True),\n+            sa.Column('end_date', sa.DateTime(), nullable=True),\n+            sa.Column('user_id', sa.Integer(), nullable=True),\n+            sa.Column('known_event_type_id', sa.Integer(), nullable=True),\n+            sa.Column('description', sa.Text(), nullable=True),\n+            sa.ForeignKeyConstraint(['known_event_type_id'],\n+                                    ['known_event_type.id'], ),\n+            sa.ForeignKeyConstraint(['user_id'], ['user.id'], ),\n+            sa.PrimaryKeyConstraint('id')\n+        )\n+",
    "path": "airflow/migrations/versions/e3a246e0dc1_current_schema.py",
    "commit_id": "62a2db4fc01b7e0836ee34a4963ef94743f05341",
    "original_commit_id": "4bd282201a744a56f4fa1dca67b247f5feec1706",
    "user": {
      "login": "jlowin",
      "id": 153965,
      "node_id": "MDQ6VXNlcjE1Mzk2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/153965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jlowin",
      "html_url": "https://github.com/jlowin",
      "followers_url": "https://api.github.com/users/jlowin/followers",
      "following_url": "https://api.github.com/users/jlowin/following{/other_user}",
      "gists_url": "https://api.github.com/users/jlowin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jlowin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jlowin/subscriptions",
      "organizations_url": "https://api.github.com/users/jlowin/orgs",
      "repos_url": "https://api.github.com/users/jlowin/repos",
      "events_url": "https://api.github.com/users/jlowin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jlowin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Not 100% sure if it's needed -- but just a reminder about the new xcom table.\n",
    "created_at": "2015-08-23T13:41:55Z",
    "updated_at": "2015-08-25T04:31:15Z",
    "html_url": "https://github.com/apache/airflow/pull/292#discussion_r37705912",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/292",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/37705912"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/292#discussion_r37705912"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/292"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/37705912/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 227,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 227,
    "position": 227,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/37938767",
    "pull_request_review_id": null,
    "id": 37938767,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTM4NzY3",
    "diff_hunk": "@@ -2000,18 +2000,28 @@ def __cmp__(self, other):\n \n     def pickle(self, main_session=None):\n         session = main_session or settings.Session()\n-        dag = session.query(\n-            DagModel).filter(DAG.dag_id == self.dag_id).first()\n+        orm_dag = session.query(\n+            DagModel).filter(DagModel.dag_id == self.dag_id).first()\n         dp = None\n-        if dag and dag.pickle_id:\n+\n+        if not orm_dag:\n+            raise ValueError(\n+                \"Tried to pickle a DAG that hasn't been loaded yet: {}\".format(\n+                    self.dag_id))\n+\n+        if orm_dag.pickle_id:\n             dp = session.query(DagPickle).filter(\n-                DagPickle.id == dag.pickle_id).first()\n+                DagPickle.id == orm_dag.pickle_id).first()\n+\n         if not dp or dp.pickle != self:",
    "path": "airflow/models.py",
    "commit_id": "be4e195cfcc78eb8dfe7fa738c8b4cbbaed4e440",
    "original_commit_id": "be4e195cfcc78eb8dfe7fa738c8b4cbbaed4e440",
    "user": {
      "login": "jlowin",
      "id": 153965,
      "node_id": "MDQ6VXNlcjE1Mzk2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/153965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jlowin",
      "html_url": "https://github.com/jlowin",
      "followers_url": "https://api.github.com/users/jlowin/followers",
      "following_url": "https://api.github.com/users/jlowin/following{/other_user}",
      "gists_url": "https://api.github.com/users/jlowin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jlowin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jlowin/subscriptions",
      "organizations_url": "https://api.github.com/users/jlowin/orgs",
      "repos_url": "https://api.github.com/users/jlowin/repos",
      "events_url": "https://api.github.com/users/jlowin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jlowin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "This line will always be `False` in Python 3 without #315 because comparing two dags (`dp.pickle` and `self`) for equality will always return False. So calling `dag.pickle()` in Py3 ALWAYS creates a new pickle, even if the DAG was just pickled.\n",
    "created_at": "2015-08-26T01:24:07Z",
    "updated_at": "2015-08-26T01:24:23Z",
    "html_url": "https://github.com/apache/airflow/pull/316#discussion_r37938767",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/316",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/37938767"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/316#discussion_r37938767"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/316"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/37938767/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 2016,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 21,
    "position": 21,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/38357815",
    "pull_request_review_id": null,
    "id": 38357815,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzU3ODE1",
    "diff_hunk": "@@ -1,5 +1,6 @@\n from builtins import object\n import logging\n+import os\n import random\n ",
    "path": "airflow/hooks/base_hook.py",
    "commit_id": "5bc95e230c3740aa3d601a17670b72c23a1dcfa4",
    "original_commit_id": "9d84167ed3cee7626fe3342295cd4d5658f85ac7",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Let's use a prefix for env vars as a module constant:\n\n```\nCONN_ENV_PREFIX = 'AIRFLOW_CONN_'\n```\n",
    "created_at": "2015-08-31T20:50:56Z",
    "updated_at": "2015-08-31T22:37:26Z",
    "html_url": "https://github.com/apache/airflow/pull/254#discussion_r38357815",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/254",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/38357815"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/254#discussion_r38357815"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/254"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/38357815/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 5,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 5,
    "position": 5,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/38358136",
    "pull_request_review_id": null,
    "id": 38358136,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzU4MTM2",
    "diff_hunk": "@@ -33,7 +34,11 @@ def get_connections(self, conn_id):\n         return db\n \n     def get_connection(self, conn_id):",
    "path": "airflow/hooks/base_hook.py",
    "commit_id": "5bc95e230c3740aa3d601a17670b72c23a1dcfa4",
    "original_commit_id": "9d84167ed3cee7626fe3342295cd4d5658f85ac7",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Let's call os.environ.get only once:\n`env_conn_uri = os.environ.get(CONN_ENV_PREFIX  + conn_id)`\n",
    "created_at": "2015-08-31T20:53:50Z",
    "updated_at": "2015-08-31T22:37:26Z",
    "html_url": "https://github.com/apache/airflow/pull/254#discussion_r38358136",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/254",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/38358136"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/254#discussion_r38358136"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/254"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/38358136/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 10,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/38358185",
    "pull_request_review_id": null,
    "id": 38358185,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzU4MTg1",
    "diff_hunk": "@@ -33,7 +34,11 @@ def get_connections(self, conn_id):\n         return db\n \n     def get_connection(self, conn_id):\n-        conn = random.choice(self.get_connections(conn_id))\n+        if os.environ.get(conn_id):\n+            temp_uri = urlparse(os.environ.get(conn_id))\n+            conn = Connection(uri=temp_uri)\n+        if conn is None:",
    "path": "airflow/hooks/base_hook.py",
    "commit_id": "5bc95e230c3740aa3d601a17670b72c23a1dcfa4",
    "original_commit_id": "9d84167ed3cee7626fe3342295cd4d5658f85ac7",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "\"Referenced before assignement\"?\n",
    "created_at": "2015-08-31T20:54:21Z",
    "updated_at": "2015-08-31T22:37:26Z",
    "html_url": "https://github.com/apache/airflow/pull/254#discussion_r38358185",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/254",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/38358185"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/254#discussion_r38358185"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/254"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/38358185/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 15,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/38358472",
    "pull_request_review_id": null,
    "id": 38358472,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzU4NDcy",
    "diff_hunk": "@@ -311,22 +312,37 @@ class Connection(Base):\n     schema = Column(String(500))\n     login = Column(String(500))\n     _password = Column('password', String(500))\n-    is_encrypted = Column(Boolean, unique=False, default=False)\n     port = Column(Integer())\n+    is_encrypted = Column(Boolean, unique=False, default=False)\n     extra = Column(String(5000))\n \n     def __init__(\n             self, conn_id=None, conn_type=None,\n             host=None, login=None, password=None,\n-            schema=None, port=None, extra=None):\n+            schema=None, port=None, extra=None,\n+            uri=None):\n         self.conn_id = conn_id\n         self.conn_type = conn_type\n-        self.host = host\n-        self.login = login\n-        self.password = password\n-        self.schema = schema\n-        self.port = port\n-        self.extra = extra\n+        if uri:\n+            self.parse_from_uri(uri)\n+        else:\n+            self.host = host\n+            self.login = login\n+            self.password = password\n+            self.schema = schema\n+            self.port = port\n+            self.extra = extra\n+\n+    def parse_from_uri(self, uri):\n+        temp_uri = urlparse(uri)\n+        hostname = temp_uri.hostname or ''\n+        if '%2f' in hostname:",
    "path": "airflow/models.py",
    "commit_id": "5bc95e230c3740aa3d601a17670b72c23a1dcfa4",
    "original_commit_id": "9d84167ed3cee7626fe3342295cd4d5658f85ac7",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "I'm surprised that `urlparse` doens't urldecode... I guess hostname is not expected to have slashes in it...\n",
    "created_at": "2015-08-31T20:56:51Z",
    "updated_at": "2015-08-31T22:37:26Z",
    "html_url": "https://github.com/apache/airflow/pull/254#discussion_r38358472",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/254",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/38358472"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/254#discussion_r38358472"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/254"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/38358472/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 339,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 44,
    "position": 44,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/38544546",
    "pull_request_review_id": null,
    "id": 38544546,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTQ0NTQ2",
    "diff_hunk": "@@ -502,8 +502,24 @@ def as_tuple(obj):\n         return tuple([obj])\n \n \n-def round_time(dt, delta):\n-    delta = delta.total_seconds()\n-    seconds = (dt - dt.min).seconds\n-    rounding = (seconds + delta / 2) // delta * delta\n-    return dt + timedelta(0, rounding - seconds, -dt.microsecond)\n+def round_time(dt, delta, start_date=datetime.min):",
    "path": "airflow/utils.py",
    "commit_id": "53ab74a3f51ed667a78d739abcd6d845d8517370",
    "original_commit_id": "e6a44ae93c859457a46cbbf8238367e3e41af129",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "This function is very opaque to me\n",
    "created_at": "2015-09-02T15:17:38Z",
    "updated_at": "2015-09-11T11:29:17Z",
    "html_url": "https://github.com/apache/airflow/pull/345#discussion_r38544546",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/345",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/38544546"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/345#discussion_r38544546"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/345"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/38544546/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 505,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 9,
    "position": 9,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/38616074",
    "pull_request_review_id": null,
    "id": 38616074,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjE2MDc0",
    "diff_hunk": "@@ -35,7 +38,12 @@ def get_connections(cls, conn_id):\n \n     @classmethod\n     def get_connection(cls, conn_id):\n-        conn = random.choice(cls.get_connections(conn_id))\n+        environment_uri = os.environ.get(CONN_ENV_PREFIX + conn_id.upper())",
    "path": "airflow/hooks/base_hook.py",
    "commit_id": "c8e84800eb015a8cbafe1196ba448eb7a120499a",
    "original_commit_id": "c8e84800eb015a8cbafe1196ba448eb7a120499a",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "I changed that to enforce upper case env vars as in `AIRFLOW_CONN_AIRFLOW_DB`\n",
    "created_at": "2015-09-03T06:20:46Z",
    "updated_at": "2015-09-03T06:20:46Z",
    "html_url": "https://github.com/apache/airflow/pull/354#discussion_r38616074",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/354",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/38616074"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/354#discussion_r38616074"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/354"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/38616074/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 41,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 20,
    "position": 20,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/38647133",
    "pull_request_review_id": null,
    "id": 38647133,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjQ3MTMz",
    "diff_hunk": "@@ -502,8 +502,24 @@ def as_tuple(obj):\n         return tuple([obj])\n \n \n-def round_time(dt, delta):\n-    delta = delta.total_seconds()\n-    seconds = (dt - dt.min).seconds\n-    rounding = (seconds + delta / 2) // delta * delta\n-    return dt + timedelta(0, rounding - seconds, -dt.microsecond)\n+def round_time(dt, delta, start_date=datetime.min):",
    "path": "airflow/utils.py",
    "commit_id": "53ab74a3f51ed667a78d739abcd6d845d8517370",
    "original_commit_id": "e6a44ae93c859457a46cbbf8238367e3e41af129",
    "user": {
      "login": "markusschmaus",
      "id": 2372154,
      "node_id": "MDQ6VXNlcjIzNzIxNTQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2372154?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/markusschmaus",
      "html_url": "https://github.com/markusschmaus",
      "followers_url": "https://api.github.com/users/markusschmaus/followers",
      "following_url": "https://api.github.com/users/markusschmaus/following{/other_user}",
      "gists_url": "https://api.github.com/users/markusschmaus/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/markusschmaus/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/markusschmaus/subscriptions",
      "organizations_url": "https://api.github.com/users/markusschmaus/orgs",
      "repos_url": "https://api.github.com/users/markusschmaus/repos",
      "events_url": "https://api.github.com/users/markusschmaus/events{/privacy}",
      "received_events_url": "https://api.github.com/users/markusschmaus/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "@mistercrunch \nI added comments explaining this function. Does this help?\n",
    "created_at": "2015-09-03T13:50:26Z",
    "updated_at": "2015-09-11T11:29:17Z",
    "html_url": "https://github.com/apache/airflow/pull/345#discussion_r38647133",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/345",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/38647133"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/345#discussion_r38647133"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/345"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/38647133/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 505,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 9,
    "position": 9,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/38882104",
    "pull_request_review_id": null,
    "id": 38882104,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODgyMTA0",
    "diff_hunk": "@@ -816,7 +816,8 @@ def pool_full(self, session):\n             .first()\n         )\n         if not pool:\n-            return False\n+            raise ValueError('Task specified a pool ({}) but the pool '",
    "path": "airflow/models.py",
    "commit_id": "9fe611498ccc837e18c227a4276c14905f007953",
    "original_commit_id": "9fe611498ccc837e18c227a4276c14905f007953",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "nit: use double quotes for sentences so that you don't have to escape apostrophes\n",
    "created_at": "2015-09-07T23:25:18Z",
    "updated_at": "2015-09-07T23:25:18Z",
    "html_url": "https://github.com/apache/airflow/pull/364#discussion_r38882104",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/364",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/38882104"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/364#discussion_r38882104"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/364"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/38882104/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 819,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 5,
    "position": 5,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/38882361",
    "pull_request_review_id": null,
    "id": 38882361,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODgyMzYx",
    "diff_hunk": "@@ -0,0 +1,79 @@\n+import cx_Oracle\n+import logging\n+\n+from airflow.hooks.dbapi_hook import DbApiHook\n+\n+class OracleHook(DbApiHook):\n+    \"\"\"\n+    Interact with Oracle SQL Server.\n+    \"\"\"\n+    conn_name_attr = 'oracle_conn_id'\n+    default_conn_name = 'oracle_default'\n+    supports_autocommit = False\n+\n+    def get_conn(self):\n+        \"\"\"\n+        Returns a oracle connection object\n+        \"\"\"\n+        conn = self.get_connection(self.oracle_conn_id)\n+        try:\n+            conn = cx_Oracle.connect(conn.login, conn.password, conn.host)\n+        except:",
    "path": "airflow/hooks/oracle_hook.py",
    "commit_id": "a4f067b04b55bb4d3ba71896f2f23589f8501d79",
    "original_commit_id": "1c720e419ba26826644fe7388e092eaf3ce49434",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Why is this in an except clause? Seems like it should be in an `if`.\n\nYou may want to clarify the connection options (especially the extra parameters) in the docstring\n",
    "created_at": "2015-09-07T23:37:35Z",
    "updated_at": "2015-09-08T20:43:57Z",
    "html_url": "https://github.com/apache/airflow/pull/368#discussion_r38882361",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/368",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/38882361"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/368#discussion_r38882361"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/368"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/38882361/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 21,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/38882415",
    "pull_request_review_id": null,
    "id": 38882415,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODgyNDE1",
    "diff_hunk": "@@ -0,0 +1,79 @@\n+import cx_Oracle\n+import logging\n+\n+from airflow.hooks.dbapi_hook import DbApiHook\n+\n+class OracleHook(DbApiHook):\n+    \"\"\"\n+    Interact with Oracle SQL Server.\n+    \"\"\"\n+    conn_name_attr = 'oracle_conn_id'\n+    default_conn_name = 'oracle_default'\n+    supports_autocommit = False\n+\n+    def get_conn(self):\n+        \"\"\"\n+        Returns a oracle connection object\n+        \"\"\"\n+        conn = self.get_connection(self.oracle_conn_id)\n+        try:\n+            conn = cx_Oracle.connect(conn.login, conn.password, conn.host)\n+        except:\n+            # add support for custom DSN connections\n+            dsn = conn.extra_dejson.get('dsn', None)\n+            service_name = conn.extra_dejson.get('service_name', None)\n+            dsn = cx_Oracle.makedsn(dsn, conn.port, service_name=service_name)\n+            conn = cx_Oracle.connect(conn.login, conn.password, dsn=dsn)\n+        return conn\n+\n+    def get_pandas_df(self, sql, parameters = None):",
    "path": "airflow/hooks/oracle_hook.py",
    "commit_id": "a4f067b04b55bb4d3ba71896f2f23589f8501d79",
    "original_commit_id": "1c720e419ba26826644fe7388e092eaf3ce49434",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "I'm not sure if the lower case change is necessary, but if you think it is you should call `super` and then alter the column list to avoid duplicating the rest of the code.\n\nNit: no spaces around `=` in function header\n",
    "created_at": "2015-09-07T23:40:43Z",
    "updated_at": "2015-09-08T20:43:57Z",
    "html_url": "https://github.com/apache/airflow/pull/368#discussion_r38882415",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/368",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/38882415"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/368#discussion_r38882415"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/368"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/38882415/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 29,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/38882434",
    "pull_request_review_id": null,
    "id": 38882434,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODgyNDM0",
    "diff_hunk": "@@ -0,0 +1,79 @@\n+import cx_Oracle\n+import logging\n+\n+from airflow.hooks.dbapi_hook import DbApiHook\n+\n+class OracleHook(DbApiHook):\n+    \"\"\"\n+    Interact with Oracle SQL Server.\n+    \"\"\"\n+    conn_name_attr = 'oracle_conn_id'\n+    default_conn_name = 'oracle_default'\n+    supports_autocommit = False\n+\n+    def get_conn(self):\n+        \"\"\"\n+        Returns a oracle connection object\n+        \"\"\"\n+        conn = self.get_connection(self.oracle_conn_id)\n+        try:\n+            conn = cx_Oracle.connect(conn.login, conn.password, conn.host)\n+        except:\n+            # add support for custom DSN connections\n+            dsn = conn.extra_dejson.get('dsn', None)\n+            service_name = conn.extra_dejson.get('service_name', None)\n+            dsn = cx_Oracle.makedsn(dsn, conn.port, service_name=service_name)\n+            conn = cx_Oracle.connect(conn.login, conn.password, dsn=dsn)\n+        return conn\n+\n+    def get_pandas_df(self, sql, parameters = None):\n+        \"\"\"\n+        Executes the sql and returns a pandas dataframe\n+        \"\"\"\n+        import pandas.io.sql as psql\n+        conn = self.get_conn()\n+        df = psql.read_sql(sql, con=conn)\n+        df.columns = df.columns.map(lambda x: x.lower()) # lower column names to have same output as other hooks\n+        conn.close()\n+        return df\n+\n+    def insert_rows(self, table, rows, target_fields = None, commit_every = 1000):",
    "path": "airflow/hooks/oracle_hook.py",
    "commit_id": "a4f067b04b55bb4d3ba71896f2f23589f8501d79",
    "original_commit_id": "1c720e419ba26826644fe7388e092eaf3ce49434",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Can you highlight the difference from the parent class? Looks very similar at a glance\n",
    "created_at": "2015-09-07T23:41:49Z",
    "updated_at": "2015-09-08T20:43:57Z",
    "html_url": "https://github.com/apache/airflow/pull/368#discussion_r38882434",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/368",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/38882434"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/368#discussion_r38882434"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/368"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/38882434/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 39,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 40,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/38988800",
    "pull_request_review_id": null,
    "id": 38988800,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTg4ODAw",
    "diff_hunk": "@@ -816,7 +816,8 @@ def pool_full(self, session):\n             .first()\n         )\n         if not pool:\n-            return False\n+            raise ValueError('Task specified a pool ({}) but the pool '",
    "path": "airflow/models.py",
    "commit_id": "9fe611498ccc837e18c227a4276c14905f007953",
    "original_commit_id": "9fe611498ccc837e18c227a4276c14905f007953",
    "user": {
      "login": "jlowin",
      "id": 153965,
      "node_id": "MDQ6VXNlcjE1Mzk2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/153965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jlowin",
      "html_url": "https://github.com/jlowin",
      "followers_url": "https://api.github.com/users/jlowin/followers",
      "following_url": "https://api.github.com/users/jlowin/following{/other_user}",
      "gists_url": "https://api.github.com/users/jlowin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jlowin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jlowin/subscriptions",
      "organizations_url": "https://api.github.com/users/jlowin/orgs",
      "repos_url": "https://api.github.com/users/jlowin/repos",
      "events_url": "https://api.github.com/users/jlowin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jlowin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "will do!\n",
    "created_at": "2015-09-08T22:36:35Z",
    "updated_at": "2015-09-08T22:36:35Z",
    "html_url": "https://github.com/apache/airflow/pull/364#discussion_r38988800",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/364",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/38988800"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/364#discussion_r38988800"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/364"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/38988800/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 819,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 5,
    "position": 5,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/39190427",
    "pull_request_review_id": null,
    "id": 39190427,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTkwNDI3",
    "diff_hunk": "@@ -26,11 +28,13 @@ def __init__(\n             to,\n             subject,\n             html_content,\n+            files=[],",
    "path": "airflow/operators/email_operator.py",
    "commit_id": "e85a960d055bc5420253fed7a0b973d10cc6a1d5",
    "original_commit_id": "d4fa61ad1a6a33798700c421fc04cb7b3ffdb5ee",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "That's a python gotcha! never instantiate in default of a method header or all functions calls will refer to the same object id. Instead, go `file=None`, and in the body of the function\n`self.files = files or []`\n",
    "created_at": "2015-09-10T17:48:26Z",
    "updated_at": "2015-09-11T00:20:06Z",
    "html_url": "https://github.com/apache/airflow/pull/379#discussion_r39190427",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/379",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/39190427"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/379#discussion_r39190427"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/379"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/39190427/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 13,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/39190479",
    "pull_request_review_id": null,
    "id": 39190479,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTkwNDc5",
    "diff_hunk": "@@ -353,7 +354,7 @@ def ask_yesno(question):\n             print(\"Please respond by yes or no.\")\n \n \n-def send_email(to, subject, html_content):\n+def send_email(to, subject, html_content, files=[]):",
    "path": "airflow/utils.py",
    "commit_id": "e85a960d055bc5420253fed7a0b973d10cc6a1d5",
    "original_commit_id": "d4fa61ad1a6a33798700c421fc04cb7b3ffdb5ee",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "same here!\n",
    "created_at": "2015-09-10T17:48:49Z",
    "updated_at": "2015-09-11T00:20:06Z",
    "html_url": "https://github.com/apache/airflow/pull/379#discussion_r39190479",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/379",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/39190479"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/379#discussion_r39190479"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/379"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/39190479/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 13,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/39591215",
    "pull_request_review_id": null,
    "id": 39591215,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTkxMjE1",
    "diff_hunk": "@@ -89,13 +91,58 @@ def run_cli(self, hql, schema=None):\n                 stdout = ''\n                 for line in iter(sp.stdout.readline, ''):\n                     stdout += line\n-                    logging.info(line.strip())\n+                    if not test:\n+                        logging.info(line.strip())\n                 sp.wait()\n \n                 if sp.returncode:\n-                    raise AirflowException(all_err)\n+                    if not test:\n+                        raise AirflowException(all_err)\n+                    else:\n+                        return (False, stdout)",
    "path": "airflow/hooks/hive_hooks.py",
    "commit_id": "6619cdedace3aaea03bec655929eef98b36aebcf",
    "original_commit_id": "7c37ec12a77e11c1fbba019d38bff9ca36ff7a75",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "It's confusing to have functions return tuples (namedtuple or object over tuples), and even more so to have them return heterogenous types depending on the call. \n\nIf you run the call in a `try:` block you can essentially infer the true/false here.\n",
    "created_at": "2015-09-16T03:39:07Z",
    "updated_at": "2015-09-18T00:34:51Z",
    "html_url": "https://github.com/apache/airflow/pull/400#discussion_r39591215",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/400",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/39591215"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/400#discussion_r39591215"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/400"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/39591215/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 41,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/39594112",
    "pull_request_review_id": null,
    "id": 39594112,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTk0MTEy",
    "diff_hunk": "@@ -89,13 +91,58 @@ def run_cli(self, hql, schema=None):\n                 stdout = ''\n                 for line in iter(sp.stdout.readline, ''):\n                     stdout += line\n-                    logging.info(line.strip())\n+                    if not test:\n+                        logging.info(line.strip())\n                 sp.wait()\n \n                 if sp.returncode:\n-                    raise AirflowException(all_err)\n+                    if not test:\n+                        raise AirflowException(all_err)\n+                    else:\n+                        return (False, stdout)\n+\n+                if not test:\n+                    return stdout\n+                else:\n+                    return (True, stdout)\n+\n+    def test_hql(self, hql):\n+        \"\"\"\n+        Test an hql statement using the hive cli and EXPLAIN\n+\n+        \"\"\"\n+        create, insert, other = [], [], []\n+        for query in hql.split(';'):  # naive\n+            query = query.lower()\n+            if 'create table' in query:\n+                create.append(query)\n+            elif 'set' in query or 'add jar' in query or 'temporary' in query:",
    "path": "airflow/hooks/hive_hooks.py",
    "commit_id": "6619cdedace3aaea03bec655929eef98b36aebcf",
    "original_commit_id": "7c37ec12a77e11c1fbba019d38bff9ca36ff7a75",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "`'set'` in query is dangerous. maybe a combination of `strip` and `startswith`?\n",
    "created_at": "2015-09-16T05:02:47Z",
    "updated_at": "2015-09-18T00:34:51Z",
    "html_url": "https://github.com/apache/airflow/pull/400#discussion_r39594112",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/400",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/39594112"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/400#discussion_r39594112"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/400"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/39594112/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 58,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/39688146",
    "pull_request_review_id": null,
    "id": 39688146,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Njg4MTQ2",
    "diff_hunk": "@@ -78,25 +79,66 @@ def run_cli(self, hql, schema=None):\n                 if self.hive_cli_params:\n                     hive_params_list = self.hive_cli_params.split()\n                     hive_cmd.extend(hive_params_list)\n-                logging.info(\" \".join(hive_cmd))\n+                if verbose:\n+                    logging.info(\" \".join(hive_cmd))\n                 sp = subprocess.Popen(\n                     hive_cmd,\n                     stdout=subprocess.PIPE,\n                     stderr=subprocess.STDOUT,\n                     cwd=tmp_dir)\n-                all_err = ''\n                 self.sp = sp\n                 stdout = ''\n                 for line in iter(sp.stdout.readline, ''):\n                     stdout += line\n-                    logging.info(line.strip())\n+                    if verbose:\n+                        logging.info(line.strip())\n                 sp.wait()\n \n                 if sp.returncode:\n-                    raise AirflowException(all_err)\n+                    raise AirflowException(stdout)\n \n                 return stdout\n \n+\n+    def test_hql(self, hql):\n+        \"\"\"\n+        Test an hql statement using the hive cli and EXPLAIN\n+\n+        \"\"\"\n+        create, insert, other = [], [], []\n+        for query in hql.split(';'):  # naive\n+            query = query.lower().strip()\n+            if query.startswith('create table'):\n+                create.append(query)\n+            elif query.startswith(('set', 'add jar', 'temporary')):",
    "path": "airflow/hooks/hive_hooks.py",
    "commit_id": "6619cdedace3aaea03bec655929eef98b36aebcf",
    "original_commit_id": "177afe7b135edec64c2f0cf0aa06637d85836284",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Trailing spaces? maybe at least for `set`\n`('set ', 'add jar ', 'temporary ')`\n",
    "created_at": "2015-09-16T21:32:53Z",
    "updated_at": "2015-09-18T00:34:51Z",
    "html_url": "https://github.com/apache/airflow/pull/400#discussion_r39688146",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/400",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/39688146"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/400#discussion_r39688146"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/400"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/39688146/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 56,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/39694660",
    "pull_request_review_id": null,
    "id": 39694660,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Njk0NjYw",
    "diff_hunk": "@@ -316,6 +321,15 @@ def process_dag(self, dag, executor):\n         DagModel = models.DagModel\n         session = settings.Session()\n \n+        # picklin'\n+        pickle_id = None\n+        if self.do_pickle and self.executor.__class__ not in (\n+                executors.LocalExecutor, executors.SequentialExecutor):\n+            pickle = models.DagPickle(self.dag)",
    "path": "airflow/jobs.py",
    "commit_id": "fb7366c6c837b50d614283861d54f2747e984617",
    "original_commit_id": "ff7a0d84302c8e12b0a2b8482bd8723208ebfd6d",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Does `self.dag` exist? Should it be just `dag`?\n",
    "created_at": "2015-09-16T22:43:30Z",
    "updated_at": "2015-09-17T02:29:29Z",
    "html_url": "https://github.com/apache/airflow/pull/394#discussion_r39694660",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/394",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/39694660"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/394#discussion_r39694660"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/394"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/39694660/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 36,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/39827965",
    "pull_request_review_id": null,
    "id": 39827965,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODI3OTY1",
    "diff_hunk": "@@ -27,6 +27,7 @@\n }\n \n _import_module_attrs(globals(), _hooks)\n+from airflow.contrib.hooks import *",
    "path": "airflow/hooks/__init__.py",
    "commit_id": "d6a2c7948c1b15818357a7250bc292e68499c51a",
    "original_commit_id": "05be03c9127644edf065b87ce6fbd9b8c30345de",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Let's leave this line out until we retrofit `import_module_attrs` to play nicely with `contrib/`, or actually, people can explicitly reference `airflow.contrib.*` in their script, makes it more clear that it is community contributed.\n",
    "created_at": "2015-09-18T06:43:49Z",
    "updated_at": "2015-09-18T12:56:38Z",
    "html_url": "https://github.com/apache/airflow/pull/405#discussion_r39827965",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/405",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/39827965"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/405#discussion_r39827965"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/405"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/39827965/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 4,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/39850587",
    "pull_request_review_id": null,
    "id": 39850587,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODUwNTg3",
    "diff_hunk": "@@ -27,6 +27,7 @@\n }\n \n _import_module_attrs(globals(), _hooks)\n+from airflow.contrib.hooks import *",
    "path": "airflow/hooks/__init__.py",
    "commit_id": "d6a2c7948c1b15818357a7250bc292e68499c51a",
    "original_commit_id": "05be03c9127644edf065b87ce6fbd9b8c30345de",
    "user": {
      "login": "jlowin",
      "id": 153965,
      "node_id": "MDQ6VXNlcjE1Mzk2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/153965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jlowin",
      "html_url": "https://github.com/jlowin",
      "followers_url": "https://api.github.com/users/jlowin/followers",
      "following_url": "https://api.github.com/users/jlowin/following{/other_user}",
      "gists_url": "https://api.github.com/users/jlowin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jlowin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jlowin/subscriptions",
      "organizations_url": "https://api.github.com/users/jlowin/orgs",
      "repos_url": "https://api.github.com/users/jlowin/repos",
      "events_url": "https://api.github.com/users/jlowin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jlowin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "@mistercrunch got it. It's now accessible from `airflow.contrib.hooks.FTPHook` and I added a placeholder module to show to how to add operators to contrib.\n",
    "created_at": "2015-09-18T12:47:14Z",
    "updated_at": "2015-09-18T12:56:38Z",
    "html_url": "https://github.com/apache/airflow/pull/405#discussion_r39850587",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/405",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/39850587"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/405#discussion_r39850587"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/405"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/39850587/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 4,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/39922795",
    "pull_request_review_id": null,
    "id": 39922795,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTIyNzk1",
    "diff_hunk": "@@ -42,6 +44,10 @@ def __init__(self,\n     def registered(self, driver, frameworkId, masterInfo):\n         logging.info(\"AirflowScheduler registered to mesos with framework ID %s\", frameworkId.value)\n \n+        if conf.getboolean('mesos', 'CHECKPOINT') and conf.get('mesos', 'FAILOVER_TIMEOUT'):\n+            with open(FRAMEWORK_ID_PATH, mode=\"w+\") as f:\n+                f.write(frameworkId.value)",
    "path": "airflow/contrib/executors/mesos_executor.py",
    "commit_id": "033e7f03fed13078871ebe01420a9263c06a8426",
    "original_commit_id": "ef0614789b681b902e70f8bbf25be00c96083093",
    "user": {
      "login": "wndhydrnt",
      "id": 3942978,
      "node_id": "MDQ6VXNlcjM5NDI5Nzg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3942978?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/wndhydrnt",
      "html_url": "https://github.com/wndhydrnt",
      "followers_url": "https://api.github.com/users/wndhydrnt/followers",
      "following_url": "https://api.github.com/users/wndhydrnt/following{/other_user}",
      "gists_url": "https://api.github.com/users/wndhydrnt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/wndhydrnt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/wndhydrnt/subscriptions",
      "organizations_url": "https://api.github.com/users/wndhydrnt/orgs",
      "repos_url": "https://api.github.com/users/wndhydrnt/repos",
      "events_url": "https://api.github.com/users/wndhydrnt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/wndhydrnt/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "The ID of the framework is stored on the local disk. This has the drawback that re-registering only works while the Scheduler process is always started on the same node.\n\nThe ID could also be stored in the database. From a quick look at the schema, there is no table for storing arbitrary information. Should I add a new one for this purpose?\n",
    "created_at": "2015-09-19T19:18:17Z",
    "updated_at": "2015-09-26T13:16:56Z",
    "html_url": "https://github.com/apache/airflow/pull/431#discussion_r39922795",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/431",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/39922795"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/431#discussion_r39922795"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/431"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/39922795/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 34,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/39932901",
    "pull_request_review_id": null,
    "id": 39932901,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTMyOTAx",
    "diff_hunk": "@@ -118,10 +124,16 @@ def resourceOffers(self, driver, offers):\n             driver.launchTasks(offer.id, tasks)\n \n     def statusUpdate(self, driver, update):\n-        logging.info(\"Task %s is in state %s, data %s\", \\\n-            update.task_id.value, mesos_pb2.TaskState.Name(update.state), str(update.data))\n-        \n-        key = self.task_key_map[update.task_id.value]\n+        logging.info(\"Task %s is in state %s, data %s\",\n+                     update.task_id.value, mesos_pb2.TaskState.Name(update.state), str(update.data))\n+\n+        try:\n+            key = self.task_key_map[update.task_id.value]\n+        except KeyError:\n+            # The map may not contain an item if the framework re-registered after a failover.\n+            # Discard these tasks.\n+            logging.warn(\"Unrecognised task key %s\" % update.task_id.value)",
    "path": "airflow/contrib/executors/mesos_executor.py",
    "commit_id": "033e7f03fed13078871ebe01420a9263c06a8426",
    "original_commit_id": "ef0614789b681b902e70f8bbf25be00c96083093",
    "user": {
      "login": "kapil-malik",
      "id": 3902288,
      "node_id": "MDQ6VXNlcjM5MDIyODg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3902288?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kapil-malik",
      "html_url": "https://github.com/kapil-malik",
      "followers_url": "https://api.github.com/users/kapil-malik/followers",
      "following_url": "https://api.github.com/users/kapil-malik/following{/other_user}",
      "gists_url": "https://api.github.com/users/kapil-malik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kapil-malik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kapil-malik/subscriptions",
      "organizations_url": "https://api.github.com/users/kapil-malik/orgs",
      "repos_url": "https://api.github.com/users/kapil-malik/repos",
      "events_url": "https://api.github.com/users/kapil-malik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kapil-malik/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Good point. For moving towards a production class executor, I guess we should also try to reschedule / handle these tasks. For example, it might make more sense to keep framework state in a local db (or as is more common amongst mesos frameworks, in zookeeper), instead of in-memory. Further, that will also be useful when we move towards HA for airflow scheduler (say https://github.com/airbnb/airflow/issues/392 ). May be we can open an issue and take this up sometime later.\n",
    "created_at": "2015-09-20T18:36:59Z",
    "updated_at": "2015-09-26T13:16:56Z",
    "html_url": "https://github.com/apache/airflow/pull/431#discussion_r39932901",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/431",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/39932901"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/431#discussion_r39932901"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/431"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/39932901/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 156,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "NONE",
    "original_position": 64,
    "position": 82,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/39934479",
    "pull_request_review_id": null,
    "id": 39934479,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTM0NDc5",
    "diff_hunk": "@@ -118,10 +124,16 @@ def resourceOffers(self, driver, offers):\n             driver.launchTasks(offer.id, tasks)\n \n     def statusUpdate(self, driver, update):\n-        logging.info(\"Task %s is in state %s, data %s\", \\\n-            update.task_id.value, mesos_pb2.TaskState.Name(update.state), str(update.data))\n-        \n-        key = self.task_key_map[update.task_id.value]\n+        logging.info(\"Task %s is in state %s, data %s\",\n+                     update.task_id.value, mesos_pb2.TaskState.Name(update.state), str(update.data))\n+\n+        try:\n+            key = self.task_key_map[update.task_id.value]\n+        except KeyError:\n+            # The map may not contain an item if the framework re-registered after a failover.\n+            # Discard these tasks.\n+            logging.warn(\"Unrecognised task key %s\" % update.task_id.value)",
    "path": "airflow/contrib/executors/mesos_executor.py",
    "commit_id": "033e7f03fed13078871ebe01420a9263c06a8426",
    "original_commit_id": "ef0614789b681b902e70f8bbf25be00c96083093",
    "user": {
      "login": "wndhydrnt",
      "id": 3942978,
      "node_id": "MDQ6VXNlcjM5NDI5Nzg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3942978?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/wndhydrnt",
      "html_url": "https://github.com/wndhydrnt",
      "followers_url": "https://api.github.com/users/wndhydrnt/followers",
      "following_url": "https://api.github.com/users/wndhydrnt/following{/other_user}",
      "gists_url": "https://api.github.com/users/wndhydrnt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/wndhydrnt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/wndhydrnt/subscriptions",
      "organizations_url": "https://api.github.com/users/wndhydrnt/orgs",
      "repos_url": "https://api.github.com/users/wndhydrnt/repos",
      "events_url": "https://api.github.com/users/wndhydrnt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/wndhydrnt/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "This is not as big a problem as it looks because [get_event_buffer](https://github.com/airbnb/airflow/blob/master/airflow/executors/base_executor.py#L97) is only called by [BackfillJob](https://github.com/airbnb/airflow/blob/master/airflow/jobs.py#L641).\n",
    "created_at": "2015-09-20T20:58:45Z",
    "updated_at": "2015-09-26T13:16:56Z",
    "html_url": "https://github.com/apache/airflow/pull/431#discussion_r39934479",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/431",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/39934479"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/431#discussion_r39934479"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/431"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/39934479/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 156,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 64,
    "position": 82,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/40129527",
    "pull_request_review_id": null,
    "id": 40129527,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTI5NTI3",
    "diff_hunk": "@@ -29,6 +29,8 @@\n from sqlalchemy import event, exc\n from sqlalchemy.pool import Pool\n \n+import numpy",
    "path": "airflow/utils.py",
    "commit_id": "46886a37516a11fa507c4399d359bebf2e981f3c",
    "original_commit_id": "c8ce042ea6d5e3ee5ae7d17a983b218c7e0b4ba5",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "It's pretty standard to do `import numpy as np`, then it'll help with respecting the 80 char per line limit we've been following to stay in line with PEP8 when possible.\n",
    "created_at": "2015-09-22T19:03:51Z",
    "updated_at": "2015-09-22T19:44:37Z",
    "html_url": "https://github.com/apache/airflow/pull/427#discussion_r40129527",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/427",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/40129527"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/427#discussion_r40129527"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/427"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/40129527/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 13,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/40151135",
    "pull_request_review_id": null,
    "id": 40151135,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTUxMTM1",
    "diff_hunk": "@@ -971,6 +971,10 @@ def action(self):\n             # Flagging tasks as successful\n             session = settings.Session()\n             task_ids = [task_id]\n+            end_date = ((dag.latest_execution_date or datetime.now())\n+                        if future else execution_date)\n+            start_date = dag.default_args['start_date'] if past else execution_date",
    "path": "airflow/www/app.py",
    "commit_id": "6f8372d752e7fae89ac1740749d662d27b06dcca",
    "original_commit_id": "c99138b7008412246a488dbf8162e0be8dbac861",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "`dag.default_args['start_date']` may not exist\nMaybe `min([task.start_date for task in dag.tasks])`\n\nI think we should limit the number of runs though, and maybe alert if reached.\n",
    "created_at": "2015-09-22T22:10:43Z",
    "updated_at": "2015-09-30T21:23:31Z",
    "html_url": "https://github.com/apache/airflow/pull/448#discussion_r40151135",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/448",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/40151135"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/448#discussion_r40151135"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/448"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/40151135/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 33,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/40151405",
    "pull_request_review_id": null,
    "id": 40151405,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTUxNDA1",
    "diff_hunk": "@@ -980,25 +984,27 @@ def action(self):\n                     t.task_id\n                     for t in task.get_flat_relatives(upstream=True)]\n             TI = models.TaskInstance\n+            dates = utils.date_range(start_date, end_date)",
    "path": "airflow/www/app.py",
    "commit_id": "6f8372d752e7fae89ac1740749d662d27b06dcca",
    "original_commit_id": "c99138b7008412246a488dbf8162e0be8dbac861",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Limit the range?\n\n```\nif len(dates) > MAX_PERIOD:\n    flash(\"Limited the ....\", \"warning\")\n    dates = dates[-MAX_PERIOD:]\n```\n",
    "created_at": "2015-09-22T22:13:40Z",
    "updated_at": "2015-09-30T21:23:31Z",
    "html_url": "https://github.com/apache/airflow/pull/448#discussion_r40151405",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/448",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/40151405"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/448#discussion_r40151405"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/448"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/40151405/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 1001,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 42,
    "position": 59,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/40151889",
    "pull_request_review_id": null,
    "id": 40151889,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTUxODg5",
    "diff_hunk": "@@ -980,25 +984,27 @@ def action(self):\n                     t.task_id\n                     for t in task.get_flat_relatives(upstream=True)]\n             TI = models.TaskInstance\n+            dates = utils.date_range(start_date, end_date)",
    "path": "airflow/www/app.py",
    "commit_id": "6f8372d752e7fae89ac1740749d662d27b06dcca",
    "original_commit_id": "c99138b7008412246a488dbf8162e0be8dbac861",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Actually I'm not sure what MAX_PERIODS should be, maybe we should limit what comes out of the cartesian product instead...\n",
    "created_at": "2015-09-22T22:18:49Z",
    "updated_at": "2015-09-30T21:23:31Z",
    "html_url": "https://github.com/apache/airflow/pull/448#discussion_r40151889",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/448",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/40151889"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/448#discussion_r40151889"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/448"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/40151889/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 1001,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 42,
    "position": 59,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/40152942",
    "pull_request_review_id": null,
    "id": 40152942,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTUyOTQy",
    "diff_hunk": "@@ -980,25 +984,27 @@ def action(self):\n                     t.task_id\n                     for t in task.get_flat_relatives(upstream=True)]\n             TI = models.TaskInstance\n+            dates = utils.date_range(start_date, end_date)\n             tis = session.query(TI).filter(\n                 TI.dag_id == dag_id,\n-                TI.execution_date == execution_date,\n+                TI.execution_date.in_(dates),",
    "path": "airflow/www/app.py",
    "commit_id": "6f8372d752e7fae89ac1740749d662d27b06dcca",
    "original_commit_id": "c99138b7008412246a488dbf8162e0be8dbac861",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "We may want to add a filter here on `not success` (I think it would reduce the number of database operations as we don't need to touch task instances that have already succeeded)\n",
    "created_at": "2015-09-22T22:30:28Z",
    "updated_at": "2015-09-30T21:23:31Z",
    "html_url": "https://github.com/apache/airflow/pull/448#discussion_r40152942",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/448",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/40152942"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/448#discussion_r40152942"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/448"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/40152942/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 1004,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 46,
    "position": 63,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/40214725",
    "pull_request_review_id": null,
    "id": 40214725,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjE0NzI1",
    "diff_hunk": "@@ -272,13 +272,29 @@ def manage_slas(self, dag, session=None):\n             .filter(SlaMiss.dag_id == dag.dag_id)\n             .all()\n         )\n+\n+        current_run_date = datetime.now() - dag.schedule_interval\n+        blocking_tis = (\n+            session\n+            .query(TI)\n+            .filter(TI.state != State.SUCCESS)\n+            .filter(TI.execution_date == current_run_date)\n+            .filter(TI.are_dependencies_met())",
    "path": "airflow/jobs.py",
    "commit_id": "55695f815521f1018a85b6db9dcedd439226fa44",
    "original_commit_id": "2f4432184720772b58b003a9b19f17c6f1105d7b",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "I bet this line doesn't work. `query.filter` and `query.fliter_by` are ORM methods that are part of figuring out what SQL to generate, can't bring python logic into here...\n\nYou'll have to retrieve the task instances and then run `are_dependencies_met`\n",
    "created_at": "2015-09-23T15:08:23Z",
    "updated_at": "2015-10-02T01:36:11Z",
    "html_url": "https://github.com/apache/airflow/pull/450#discussion_r40214725",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/450",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/40214725"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/450#discussion_r40214725"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/450"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/40214725/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 11,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/40231911",
    "pull_request_review_id": null,
    "id": 40231911,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjMxOTEx",
    "diff_hunk": "@@ -980,25 +984,27 @@ def action(self):\n                     t.task_id\n                     for t in task.get_flat_relatives(upstream=True)]\n             TI = models.TaskInstance\n+            dates = utils.date_range(start_date, end_date)\n             tis = session.query(TI).filter(\n                 TI.dag_id == dag_id,\n-                TI.execution_date == execution_date,\n+                TI.execution_date.in_(dates),",
    "path": "airflow/www/app.py",
    "commit_id": "6f8372d752e7fae89ac1740749d662d27b06dcca",
    "original_commit_id": "c99138b7008412246a488dbf8162e0be8dbac861",
    "user": {
      "login": "patrickleotardif",
      "id": 787256,
      "node_id": "MDQ6VXNlcjc4NzI1Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/787256?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/patrickleotardif",
      "html_url": "https://github.com/patrickleotardif",
      "followers_url": "https://api.github.com/users/patrickleotardif/followers",
      "following_url": "https://api.github.com/users/patrickleotardif/following{/other_user}",
      "gists_url": "https://api.github.com/users/patrickleotardif/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/patrickleotardif/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/patrickleotardif/subscriptions",
      "organizations_url": "https://api.github.com/users/patrickleotardif/orgs",
      "repos_url": "https://api.github.com/users/patrickleotardif/repos",
      "events_url": "https://api.github.com/users/patrickleotardif/events{/privacy}",
      "received_events_url": "https://api.github.com/users/patrickleotardif/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Good idea!\n",
    "created_at": "2015-09-23T17:27:33Z",
    "updated_at": "2015-09-30T21:23:31Z",
    "html_url": "https://github.com/apache/airflow/pull/448#discussion_r40231911",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/448",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/40231911"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/448#discussion_r40231911"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/448"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/40231911/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 1004,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 46,
    "position": 63,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/40231975",
    "pull_request_review_id": null,
    "id": 40231975,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjMxOTc1",
    "diff_hunk": "@@ -971,6 +971,10 @@ def action(self):\n             # Flagging tasks as successful\n             session = settings.Session()\n             task_ids = [task_id]\n+            end_date = ((dag.latest_execution_date or datetime.now())\n+                        if future else execution_date)\n+            start_date = dag.default_args['start_date'] if past else execution_date",
    "path": "airflow/www/app.py",
    "commit_id": "6f8372d752e7fae89ac1740749d662d27b06dcca",
    "original_commit_id": "c99138b7008412246a488dbf8162e0be8dbac861",
    "user": {
      "login": "patrickleotardif",
      "id": 787256,
      "node_id": "MDQ6VXNlcjc4NzI1Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/787256?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/patrickleotardif",
      "html_url": "https://github.com/patrickleotardif",
      "followers_url": "https://api.github.com/users/patrickleotardif/followers",
      "following_url": "https://api.github.com/users/patrickleotardif/following{/other_user}",
      "gists_url": "https://api.github.com/users/patrickleotardif/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/patrickleotardif/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/patrickleotardif/subscriptions",
      "organizations_url": "https://api.github.com/users/patrickleotardif/orgs",
      "repos_url": "https://api.github.com/users/patrickleotardif/repos",
      "events_url": "https://api.github.com/users/patrickleotardif/events{/privacy}",
      "received_events_url": "https://api.github.com/users/patrickleotardif/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "I can copy https://github.com/airbnb/airflow/blob/master/airflow/www/app.py#L1050-L1051?\n\nIs there a possibility both of those are null? (If so I can default to execution date.\n",
    "created_at": "2015-09-23T17:28:11Z",
    "updated_at": "2015-09-30T21:23:31Z",
    "html_url": "https://github.com/apache/airflow/pull/448#discussion_r40231975",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/448",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/40231975"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/448#discussion_r40231975"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/448"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/40231975/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 33,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/40232191",
    "pull_request_review_id": null,
    "id": 40232191,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjMyMTkx",
    "diff_hunk": "@@ -980,25 +984,27 @@ def action(self):\n                     t.task_id\n                     for t in task.get_flat_relatives(upstream=True)]\n             TI = models.TaskInstance\n+            dates = utils.date_range(start_date, end_date)",
    "path": "airflow/www/app.py",
    "commit_id": "6f8372d752e7fae89ac1740749d662d27b06dcca",
    "original_commit_id": "c99138b7008412246a488dbf8162e0be8dbac861",
    "user": {
      "login": "patrickleotardif",
      "id": 787256,
      "node_id": "MDQ6VXNlcjc4NzI1Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/787256?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/patrickleotardif",
      "html_url": "https://github.com/patrickleotardif",
      "followers_url": "https://api.github.com/users/patrickleotardif/followers",
      "following_url": "https://api.github.com/users/patrickleotardif/following{/other_user}",
      "gists_url": "https://api.github.com/users/patrickleotardif/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/patrickleotardif/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/patrickleotardif/subscriptions",
      "organizations_url": "https://api.github.com/users/patrickleotardif/orgs",
      "repos_url": "https://api.github.com/users/patrickleotardif/repos",
      "events_url": "https://api.github.com/users/patrickleotardif/events{/privacy}",
      "received_events_url": "https://api.github.com/users/patrickleotardif/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "What feels like a reasonable cap to you? Since we already ask for confirmation I'm tempted to omit a cap since it simplifies things. I agree the cap, if it exists, should be on the cartesian product `tasks` object.\n",
    "created_at": "2015-09-23T17:29:57Z",
    "updated_at": "2015-09-30T21:23:31Z",
    "html_url": "https://github.com/apache/airflow/pull/448#discussion_r40232191",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/448",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/40232191"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/448#discussion_r40232191"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/448"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/40232191/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 1001,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 42,
    "position": 59,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/40232651",
    "pull_request_review_id": null,
    "id": 40232651,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjMyNjUx",
    "diff_hunk": "@@ -272,13 +272,29 @@ def manage_slas(self, dag, session=None):\n             .filter(SlaMiss.dag_id == dag.dag_id)\n             .all()\n         )\n+\n+        current_run_date = datetime.now() - dag.schedule_interval\n+        blocking_tis = (\n+            session\n+            .query(TI)\n+            .filter(TI.state != State.SUCCESS)\n+            .filter(TI.execution_date == current_run_date)\n+            .filter(TI.are_dependencies_met())",
    "path": "airflow/jobs.py",
    "commit_id": "55695f815521f1018a85b6db9dcedd439226fa44",
    "original_commit_id": "2f4432184720772b58b003a9b19f17c6f1105d7b",
    "user": {
      "login": "patrickleotardif",
      "id": 787256,
      "node_id": "MDQ6VXNlcjc4NzI1Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/787256?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/patrickleotardif",
      "html_url": "https://github.com/patrickleotardif",
      "followers_url": "https://api.github.com/users/patrickleotardif/followers",
      "following_url": "https://api.github.com/users/patrickleotardif/following{/other_user}",
      "gists_url": "https://api.github.com/users/patrickleotardif/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/patrickleotardif/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/patrickleotardif/subscriptions",
      "organizations_url": "https://api.github.com/users/patrickleotardif/orgs",
      "repos_url": "https://api.github.com/users/patrickleotardif/repos",
      "events_url": "https://api.github.com/users/patrickleotardif/events{/privacy}",
      "received_events_url": "https://api.github.com/users/patrickleotardif/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "i.e. I remove that line from blocking_tis and then do\n\n```\nblocking_tis = [ti for ti in blocking_tis if ti.are_dependencies_met()]\n```\n\n?\n",
    "created_at": "2015-09-23T17:34:04Z",
    "updated_at": "2015-10-02T01:36:11Z",
    "html_url": "https://github.com/apache/airflow/pull/450#discussion_r40232651",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/450",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/40232651"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/450#discussion_r40232651"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/450"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/40232651/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 11,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/40234121",
    "pull_request_review_id": null,
    "id": 40234121,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjM0MTIx",
    "diff_hunk": "@@ -272,13 +272,29 @@ def manage_slas(self, dag, session=None):\n             .filter(SlaMiss.dag_id == dag.dag_id)\n             .all()\n         )\n+\n+        current_run_date = datetime.now() - dag.schedule_interval\n+        blocking_tis = (\n+            session\n+            .query(TI)\n+            .filter(TI.state != State.SUCCESS)\n+            .filter(TI.execution_date == current_run_date)\n+            .filter(TI.are_dependencies_met())",
    "path": "airflow/jobs.py",
    "commit_id": "55695f815521f1018a85b6db9dcedd439226fa44",
    "original_commit_id": "2f4432184720772b58b003a9b19f17c6f1105d7b",
    "user": {
      "login": "patrickleotardif",
      "id": 787256,
      "node_id": "MDQ6VXNlcjc4NzI1Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/787256?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/patrickleotardif",
      "html_url": "https://github.com/patrickleotardif",
      "followers_url": "https://api.github.com/users/patrickleotardif/followers",
      "following_url": "https://api.github.com/users/patrickleotardif/following{/other_user}",
      "gists_url": "https://api.github.com/users/patrickleotardif/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/patrickleotardif/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/patrickleotardif/subscriptions",
      "organizations_url": "https://api.github.com/users/patrickleotardif/orgs",
      "repos_url": "https://api.github.com/users/patrickleotardif/repos",
      "events_url": "https://api.github.com/users/patrickleotardif/events{/privacy}",
      "received_events_url": "https://api.github.com/users/patrickleotardif/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "do I need to do session.commit() or anything?\n",
    "created_at": "2015-09-23T17:46:52Z",
    "updated_at": "2015-10-02T01:36:11Z",
    "html_url": "https://github.com/apache/airflow/pull/450#discussion_r40234121",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/450",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/40234121"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/450#discussion_r40234121"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/450"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/40234121/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 11,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/40265997",
    "pull_request_review_id": null,
    "id": 40265997,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjY1OTk3",
    "diff_hunk": "@@ -1055,7 +1055,7 @@ def tree(self):\n         num_runs = int(num_runs) if num_runs else 25\n \n         if not base_date:\n-            base_date = dag.latest_execution_date or datetime.now()\n+            base_date = (dag.latest_execution_date + 2 * dag.schedule_interval) or datetime.now()",
    "path": "airflow/www/app.py",
    "commit_id": "8f642753fb701801aad5d23ec2006697b3657335",
    "original_commit_id": "34d4bdb215a9c9fd89afd54e07f29f1d2b07435e",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "In the case of a new DAG dag.latest_execution_date will be `None` and this will raise an error, you'll need an `if` here...\n",
    "created_at": "2015-09-23T22:26:18Z",
    "updated_at": "2015-09-24T17:41:47Z",
    "html_url": "https://github.com/apache/airflow/pull/455#discussion_r40265997",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/455",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/40265997"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/455#discussion_r40265997"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/455"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/40265997/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 5,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/40275634",
    "pull_request_review_id": null,
    "id": 40275634,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjc1NjM0",
    "diff_hunk": "@@ -980,25 +984,27 @@ def action(self):\n                     t.task_id\n                     for t in task.get_flat_relatives(upstream=True)]\n             TI = models.TaskInstance\n+            dates = utils.date_range(start_date, end_date)",
    "path": "airflow/www/app.py",
    "commit_id": "6f8372d752e7fae89ac1740749d662d27b06dcca",
    "original_commit_id": "c99138b7008412246a488dbf8162e0be8dbac861",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Yeah, 1k? We'll have to see how long it takes to do 1k. Shouldn't be more than 15 - 30 seconds. With the cap on the cartesian product along with the fix bellow you could eventually get it through by repeating the same command N times.\n",
    "created_at": "2015-09-24T00:42:53Z",
    "updated_at": "2015-09-30T21:23:31Z",
    "html_url": "https://github.com/apache/airflow/pull/448#discussion_r40275634",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/448",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/40275634"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/448#discussion_r40275634"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/448"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/40275634/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 1001,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 42,
    "position": 59,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/40275697",
    "pull_request_review_id": null,
    "id": 40275697,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjc1Njk3",
    "diff_hunk": "@@ -971,6 +971,10 @@ def action(self):\n             # Flagging tasks as successful\n             session = settings.Session()\n             task_ids = [task_id]\n+            end_date = ((dag.latest_execution_date or datetime.now())\n+                        if future else execution_date)\n+            start_date = dag.default_args['start_date'] if past else execution_date",
    "path": "airflow/www/app.py",
    "commit_id": "6f8372d752e7fae89ac1740749d662d27b06dcca",
    "original_commit_id": "c99138b7008412246a488dbf8162e0be8dbac861",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "I don't think they can both be null.\n",
    "created_at": "2015-09-24T00:44:07Z",
    "updated_at": "2015-09-30T21:23:31Z",
    "html_url": "https://github.com/apache/airflow/pull/448#discussion_r40275697",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/448",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/40275697"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/448#discussion_r40275697"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/448"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/40275697/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 33,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/40275783",
    "pull_request_review_id": null,
    "id": 40275783,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjc1Nzgz",
    "diff_hunk": "@@ -272,13 +272,29 @@ def manage_slas(self, dag, session=None):\n             .filter(SlaMiss.dag_id == dag.dag_id)\n             .all()\n         )\n+\n+        current_run_date = datetime.now() - dag.schedule_interval\n+        blocking_tis = (\n+            session\n+            .query(TI)\n+            .filter(TI.state != State.SUCCESS)\n+            .filter(TI.execution_date == current_run_date)\n+            .filter(TI.are_dependencies_met())",
    "path": "airflow/jobs.py",
    "commit_id": "55695f815521f1018a85b6db9dcedd439226fa44",
    "original_commit_id": "2f4432184720772b58b003a9b19f17c6f1105d7b",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Should be good. No need to commit until values are changed and `session.merge` is called\n",
    "created_at": "2015-09-24T00:45:54Z",
    "updated_at": "2015-10-02T01:36:11Z",
    "html_url": "https://github.com/apache/airflow/pull/450#discussion_r40275783",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/450",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/40275783"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/450#discussion_r40275783"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/450"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/40275783/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 11,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/40500052",
    "pull_request_review_id": null,
    "id": 40500052,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTAwMDUy",
    "diff_hunk": "@@ -1068,18 +1068,18 @@ def tree(self):\n                 base_date = datetime.now()\n         else:\n             base_date = dateutil.parser.parse(base_date)\n-        base_date = utils.round_time(base_date, dag.schedule_interval)\n-        form = TreeForm(data={'base_date': base_date, 'num_runs': num_runs})\n \n         start_date = dag.start_date\n         if not start_date and 'start_date' in dag.default_args:\n             start_date = dag.default_args['start_date']\n \n         if start_date:\n-            base_date = utils.round_time(base_date, dag.schedule_interval, start_date)\n+            base_date = utils.round_time(\n+                base_date, dag.schedule_interval, start_date)\n         else:\n             base_date = utils.round_time(base_date, dag.schedule_interval)",
    "path": "airflow/www/app.py",
    "commit_id": "ca5f5a270cb0802057e86e4e46b1bb91a058cd66",
    "original_commit_id": "8241b7a6bc39b917fc53c54a9f6e512561092d8b",
    "user": {
      "login": "jlowin",
      "id": 153965,
      "node_id": "MDQ6VXNlcjE1Mzk2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/153965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jlowin",
      "html_url": "https://github.com/jlowin",
      "followers_url": "https://api.github.com/users/jlowin/followers",
      "following_url": "https://api.github.com/users/jlowin/following{/other_user}",
      "gists_url": "https://api.github.com/users/jlowin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jlowin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jlowin/subscriptions",
      "organizations_url": "https://api.github.com/users/jlowin/orgs",
      "repos_url": "https://api.github.com/users/jlowin/repos",
      "events_url": "https://api.github.com/users/jlowin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jlowin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "This line could potentially cause problems like #439 if a DAG has no start_date AND no default_args start_date. Removing the `round_time()` here would solve that rare case -- but I'm not changing it in case there's a good reason for having it (I remember seeing something about a bug fix)\n",
    "created_at": "2015-09-27T00:24:22Z",
    "updated_at": "2015-09-27T20:25:55Z",
    "html_url": "https://github.com/apache/airflow/pull/464#discussion_r40500052",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/464",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/40500052"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/464#discussion_r40500052"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/464"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/40500052/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 16,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/40511182",
    "pull_request_review_id": null,
    "id": 40511182,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTExMTgy",
    "diff_hunk": "@@ -29,6 +29,8 @@ def expand_env_var(env_var):\n     `expandvars` and `expanduser` until interpolation stops having\n     any effect.\n     \"\"\"\n+    if not isinstance(env_var, str):",
    "path": "airflow/configuration.py",
    "commit_id": "d4f7ac10a6aa531600c0b2e3757696e1a6910fac",
    "original_commit_id": "e0fd9c0a8f1022c8e6244ece366b3da6a6c5aaa0",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "May be better to use `basestring` over `str` here as it includes unicode strings and derivatives as well\n",
    "created_at": "2015-09-27T23:12:47Z",
    "updated_at": "2015-09-27T23:36:29Z",
    "html_url": "https://github.com/apache/airflow/pull/467#discussion_r40511182",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/467",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/40511182"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/467#discussion_r40511182"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/467"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/40511182/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 4,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/40511366",
    "pull_request_review_id": null,
    "id": 40511366,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTExMzY2",
    "diff_hunk": "@@ -8,26 +9,49 @@ class SlackAPIOperator(BaseOperator):\n     The SlackAPIPostOperator is derived from this operator.\n     In the future additional Slack API Operators will be derived from this class as well\n \n-    :param token: Slack api token\n-    :type token: String\n+    :param token: Slack API token (https://api.slack.com/web)\n+    :type token: string\n     :param method: The Slack API Method to Call (https://api.slack.com/methods)\n-    :type method: String\n-    :param param: API Method call parameters (https://api.slack.com/methods)\n-    :type param: dict\n+    :type method: string\n+    :param api_call_params: API Method call parameters (https://api.slack.com/methods)\n+    :type api_call_params: dict\n     \"\"\"\n+\n+    @apply_defaults\n     def __init__(self,\n                  token='unset',\n                  method='unset',\n-                 params=None,\n+                 api_call_params=None,",
    "path": "airflow/operators/slack_operator.py",
    "commit_id": "d97ff8924e4d7cf9dfd29626fef2f4ce8033010d",
    "original_commit_id": "31e3f90d81982fbe8a453043e516f35bf464a682",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Yeah this break the API, not sure how many people are using it, but that would break any call referencing `params`. If you really want to change the name, we should keeps params and warn about upcoming deprecation.\n",
    "created_at": "2015-09-27T23:25:33Z",
    "updated_at": "2015-09-28T01:45:47Z",
    "html_url": "https://github.com/apache/airflow/pull/463#discussion_r40511366",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/463",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/40511366"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/463#discussion_r40511366"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/463"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/40511366/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 29,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/40511508",
    "pull_request_review_id": null,
    "id": 40511508,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTExNTA4",
    "diff_hunk": "@@ -29,6 +29,8 @@ def expand_env_var(env_var):\n     `expandvars` and `expanduser` until interpolation stops having\n     any effect.\n     \"\"\"\n+    if not isinstance(env_var, str):",
    "path": "airflow/configuration.py",
    "commit_id": "d4f7ac10a6aa531600c0b2e3757696e1a6910fac",
    "original_commit_id": "e0fd9c0a8f1022c8e6244ece366b3da6a6c5aaa0",
    "user": {
      "login": "jlowin",
      "id": 153965,
      "node_id": "MDQ6VXNlcjE1Mzk2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/153965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jlowin",
      "html_url": "https://github.com/jlowin",
      "followers_url": "https://api.github.com/users/jlowin/followers",
      "following_url": "https://api.github.com/users/jlowin/following{/other_user}",
      "gists_url": "https://api.github.com/users/jlowin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jlowin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jlowin/subscriptions",
      "organizations_url": "https://api.github.com/users/jlowin/orgs",
      "repos_url": "https://api.github.com/users/jlowin/repos",
      "events_url": "https://api.github.com/users/jlowin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jlowin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Got it.\n",
    "created_at": "2015-09-27T23:36:54Z",
    "updated_at": "2015-09-27T23:36:54Z",
    "html_url": "https://github.com/apache/airflow/pull/467#discussion_r40511508",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/467",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/40511508"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/467#discussion_r40511508"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/467"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/40511508/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 4,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/40819811",
    "pull_request_review_id": null,
    "id": 40819811,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODE5ODEx",
    "diff_hunk": "@@ -0,0 +1,104 @@\n+from airflow.models import BaseOperator\n+from airflow.utils import send_MIME_email\n+from airflow.utils import apply_defaults\n+from airflow.hooks import PrestoHook\n+from email.MIMEMultipart import MIMEMultipart\n+from email.MIMEText import MIMEText\n+from email.MIMEImage import MIMEImage\n+import logging\n+import jinja2\n+import os\n+import contrib.content_email_components as content_email_components\n+import subprocess\n+\n+class ContentEmailOperator(BaseOperator):\n+\n+    template_fields = ('data','subject','variables')\n+    template_ext = ('.sql')\n+    ui_color = '#f0ede4'\n+\n+    @apply_defaults\n+    def __init__(\n+            self,\n+            to,\n+            subject,\n+            data,\n+            template,\n+            variables,\n+            presto_conn_id='presto_default',",
    "path": "airflow/contrib/operators/content_email_operator.py",
    "commit_id": "b0cf5f5ebc54260d02af97229001c0ed21364bea",
    "original_commit_id": "b0cf5f5ebc54260d02af97229001c0ed21364bea",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "If this works only with Presto it should be named as such. I think it should be easy to generalize it to work with any hooks that has the required methods.\n",
    "created_at": "2015-09-30T16:56:25Z",
    "updated_at": "2015-09-30T16:56:25Z",
    "html_url": "https://github.com/apache/airflow/pull/451#discussion_r40819811",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/451",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/40819811"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/451#discussion_r40819811"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/451"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/40819811/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 28,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 28,
    "position": 28,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/40819943",
    "pull_request_review_id": null,
    "id": 40819943,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODE5OTQz",
    "diff_hunk": "@@ -0,0 +1,75 @@\n+import matplotlib\n+matplotlib.use('Agg')\n+import matplotlib.pyplot as plt\n+import pandas as pd\n+import subprocess\n+import os\n+import logging\n+\n+def dataTable(data,dim_name, metric_name):",
    "path": "airflow/contrib/operators/content_email_components.py",
    "commit_id": "b0cf5f5ebc54260d02af97229001c0ed21364bea",
    "original_commit_id": "b0cf5f5ebc54260d02af97229001c0ed21364bea",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "https://www.python.org/dev/peps/pep-0008/#function-names\n",
    "created_at": "2015-09-30T16:57:25Z",
    "updated_at": "2015-09-30T16:57:25Z",
    "html_url": "https://github.com/apache/airflow/pull/451#discussion_r40819943",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/451",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/40819943"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/451#discussion_r40819943"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/451"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/40819943/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 9,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 9,
    "position": 9,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/40820230",
    "pull_request_review_id": null,
    "id": 40820230,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODIwMjMw",
    "diff_hunk": "@@ -0,0 +1,75 @@\n+import matplotlib\n+matplotlib.use('Agg')\n+import matplotlib.pyplot as plt\n+import pandas as pd\n+import subprocess\n+import os\n+import logging\n+\n+def dataTable(data,dim_name, metric_name):\n+\t#infer which range of dates is available for width of table\n+\tdate_list = []\n+\tdate_list_formatted = []\n+\tfor row in data:\n+\t\tif row['ds'] in date_list:\n+\t\t\tbreak\n+\t\telse:\n+\t\t\tdate_list.append(row['ds'])\n+\t\t\tif row['ds'][5] == '0':\n+\t\t\t\tdate_list_formatted.append(row['ds'][6:])\n+\t\t\telse:\n+\t\t\t\tdate_list_formatted.append(row['ds'][5:])\n+\t\n+\tcnum = 0 #column number\n+\twidth = len(date_list)\n+\toutput = '''<table ",
    "path": "airflow/contrib/operators/content_email_components.py",
    "commit_id": "b0cf5f5ebc54260d02af97229001c0ed21364bea",
    "original_commit_id": "b0cf5f5ebc54260d02af97229001c0ed21364bea",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "`DataFrame.to_html()` is pretty fantastic for this.\n",
    "created_at": "2015-09-30T16:59:47Z",
    "updated_at": "2015-09-30T16:59:47Z",
    "html_url": "https://github.com/apache/airflow/pull/451#discussion_r40820230",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/451",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/40820230"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/451#discussion_r40820230"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/451"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/40820230/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 25,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 25,
    "position": 25,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/40820482",
    "pull_request_review_id": null,
    "id": 40820482,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODIwNDgy",
    "diff_hunk": "@@ -0,0 +1,104 @@\n+from airflow.models import BaseOperator\n+from airflow.utils import send_MIME_email\n+from airflow.utils import apply_defaults\n+from airflow.hooks import PrestoHook\n+from email.MIMEMultipart import MIMEMultipart\n+from email.MIMEText import MIMEText\n+from email.MIMEImage import MIMEImage\n+import logging\n+import jinja2\n+import os\n+import contrib.content_email_components as content_email_components\n+import subprocess\n+\n+class ContentEmailOperator(BaseOperator):\n+\n+    template_fields = ('data','subject','variables')\n+    template_ext = ('.sql')\n+    ui_color = '#f0ede4'\n+\n+    @apply_defaults\n+    def __init__(\n+            self,\n+            to,\n+            subject,\n+            data,\n+            template,\n+            variables,\n+            presto_conn_id='presto_default',\n+            *args, **kwargs):\n+        super(ContentEmailOperator, self).__init__(*args, **kwargs)\n+        self.to = to\n+        self.subject = subject\n+        self.presto_conn_id = presto_conn_id\n+        self.data = data\n+        self.template = template\n+        self.variables = variables\n+\n+\n+    def formatData(self,df):\n+        output = []\n+        for i in range(len(df)):\n+            row = {}\n+            for col in list(df.columns):\n+                row[col] = df[col][i]\n+            output.append(row)\n+        return output\n+\n+    def run(self,cmd):\n+        subprocess.Popen(cmd, shell=True).wait()\n+\n+    def mkdir_local(self,name):\n+        self.run('mkdir {dir}'.format(dir=name))\n+\n+    def rmdir_local(self,name):\n+        self.run('rm -R {dir}'.format(dir=name))\n+\n+    def execute(self, context):\n+        #data\n+        data = {}\n+        hook = PrestoHook(presto_conn_id=self.presto_conn_id)\n+        for source, query in self.data.iteritems():\n+            data[source] = self.formatData(hook.get_pandas_df(query))\n+\n+        #HTML template rendering\n+        env = jinja2.Environment(loader=jinja2.FileSystemLoader(os.path.dirname(self.template)))\n+        env.globals['lib'] = content_email_components\n+        template = env.get_template(os.path.basename(self.template))\n+        cur_dir = '/tmp/'",
    "path": "airflow/contrib/operators/content_email_operator.py",
    "commit_id": "b0cf5f5ebc54260d02af97229001c0ed21364bea",
    "original_commit_id": "b0cf5f5ebc54260d02af97229001c0ed21364bea",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "You should use something like this with a `with` block to insure cleanup:\nhttps://docs.python.org/2/library/tempfile.html#tempfile.tempdir\n",
    "created_at": "2015-09-30T17:01:59Z",
    "updated_at": "2015-09-30T17:01:59Z",
    "html_url": "https://github.com/apache/airflow/pull/451#discussion_r40820482",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/451",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/40820482"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/451#discussion_r40820482"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/451"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/40820482/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 68,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 68,
    "position": 68,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/40825578",
    "pull_request_review_id": null,
    "id": 40825578,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODI1NTc4",
    "diff_hunk": "@@ -0,0 +1,75 @@\n+import matplotlib\n+matplotlib.use('Agg')\n+import matplotlib.pyplot as plt\n+import pandas as pd\n+import subprocess\n+import os\n+import logging\n+\n+def dataTable(data,dim_name, metric_name):\n+\t#infer which range of dates is available for width of table\n+\tdate_list = []\n+\tdate_list_formatted = []\n+\tfor row in data:\n+\t\tif row['ds'] in date_list:\n+\t\t\tbreak\n+\t\telse:\n+\t\t\tdate_list.append(row['ds'])\n+\t\t\tif row['ds'][5] == '0':\n+\t\t\t\tdate_list_formatted.append(row['ds'][6:])\n+\t\t\telse:\n+\t\t\t\tdate_list_formatted.append(row['ds'][5:])\n+\t\n+\tcnum = 0 #column number\n+\twidth = len(date_list)\n+\toutput = '''<table ",
    "path": "airflow/contrib/operators/content_email_components.py",
    "commit_id": "b0cf5f5ebc54260d02af97229001c0ed21364bea",
    "original_commit_id": "b0cf5f5ebc54260d02af97229001c0ed21364bea",
    "user": {
      "login": "patrickleotardif",
      "id": 787256,
      "node_id": "MDQ6VXNlcjc4NzI1Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/787256?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/patrickleotardif",
      "html_url": "https://github.com/patrickleotardif",
      "followers_url": "https://api.github.com/users/patrickleotardif/followers",
      "following_url": "https://api.github.com/users/patrickleotardif/following{/other_user}",
      "gists_url": "https://api.github.com/users/patrickleotardif/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/patrickleotardif/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/patrickleotardif/subscriptions",
      "organizations_url": "https://api.github.com/users/patrickleotardif/orgs",
      "repos_url": "https://api.github.com/users/patrickleotardif/repos",
      "events_url": "https://api.github.com/users/patrickleotardif/events{/privacy}",
      "received_events_url": "https://api.github.com/users/patrickleotardif/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Tried it and preferred more granular control. (especially filling in blanks as well) My idea was that it would be easy to add different python callables that generate either html or images.\n",
    "created_at": "2015-09-30T17:42:07Z",
    "updated_at": "2015-09-30T17:42:07Z",
    "html_url": "https://github.com/apache/airflow/pull/451#discussion_r40825578",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/451",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/40825578"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/451#discussion_r40825578"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/451"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/40825578/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 25,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 25,
    "position": 25,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/40825623",
    "pull_request_review_id": null,
    "id": 40825623,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODI1NjIz",
    "diff_hunk": "@@ -0,0 +1,104 @@\n+from airflow.models import BaseOperator\n+from airflow.utils import send_MIME_email\n+from airflow.utils import apply_defaults\n+from airflow.hooks import PrestoHook\n+from email.MIMEMultipart import MIMEMultipart\n+from email.MIMEText import MIMEText\n+from email.MIMEImage import MIMEImage\n+import logging\n+import jinja2\n+import os\n+import contrib.content_email_components as content_email_components\n+import subprocess\n+\n+class ContentEmailOperator(BaseOperator):\n+\n+    template_fields = ('data','subject','variables')\n+    template_ext = ('.sql')\n+    ui_color = '#f0ede4'\n+\n+    @apply_defaults\n+    def __init__(\n+            self,\n+            to,\n+            subject,\n+            data,\n+            template,\n+            variables,\n+            presto_conn_id='presto_default',",
    "path": "airflow/contrib/operators/content_email_operator.py",
    "commit_id": "b0cf5f5ebc54260d02af97229001c0ed21364bea",
    "original_commit_id": "b0cf5f5ebc54260d02af97229001c0ed21364bea",
    "user": {
      "login": "patrickleotardif",
      "id": 787256,
      "node_id": "MDQ6VXNlcjc4NzI1Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/787256?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/patrickleotardif",
      "html_url": "https://github.com/patrickleotardif",
      "followers_url": "https://api.github.com/users/patrickleotardif/followers",
      "following_url": "https://api.github.com/users/patrickleotardif/following{/other_user}",
      "gists_url": "https://api.github.com/users/patrickleotardif/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/patrickleotardif/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/patrickleotardif/subscriptions",
      "organizations_url": "https://api.github.com/users/patrickleotardif/orgs",
      "repos_url": "https://api.github.com/users/patrickleotardif/repos",
      "events_url": "https://api.github.com/users/patrickleotardif/events{/privacy}",
      "received_events_url": "https://api.github.com/users/patrickleotardif/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Good point.\n",
    "created_at": "2015-09-30T17:42:36Z",
    "updated_at": "2015-09-30T17:42:36Z",
    "html_url": "https://github.com/apache/airflow/pull/451#discussion_r40825623",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/451",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/40825623"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/451#discussion_r40825623"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/451"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/40825623/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 28,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 28,
    "position": 28,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/40825962",
    "pull_request_review_id": null,
    "id": 40825962,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODI1OTYy",
    "diff_hunk": "@@ -0,0 +1,104 @@\n+from airflow.models import BaseOperator\n+from airflow.utils import send_MIME_email\n+from airflow.utils import apply_defaults\n+from airflow.hooks import PrestoHook\n+from email.MIMEMultipart import MIMEMultipart\n+from email.MIMEText import MIMEText\n+from email.MIMEImage import MIMEImage\n+import logging\n+import jinja2\n+import os\n+import contrib.content_email_components as content_email_components\n+import subprocess\n+\n+class ContentEmailOperator(BaseOperator):\n+\n+    template_fields = ('data','subject','variables')\n+    template_ext = ('.sql')\n+    ui_color = '#f0ede4'\n+\n+    @apply_defaults\n+    def __init__(\n+            self,\n+            to,\n+            subject,\n+            data,\n+            template,\n+            variables,\n+            presto_conn_id='presto_default',\n+            *args, **kwargs):\n+        super(ContentEmailOperator, self).__init__(*args, **kwargs)\n+        self.to = to\n+        self.subject = subject\n+        self.presto_conn_id = presto_conn_id\n+        self.data = data\n+        self.template = template\n+        self.variables = variables\n+\n+\n+    def formatData(self,df):\n+        output = []\n+        for i in range(len(df)):\n+            row = {}\n+            for col in list(df.columns):\n+                row[col] = df[col][i]\n+            output.append(row)\n+        return output\n+\n+    def run(self,cmd):\n+        subprocess.Popen(cmd, shell=True).wait()\n+\n+    def mkdir_local(self,name):\n+        self.run('mkdir {dir}'.format(dir=name))\n+\n+    def rmdir_local(self,name):\n+        self.run('rm -R {dir}'.format(dir=name))\n+\n+    def execute(self, context):\n+        #data\n+        data = {}\n+        hook = PrestoHook(presto_conn_id=self.presto_conn_id)\n+        for source, query in self.data.iteritems():\n+            data[source] = self.formatData(hook.get_pandas_df(query))\n+\n+        #HTML template rendering\n+        env = jinja2.Environment(loader=jinja2.FileSystemLoader(os.path.dirname(self.template)))\n+        env.globals['lib'] = content_email_components\n+        template = env.get_template(os.path.basename(self.template))\n+        cur_dir = '/tmp/'",
    "path": "airflow/contrib/operators/content_email_operator.py",
    "commit_id": "b0cf5f5ebc54260d02af97229001c0ed21364bea",
    "original_commit_id": "b0cf5f5ebc54260d02af97229001c0ed21364bea",
    "user": {
      "login": "patrickleotardif",
      "id": 787256,
      "node_id": "MDQ6VXNlcjc4NzI1Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/787256?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/patrickleotardif",
      "html_url": "https://github.com/patrickleotardif",
      "followers_url": "https://api.github.com/users/patrickleotardif/followers",
      "following_url": "https://api.github.com/users/patrickleotardif/following{/other_user}",
      "gists_url": "https://api.github.com/users/patrickleotardif/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/patrickleotardif/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/patrickleotardif/subscriptions",
      "organizations_url": "https://api.github.com/users/patrickleotardif/orgs",
      "repos_url": "https://api.github.com/users/patrickleotardif/repos",
      "events_url": "https://api.github.com/users/patrickleotardif/events{/privacy}",
      "received_events_url": "https://api.github.com/users/patrickleotardif/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "The issue is the actual images files are created during the jinja templating process. I.e you hit up template.render, which calls lib.line_graph, and that process (in content_email_components.py) creates the image file, where in the operator you just retrieve those already created. Pretty hacky. My ideal would be letting user write arbitrary python code that can create any html with images as well, and then the operator handles attaching it to the email through cids.\n",
    "created_at": "2015-09-30T17:44:54Z",
    "updated_at": "2015-09-30T17:44:54Z",
    "html_url": "https://github.com/apache/airflow/pull/451#discussion_r40825962",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/451",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/40825962"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/451#discussion_r40825962"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/451"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/40825962/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 68,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 68,
    "position": 68,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/40853696",
    "pull_request_review_id": null,
    "id": 40853696,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODUzNjk2",
    "diff_hunk": "@@ -980,25 +984,27 @@ def action(self):\n                     t.task_id\n                     for t in task.get_flat_relatives(upstream=True)]\n             TI = models.TaskInstance\n+            dates = utils.date_range(start_date, end_date)\n             tis = session.query(TI).filter(\n                 TI.dag_id == dag_id,\n-                TI.execution_date == execution_date,\n+                TI.execution_date.in_(dates),",
    "path": "airflow/www/app.py",
    "commit_id": "6f8372d752e7fae89ac1740749d662d27b06dcca",
    "original_commit_id": "c99138b7008412246a488dbf8162e0be8dbac861",
    "user": {
      "login": "patrickleotardif",
      "id": 787256,
      "node_id": "MDQ6VXNlcjc4NzI1Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/787256?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/patrickleotardif",
      "html_url": "https://github.com/patrickleotardif",
      "followers_url": "https://api.github.com/users/patrickleotardif/followers",
      "following_url": "https://api.github.com/users/patrickleotardif/following{/other_user}",
      "gists_url": "https://api.github.com/users/patrickleotardif/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/patrickleotardif/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/patrickleotardif/subscriptions",
      "organizations_url": "https://api.github.com/users/patrickleotardif/orgs",
      "repos_url": "https://api.github.com/users/patrickleotardif/repos",
      "events_url": "https://api.github.com/users/patrickleotardif/events{/privacy}",
      "received_events_url": "https://api.github.com/users/patrickleotardif/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Tried this out, but doesn't really work since you need to know which ones are successes so you don't try to create new records later on. So will keep it this way.\n",
    "created_at": "2015-09-30T21:22:02Z",
    "updated_at": "2015-09-30T21:23:31Z",
    "html_url": "https://github.com/apache/airflow/pull/448#discussion_r40853696",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/448",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/40853696"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/448#discussion_r40853696"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/448"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/40853696/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 1004,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 46,
    "position": 63,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/40949789",
    "pull_request_review_id": null,
    "id": 40949789,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTQ5Nzg5",
    "diff_hunk": "@@ -272,13 +272,33 @@ def manage_slas(self, dag, session=None):\n             .filter(SlaMiss.dag_id == dag.dag_id)\n             .all()\n         )\n+\n+        current_run_date = (datetime.now() -\n+                            dag.schedule_interval).isoformat()[:10]",
    "path": "airflow/jobs.py",
    "commit_id": "55695f815521f1018a85b6db9dcedd439226fa44",
    "original_commit_id": "2b49be992e26ad38875e80d7dca686edcfeede68",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "This seems arbitrary, wouldn't work with non-daily DAG, can we just work off of the list we're about to send an email about?\n",
    "created_at": "2015-10-01T18:36:42Z",
    "updated_at": "2015-10-02T01:36:11Z",
    "html_url": "https://github.com/apache/airflow/pull/450#discussion_r40949789",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/450",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/40949789"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/450#discussion_r40949789"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/450"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/40949789/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 6,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/40950983",
    "pull_request_review_id": null,
    "id": 40950983,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTUwOTgz",
    "diff_hunk": "@@ -272,13 +272,33 @@ def manage_slas(self, dag, session=None):\n             .filter(SlaMiss.dag_id == dag.dag_id)\n             .all()\n         )\n+\n+        current_run_date = (datetime.now() -\n+                            dag.schedule_interval).isoformat()[:10]",
    "path": "airflow/jobs.py",
    "commit_id": "55695f815521f1018a85b6db9dcedd439226fa44",
    "original_commit_id": "2b49be992e26ad38875e80d7dca686edcfeede68",
    "user": {
      "login": "patrickleotardif",
      "id": 787256,
      "node_id": "MDQ6VXNlcjc4NzI1Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/787256?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/patrickleotardif",
      "html_url": "https://github.com/patrickleotardif",
      "followers_url": "https://api.github.com/users/patrickleotardif/followers",
      "following_url": "https://api.github.com/users/patrickleotardif/following{/other_user}",
      "gists_url": "https://api.github.com/users/patrickleotardif/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/patrickleotardif/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/patrickleotardif/subscriptions",
      "organizations_url": "https://api.github.com/users/patrickleotardif/orgs",
      "repos_url": "https://api.github.com/users/patrickleotardif/repos",
      "events_url": "https://api.github.com/users/patrickleotardif/events{/privacy}",
      "received_events_url": "https://api.github.com/users/patrickleotardif/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "how about \n\n```\nsla_dates = [sla.execution_date.isoformat()[:10] for sla in slas]\n\n(...)\n .filter(TI.execution_date.in(sla_dates))\n```\n",
    "created_at": "2015-10-01T18:47:05Z",
    "updated_at": "2015-10-02T01:36:11Z",
    "html_url": "https://github.com/apache/airflow/pull/450#discussion_r40950983",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/450",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/40950983"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/450#discussion_r40950983"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/450"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/40950983/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 6,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/41723505",
    "pull_request_review_id": null,
    "id": 41723505,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzIzNTA1",
    "diff_hunk": "@@ -118,38 +119,47 @@\n       html: true,\n       container: \"body\",\n     });\n+\n     d3.selectAll(\"div.legend_item.state\")\n         .style(\"cursor\", \"s-resize\")",
    "path": "airflow/www/templates/airflow/graph.html",
    "commit_id": "d82c556cabaa88fa012c5618d72a54fecf9d212a",
    "original_commit_id": "10a3853a532f73965c4be655ebc160b56931060e",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Now that this is clickable I'd change it to \"pointer\"\n",
    "created_at": "2015-10-12T05:01:07Z",
    "updated_at": "2015-10-12T16:22:06Z",
    "html_url": "https://github.com/apache/airflow/pull/500#discussion_r41723505",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/500",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/41723505"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/500#discussion_r41723505"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/500"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/41723505/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 14,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/42016682",
    "pull_request_review_id": null,
    "id": 42016682,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDE2Njgy",
    "diff_hunk": "@@ -2463,6 +2463,29 @@ def get_many(\n         return query.all()\n \n \n+class DagRun(Base):\n+    \"\"\"\n+    DagRun describes an instance of a Dag. It can be created\n+    by the scheduler (for regular runs) or by an external trigger\n+    \"\"\"\n+    __tablename__ = \"dag_run\"\n+\n+    dag_id = Column(String(ID_LEN), primary_key=True)\n+    execution_date = Column(DateTime, primary_key=True)\n+    run_id = Column(String(ID_LEN))\n+    external_trigger = Column(Boolean, default=False)",
    "path": "airflow/models.py",
    "commit_id": "b22052f8e9fb176c24e437094871ec19f31b0c81",
    "original_commit_id": "b04ce7bb683b6fcdd1f29f3a4afbc8bfa8d9465a",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "we may want to add a state here, so that the scheduler could completely disregard DAGs that are fully processed. I'm not sure whether it should just be boolean or if having more states would help.\n",
    "created_at": "2015-10-14T16:26:08Z",
    "updated_at": "2015-10-15T09:05:08Z",
    "html_url": "https://github.com/apache/airflow/pull/503#discussion_r42016682",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/503",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/42016682"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/503#discussion_r42016682"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/503"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/42016682/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 2477,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 23,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/42020880",
    "pull_request_review_id": null,
    "id": 42020880,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDIwODgw",
    "diff_hunk": "@@ -415,13 +447,15 @@ def process_dag(self, dag, executor):\n                     # in self.prioritize_queued\n                     continue\n                 else:\n-                    # Trying to run the next schedule\n-                    next_schedule = (\n-                        ti.execution_date + task.schedule_interval)\n-                    if (\n-                            ti.task.end_date and\n-                            next_schedule > ti.task.end_date):\n+                    # Checking whether there is a DagRun for which a task\n+                    # needs to be created\n+                    qry = session.query(func.min(models.DagRun.execution_date)).filter(\n+                        and_(models.DagRun.dag_id == dag.dag_id,\n+                        models.DagRun.execution_date > ti.execution_date))",
    "path": "airflow/jobs.py",
    "commit_id": "b22052f8e9fb176c24e437094871ec19f31b0c81",
    "original_commit_id": "b04ce7bb683b6fcdd1f29f3a4afbc8bfa8d9465a",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "If we have the state of the DAG run in `DagRun`, we could get a list of active runs outside of the tasks for loop, and attempt to schedule all tasks for all active job run.\n\nThis would solve confusing limitations documented on \"The Scheduler\" around never filling in holes and only moving forward from the last execution of each task.\n",
    "created_at": "2015-10-14T16:58:40Z",
    "updated_at": "2015-10-15T09:05:08Z",
    "html_url": "https://github.com/apache/airflow/pull/503#discussion_r42020880",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/503",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/42020880"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/503#discussion_r42020880"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/503"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/42020880/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 455,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 80,
    "position": 81,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/42092216",
    "pull_request_review_id": null,
    "id": 42092216,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDkyMjE2",
    "diff_hunk": "@@ -2463,6 +2463,29 @@ def get_many(\n         return query.all()\n \n \n+class DagRun(Base):\n+    \"\"\"\n+    DagRun describes an instance of a Dag. It can be created\n+    by the scheduler (for regular runs) or by an external trigger\n+    \"\"\"\n+    __tablename__ = \"dag_run\"\n+\n+    dag_id = Column(String(ID_LEN), primary_key=True)\n+    execution_date = Column(DateTime, primary_key=True)\n+    run_id = Column(String(ID_LEN))\n+    external_trigger = Column(Boolean, default=False)",
    "path": "airflow/models.py",
    "commit_id": "b22052f8e9fb176c24e437094871ec19f31b0c81",
    "original_commit_id": "b04ce7bb683b6fcdd1f29f3a4afbc8bfa8d9465a",
    "user": {
      "login": "ctrebing",
      "id": 4125322,
      "node_id": "MDQ6VXNlcjQxMjUzMjI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4125322?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ctrebing",
      "html_url": "https://github.com/ctrebing",
      "followers_url": "https://api.github.com/users/ctrebing/followers",
      "following_url": "https://api.github.com/users/ctrebing/following{/other_user}",
      "gists_url": "https://api.github.com/users/ctrebing/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ctrebing/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ctrebing/subscriptions",
      "organizations_url": "https://api.github.com/users/ctrebing/orgs",
      "repos_url": "https://api.github.com/users/ctrebing/repos",
      "events_url": "https://api.github.com/users/ctrebing/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ctrebing/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "I would use a string to be able to mark failed dags as well.\n",
    "created_at": "2015-10-15T07:49:54Z",
    "updated_at": "2015-10-15T09:05:08Z",
    "html_url": "https://github.com/apache/airflow/pull/503#discussion_r42092216",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/503",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/42092216"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/503#discussion_r42092216"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/503"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/42092216/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 2477,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "NONE",
    "original_position": 23,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/42099223",
    "pull_request_review_id": null,
    "id": 42099223,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDk5MjIz",
    "diff_hunk": "@@ -430,6 +465,29 @@ def process_dag(self, dag, executor):\n                     if ti.is_queueable(flag_upstream_failed=True):\n                         logging.debug('Queuing next run: ' + str(ti))\n                         executor.queue_task_instance(ti, pickle_id=pickle_id)\n+\n+        # Checking state of active DagRuns\n+        active_runs = session.query(models.DagRun).filter(\n+            models.DagRun.dag_id == dag.dag_id,\n+            models.DagRun.state == 'active'\n+        ).all()\n+        for run in active_runs:\n+            logging.info(\"Checking state for \" + str(run))\n+            task_instances = session.query(TI).filter(\n+                TI.dag_id == run.dag_id,\n+                TI.execution_date == run.execution_date\n+            ).all()\n+            if len(task_instances) == len(dag.tasks):",
    "path": "airflow/jobs.py",
    "commit_id": "b22052f8e9fb176c24e437094871ec19f31b0c81",
    "original_commit_id": "b22052f8e9fb176c24e437094871ec19f31b0c81",
    "user": {
      "login": "ctrebing",
      "id": 4125322,
      "node_id": "MDQ6VXNlcjQxMjUzMjI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4125322?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ctrebing",
      "html_url": "https://github.com/ctrebing",
      "followers_url": "https://api.github.com/users/ctrebing/followers",
      "following_url": "https://api.github.com/users/ctrebing/following{/other_user}",
      "gists_url": "https://api.github.com/users/ctrebing/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ctrebing/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ctrebing/subscriptions",
      "organizations_url": "https://api.github.com/users/ctrebing/orgs",
      "repos_url": "https://api.github.com/users/ctrebing/repos",
      "events_url": "https://api.github.com/users/ctrebing/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ctrebing/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Can a dag have branches with tasks that are never executed within one run? If yes, then this check would not be sufficient.\n",
    "created_at": "2015-10-15T09:09:35Z",
    "updated_at": "2015-10-15T09:09:35Z",
    "html_url": "https://github.com/apache/airflow/pull/503#discussion_r42099223",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/503",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/42099223"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/503#discussion_r42099223"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/503"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/42099223/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 480,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "NONE",
    "original_position": 105,
    "position": 105,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/42838024",
    "pull_request_review_id": null,
    "id": 42838024,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODM4MDI0",
    "diff_hunk": "@@ -74,6 +75,22 @@ def backfill(args):\n             ignore_dependencies=args.ignore_dependencies)\n \n \n+def trigger_dag(args):\n+    session = settings.Session()\n+    # TODO: verify dag_id\n+    dag_id = args.dag_id\n+    run_id = args.run_id or None\n+    execution_date = datetime.now()\n+    trigger = DagRun(\n+        dag_id=dag_id,\n+        run_id=run_id,\n+        execution_date=execution_date,\n+        state=State.RUNNING,",
    "path": "airflow/bin/cli.py",
    "commit_id": "86fdd145329bb0a474c6dab1a7557f11415f76ee",
    "original_commit_id": "9a33fb33d25aa267eb920c10197152fe22d467d3",
    "user": {
      "login": "mahrz24",
      "id": 45788,
      "node_id": "MDQ6VXNlcjQ1Nzg4",
      "avatar_url": "https://avatars.githubusercontent.com/u/45788?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mahrz24",
      "html_url": "https://github.com/mahrz24",
      "followers_url": "https://api.github.com/users/mahrz24/followers",
      "following_url": "https://api.github.com/users/mahrz24/following{/other_user}",
      "gists_url": "https://api.github.com/users/mahrz24/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mahrz24/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mahrz24/subscriptions",
      "organizations_url": "https://api.github.com/users/mahrz24/orgs",
      "repos_url": "https://api.github.com/users/mahrz24/repos",
      "events_url": "https://api.github.com/users/mahrz24/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mahrz24/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "I wonder whether it would be helpful to create a DagRun with state QUEUED (or a new state SCHEDULED) and only set it to running once the first scheduler created/queued the first TaskInstance. For example, if no scheduler is running, the DagRun will be displayed as running in the UI and one has to see if the corresponding task instances are actually created to find the problem why nothing happens.\n",
    "created_at": "2015-10-23T07:04:43Z",
    "updated_at": "2015-11-10T17:12:36Z",
    "html_url": "https://github.com/apache/airflow/pull/540#discussion_r42838024",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/540",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/42838024"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/540#discussion_r42838024"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/540"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/42838024/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "NONE",
    "original_position": 33,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/43023228",
    "pull_request_review_id": null,
    "id": 43023228,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDIzMjI4",
    "diff_hunk": "@@ -165,6 +171,29 @@ def run(args):\n         executor.heartbeat()\n         executor.end()\n \n+    if conf.get('core', 'S3_LOG_FOLDER').startswith('s3:'):\n+        import boto\n+        s3 = boto.connect_s3()\n+        s3_log = filename.replace(log, conf.get('core', 'S3_LOG_FOLDER'))\n+        bucket, key = s3_log.lstrip('s3:/').split('/', 1)\n+        s3_key = boto.s3.key.Key(s3.get_bucket(bucket), key)\n+        if os.path.exists(filename):\n+\n+            # get logs\n+            with open(filename, 'r') as logfile:\n+                new_log = logfile.read()\n+\n+            # remove old logs (since they are already in S3)\n+            new_log.replace(old_log, '')\n+\n+            # append new logs to old S3 logs, if available\n+            if s3_key.exists():\n+                old_s3_log = s3_key.get_contents_as_string().decode()\n+                new_log = old_s3_log + '\\n' + new_log\n+\n+            # send log to S3\n+            s3_key.set_contents_from_string(new_log)",
    "path": "airflow/bin/cli.py",
    "commit_id": "9c3a6b41290928f8097faace54fb9acfd0b9f77a",
    "original_commit_id": "eb72e385ca40d11e183d4ca2d1d7e6b05195d23d",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "I'm having an internal debate on wether we should wrap this in a try statement. An s3 outage would make everything fails, but if s3 goes down, probably a significant portion of modern computing is probably down too...\n",
    "created_at": "2015-10-26T17:17:47Z",
    "updated_at": "2015-10-26T18:55:09Z",
    "html_url": "https://github.com/apache/airflow/pull/494#discussion_r43023228",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/494",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/43023228"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/494#discussion_r43023228"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/494"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/43023228/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 38,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/43024431",
    "pull_request_review_id": null,
    "id": 43024431,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDI0NDMx",
    "diff_hunk": "@@ -165,6 +171,29 @@ def run(args):\n         executor.heartbeat()\n         executor.end()\n \n+    if conf.get('core', 'S3_LOG_FOLDER').startswith('s3:'):\n+        import boto\n+        s3 = boto.connect_s3()\n+        s3_log = filename.replace(log, conf.get('core', 'S3_LOG_FOLDER'))\n+        bucket, key = s3_log.lstrip('s3:/').split('/', 1)\n+        s3_key = boto.s3.key.Key(s3.get_bucket(bucket), key)\n+        if os.path.exists(filename):\n+\n+            # get logs\n+            with open(filename, 'r') as logfile:\n+                new_log = logfile.read()\n+\n+            # remove old logs (since they are already in S3)\n+            new_log.replace(old_log, '')\n+\n+            # append new logs to old S3 logs, if available\n+            if s3_key.exists():\n+                old_s3_log = s3_key.get_contents_as_string().decode()\n+                new_log = old_s3_log + '\\n' + new_log\n+\n+            # send log to S3\n+            s3_key.set_contents_from_string(new_log)",
    "path": "airflow/bin/cli.py",
    "commit_id": "9c3a6b41290928f8097faace54fb9acfd0b9f77a",
    "original_commit_id": "eb72e385ca40d11e183d4ca2d1d7e6b05195d23d",
    "user": {
      "login": "jlowin",
      "id": 153965,
      "node_id": "MDQ6VXNlcjE1Mzk2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/153965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jlowin",
      "html_url": "https://github.com/jlowin",
      "followers_url": "https://api.github.com/users/jlowin/followers",
      "following_url": "https://api.github.com/users/jlowin/following{/other_user}",
      "gists_url": "https://api.github.com/users/jlowin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jlowin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jlowin/subscriptions",
      "organizations_url": "https://api.github.com/users/jlowin/orgs",
      "repos_url": "https://api.github.com/users/jlowin/repos",
      "events_url": "https://api.github.com/users/jlowin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jlowin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Can't hurt -- done.\n",
    "created_at": "2015-10-26T17:26:01Z",
    "updated_at": "2015-10-26T18:55:09Z",
    "html_url": "https://github.com/apache/airflow/pull/494#discussion_r43024431",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/494",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/43024431"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/494#discussion_r43024431"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/494"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/43024431/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 38,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/43591150",
    "pull_request_review_id": null,
    "id": 43591150,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTkxMTUw",
    "diff_hunk": "@@ -258,5 +270,22 @@\n         return false\n     }\n \n+    function zoomWithSlider() {\n+        var svg = d3.select(\"body\").select(\"svg\");\n+        var container = svg.select(\"g\");\n+        var scale = 0.5 + parseInt(slider.getValue())/10;\n+\n+        container.attr(\"transform\", \"translate(20, 20) scale(\" + scale + \")\");\n+\n+        // var h = svg.attr(\"height\"), w = parseInt(svg.style(\"width\"));",
    "path": "airflow/www/templates/airflow/graph.html",
    "commit_id": "4a4fcf3c06364bd84b252553a19114039cf8f184",
    "original_commit_id": "d1103109d93f353066f0c3a4bccb7328b87edb9c",
    "user": {
      "login": "KevYuen",
      "id": 4744103,
      "node_id": "MDQ6VXNlcjQ3NDQxMDM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4744103?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/KevYuen",
      "html_url": "https://github.com/KevYuen",
      "followers_url": "https://api.github.com/users/KevYuen/followers",
      "following_url": "https://api.github.com/users/KevYuen/following{/other_user}",
      "gists_url": "https://api.github.com/users/KevYuen/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/KevYuen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/KevYuen/subscriptions",
      "organizations_url": "https://api.github.com/users/KevYuen/orgs",
      "repos_url": "https://api.github.com/users/KevYuen/repos",
      "events_url": "https://api.github.com/users/KevYuen/events{/privacy}",
      "received_events_url": "https://api.github.com/users/KevYuen/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "The commented out code here is for zooming with the centre of the svg as a focus point. In testing, this seems to be less useful then simply zooming at \"20, 20\" as things tends to fly off screen.\n\nWould be interested in your input @mistercrunch \n\nLet me know what you'd prefer and I can make the changes.\n",
    "created_at": "2015-11-02T00:45:50Z",
    "updated_at": "2015-11-15T23:14:17Z",
    "html_url": "https://github.com/apache/airflow/pull/585#discussion_r43591150",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/585",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/43591150"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/585#discussion_r43591150"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/585"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/43591150/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 90,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/43715459",
    "pull_request_review_id": null,
    "id": 43715459,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzE1NDU5",
    "diff_hunk": "@@ -13,6 +13,9 @@\n from wtforms.compat import text_type\n \n from airflow.configuration import conf\n+from airflow import login",
    "path": "airflow/www/utils.py",
    "commit_id": "252c6436b3197f97f0ed27f533389f88d9e425ed",
    "original_commit_id": "7583f35eb6e26714955f79e60437c79557858642",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Let's bunch those:\n`from airflow import login, models, settings`\n",
    "created_at": "2015-11-03T04:32:00Z",
    "updated_at": "2015-11-05T03:27:37Z",
    "html_url": "https://github.com/apache/airflow/pull/590#discussion_r43715459",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/590",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/43715459"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/590#discussion_r43715459"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/590"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/43715459/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 4,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/43715483",
    "pull_request_review_id": null,
    "id": 43715483,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzE1NDgz",
    "diff_hunk": "@@ -68,6 +71,33 @@ def limit_sql(sql, limit, conn_type):\n             \"\"\".format(**locals())\n     return sql\n \n+\n+def action_logging(action):\n+    '''\n+    Decorator to log user actions\n+    '''\n+    def decorator(f):\n+        @functools.wraps(f)\n+        def wrapper(*args, **kwargs):\n+            session = settings.Session()\n+\n+            if hasattr(login.current_user, 'username'):\n+                user = login.current_user.username\n+            else:\n+                user = 'anonymous'\n+\n+            session.add(\n+                models.Log(\n+                    event=action,\n+                    task_instance=None,\n+                    owner=user\n+                    ))",
    "path": "airflow/www/utils.py",
    "commit_id": "252c6436b3197f97f0ed27f533389f88d9e425ed",
    "original_commit_id": "7583f35eb6e26714955f79e60437c79557858642",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "nit: i'd bring `))` to the end of line 93\n",
    "created_at": "2015-11-03T04:32:53Z",
    "updated_at": "2015-11-05T03:27:37Z",
    "html_url": "https://github.com/apache/airflow/pull/590#discussion_r43715483",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/590",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/43715483"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/590#discussion_r43715483"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/590"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/43715483/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 34,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/43715509",
    "pull_request_review_id": null,
    "id": 43715509,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzE1NTA5",
    "diff_hunk": "@@ -834,10 +834,40 @@ def task(self):\n             form=form,\n             dag=dag, title=title)\n \n-    @expose('/action')\n+    @expose('/run')\n     @login_required\n-    def action(self):\n-        action = request.args.get('action')\n+    @wwwutils.action_logging('run')",
    "path": "airflow/www/views.py",
    "commit_id": "252c6436b3197f97f0ed27f533389f88d9e425ed",
    "original_commit_id": "7583f35eb6e26714955f79e60437c79557858642",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "nice!\n",
    "created_at": "2015-11-03T04:33:52Z",
    "updated_at": "2015-11-05T03:27:37Z",
    "html_url": "https://github.com/apache/airflow/pull/590#discussion_r43715509",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/590",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/43715509"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/590#discussion_r43715509"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/590"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/43715509/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 9,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/43715790",
    "pull_request_review_id": null,
    "id": 43715790,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzE1Nzkw",
    "diff_hunk": "@@ -68,6 +71,33 @@ def limit_sql(sql, limit, conn_type):\n             \"\"\".format(**locals())\n     return sql\n \n+\n+def action_logging(action):\n+    '''\n+    Decorator to log user actions\n+    '''\n+    def decorator(f):\n+        @functools.wraps(f)\n+        def wrapper(*args, **kwargs):\n+            session = settings.Session()\n+\n+            if hasattr(login.current_user, 'username'):\n+                user = login.current_user.username\n+            else:\n+                user = 'anonymous'\n+\n+            session.add(\n+                models.Log(\n+                    event=action,\n+                    task_instance=None,\n+                    owner=user",
    "path": "airflow/www/utils.py",
    "commit_id": "252c6436b3197f97f0ed27f533389f88d9e425ed",
    "original_commit_id": "7583f35eb6e26714955f79e60437c79557858642",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "it'd be really nice to also store a string representation of args and kwargs as well. Maybe we can add an `extra` blob to the Log model and store a json representation of both these things as in `{\"args\": ['foo'], \"kwargs\": {\"key\": \"bar\"}}`\n\nWe'll need a db migration script to add the field. It's easy but unintuitive at first. I can guide you through the process.\n",
    "created_at": "2015-11-03T04:43:44Z",
    "updated_at": "2015-11-05T03:27:37Z",
    "html_url": "https://github.com/apache/airflow/pull/590#discussion_r43715790",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/590",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/43715790"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/590#discussion_r43715790"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/590"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/43715790/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 33,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/44152765",
    "pull_request_review_id": null,
    "id": 44152765,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTUyNzY1",
    "diff_hunk": "@@ -0,0 +1,81 @@\n+from airflow.hooks.base_hook import BaseHook\n+from airflow.configuration import conf\n+import logging\n+\n+from hdfs import InsecureClient, HdfsError\n+from airflow.utils import AirflowException\n+\n+\n+class WebHDFSHookException(AirflowException):\n+    pass\n+\n+\n+class WebHDFSHook(BaseHook):\n+    \"\"\"\n+    Interact with HDFS. This class is a wrapper around the hdfscli library.\n+    \"\"\"\n+    def __init__(self, webhdfs_conn_id='webhdfs_default'):\n+        self.webhdfs_conn_id = webhdfs_conn_id\n+\n+    def get_conn(self):\n+        \"\"\"\n+        Returns a hdfscli InsecureClient object.\n+        \"\"\"\n+        nn_connections = self.get_connections(self.webhdfs_conn_id)\n+        for nn in nn_connections:\n+            try:\n+                logging.debug('Trying namenode {}'.format(nn.host))\n+                client = InsecureClient('http://{nn.host}:{nn.port}'.format(nn=nn))",
    "path": "airflow/hooks/webhdfs_hook.py",
    "commit_id": "29747f0ec1e40a11de273fa79bf6848672ece3ae",
    "original_commit_id": "3cba12ec036012c0940d3c19aa923f7cd3689ccc",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "mmmh, I'm guessing other clients offer authentication? I guess if people need that in their environment they would add more options to this operator\n",
    "created_at": "2015-11-06T16:02:15Z",
    "updated_at": "2015-11-06T19:51:14Z",
    "html_url": "https://github.com/apache/airflow/pull/604#discussion_r44152765",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/604",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/44152765"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/604#discussion_r44152765"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/604"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/44152765/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 28,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/44153602",
    "pull_request_review_id": null,
    "id": 44153602,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTUzNjAy",
    "diff_hunk": "@@ -0,0 +1,81 @@\n+from airflow.hooks.base_hook import BaseHook\n+from airflow.configuration import conf\n+import logging\n+\n+from hdfs import InsecureClient, HdfsError\n+from airflow.utils import AirflowException\n+\n+\n+class WebHDFSHookException(AirflowException):\n+    pass\n+\n+\n+class WebHDFSHook(BaseHook):\n+    \"\"\"\n+    Interact with HDFS. This class is a wrapper around the hdfscli library.\n+    \"\"\"\n+    def __init__(self, webhdfs_conn_id='webhdfs_default'):\n+        self.webhdfs_conn_id = webhdfs_conn_id\n+\n+    def get_conn(self):\n+        \"\"\"\n+        Returns a hdfscli InsecureClient object.\n+        \"\"\"\n+        nn_connections = self.get_connections(self.webhdfs_conn_id)\n+        for nn in nn_connections:\n+            try:",
    "path": "airflow/hooks/webhdfs_hook.py",
    "commit_id": "29747f0ec1e40a11de273fa79bf6848672ece3ae",
    "original_commit_id": "3cba12ec036012c0940d3c19aa923f7cd3689ccc",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Are we expecting namenodes to fail often? I guess since it's a sensor we don't want to have a loose trigger, the downside is silencing legit errors  (say if the configuration refers to a deprecated node we might never figure it out)\n",
    "created_at": "2015-11-06T16:08:34Z",
    "updated_at": "2015-11-06T19:51:14Z",
    "html_url": "https://github.com/apache/airflow/pull/604#discussion_r44153602",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/604",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/44153602"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/604#discussion_r44153602"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/604"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/44153602/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 34,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 26,
    "position": 34,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/44153994",
    "pull_request_review_id": null,
    "id": 44153994,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTUzOTk0",
    "diff_hunk": "@@ -0,0 +1,81 @@\n+from airflow.hooks.base_hook import BaseHook\n+from airflow.configuration import conf\n+import logging\n+\n+from hdfs import InsecureClient, HdfsError\n+from airflow.utils import AirflowException\n+\n+\n+class WebHDFSHookException(AirflowException):\n+    pass\n+\n+\n+class WebHDFSHook(BaseHook):\n+    \"\"\"\n+    Interact with HDFS. This class is a wrapper around the hdfscli library.\n+    \"\"\"\n+    def __init__(self, webhdfs_conn_id='webhdfs_default'):\n+        self.webhdfs_conn_id = webhdfs_conn_id\n+\n+    def get_conn(self):\n+        \"\"\"\n+        Returns a hdfscli InsecureClient object.\n+        \"\"\"\n+        nn_connections = self.get_connections(self.webhdfs_conn_id)\n+        for nn in nn_connections:\n+            try:\n+                logging.debug('Trying namenode {}'.format(nn.host))\n+                client = InsecureClient('http://{nn.host}:{nn.port}'.format(nn=nn))\n+                client.content('/')\n+                logging.debug('Using namenode {} for hook'.format(nn.host))\n+                return client\n+            except HdfsError as e:\n+                logging.debug(\"Read operation on namenode {nn.host} failed with\"\n+                              \" error: {e.message}\".format(**locals()))\n+        nn_hosts = [c.host for c in nn_connections]\n+        no_nn_error = \"Read operations failed on the namenodes below:\\n{}\".format(\"\\n\".join(nn_hosts))\n+        raise WebHDFSHookException(no_nn_error)\n+\n+    def check_for_path(self, hdfs_path):\n+        \"\"\"\n+        Check for the existence of a path in HDFS by querying FileStatus.\n+        \"\"\"\n+        c = self.get_conn()\n+        return bool(c.status(hdfs_path, strict=False))\n+\n+    def load_file(self, source, destination, overwrite=True, parallelism=1,\n+                  **kwargs):\n+        \"\"\"\n+        Uploads a file to HDFS\n+\n+        :param source: Local path to file or folder. If a folder, all the files\n+          inside of it will be uploaded (note that this implies that folders empty\n+          of files will not be created remotely).\n+        :type source: str\n+        :param destination: PTarget HDFS path. If it already exists and is a\n+          directory, files will be uploaded inside.\n+        :type destination: str\n+        :param overwrite: Overwrite any existing file or directory.\n+        :type overwrite: bool\n+        :param parallelism: Number of threads to use for parallelization. A value of\n+          `0` (or negative) uses as many threads as there are files.\n+        :type parallelism: int\n+        :param temp_dir: Directory under which the files will first be uploaded",
    "path": "airflow/hooks/webhdfs_hook.py",
    "commit_id": "29747f0ec1e40a11de273fa79bf6848672ece3ae",
    "original_commit_id": "3cba12ec036012c0940d3c19aa923f7cd3689ccc",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "some of the params here don't seem to match the function header\n",
    "created_at": "2015-11-06T16:11:25Z",
    "updated_at": "2015-11-06T19:51:14Z",
    "html_url": "https://github.com/apache/airflow/pull/604#discussion_r44153994",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/604",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/44153994"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/604#discussion_r44153994"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/604"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/44153994/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 63,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/44154404",
    "pull_request_review_id": null,
    "id": 44154404,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTU0NDA0",
    "diff_hunk": "@@ -726,6 +726,13 @@ def test_hdfs_sensor(self):\n                 dag=self.dag)\n             t.run(start_date=DEFAULT_DATE, end_date=DEFAULT_DATE, force=True)\n \n+        def test_webhdfs_sensor(self):\n+            t = operators.WebHdfsSensor(\n+                task_id='webhdfs_sensor_check',\n+                filepath='hdfs://user/hive/warehouse/airflow.db/static_babynames',\n+                dag=self.dag)",
    "path": "tests/core.py",
    "commit_id": "29747f0ec1e40a11de273fa79bf6848672ece3ae",
    "original_commit_id": "3cba12ec036012c0940d3c19aa923f7cd3689ccc",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "`with timeout` would be nice, otherwise tests might run forever\n",
    "created_at": "2015-11-06T16:14:06Z",
    "updated_at": "2015-11-06T19:51:14Z",
    "html_url": "https://github.com/apache/airflow/pull/604#discussion_r44154404",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/604",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/44154404"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/604#discussion_r44154404"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/604"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/44154404/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 734,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 8,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/44154699",
    "pull_request_review_id": null,
    "id": 44154699,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTU0Njk5",
    "diff_hunk": "@@ -0,0 +1,81 @@\n+from airflow.hooks.base_hook import BaseHook\n+from airflow.configuration import conf\n+import logging\n+\n+from hdfs import InsecureClient, HdfsError\n+from airflow.utils import AirflowException\n+\n+\n+class WebHDFSHookException(AirflowException):",
    "path": "airflow/hooks/webhdfs_hook.py",
    "commit_id": "29747f0ec1e40a11de273fa79bf6848672ece3ae",
    "original_commit_id": "3cba12ec036012c0940d3c19aa923f7cd3689ccc",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "WebHDFSHookException -> AirflowWebHDFSHookException\n",
    "created_at": "2015-11-06T16:16:11Z",
    "updated_at": "2015-11-06T19:51:14Z",
    "html_url": "https://github.com/apache/airflow/pull/604#discussion_r44154699",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/604",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/44154699"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/604#discussion_r44154699"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/604"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/44154699/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 9,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/44164857",
    "pull_request_review_id": null,
    "id": 44164857,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTY0ODU3",
    "diff_hunk": "@@ -0,0 +1,81 @@\n+from airflow.hooks.base_hook import BaseHook\n+from airflow.configuration import conf\n+import logging\n+\n+from hdfs import InsecureClient, HdfsError\n+from airflow.utils import AirflowException\n+\n+\n+class WebHDFSHookException(AirflowException):\n+    pass\n+\n+\n+class WebHDFSHook(BaseHook):\n+    \"\"\"\n+    Interact with HDFS. This class is a wrapper around the hdfscli library.\n+    \"\"\"\n+    def __init__(self, webhdfs_conn_id='webhdfs_default'):\n+        self.webhdfs_conn_id = webhdfs_conn_id\n+\n+    def get_conn(self):\n+        \"\"\"\n+        Returns a hdfscli InsecureClient object.\n+        \"\"\"\n+        nn_connections = self.get_connections(self.webhdfs_conn_id)\n+        for nn in nn_connections:\n+            try:\n+                logging.debug('Trying namenode {}'.format(nn.host))\n+                client = InsecureClient('http://{nn.host}:{nn.port}'.format(nn=nn))",
    "path": "airflow/hooks/webhdfs_hook.py",
    "commit_id": "29747f0ec1e40a11de273fa79bf6848672ece3ae",
    "original_commit_id": "3cba12ec036012c0940d3c19aa923f7cd3689ccc",
    "user": {
      "login": "artwr",
      "id": 1518713,
      "node_id": "MDQ6VXNlcjE1MTg3MTM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1518713?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/artwr",
      "html_url": "https://github.com/artwr",
      "followers_url": "https://api.github.com/users/artwr/followers",
      "following_url": "https://api.github.com/users/artwr/following{/other_user}",
      "gists_url": "https://api.github.com/users/artwr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/artwr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/artwr/subscriptions",
      "organizations_url": "https://api.github.com/users/artwr/orgs",
      "repos_url": "https://api.github.com/users/artwr/repos",
      "events_url": "https://api.github.com/users/artwr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/artwr/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "There is actually support for kerberos, @bolkedebruin rejoice. I still need to figure out how to add it incrementally to this. The other subclass of `Client` is named `TokenClient` and works off of Hadoop Delegation Tokens, which I do not think we use internally.  \n",
    "created_at": "2015-11-06T17:40:43Z",
    "updated_at": "2015-11-06T19:51:14Z",
    "html_url": "https://github.com/apache/airflow/pull/604#discussion_r44164857",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/604",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/44164857"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/604#discussion_r44164857"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/604"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/44164857/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 28,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/44165883",
    "pull_request_review_id": null,
    "id": 44165883,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTY1ODgz",
    "diff_hunk": "@@ -0,0 +1,81 @@\n+from airflow.hooks.base_hook import BaseHook\n+from airflow.configuration import conf\n+import logging\n+\n+from hdfs import InsecureClient, HdfsError\n+from airflow.utils import AirflowException\n+\n+\n+class WebHDFSHookException(AirflowException):\n+    pass\n+\n+\n+class WebHDFSHook(BaseHook):\n+    \"\"\"\n+    Interact with HDFS. This class is a wrapper around the hdfscli library.\n+    \"\"\"\n+    def __init__(self, webhdfs_conn_id='webhdfs_default'):\n+        self.webhdfs_conn_id = webhdfs_conn_id\n+\n+    def get_conn(self):\n+        \"\"\"\n+        Returns a hdfscli InsecureClient object.\n+        \"\"\"\n+        nn_connections = self.get_connections(self.webhdfs_conn_id)\n+        for nn in nn_connections:\n+            try:",
    "path": "airflow/hooks/webhdfs_hook.py",
    "commit_id": "29747f0ec1e40a11de273fa79bf6848672ece3ae",
    "original_commit_id": "3cba12ec036012c0940d3c19aa923f7cd3689ccc",
    "user": {
      "login": "artwr",
      "id": 1518713,
      "node_id": "MDQ6VXNlcjE1MTg3MTM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1518713?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/artwr",
      "html_url": "https://github.com/artwr",
      "followers_url": "https://api.github.com/users/artwr/followers",
      "following_url": "https://api.github.com/users/artwr/following{/other_user}",
      "gists_url": "https://api.github.com/users/artwr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/artwr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/artwr/subscriptions",
      "organizations_url": "https://api.github.com/users/artwr/orgs",
      "repos_url": "https://api.github.com/users/artwr/repos",
      "events_url": "https://api.github.com/users/artwr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/artwr/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Not necessarily. It is a poor man's High Availability client so that we can enter a list of the namenodes (primary and secondary) in the connections. It only raises if all the namenodes with that connection ID fail. Are you suggesting we cache it and then rescue the specific error and retry with another namenode in the list if needed?\n",
    "created_at": "2015-11-06T17:50:01Z",
    "updated_at": "2015-11-06T19:51:14Z",
    "html_url": "https://github.com/apache/airflow/pull/604#discussion_r44165883",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/604",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/44165883"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/604#discussion_r44165883"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/604"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/44165883/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 34,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 26,
    "position": 34,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/44168746",
    "pull_request_review_id": null,
    "id": 44168746,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTY4NzQ2",
    "diff_hunk": "@@ -0,0 +1,81 @@\n+from airflow.hooks.base_hook import BaseHook\n+from airflow.configuration import conf\n+import logging\n+\n+from hdfs import InsecureClient, HdfsError\n+from airflow.utils import AirflowException\n+\n+\n+class WebHDFSHookException(AirflowException):\n+    pass\n+\n+\n+class WebHDFSHook(BaseHook):\n+    \"\"\"\n+    Interact with HDFS. This class is a wrapper around the hdfscli library.\n+    \"\"\"\n+    def __init__(self, webhdfs_conn_id='webhdfs_default'):\n+        self.webhdfs_conn_id = webhdfs_conn_id\n+\n+    def get_conn(self):\n+        \"\"\"\n+        Returns a hdfscli InsecureClient object.\n+        \"\"\"\n+        nn_connections = self.get_connections(self.webhdfs_conn_id)\n+        for nn in nn_connections:\n+            try:\n+                logging.debug('Trying namenode {}'.format(nn.host))\n+                client = InsecureClient('http://{nn.host}:{nn.port}'.format(nn=nn))",
    "path": "airflow/hooks/webhdfs_hook.py",
    "commit_id": "29747f0ec1e40a11de273fa79bf6848672ece3ae",
    "original_commit_id": "3cba12ec036012c0940d3c19aa923f7cd3689ccc",
    "user": {
      "login": "bolkedebruin",
      "id": 4282712,
      "node_id": "MDQ6VXNlcjQyODI3MTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4282712?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bolkedebruin",
      "html_url": "https://github.com/bolkedebruin",
      "followers_url": "https://api.github.com/users/bolkedebruin/followers",
      "following_url": "https://api.github.com/users/bolkedebruin/following{/other_user}",
      "gists_url": "https://api.github.com/users/bolkedebruin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bolkedebruin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bolkedebruin/subscriptions",
      "organizations_url": "https://api.github.com/users/bolkedebruin/orgs",
      "repos_url": "https://api.github.com/users/bolkedebruin/repos",
      "events_url": "https://api.github.com/users/bolkedebruin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bolkedebruin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "@artwr I am, I am! I think you can use KerberosClient instead of TokenClient (as we are not getting a delegation token for a user at the moment) with if configuration.conf.get(\"security\") = \"kerberos\"? And I think (no experience with hdfscli) it is transparent for hook, except if the client allows to set a \"proxy_user\". If so have a look at the hive hook for an example.\n",
    "created_at": "2015-11-06T18:15:14Z",
    "updated_at": "2015-11-06T19:51:14Z",
    "html_url": "https://github.com/apache/airflow/pull/604#discussion_r44168746",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/604",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/44168746"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/604#discussion_r44168746"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/604"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/44168746/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 28,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/44180201",
    "pull_request_review_id": null,
    "id": 44180201,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTgwMjAx",
    "diff_hunk": "@@ -0,0 +1,81 @@\n+from airflow.hooks.base_hook import BaseHook\n+from airflow.configuration import conf\n+import logging\n+\n+from hdfs import InsecureClient, HdfsError\n+from airflow.utils import AirflowException\n+\n+\n+class WebHDFSHookException(AirflowException):\n+    pass\n+\n+\n+class WebHDFSHook(BaseHook):\n+    \"\"\"\n+    Interact with HDFS. This class is a wrapper around the hdfscli library.\n+    \"\"\"\n+    def __init__(self, webhdfs_conn_id='webhdfs_default'):\n+        self.webhdfs_conn_id = webhdfs_conn_id\n+\n+    def get_conn(self):\n+        \"\"\"\n+        Returns a hdfscli InsecureClient object.\n+        \"\"\"\n+        nn_connections = self.get_connections(self.webhdfs_conn_id)\n+        for nn in nn_connections:\n+            try:",
    "path": "airflow/hooks/webhdfs_hook.py",
    "commit_id": "29747f0ec1e40a11de273fa79bf6848672ece3ae",
    "original_commit_id": "3cba12ec036012c0940d3c19aa923f7cd3689ccc",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Don't bother that's fine as is\n",
    "created_at": "2015-11-06T19:54:11Z",
    "updated_at": "2015-11-06T19:54:11Z",
    "html_url": "https://github.com/apache/airflow/pull/604#discussion_r44180201",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/604",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/44180201"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/604#discussion_r44180201"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/604"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/44180201/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 34,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 26,
    "position": 34,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/44180230",
    "pull_request_review_id": null,
    "id": 44180230,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTgwMjMw",
    "diff_hunk": "@@ -0,0 +1,81 @@\n+from airflow.hooks.base_hook import BaseHook\n+from airflow.configuration import conf\n+import logging\n+\n+from hdfs import InsecureClient, HdfsError\n+from airflow.utils import AirflowException\n+\n+\n+class WebHDFSHookException(AirflowException):\n+    pass\n+\n+\n+class WebHDFSHook(BaseHook):\n+    \"\"\"\n+    Interact with HDFS. This class is a wrapper around the hdfscli library.\n+    \"\"\"\n+    def __init__(self, webhdfs_conn_id='webhdfs_default'):\n+        self.webhdfs_conn_id = webhdfs_conn_id\n+\n+    def get_conn(self):\n+        \"\"\"\n+        Returns a hdfscli InsecureClient object.\n+        \"\"\"\n+        nn_connections = self.get_connections(self.webhdfs_conn_id)\n+        for nn in nn_connections:\n+            try:\n+                logging.debug('Trying namenode {}'.format(nn.host))\n+                client = InsecureClient('http://{nn.host}:{nn.port}'.format(nn=nn))",
    "path": "airflow/hooks/webhdfs_hook.py",
    "commit_id": "29747f0ec1e40a11de273fa79bf6848672ece3ae",
    "original_commit_id": "3cba12ec036012c0940d3c19aa923f7cd3689ccc",
    "user": {
      "login": "artwr",
      "id": 1518713,
      "node_id": "MDQ6VXNlcjE1MTg3MTM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1518713?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/artwr",
      "html_url": "https://github.com/artwr",
      "followers_url": "https://api.github.com/users/artwr/followers",
      "following_url": "https://api.github.com/users/artwr/following{/other_user}",
      "gists_url": "https://api.github.com/users/artwr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/artwr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/artwr/subscriptions",
      "organizations_url": "https://api.github.com/users/artwr/orgs",
      "repos_url": "https://api.github.com/users/artwr/repos",
      "events_url": "https://api.github.com/users/artwr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/artwr/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Alright, I added a micron of support for this. I have no ability to test this other that it does not interfere with using the InsecureClient on our setup. Let me know if you get the chance to test it. The API provided by the extra seems [fairly basic](http://hdfscli.readthedocs.org/en/latest/api.html#module-hdfs.ext.kerberos), I do not know if it has all you need.\n",
    "created_at": "2015-11-06T19:54:24Z",
    "updated_at": "2015-11-06T19:54:24Z",
    "html_url": "https://github.com/apache/airflow/pull/604#discussion_r44180230",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/604",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/44180230"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/604#discussion_r44180230"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/604"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/44180230/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 28,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/44185730",
    "pull_request_review_id": null,
    "id": 44185730,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTg1NzMw",
    "diff_hunk": "@@ -0,0 +1,81 @@\n+from airflow.hooks.base_hook import BaseHook\n+from airflow.configuration import conf\n+import logging\n+\n+from hdfs import InsecureClient, HdfsError\n+from airflow.utils import AirflowException\n+\n+\n+class WebHDFSHookException(AirflowException):\n+    pass\n+\n+\n+class WebHDFSHook(BaseHook):\n+    \"\"\"\n+    Interact with HDFS. This class is a wrapper around the hdfscli library.\n+    \"\"\"\n+    def __init__(self, webhdfs_conn_id='webhdfs_default'):\n+        self.webhdfs_conn_id = webhdfs_conn_id\n+\n+    def get_conn(self):\n+        \"\"\"\n+        Returns a hdfscli InsecureClient object.\n+        \"\"\"\n+        nn_connections = self.get_connections(self.webhdfs_conn_id)\n+        for nn in nn_connections:\n+            try:\n+                logging.debug('Trying namenode {}'.format(nn.host))\n+                client = InsecureClient('http://{nn.host}:{nn.port}'.format(nn=nn))",
    "path": "airflow/hooks/webhdfs_hook.py",
    "commit_id": "29747f0ec1e40a11de273fa79bf6848672ece3ae",
    "original_commit_id": "3cba12ec036012c0940d3c19aa923f7cd3689ccc",
    "user": {
      "login": "bolkedebruin",
      "id": 4282712,
      "node_id": "MDQ6VXNlcjQyODI3MTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4282712?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bolkedebruin",
      "html_url": "https://github.com/bolkedebruin",
      "followers_url": "https://api.github.com/users/bolkedebruin/followers",
      "following_url": "https://api.github.com/users/bolkedebruin/following{/other_user}",
      "gists_url": "https://api.github.com/users/bolkedebruin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bolkedebruin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bolkedebruin/subscriptions",
      "organizations_url": "https://api.github.com/users/bolkedebruin/orgs",
      "repos_url": "https://api.github.com/users/bolkedebruin/repos",
      "events_url": "https://api.github.com/users/bolkedebruin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bolkedebruin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Don\u2019t worry. We will test it and create a PR if required. Thanks for having it in!\n\nIf I get around to get a minisecure cluster running on travis we can test it there. Ground work is there but will still take some effort.\n\n> Op 6 nov. 2015, om 20:54 heeft Arthur Wiedmer notifications@github.com het volgende geschreven:\n> \n> In airflow/hooks/webhdfs_hook.py https://github.com/airbnb/airflow/pull/604#discussion_r44180230:\n> \n> > +class WebHDFSHook(BaseHook):\n> > -    \"\"\"\n> > -    Interact with HDFS. This class is a wrapper around the hdfscli library.\n> > -    \"\"\"\n> > -    def **init**(self, webhdfs_conn_id='webhdfs_default'):\n> > -        self.webhdfs_conn_id = webhdfs_conn_id\n> >   +\n> > -    def get_conn(self):\n> > -        \"\"\"\n> > -        Returns a hdfscli InsecureClient object.\n> > -        \"\"\"\n> > -        nn_connections = self.get_connections(self.webhdfs_conn_id)\n> > -        for nn in nn_connections:\n> > -            try:\n> > -                logging.debug('Trying namenode {}'.format(nn.host))\n> > -                client = InsecureClient('http://{nn.host}:{nn.port}'.format(nn=nn))\n> >   Alright, I added a micron of support for this. I have no ability to test this other that it does not interfere with using the InsecureClient on our setup. Let me know if you get the chance to test it. The API provided by the extra seems fairly basic http://hdfscli.readthedocs.org/en/latest/api.html#module-hdfs.ext.kerberos, I do not know if it has all you need.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub https://github.com/airbnb/airflow/pull/604/files#r44180230.\n",
    "created_at": "2015-11-06T20:47:31Z",
    "updated_at": "2015-11-06T20:47:31Z",
    "html_url": "https://github.com/apache/airflow/pull/604#discussion_r44185730",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/604",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/44185730"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/604#discussion_r44185730"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/604"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/44185730/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 28,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/44194856",
    "pull_request_review_id": null,
    "id": 44194856,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTk0ODU2",
    "diff_hunk": "@@ -408,6 +409,21 @@ def process_dag(self, dag, executor):\n                 ti = ti_dict[task.task_id]\n                 ti.task = task  # Hacky but worky\n                 if ti.state == State.RUNNING:\n+                    if ti.key not in executor.running:",
    "path": "airflow/jobs.py",
    "commit_id": "c5f58266bcc0bb46956e4af9d6c7c04819a8584a",
    "original_commit_id": "c5f58266bcc0bb46956e4af9d6c7c04819a8584a",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "I don't think this is compatible with the way we currently run the scheduler at Airbnb. Also not compatible with a future where we'd run multiple instances of the scheduler... I think ultimately we want the database to be the source of truth as far as status goes, but use some of the signals from the executor to force double checking things or alert about unusual events.\n",
    "created_at": "2015-11-06T22:28:01Z",
    "updated_at": "2015-11-06T22:28:01Z",
    "html_url": "https://github.com/apache/airflow/pull/569#discussion_r44194856",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/569",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/44194856"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/569#discussion_r44194856"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/569"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/44194856/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 412,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 12,
    "position": 12,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/44457375",
    "pull_request_review_id": null,
    "id": 44457375,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDU3Mzc1",
    "diff_hunk": "@@ -329,12 +330,15 @@ def webserver(args):\n         app.run(debug=True, port=args.port, host=args.hostname)\n     else:\n         print(\n-            'Running the Gunicorn server with {threads}'\n-            'on host {args.hostname} and port '\n-            '{args.port}...'.format(**locals()))\n+            'Running the Gunicorn server with {workers} workers '\n+            'using {threads} threads eachon host {args.hostname} '\n+            'and port {args.port}...'.format(**locals()))\n         sp = subprocess.Popen([\n-            'gunicorn', '-w', str(args.threads), '-t', '120', '-b',\n-            args.hostname + ':' + str(args.port),\n+            'gunicorn',\n+            '-w', str(args.workers),\n+            '--threads', str(args.threads),\n+            '-t', '120',",
    "path": "airflow/bin/cli.py",
    "commit_id": "42c5d5991a7bec3d75c8d7c81075e224bbe89a7b",
    "original_commit_id": "d2e9d32a194f30c4372fb772a06129c2cfebd771",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "120 threads? oh `-t` is for timeout\n",
    "created_at": "2015-11-10T20:05:32Z",
    "updated_at": "2015-11-11T16:51:20Z",
    "html_url": "https://github.com/apache/airflow/pull/610#discussion_r44457375",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/610",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/44457375"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/610#discussion_r44457375"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/610"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/44457375/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 342,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 24,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/44464193",
    "pull_request_review_id": null,
    "id": 44464193,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDY0MTkz",
    "diff_hunk": "@@ -329,12 +330,15 @@ def webserver(args):\n         app.run(debug=True, port=args.port, host=args.hostname)\n     else:\n         print(\n-            'Running the Gunicorn server with {threads}'\n-            'on host {args.hostname} and port '\n-            '{args.port}...'.format(**locals()))\n+            'Running the Gunicorn server with {workers} workers '\n+            'using {threads} threads eachon host {args.hostname} '\n+            'and port {args.port}...'.format(**locals()))\n         sp = subprocess.Popen([\n-            'gunicorn', '-w', str(args.threads), '-t', '120', '-b',\n-            args.hostname + ':' + str(args.port),\n+            'gunicorn',\n+            '-w', str(args.workers),\n+            '--threads', str(args.threads),\n+            '-t', '120',",
    "path": "airflow/bin/cli.py",
    "commit_id": "42c5d5991a7bec3d75c8d7c81075e224bbe89a7b",
    "original_commit_id": "d2e9d32a194f30c4372fb772a06129c2cfebd771",
    "user": {
      "login": "artwr",
      "id": 1518713,
      "node_id": "MDQ6VXNlcjE1MTg3MTM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1518713?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/artwr",
      "html_url": "https://github.com/artwr",
      "followers_url": "https://api.github.com/users/artwr/followers",
      "following_url": "https://api.github.com/users/artwr/following{/other_user}",
      "gists_url": "https://api.github.com/users/artwr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/artwr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/artwr/subscriptions",
      "organizations_url": "https://api.github.com/users/artwr/orgs",
      "repos_url": "https://api.github.com/users/artwr/repos",
      "events_url": "https://api.github.com/users/artwr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/artwr/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Yep. Default timeout is 30s. No short option for threads.\n",
    "created_at": "2015-11-10T21:01:56Z",
    "updated_at": "2015-11-11T16:51:20Z",
    "html_url": "https://github.com/apache/airflow/pull/610#discussion_r44464193",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/610",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/44464193"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/610#discussion_r44464193"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/610"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/44464193/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 342,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 24,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/44467070",
    "pull_request_review_id": null,
    "id": 44467070,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDY3MDcw",
    "diff_hunk": "@@ -424,8 +426,22 @@ def process_dag(self, dag, executor):\n             session.commit()\n \n         active_runs = dag.get_active_runs()\n+\n+        # Making a set of task instances that are easy to skip based on state\n+        skip_tis = set()\n+        if active_runs:\n+            qry = (\n+                session.query(TI.task_id, TI.execution_date)\n+                .filter(\n+                    TI.dag_id == dag.dag_id,\n+                    TI.execution_date.in_(active_runs),",
    "path": "airflow/jobs.py",
    "commit_id": "22c9d90c4dbcd98d55f6a9cb1324fe34ac306ad8",
    "original_commit_id": "22c9d90c4dbcd98d55f6a9cb1324fe34ac306ad8",
    "user": {
      "login": "artwr",
      "id": 1518713,
      "node_id": "MDQ6VXNlcjE1MTg3MTM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1518713?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/artwr",
      "html_url": "https://github.com/artwr",
      "followers_url": "https://api.github.com/users/artwr/followers",
      "following_url": "https://api.github.com/users/artwr/following{/other_user}",
      "gists_url": "https://api.github.com/users/artwr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/artwr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/artwr/subscriptions",
      "organizations_url": "https://api.github.com/users/artwr/orgs",
      "repos_url": "https://api.github.com/users/artwr/repos",
      "events_url": "https://api.github.com/users/artwr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/artwr/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Nicely avoiding the N+1 lurking here :)\n",
    "created_at": "2015-11-10T21:23:50Z",
    "updated_at": "2015-11-10T21:23:50Z",
    "html_url": "https://github.com/apache/airflow/pull/612#discussion_r44467070",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/612",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/44467070"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/612#discussion_r44467070"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/612"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/44467070/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 437,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 23,
    "position": 23,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/44473327",
    "pull_request_review_id": null,
    "id": 44473327,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDczMzI3",
    "diff_hunk": "@@ -124,10 +126,17 @@ def test_time_sensor(self):\n         t.run(start_date=DEFAULT_DATE, end_date=DEFAULT_DATE, force=True)\n \n     def test_check_operators(self):\n+\n+        conn_id = \"sqlite_default\"\n+\n+        captainHook = BaseHook.get_hook(conn_id=conn_id)",
    "path": "tests/core.py",
    "commit_id": "8783a10fd38d13bcb8eec5888fb089f68d894d83",
    "original_commit_id": "849b408c5fb3641809f031c6e58626c8ea596be6",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "![img](http://dykn.com/wp-content/uploads/2014/11/disney.jpg)\n",
    "created_at": "2015-11-10T22:12:09Z",
    "updated_at": "2015-11-10T23:13:31Z",
    "html_url": "https://github.com/apache/airflow/pull/608#discussion_r44473327",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/608",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/44473327"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/608#discussion_r44473327"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/608"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/44473327/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 132,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 19,
    "position": 19,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/44573824",
    "pull_request_review_id": null,
    "id": 44573824,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTczODI0",
    "diff_hunk": "@@ -157,8 +158,12 @@ class AirflowConfigException(Exception):\n # Secret key used to run your flask app\n secret_key = temporary_key\n \n-# number of threads to run the Gunicorn web server\n-thread = 4\n+# Number of threads to run the Gunicorn web server\n+threads = 4",
    "path": "airflow/configuration.py",
    "commit_id": "01115af12e45acbc1401945477c6be274a196c1a",
    "original_commit_id": "c291c8c22938a5f7d76a387755381b43415f2eb0",
    "user": {
      "login": "artwr",
      "id": 1518713,
      "node_id": "MDQ6VXNlcjE1MTg3MTM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1518713?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/artwr",
      "html_url": "https://github.com/artwr",
      "followers_url": "https://api.github.com/users/artwr/followers",
      "following_url": "https://api.github.com/users/artwr/following{/other_user}",
      "gists_url": "https://api.github.com/users/artwr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/artwr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/artwr/subscriptions",
      "organizations_url": "https://api.github.com/users/artwr/orgs",
      "repos_url": "https://api.github.com/users/artwr/repos",
      "events_url": "https://api.github.com/users/artwr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/artwr/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Might be worth renaming to workers.\n",
    "created_at": "2015-11-11T19:22:48Z",
    "updated_at": "2015-11-11T20:57:48Z",
    "html_url": "https://github.com/apache/airflow/pull/618#discussion_r44573824",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/618",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/44573824"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/618#discussion_r44573824"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/618"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/44573824/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 15,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/44574050",
    "pull_request_review_id": null,
    "id": 44574050,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTc0MDUw",
    "diff_hunk": "@@ -600,6 +600,10 @@ def get_parser():\n         type=int,\n         help=\"Number of threads to run the webserver on\")\n     parser_webserver.add_argument(\n+        \"-k\", \"--workerclass\",\n+        default=configuration.get('webserver', 'WORKER_CLASS'),",
    "path": "airflow/bin/cli.py",
    "commit_id": "01115af12e45acbc1401945477c6be274a196c1a",
    "original_commit_id": "c291c8c22938a5f7d76a387755381b43415f2eb0",
    "user": {
      "login": "artwr",
      "id": 1518713,
      "node_id": "MDQ6VXNlcjE1MTg3MTM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1518713?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/artwr",
      "html_url": "https://github.com/artwr",
      "followers_url": "https://api.github.com/users/artwr/followers",
      "following_url": "https://api.github.com/users/artwr/following{/other_user}",
      "gists_url": "https://api.github.com/users/artwr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/artwr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/artwr/subscriptions",
      "organizations_url": "https://api.github.com/users/artwr/orgs",
      "repos_url": "https://api.github.com/users/artwr/repos",
      "events_url": "https://api.github.com/users/artwr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/artwr/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "`choices=['sync', 'eventlet', 'gevent', 'tornado'],` We can constrain this since those are the only options.\n",
    "created_at": "2015-11-11T19:24:34Z",
    "updated_at": "2015-11-11T20:57:48Z",
    "html_url": "https://github.com/apache/airflow/pull/618#discussion_r44574050",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/618",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/44574050"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/618#discussion_r44574050"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/618"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/44574050/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 604,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 22,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/44838513",
    "pull_request_review_id": null,
    "id": 44838513,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODM4NTEz",
    "diff_hunk": "@@ -1257,6 +1257,14 @@ def __init__(self, event, task_instance, owner=None, extra=None):\n             self.execution_date = task_instance.execution_date\n             task_owner = task_instance.task.owner\n \n+        if 'task_id' in kwargs:\n+            self.task_id = kwargs['task_id']\n+        if 'dag_id' in kwargs:\n+            self.dag_id = kwargs['dag_id']\n+        if 'execution_date' in kwargs:\n+            if kwargs['execution_date']:\n+                self.execution_date = kwargs['execution_date'][:10]",
    "path": "airflow/models.py",
    "commit_id": "c744e2a0925706e89ac0421ef3c33aec9b5e981f",
    "original_commit_id": "15515c066f2e0b1a7abdf74a6c9a3f5e5485d4ef",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "why truncating it? I don't think you can treat this datetime.datetime as a str\n",
    "created_at": "2015-11-13T21:52:05Z",
    "updated_at": "2015-11-13T22:03:33Z",
    "html_url": "https://github.com/apache/airflow/pull/630#discussion_r44838513",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/630",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/44838513"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/630#discussion_r44838513"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/630"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/44838513/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 19,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/44838900",
    "pull_request_review_id": null,
    "id": 44838900,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODM4OTAw",
    "diff_hunk": "@@ -1257,6 +1257,14 @@ def __init__(self, event, task_instance, owner=None, extra=None):\n             self.execution_date = task_instance.execution_date\n             task_owner = task_instance.task.owner\n \n+        if 'task_id' in kwargs:\n+            self.task_id = kwargs['task_id']\n+        if 'dag_id' in kwargs:\n+            self.dag_id = kwargs['dag_id']\n+        if 'execution_date' in kwargs:\n+            if kwargs['execution_date']:\n+                self.execution_date = kwargs['execution_date'][:10]",
    "path": "airflow/models.py",
    "commit_id": "c744e2a0925706e89ac0421ef3c33aec9b5e981f",
    "original_commit_id": "15515c066f2e0b1a7abdf74a6c9a3f5e5485d4ef",
    "user": {
      "login": "patrickleotardif",
      "id": 787256,
      "node_id": "MDQ6VXNlcjc4NzI1Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/787256?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/patrickleotardif",
      "html_url": "https://github.com/patrickleotardif",
      "followers_url": "https://api.github.com/users/patrickleotardif/followers",
      "following_url": "https://api.github.com/users/patrickleotardif/following{/other_user}",
      "gists_url": "https://api.github.com/users/patrickleotardif/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/patrickleotardif/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/patrickleotardif/subscriptions",
      "organizations_url": "https://api.github.com/users/patrickleotardif/orgs",
      "repos_url": "https://api.github.com/users/patrickleotardif/repos",
      "events_url": "https://api.github.com/users/patrickleotardif/events{/privacy}",
      "received_events_url": "https://api.github.com/users/patrickleotardif/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "In the request it looks like 2015-01-01 00:00:00 (...) while in current log table it looks like just the first 10 characters (ISO). What would work?\n",
    "created_at": "2015-11-13T21:56:07Z",
    "updated_at": "2015-11-13T22:03:33Z",
    "html_url": "https://github.com/apache/airflow/pull/630#discussion_r44838900",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/630",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/44838900"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/630#discussion_r44838900"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/630"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/44838900/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 19,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/45377146",
    "pull_request_review_id": null,
    "id": 45377146,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mzc3MTQ2",
    "diff_hunk": "@@ -511,10 +527,27 @@ def get_parser():\n \n     ht = \"Trigger a DAG\"\n     parser_trigger_dag = subparsers.add_parser('trigger_dag', help=ht)\n-    parser_trigger_dag.add_argument(\"dag_id\", help=\"The id of the dag to run\")\n+    parser_trigger_dag.add_argument(\"dag_id\", help=\"The id of the dag to run.\", default=None)",
    "path": "airflow/bin/cli.py",
    "commit_id": "7278c93cb4dd650399d0232372f482cccd13f405",
    "original_commit_id": "7278c93cb4dd650399d0232372f482cccd13f405",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "`default=None` is implicit and/or not necessary\n",
    "created_at": "2015-11-19T18:08:28Z",
    "updated_at": "2015-11-19T18:08:28Z",
    "html_url": "https://github.com/apache/airflow/pull/644#discussion_r45377146",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/644",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/45377146"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/644#discussion_r45377146"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/644"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/45377146/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 530,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 67,
    "position": 67,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/45377327",
    "pull_request_review_id": null,
    "id": 45377327,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mzc3MzI3",
    "diff_hunk": "@@ -343,61 +343,96 @@ def import_errors(self, dagbag):\n                 filename=filename, stacktrace=stacktrace))\n         session.commit()\n \n+    def _active_runs(self, session, dag):\n+        qry = session.query(func.count()).filter(\n+            DagRun.dag_id == dag.dag_id,\n+            DagRun.external_trigger == False,\n+            DagRun.state == State.RUNNING,\n+        )\n+        return qry.scalar()\n+\n+    def _last_scheduled_run(self, session, dag,\n+            scheduled_prefix=DagRun.ID_PREFIX+'%'):\n+        \"\"\"\n+        Helper method for schedule_dag.\n+        Given the database session, and dag, return the latest scheduled dag run\n+        \"\"\"\n+        qry = session.query(func.max(DagRun.execution_date)).filter_by(\n+            dag_id = dag.dag_id).filter(\n+                    or_(DagRun.external_trigger == False,\n+                        DagRun.run_id.like(scheduled_prefix)))\n+        return qry.scalar()\n+\n+    def _next_dag_run_date(self, session, last_scheduled_run, dag):\n+        next_run_date = None\n+        if not last_scheduled_run:\n+            # First run\n+            TI = models.TaskInstance\n+            latest_run = (\n+                session.query(func.max(TI.execution_date))\n+                .filter_by(dag_id=dag.dag_id)\n+                .scalar()\n+            )\n+            if latest_run:\n+                # Migrating from previous version\n+                # make the past 5 runs active\n+                next_run_date = dag.date_range(latest_run, -5)[0]\n+            elif dag.tasks:\n+                next_run_date = min([t.start_date for t in dag.tasks])\n+        elif dag.schedule_interval != '@once':\n+            next_run_date = dag.following_schedule(last_scheduled_run)\n+        elif dag.schedule_interval == '@once' and not last_scheduled_run:\n+            next_run_date = datetime.now()\n+\n+        return next_run_date\n+    \n \n     def schedule_dag(self, dag):\n         \"\"\"\n         This method checks whether a new DagRun needs to be created\n         for a DAG based on scheduling interval\n+        Returns the DagRun object if created; otherwise returns None\n         \"\"\"\n-        if dag.schedule_interval:\n-            DagRun = models.DagRun\n-            session = settings.Session()\n-            qry = session.query(func.count()).filter(\n-                DagRun.dag_id == dag.dag_id,\n-                DagRun.external_trigger == False,\n-                DagRun.state == State.RUNNING,\n-            )\n-            active_runs = qry.scalar()\n-            if active_runs >= dag.max_active_runs:\n-                return\n-            qry = session.query(func.max(DagRun.execution_date)).filter(\n-                DagRun.dag_id == dag.dag_id,\n-                DagRun.external_trigger == False\n-            )\n-            last_scheduled_run = qry.scalar()\n-            next_run_date = None\n-            if not last_scheduled_run:\n-                # First run\n-                TI = models.TaskInstance\n-                latest_run = (\n-                    session.query(func.max(TI.execution_date))\n-                    .filter_by(dag_id=dag.dag_id)\n-                    .scalar()\n-                )\n-                if latest_run:\n-                    # Migrating from previous version\n-                    # make the past 5 runs active\n-                    next_run_date = dag.date_range(latest_run, -5)[0]\n-                else:\n-                    next_run_date = min([t.start_date for t in dag.tasks])\n-            elif dag.schedule_interval != '@once':\n-                next_run_date = dag.following_schedule(last_scheduled_run)\n-            elif dag.schedule_interval == '@once' and not last_scheduled_run:\n-                next_run_date = datetime.now()\n+        # Don't schedule if there is no schedule interval\n+        if not dag.schedule_interval:\n+            return\n \n+        # don't schedule if dag has maxed out its number of runs\n+        session = settings.Session()\n+        if self._active_runs(session, dag) >= dag.max_active_runs:\n+            return\n+\n+        # Figure out the next run date\n+        last_scheduled_run = self._last_scheduled_run(session, dag)\n+        next_run_date = self._next_dag_run_date(session, last_scheduled_run, dag)\n+\n+        if dag.schedule_interval == '@once':\n+            schedule_end = next_run_date\n+        else:\n             schedule_end = dag.following_schedule(next_run_date)\n-            if dag.schedule_interval == '@once':\n-                schedule_end = next_run_date\n-            if next_run_date and schedule_end and schedule_end <= datetime.now():\n-                next_run = DagRun(\n-                    dag_id=dag.dag_id,\n-                    run_id='scheduled__' + next_run_date.isoformat(),\n-                    execution_date=next_run_date,\n-                    state=State.RUNNING,\n-                    external_trigger=False\n-                )\n-                session.add(next_run)\n-                session.commit()\n+\n+        # Actually do the scheduling\n+        if next_run_date and schedule_end and schedule_end <= datetime.now():\n+            # check that there isn't already a dagrun with the scheduled id\n+            run_id = DagRun.id_for_date(next_run_date)\n+            if session.query(DagRun).filter_by(\n+                    dag_id=dag.dag_id, run_id=run_id).scalar():\n+                logging.debug(\"Skipping creation for date because run id already exists: \"+\n+                        next_run_date.isoformat())\n+                return\n+            next_run = DagRun(\n+                dag_id=dag.dag_id,\n+                run_id=run_id,\n+                execution_date=next_run_date,\n+                state=State.RUNNING,\n+                external_trigger=False\n+            )\n+            session.add(next_run)\n+            session.commit()\n+            return next_run\n+        else:\n+            logging.debug('Refusing to schedule because no next_run_date or schedule_end, or schedule_end is now: %s, %s'",
    "path": "airflow/jobs.py",
    "commit_id": "7278c93cb4dd650399d0232372f482cccd13f405",
    "original_commit_id": "7278c93cb4dd650399d0232372f482cccd13f405",
    "user": {
      "login": "mtustin-handy",
      "id": 12694887,
      "node_id": "MDQ6VXNlcjEyNjk0ODg3",
      "avatar_url": "https://avatars.githubusercontent.com/u/12694887?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mtustin-handy",
      "html_url": "https://github.com/mtustin-handy",
      "followers_url": "https://api.github.com/users/mtustin-handy/followers",
      "following_url": "https://api.github.com/users/mtustin-handy/following{/other_user}",
      "gists_url": "https://api.github.com/users/mtustin-handy/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mtustin-handy/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mtustin-handy/subscriptions",
      "organizations_url": "https://api.github.com/users/mtustin-handy/orgs",
      "repos_url": "https://api.github.com/users/mtustin-handy/repos",
      "events_url": "https://api.github.com/users/mtustin-handy/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mtustin-handy/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Length\n",
    "created_at": "2015-11-19T18:09:57Z",
    "updated_at": "2015-11-19T18:09:57Z",
    "html_url": "https://github.com/apache/airflow/pull/644#discussion_r45377327",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/644",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/45377327"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/644#discussion_r45377327"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/644"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/45377327/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 434,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 155,
    "position": 155,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/45379977",
    "pull_request_review_id": null,
    "id": 45379977,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mzc5OTc3",
    "diff_hunk": "@@ -343,61 +343,96 @@ def import_errors(self, dagbag):\n                 filename=filename, stacktrace=stacktrace))\n         session.commit()\n \n+    def _active_runs(self, session, dag):",
    "path": "airflow/jobs.py",
    "commit_id": "7278c93cb4dd650399d0232372f482cccd13f405",
    "original_commit_id": "7278c93cb4dd650399d0232372f482cccd13f405",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Shouldn't this be a public dag property? You can replicate the @provide_session pattern as well\n",
    "created_at": "2015-11-19T18:30:10Z",
    "updated_at": "2015-11-19T18:30:10Z",
    "html_url": "https://github.com/apache/airflow/pull/644#discussion_r45379977",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/644",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/45379977"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/644#discussion_r45379977"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/644"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/45379977/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 346,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 20,
    "position": 20,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/45379987",
    "pull_request_review_id": null,
    "id": 45379987,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mzc5OTg3",
    "diff_hunk": "@@ -343,61 +343,96 @@ def import_errors(self, dagbag):\n                 filename=filename, stacktrace=stacktrace))\n         session.commit()\n \n+    def _active_runs(self, session, dag):\n+        qry = session.query(func.count()).filter(\n+            DagRun.dag_id == dag.dag_id,\n+            DagRun.external_trigger == False,\n+            DagRun.state == State.RUNNING,\n+        )\n+        return qry.scalar()\n+\n+    def _last_scheduled_run(self, session, dag,",
    "path": "airflow/jobs.py",
    "commit_id": "7278c93cb4dd650399d0232372f482cccd13f405",
    "original_commit_id": "7278c93cb4dd650399d0232372f482cccd13f405",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Shouldn't this be a public dag property? You can replicate the @provide_session pattern as well\n",
    "created_at": "2015-11-19T18:30:14Z",
    "updated_at": "2015-11-19T18:30:14Z",
    "html_url": "https://github.com/apache/airflow/pull/644#discussion_r45379987",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/644",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/45379987"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/644#discussion_r45379987"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/644"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/45379987/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 354,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 28,
    "position": 28,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/45380146",
    "pull_request_review_id": null,
    "id": 45380146,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzgwMTQ2",
    "diff_hunk": "@@ -343,61 +343,96 @@ def import_errors(self, dagbag):\n                 filename=filename, stacktrace=stacktrace))\n         session.commit()\n \n+    def _active_runs(self, session, dag):\n+        qry = session.query(func.count()).filter(\n+            DagRun.dag_id == dag.dag_id,\n+            DagRun.external_trigger == False,\n+            DagRun.state == State.RUNNING,\n+        )\n+        return qry.scalar()\n+\n+    def _last_scheduled_run(self, session, dag,\n+            scheduled_prefix=DagRun.ID_PREFIX+'%'):\n+        \"\"\"\n+        Helper method for schedule_dag.\n+        Given the database session, and dag, return the latest scheduled dag run\n+        \"\"\"\n+        qry = session.query(func.max(DagRun.execution_date)).filter_by(\n+            dag_id = dag.dag_id).filter(\n+                    or_(DagRun.external_trigger == False,\n+                        DagRun.run_id.like(scheduled_prefix)))\n+        return qry.scalar()\n+\n+    def _next_dag_run_date(self, session, last_scheduled_run, dag):",
    "path": "airflow/jobs.py",
    "commit_id": "7278c93cb4dd650399d0232372f482cccd13f405",
    "original_commit_id": "7278c93cb4dd650399d0232372f482cccd13f405",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "should be leveraging _last_scheduled_run and `dag.following_schedule`\n",
    "created_at": "2015-11-19T18:31:27Z",
    "updated_at": "2015-11-19T18:31:27Z",
    "html_url": "https://github.com/apache/airflow/pull/644#discussion_r45380146",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/644",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/45380146"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/644#discussion_r45380146"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/644"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/45380146/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 366,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 40,
    "position": 40,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/45395134",
    "pull_request_review_id": null,
    "id": 45395134,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mzk1MTM0",
    "diff_hunk": "@@ -385,9 +386,13 @@ def schedule_dag(self, dag):\n             elif dag.schedule_interval == '@once' and not last_scheduled_run:\n                 next_run_date = datetime.now()\n \n-            schedule_end = dag.following_schedule(next_run_date)\n+            # this structure is necessary to avoid a TypeError from concatenating\n+            # NoneType\n             if dag.schedule_interval == '@once':\n                 schedule_end = next_run_date\n+            elif next_run_date:",
    "path": "airflow/jobs.py",
    "commit_id": "9cf63eb02a93dbd8c8d0ea9ced6667a108325201",
    "original_commit_id": "6110cea2d39aaa08de9250a57c40271f3e08cbf4",
    "user": {
      "login": "mtustin-handy",
      "id": 12694887,
      "node_id": "MDQ6VXNlcjEyNjk0ODg3",
      "avatar_url": "https://avatars.githubusercontent.com/u/12694887?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mtustin-handy",
      "html_url": "https://github.com/mtustin-handy",
      "followers_url": "https://api.github.com/users/mtustin-handy/followers",
      "following_url": "https://api.github.com/users/mtustin-handy/following{/other_user}",
      "gists_url": "https://api.github.com/users/mtustin-handy/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mtustin-handy/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mtustin-handy/subscriptions",
      "organizations_url": "https://api.github.com/users/mtustin-handy/orgs",
      "repos_url": "https://api.github.com/users/mtustin-handy/repos",
      "events_url": "https://api.github.com/users/mtustin-handy/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mtustin-handy/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "This is the bug fix mentioned in the main PR description.\n",
    "created_at": "2015-11-19T20:22:35Z",
    "updated_at": "2015-11-20T16:12:51Z",
    "html_url": "https://github.com/apache/airflow/pull/668#discussion_r45395134",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/668",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/45395134"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/668#discussion_r45395134"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/668"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/45395134/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 393,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 17,
    "position": 17,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/45417849",
    "pull_request_review_id": null,
    "id": 45417849,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDE3ODQ5",
    "diff_hunk": "@@ -398,6 +403,7 @@ def schedule_dag(self, dag):\n                 )\n                 session.add(next_run)\n                 session.commit()",
    "path": "airflow/jobs.py",
    "commit_id": "9cf63eb02a93dbd8c8d0ea9ced6667a108325201",
    "original_commit_id": "6110cea2d39aaa08de9250a57c40271f3e08cbf4",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "is there the need to expunge_all after the commit? I think otherwise you'll get errors when reading properties of the object.\n",
    "created_at": "2015-11-19T23:39:28Z",
    "updated_at": "2015-11-20T16:12:51Z",
    "html_url": "https://github.com/apache/airflow/pull/668#discussion_r45417849",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/668",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/45417849"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/668#discussion_r45417849"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/668"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/45417849/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 405,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 26,
    "position": 26,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/45417962",
    "pull_request_review_id": null,
    "id": 45417962,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDE3OTYy",
    "diff_hunk": "@@ -2670,7 +2670,10 @@ class DagRun(Base):\n     by the scheduler (for regular runs) or by an external trigger\n     \"\"\"\n     __tablename__ = \"dag_run\"\n-\n+    \n+    ID_PREFIX = 'scheduled__' \n+    ID_FORMAT_PREFIX = ID_PREFIX+'%s'",
    "path": "airflow/models.py",
    "commit_id": "9cf63eb02a93dbd8c8d0ea9ced6667a108325201",
    "original_commit_id": "6110cea2d39aaa08de9250a57c40271f3e08cbf4",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "PEP8 says spaces around operators (`+`)\n",
    "created_at": "2015-11-19T23:40:26Z",
    "updated_at": "2015-11-20T16:12:51Z",
    "html_url": "https://github.com/apache/airflow/pull/668#discussion_r45417962",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/668",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/45417962"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/668#discussion_r45417962"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/668"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/45417962/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 7,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/45418274",
    "pull_request_review_id": null,
    "id": 45418274,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDE4Mjc0",
    "diff_hunk": "@@ -0,0 +1,10 @@\n+import unittest\n+import datetime\n+\n+from airflow import models\n+\n+class DagRunTest(unittest.TestCase):\n+    def test_id_for_date(self):\n+        run_id = models.DagRun.id_for_date(datetime.datetime(2015, 01, 02, 03, 04, 05, 06, None))\n+        assert run_id == 'scheduled__2015-01-02T03:04:05', 'Generated run_id did not match expections: %s' % run_id",
    "path": "tests/models.py",
    "commit_id": "9cf63eb02a93dbd8c8d0ea9ced6667a108325201",
    "original_commit_id": "6110cea2d39aaa08de9250a57c40271f3e08cbf4",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "The modulo operator is \"out of fashion\", please use `.format()` \n\nMy mistake though, I need to update the `contributing.md` with better guidelines\n",
    "created_at": "2015-11-19T23:43:30Z",
    "updated_at": "2015-11-20T16:12:51Z",
    "html_url": "https://github.com/apache/airflow/pull/668#discussion_r45418274",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/668",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/45418274"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/668#discussion_r45418274"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/668"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/45418274/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 9,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/45442384",
    "pull_request_review_id": null,
    "id": 45442384,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDQyMzg0",
    "diff_hunk": "@@ -22,6 +22,7 @@ fi\n which airflow > /dev/null || python setup.py develop\n \n echo \"Initializing the DB\"\n+rm $AIRFLOW_HOME/unittests.db",
    "path": "run_unit_tests.sh",
    "commit_id": "9cf63eb02a93dbd8c8d0ea9ced6667a108325201",
    "original_commit_id": "6110cea2d39aaa08de9250a57c40271f3e08cbf4",
    "user": {
      "login": "sv3ndk",
      "id": 1214071,
      "node_id": "MDQ6VXNlcjEyMTQwNzE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1214071?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sv3ndk",
      "html_url": "https://github.com/sv3ndk",
      "followers_url": "https://api.github.com/users/sv3ndk/followers",
      "following_url": "https://api.github.com/users/sv3ndk/following{/other_user}",
      "gists_url": "https://api.github.com/users/sv3ndk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sv3ndk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sv3ndk/subscriptions",
      "organizations_url": "https://api.github.com/users/sv3ndk/orgs",
      "repos_url": "https://api.github.com/users/sv3ndk/repos",
      "events_url": "https://api.github.com/users/sv3ndk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sv3ndk/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "I think it would be preferable to replace the initdb statement with a \n\n```\nairflow resetdb\n```\n\ninstead of using a `rm`statement. \n\nThis would make the script slightly more concise and, more importantly, it would avoid repeating in one more place the `$AIRFLOW_HOME/unittests.db` location of the test DB. \n\nIt would also make it more generic since the `rm` statement above is specific to sqlite whereas mysql and postresql are also possible unit test DB. For example, the Travis build executes the unit tests on all 3 DB backends.\n",
    "created_at": "2015-11-20T07:40:18Z",
    "updated_at": "2015-11-20T16:12:51Z",
    "html_url": "https://github.com/apache/airflow/pull/668#discussion_r45442384",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/668",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/45442384"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/668#discussion_r45442384"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/668"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/45442384/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 4,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/45448910",
    "pull_request_review_id": null,
    "id": 45448910,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDQ4OTEw",
    "diff_hunk": "@@ -1793,11 +1793,12 @@ def _set_relatives(self, task_or_task_list, upstream=False):\n             if not isinstance(task, BaseOperator):\n                 raise AirflowException('Expecting a task')\n             if upstream:\n-                self.append_only_new(task._downstream_list, self)\n+                task.append_only_new(task._downstream_list, self)\n                 self.append_only_new(self._upstream_list, task)\n             else:\n-                self.append_only_new(task._upstream_list, self)\n                 self.append_only_new(self._downstream_list, task)\n+                task.append_only_new(task._upstream_list, self)\n+",
    "path": "airflow/models.py",
    "commit_id": "18fa0dec9fcfdd943855eea7d760061d69f42474",
    "original_commit_id": "2e675e1e0162b9733d67f27dce986662d419ef91",
    "user": {
      "login": "thoralf-gutierrez",
      "id": 5640848,
      "node_id": "MDQ6VXNlcjU2NDA4NDg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5640848?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thoralf-gutierrez",
      "html_url": "https://github.com/thoralf-gutierrez",
      "followers_url": "https://api.github.com/users/thoralf-gutierrez/followers",
      "following_url": "https://api.github.com/users/thoralf-gutierrez/following{/other_user}",
      "gists_url": "https://api.github.com/users/thoralf-gutierrez/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thoralf-gutierrez/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thoralf-gutierrez/subscriptions",
      "organizations_url": "https://api.github.com/users/thoralf-gutierrez/orgs",
      "repos_url": "https://api.github.com/users/thoralf-gutierrez/repos",
      "events_url": "https://api.github.com/users/thoralf-gutierrez/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thoralf-gutierrez/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Simply changing the order and the task on which we call `append_only_new` here, to make sure the first error in `append_only_new` outputs tasks names from upstream to downstream in the message `Dependency {self}, {item} already registered` when there's an error.\n",
    "created_at": "2015-11-20T09:19:47Z",
    "updated_at": "2015-12-03T22:03:16Z",
    "html_url": "https://github.com/apache/airflow/pull/670#discussion_r45448910",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/670",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/45448910"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/670#discussion_r45448910"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/670"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/45448910/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 1813,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 45,
    "position": 45,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/45449833",
    "pull_request_review_id": null,
    "id": 45449833,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDQ5ODMz",
    "diff_hunk": "@@ -393,31 +391,38 @@ def mkdir_p(path):\n else:\n     AIRFLOW_CONFIG = expand_env_var(os.environ['AIRFLOW_CONFIG'])\n \n-if not os.path.isfile(AIRFLOW_CONFIG):\n+\n+def default_config():\n     \"\"\"\n-    These configuration options are used to generate a default configuration\n-    when it is missing. The right way to change your configuration is to alter\n-    your configuration file, not this code.\n+        Generates a default configuration from the default template + currently\n+         defined variables\n     \"\"\"\n+\n     FERNET_KEY = generate_fernet_key()\n-    logging.info(\"Creating new config file in: \" + AIRFLOW_CONFIG)\n-    f = open(AIRFLOW_CONFIG, 'w')\n-    f.write(DEFAULT_CONFIG.format(**locals()))\n-    f.close()\n+    vars = {k: v for d in [globals(), locals()] for k, v in d.items()}\n+    return DEFAULT_CONFIG.format(**vars)\n \n TEST_CONFIG_FILE = AIRFLOW_HOME + '/unittests.cfg'\n if not os.path.isfile(TEST_CONFIG_FILE):\n     logging.info(\"Creating new config file in: \" + TEST_CONFIG_FILE)\n-    f = open(TEST_CONFIG_FILE, 'w')\n-    f.write(TEST_CONFIG.format(**locals()))\n-    f.close()\n+    with open(TEST_CONFIG_FILE, 'w') as f:\n+        f.write(TEST_CONFIG.format(**locals()))\n \n-logging.info(\"Reading the config from \" + AIRFLOW_CONFIG)\n+if not os.path.isfile(AIRFLOW_CONFIG):\n+    \"\"\"\n+    These configuration options are used to generate a default configuration\n+    when it is missing. The right way to change your configuration is to alter\n+    your configuration file, not this code.\n+    \"\"\"\n+    logging.info(\"Creating new config file in: \" + AIRFLOW_CONFIG)\n+    with open(AIRFLOW_CONFIG, 'w') as f:\n+        f.write(default_config())\n \n+logging.info(\"Reading the config from \" + AIRFLOW_CONFIG)\n \n def test_mode():\n     conf = ConfigParserWithDefaults(defaults)\n-    conf.read(TEST_CONFIG)\n+    conf.read(TEST_CONFIG_FILE)",
    "path": "airflow/configuration.py",
    "commit_id": "18fa0dec9fcfdd943855eea7d760061d69f42474",
    "original_commit_id": "2e675e1e0162b9733d67f27dce986662d419ef91",
    "user": {
      "login": "thoralf-gutierrez",
      "id": 5640848,
      "node_id": "MDQ6VXNlcjU2NDA4NDg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5640848?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thoralf-gutierrez",
      "html_url": "https://github.com/thoralf-gutierrez",
      "followers_url": "https://api.github.com/users/thoralf-gutierrez/followers",
      "following_url": "https://api.github.com/users/thoralf-gutierrez/following{/other_user}",
      "gists_url": "https://api.github.com/users/thoralf-gutierrez/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thoralf-gutierrez/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thoralf-gutierrez/subscriptions",
      "organizations_url": "https://api.github.com/users/thoralf-gutierrez/orgs",
      "repos_url": "https://api.github.com/users/thoralf-gutierrez/repos",
      "events_url": "https://api.github.com/users/thoralf-gutierrez/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thoralf-gutierrez/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "(The github split view will help more then the unified view)\nWe\u2019ve fixed several problems up here :\n- If `AIRFLOW_CONFIG = unittest.cfg`, we\u2019re now first generating the unittest.cfg file from the `TEST_CONFIG` rather than using `DEFAULT_CONFIG`\n- `test_mode()` now reads correctly from the file, it was failing silently before\n",
    "created_at": "2015-11-20T09:30:09Z",
    "updated_at": "2015-12-03T22:03:16Z",
    "html_url": "https://github.com/apache/airflow/pull/670#discussion_r45449833",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/670",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/45449833"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/670#discussion_r45449833"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/670"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/45449833/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 428,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 65,
    "position": 64,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/45449970",
    "pull_request_review_id": null,
    "id": 45449970,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDQ5OTcw",
    "diff_hunk": "@@ -15,18 +15,19 @@ class SequentialExecutor(BaseExecutor):\n     Since we want airflow to work out of the box, it defaults to this\n     SequentialExecutor alongside sqlite as you first install it.\n     \"\"\"\n-    def __init__(self):\n+    def __init__(self, env=None):\n         super(SequentialExecutor, self).__init__()\n         self.commands_to_run = []\n+        self.env = env\n \n     def execute_async(self, key, command, queue=None):\n         self.commands_to_run.append((key, command,))\n \n     def sync(self):\n         for key, command in self.commands_to_run:\n-            logging.info(\"command\" + str(command))\n+            logging.info(\"Executing command: \" + str(command))\n             try:\n-                sp = subprocess.Popen(command, shell=True)\n+                sp = subprocess.Popen(command, shell=True, env=self.env)",
    "path": "airflow/executors/sequential_executor.py",
    "commit_id": "18fa0dec9fcfdd943855eea7d760061d69f42474",
    "original_commit_id": "2e675e1e0162b9733d67f27dce986662d419ef91",
    "user": {
      "login": "thoralf-gutierrez",
      "id": 5640848,
      "node_id": "MDQ6VXNlcjU2NDA4NDg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5640848?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thoralf-gutierrez",
      "html_url": "https://github.com/thoralf-gutierrez",
      "followers_url": "https://api.github.com/users/thoralf-gutierrez/followers",
      "following_url": "https://api.github.com/users/thoralf-gutierrez/following{/other_user}",
      "gists_url": "https://api.github.com/users/thoralf-gutierrez/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thoralf-gutierrez/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thoralf-gutierrez/subscriptions",
      "organizations_url": "https://api.github.com/users/thoralf-gutierrez/orgs",
      "repos_url": "https://api.github.com/users/thoralf-gutierrez/repos",
      "events_url": "https://api.github.com/users/thoralf-gutierrez/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thoralf-gutierrez/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "We're passing on the environment to the command, so that it can use the same test `AIRFLOW_CONFIG` during tests.\n",
    "created_at": "2015-11-20T09:32:07Z",
    "updated_at": "2015-12-03T22:03:16Z",
    "html_url": "https://github.com/apache/airflow/pull/670#discussion_r45449970",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/670",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/45449970"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/670#discussion_r45449970"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/670"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/45449970/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 30,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 19,
    "position": 19,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/45482373",
    "pull_request_review_id": null,
    "id": 45482373,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDgyMzcz",
    "diff_hunk": "@@ -22,6 +22,7 @@ fi\n which airflow > /dev/null || python setup.py develop\n \n echo \"Initializing the DB\"\n+rm $AIRFLOW_HOME/unittests.db",
    "path": "run_unit_tests.sh",
    "commit_id": "9cf63eb02a93dbd8c8d0ea9ced6667a108325201",
    "original_commit_id": "6110cea2d39aaa08de9250a57c40271f3e08cbf4",
    "user": {
      "login": "mtustin-handy",
      "id": 12694887,
      "node_id": "MDQ6VXNlcjEyNjk0ODg3",
      "avatar_url": "https://avatars.githubusercontent.com/u/12694887?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mtustin-handy",
      "html_url": "https://github.com/mtustin-handy",
      "followers_url": "https://api.github.com/users/mtustin-handy/followers",
      "following_url": "https://api.github.com/users/mtustin-handy/following{/other_user}",
      "gists_url": "https://api.github.com/users/mtustin-handy/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mtustin-handy/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mtustin-handy/subscriptions",
      "organizations_url": "https://api.github.com/users/mtustin-handy/orgs",
      "repos_url": "https://api.github.com/users/mtustin-handy/repos",
      "events_url": "https://api.github.com/users/mtustin-handy/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mtustin-handy/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "@svendx4f That's an excellent suggestion\n",
    "created_at": "2015-11-20T15:46:09Z",
    "updated_at": "2015-11-20T16:12:51Z",
    "html_url": "https://github.com/apache/airflow/pull/668#discussion_r45482373",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/668",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/45482373"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/668#discussion_r45482373"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/668"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/45482373/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 4,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/45483128",
    "pull_request_review_id": null,
    "id": 45483128,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDgzMTI4",
    "diff_hunk": "@@ -398,6 +403,7 @@ def schedule_dag(self, dag):\n                 )\n                 session.add(next_run)\n                 session.commit()",
    "path": "airflow/jobs.py",
    "commit_id": "9cf63eb02a93dbd8c8d0ea9ced6667a108325201",
    "original_commit_id": "6110cea2d39aaa08de9250a57c40271f3e08cbf4",
    "user": {
      "login": "mtustin-handy",
      "id": 12694887,
      "node_id": "MDQ6VXNlcjEyNjk0ODg3",
      "avatar_url": "https://avatars.githubusercontent.com/u/12694887?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mtustin-handy",
      "html_url": "https://github.com/mtustin-handy",
      "followers_url": "https://api.github.com/users/mtustin-handy/followers",
      "following_url": "https://api.github.com/users/mtustin-handy/following{/other_user}",
      "gists_url": "https://api.github.com/users/mtustin-handy/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mtustin-handy/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mtustin-handy/subscriptions",
      "organizations_url": "https://api.github.com/users/mtustin-handy/orgs",
      "repos_url": "https://api.github.com/users/mtustin-handy/repos",
      "events_url": "https://api.github.com/users/mtustin-handy/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mtustin-handy/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "@mistercrunch I'm not sure I understand the question. Apart from not having removed any calls to `expunge_all`, my understanding is that `commit` should leave the session in a clean and safe state. \n",
    "created_at": "2015-11-20T15:52:19Z",
    "updated_at": "2015-11-20T16:12:51Z",
    "html_url": "https://github.com/apache/airflow/pull/668#discussion_r45483128",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/668",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/45483128"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/668#discussion_r45483128"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/668"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/45483128/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 405,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 26,
    "position": 26,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/45485394",
    "pull_request_review_id": null,
    "id": 45485394,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDg1Mzk0",
    "diff_hunk": "@@ -398,6 +403,7 @@ def schedule_dag(self, dag):\n                 )\n                 session.add(next_run)\n                 session.commit()",
    "path": "airflow/jobs.py",
    "commit_id": "9cf63eb02a93dbd8c8d0ea9ced6667a108325201",
    "original_commit_id": "6110cea2d39aaa08de9250a57c40271f3e08cbf4",
    "user": {
      "login": "mtustin-handy",
      "id": 12694887,
      "node_id": "MDQ6VXNlcjEyNjk0ODg3",
      "avatar_url": "https://avatars.githubusercontent.com/u/12694887?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mtustin-handy",
      "html_url": "https://github.com/mtustin-handy",
      "followers_url": "https://api.github.com/users/mtustin-handy/followers",
      "following_url": "https://api.github.com/users/mtustin-handy/following{/other_user}",
      "gists_url": "https://api.github.com/users/mtustin-handy/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mtustin-handy/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mtustin-handy/subscriptions",
      "organizations_url": "https://api.github.com/users/mtustin-handy/orgs",
      "repos_url": "https://api.github.com/users/mtustin-handy/repos",
      "events_url": "https://api.github.com/users/mtustin-handy/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mtustin-handy/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "@mistercrunch Also, my tests do not get any errors reading the object. \n",
    "created_at": "2015-11-20T16:10:36Z",
    "updated_at": "2015-11-20T16:12:51Z",
    "html_url": "https://github.com/apache/airflow/pull/668#discussion_r45485394",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/668",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/45485394"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/668#discussion_r45485394"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/668"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/45485394/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 405,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 26,
    "position": 26,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/45507813",
    "pull_request_review_id": null,
    "id": 45507813,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTA3ODEz",
    "diff_hunk": "@@ -50,6 +52,31 @@ def setUp(self):\n         self.dag_bash = self.dagbag.dags['example_bash_operator']\n         self.runme_0 = self.dag_bash.get_task('runme_0')\n \n+    def test_schedule_dag_no_previous_runs(self):\n+        dag = DAG(TEST_DAG_ID+'test_schedule_dag_no_previous_runs') \n+        dag.tasks = [models.BaseOperator(task_id=\"faketastic\", owner='Also fake',\n+            start_date=datetime(2015, 1, 2, 0, 0))]\n+        dag_run = jobs.SchedulerJob(test_mode=True).schedule_dag(dag)\n+        assert dag_run is not None\n+        assert dag_run.dag_id == dag.dag_id\n+        assert dag_run.run_id is not None\n+        assert dag_run.run_id != ''\n+        assert dag_run.execution_date == datetime(2015, 1, 2, 0, 0), (\n+                'dag_run.execution_date did not match expectation: %s' % dag_run.execution_date)        ",
    "path": "tests/core.py",
    "commit_id": "9cf63eb02a93dbd8c8d0ea9ced6667a108325201",
    "original_commit_id": "9cf63eb02a93dbd8c8d0ea9ced6667a108325201",
    "user": {
      "login": "mtustin-handy",
      "id": 12694887,
      "node_id": "MDQ6VXNlcjEyNjk0ODg3",
      "avatar_url": "https://avatars.githubusercontent.com/u/12694887?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mtustin-handy",
      "html_url": "https://github.com/mtustin-handy",
      "followers_url": "https://api.github.com/users/mtustin-handy/followers",
      "following_url": "https://api.github.com/users/mtustin-handy/following{/other_user}",
      "gists_url": "https://api.github.com/users/mtustin-handy/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mtustin-handy/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mtustin-handy/subscriptions",
      "organizations_url": "https://api.github.com/users/mtustin-handy/orgs",
      "repos_url": "https://api.github.com/users/mtustin-handy/repos",
      "events_url": "https://api.github.com/users/mtustin-handy/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mtustin-handy/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "@mistercrunch I'll have these fixed in the next PR in the series, in terms of using `.format`\n",
    "created_at": "2015-11-20T19:29:09Z",
    "updated_at": "2015-11-20T19:29:09Z",
    "html_url": "https://github.com/apache/airflow/pull/668#discussion_r45507813",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/668",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/45507813"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/668#discussion_r45507813"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/668"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/45507813/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 65,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 27,
    "position": 27,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/45511530",
    "pull_request_review_id": null,
    "id": 45511530,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTExNTMw",
    "diff_hunk": "@@ -393,31 +391,38 @@ def mkdir_p(path):\n else:\n     AIRFLOW_CONFIG = expand_env_var(os.environ['AIRFLOW_CONFIG'])\n \n-if not os.path.isfile(AIRFLOW_CONFIG):\n+\n+def default_config():\n     \"\"\"\n-    These configuration options are used to generate a default configuration\n-    when it is missing. The right way to change your configuration is to alter\n-    your configuration file, not this code.\n+        Generates a default configuration from the default template + currently",
    "path": "airflow/configuration.py",
    "commit_id": "18fa0dec9fcfdd943855eea7d760061d69f42474",
    "original_commit_id": "4486fc7fe9079fdc0affcda8f2c0d13beca9642f",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "nit: indent\n",
    "created_at": "2015-11-20T19:59:45Z",
    "updated_at": "2015-12-03T22:03:16Z",
    "html_url": "https://github.com/apache/airflow/pull/670#discussion_r45511530",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/670",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/45511530"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/670#discussion_r45511530"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/670"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/45511530/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 28,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/45521309",
    "pull_request_review_id": null,
    "id": 45521309,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTIxMzA5",
    "diff_hunk": "@@ -641,6 +641,11 @@ def get_parser():\n \n     ht = \"Burn down and rebuild the metadata database\"\n     parser_resetdb = subparsers.add_parser('resetdb', help=ht)\n+    parser_resetdb.add_argument(",
    "path": "airflow/bin/cli.py",
    "commit_id": "5c76e4ee0e66554b663e9f7d12f2e1da7eeefd51",
    "original_commit_id": "5c76e4ee0e66554b663e9f7d12f2e1da7eeefd51",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Should we `help=argparse.SUPPRESS`?\n\nI was almost thinking about removing `resetdb` altogether as we are growing our user base beyond control at Airbnb.\n",
    "created_at": "2015-11-20T21:34:04Z",
    "updated_at": "2015-11-20T21:34:04Z",
    "html_url": "https://github.com/apache/airflow/pull/676#discussion_r45521309",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/676",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/45521309"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/676#discussion_r45521309"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/676"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/45521309/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 644,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 13,
    "position": 13,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/45561344",
    "pull_request_review_id": null,
    "id": 45561344,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTYxMzQ0",
    "diff_hunk": "@@ -0,0 +1,26 @@\n+from airflow.hooks.base_hook import BaseHook\n+from airflow.utils import AirflowException\n+import json\n+import boto3\n+\n+class ECSHook(BaseHook):\n+    \n+    def __init__( self, aws_conn_id=\"aws_credentials\"):\n+        self.conn = self.get_connection(aws_conn_id)    \n+        self._a_key = None\n+        self._s_key = None\n+        self.extra_params = json.loads(self.conn.extra)\n+        if 'aws_secret_access_key' in self.extra_params:",
    "path": "airflow/hooks/ecs_hook.py",
    "commit_id": "735ddc2a0d60546357a7a0b3ee54d17da589dbc2",
    "original_commit_id": "63de19b341e3b1956e2bc4e521a9d02db90d7315",
    "user": {
      "login": "avram",
      "id": 224208,
      "node_id": "MDQ6VXNlcjIyNDIwOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/224208?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/avram",
      "html_url": "https://github.com/avram",
      "followers_url": "https://api.github.com/users/avram/followers",
      "following_url": "https://api.github.com/users/avram/following{/other_user}",
      "gists_url": "https://api.github.com/users/avram/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/avram/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/avram/subscriptions",
      "organizations_url": "https://api.github.com/users/avram/orgs",
      "repos_url": "https://api.github.com/users/avram/repos",
      "events_url": "https://api.github.com/users/avram/events{/privacy}",
      "received_events_url": "https://api.github.com/users/avram/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "This prevents boto3 from transparently picking up IAM roles available via the instance's instance profile.\n",
    "created_at": "2015-11-22T17:11:07Z",
    "updated_at": "2016-05-05T20:02:21Z",
    "html_url": "https://github.com/apache/airflow/pull/652#discussion_r45561344",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/652",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/45561344"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/652#discussion_r45561344"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/652"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/45561344/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 13,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/45682727",
    "pull_request_review_id": null,
    "id": 45682727,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjgyNzI3",
    "diff_hunk": "@@ -99,7 +103,42 @@ def wrapper(*args, **kwargs):\n         session.commit()\n \n         return f(*args, **kwargs)\n-    \n+\n+    return wrapper\n+\n+\n+def notify_owner(f):\n+    '''\n+    Decorator to notify owner of actions taken on their DAGs by others\n+    '''\n+    @functools.wraps(f)\n+    def wrapper(*args, **kwargs):\n+        if request.args.get('confirmed') == \"true\":",
    "path": "airflow/www/utils.py",
    "commit_id": "a479fe59c1dec9e6091978ef1f2c6a1079c53d83",
    "original_commit_id": "93f04a96881e7ac4fef33dbe802d1d8bf0848d29",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Maybe this would make the decorator more generalizable:\n\n```\nif 'confirmed' in request.args and request.args.get('confirmed') != \"true\":\n    [skipp]\n```\n",
    "created_at": "2015-11-24T00:31:47Z",
    "updated_at": "2015-11-24T17:25:50Z",
    "html_url": "https://github.com/apache/airflow/pull/686#discussion_r45682727",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/686",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/45682727"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/686#discussion_r45682727"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/686"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/45682727/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 117,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 52,
    "position": 54,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/45682835",
    "pull_request_review_id": null,
    "id": 45682835,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjgyODM1",
    "diff_hunk": "@@ -99,7 +103,42 @@ def wrapper(*args, **kwargs):\n         session.commit()\n \n         return f(*args, **kwargs)\n-    \n+\n+    return wrapper\n+\n+\n+def notify_owner(f):\n+    '''\n+    Decorator to notify owner of actions taken on their DAGs by others\n+    '''\n+    @functools.wraps(f)\n+    def wrapper(*args, **kwargs):\n+        if request.args.get('confirmed') == \"true\":\n+            dag_id = request.args.get('dag_id')\n+            task_id = request.args.get('task_id')\n+            dag = dagbag.get_dag(dag_id)\n+            task = dag.get_task(task_id)\n+\n+            if current_user and hasattr(current_user, 'username'):\n+                user = current_user.username\n+            else:\n+                user = 'anonymous'\n+\n+            if task.owner != user:\n+                subject = (\n+                    'Actions taken on DAG {0} by {1}'.format(\n+                        dag_id, user))\n+                html = 'action: <i>{0}</i><br><br>'.format(f.__name__)\n+                html += '<b>Parameters</b>:<br><table>'\n+                for k, v in request.args.items():\n+                    if k != 'origin':\n+                        html += '<tr><td>{0}</td><td>{1}</td></tr>'.format(k, v)",
    "path": "airflow/www/utils.py",
    "commit_id": "a479fe59c1dec9e6091978ef1f2c6a1079c53d83",
    "original_commit_id": "93f04a96881e7ac4fef33dbe802d1d8bf0848d29",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "I'm not big in seeing html in python code. Alternatives are `dataframe.to_html(dict())` or using jinja templating.\n\nThat's pretty thin here, so no biggy.\n",
    "created_at": "2015-11-24T00:33:17Z",
    "updated_at": "2015-11-24T17:25:50Z",
    "html_url": "https://github.com/apache/airflow/pull/686#discussion_r45682835",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/686",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/45682835"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/686#discussion_r45682835"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/686"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/45682835/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 71,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/45765281",
    "pull_request_review_id": null,
    "id": 45765281,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzY1Mjgx",
    "diff_hunk": "@@ -99,7 +103,42 @@ def wrapper(*args, **kwargs):\n         session.commit()\n \n         return f(*args, **kwargs)\n-    \n+\n+    return wrapper\n+\n+\n+def notify_owner(f):\n+    '''\n+    Decorator to notify owner of actions taken on their DAGs by others\n+    '''\n+    @functools.wraps(f)\n+    def wrapper(*args, **kwargs):\n+        if request.args.get('confirmed') == \"true\":",
    "path": "airflow/www/utils.py",
    "commit_id": "a479fe59c1dec9e6091978ef1f2c6a1079c53d83",
    "original_commit_id": "93f04a96881e7ac4fef33dbe802d1d8bf0848d29",
    "user": {
      "login": "patrickleotardif",
      "id": 787256,
      "node_id": "MDQ6VXNlcjc4NzI1Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/787256?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/patrickleotardif",
      "html_url": "https://github.com/patrickleotardif",
      "followers_url": "https://api.github.com/users/patrickleotardif/followers",
      "following_url": "https://api.github.com/users/patrickleotardif/following{/other_user}",
      "gists_url": "https://api.github.com/users/patrickleotardif/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/patrickleotardif/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/patrickleotardif/subscriptions",
      "organizations_url": "https://api.github.com/users/patrickleotardif/orgs",
      "repos_url": "https://api.github.com/users/patrickleotardif/repos",
      "events_url": "https://api.github.com/users/patrickleotardif/events{/privacy}",
      "received_events_url": "https://api.github.com/users/patrickleotardif/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Doesn't work in practice since for unconfirmed it just has nothing. (and not confirmed=false)\n",
    "created_at": "2015-11-24T17:14:53Z",
    "updated_at": "2015-11-24T17:25:50Z",
    "html_url": "https://github.com/apache/airflow/pull/686#discussion_r45765281",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/686",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/45765281"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/686#discussion_r45765281"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/686"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/45765281/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 117,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 52,
    "position": 54,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/45765297",
    "pull_request_review_id": null,
    "id": 45765297,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzY1Mjk3",
    "diff_hunk": "@@ -99,7 +103,42 @@ def wrapper(*args, **kwargs):\n         session.commit()\n \n         return f(*args, **kwargs)\n-    \n+\n+    return wrapper\n+\n+\n+def notify_owner(f):\n+    '''\n+    Decorator to notify owner of actions taken on their DAGs by others\n+    '''\n+    @functools.wraps(f)\n+    def wrapper(*args, **kwargs):\n+        if request.args.get('confirmed') == \"true\":\n+            dag_id = request.args.get('dag_id')\n+            task_id = request.args.get('task_id')\n+            dag = dagbag.get_dag(dag_id)\n+            task = dag.get_task(task_id)\n+\n+            if current_user and hasattr(current_user, 'username'):\n+                user = current_user.username\n+            else:\n+                user = 'anonymous'\n+\n+            if task.owner != user:\n+                subject = (\n+                    'Actions taken on DAG {0} by {1}'.format(\n+                        dag_id, user))\n+                html = 'action: <i>{0}</i><br><br>'.format(f.__name__)\n+                html += '<b>Parameters</b>:<br><table>'\n+                for k, v in request.args.items():\n+                    if k != 'origin':\n+                        html += '<tr><td>{0}</td><td>{1}</td></tr>'.format(k, v)",
    "path": "airflow/www/utils.py",
    "commit_id": "a479fe59c1dec9e6091978ef1f2c6a1079c53d83",
    "original_commit_id": "93f04a96881e7ac4fef33dbe802d1d8bf0848d29",
    "user": {
      "login": "patrickleotardif",
      "id": 787256,
      "node_id": "MDQ6VXNlcjc4NzI1Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/787256?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/patrickleotardif",
      "html_url": "https://github.com/patrickleotardif",
      "followers_url": "https://api.github.com/users/patrickleotardif/followers",
      "following_url": "https://api.github.com/users/patrickleotardif/following{/other_user}",
      "gists_url": "https://api.github.com/users/patrickleotardif/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/patrickleotardif/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/patrickleotardif/subscriptions",
      "organizations_url": "https://api.github.com/users/patrickleotardif/orgs",
      "repos_url": "https://api.github.com/users/patrickleotardif/repos",
      "events_url": "https://api.github.com/users/patrickleotardif/events{/privacy}",
      "received_events_url": "https://api.github.com/users/patrickleotardif/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "fixing this now\n",
    "created_at": "2015-11-24T17:15:00Z",
    "updated_at": "2015-11-24T17:25:50Z",
    "html_url": "https://github.com/apache/airflow/pull/686#discussion_r45765297",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/686",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/45765297"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/686#discussion_r45765297"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/686"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/45765297/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 71,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/46102945",
    "pull_request_review_id": null,
    "id": 46102945,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTAyOTQ1",
    "diff_hunk": "@@ -0,0 +1,122 @@\n+# -*- coding: utf-8 -*-\n+#\n+# Copyright 2012-2015 Spotify AB\n+# Ported to Airflow by Bolke de Bruin\n+#\n+# Licensed under the Apache License, Version 2.0 (the \"License\");\n+# you may not use this file except in compliance with the License.\n+# You may obtain a copy of the License at\n+#\n+# http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing, software\n+# distributed under the License is distributed on an \"AS IS\" BASIS,\n+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+# See the License for the specific language governing permissions and\n+# limitations under the License.\n+#\n+\"\"\"\n+Light-weight remote execution library and utilities.",
    "path": "airflow/contrib/hooks/ssh_hook.py",
    "commit_id": "8c1cab52e053efb11b404e78149e9f5287e7b62c",
    "original_commit_id": "a310202528b8198f6e8dbd1f909a38ac6a88e5d8",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Let's move the docstring to the class definition and add the reference in the hook section of `docs/code.rst`, ideally you put it as the docstring of the **init** method and document the params there.\n",
    "created_at": "2015-11-30T01:30:20Z",
    "updated_at": "2015-12-04T17:52:50Z",
    "html_url": "https://github.com/apache/airflow/pull/697#discussion_r46102945",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/697",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/46102945"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/697#discussion_r46102945"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/697"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/46102945/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 19,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/46228559",
    "pull_request_review_id": null,
    "id": 46228559,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjI4NTU5",
    "diff_hunk": "@@ -0,0 +1,77 @@\n+import httplib2\n+import logging\n+import pandas\n+\n+from airflow.hooks.dbapi_hook import DbApiHook\n+from apiclient.discovery import build\n+from oauth2client.client import SignedJwtAssertionCredentials\n+\n+logging.getLogger(\"bigquery\").setLevel(logging.INFO)\n+\n+BQ_SCOPE = 'https://www.googleapis.com/auth/bigquery'\n+\n+class BigQueryHook(DbApiHook):\n+    \"\"\"\n+    Interact with BigQuery. Connections must be defined with an extras JSON field containing:\n+\n+    {\n+        \"project\": \"<google project ID>\",\n+        \"service_account\": \"<google service account email>\",\n+        \"key_path\": \"<p12 key path>\"\n+    }\n+    \"\"\"\n+\n+    conn_name_attr = 'bigquery_conn_id'\n+    default_conn_name = 'bigquery_default'\n+\n+    def get_conn(self):\n+        \"\"\"\n+        Returns a BigQuery service object.\n+        \"\"\"\n+        connection_info = self.get_connection(self.bigquery_conn_id)\n+        connection_extras = connection_info.extra_dejson\n+        service_account = connection_extras['service_account']\n+        key_path = connection_extras['key_path']\n+\n+        with file(key_path, 'rb') as key_file:\n+            key = key_file.read()\n+\n+        credentials = SignedJwtAssertionCredentials(\n+            service_account,\n+            key,\n+            scope=BQ_SCOPE)\n+            # TODO Support domain delegation, which will allow us to set a sub-account to execute as. We can then\n+            # pass DAG owner emails into the connection_info, and use it here.\n+            # sub='some@email.com')\n+\n+        http = httplib2.Http()\n+        http_authorized = credentials.authorize(http)\n+        service = build('bigquery', 'v2', http=http_authorized)\n+\n+        return service\n+\n+    def get_pandas_df(self, bql, parameters=None):\n+        \"\"\"\n+        Returns a Pandas DataFrame for the results produced by a BigQuery query.\n+        \"\"\"\n+        service = self.get_conn()\n+        connection_info = self.get_connection(self.bigquery_conn_id)\n+        connection_extras = connection_info.extra_dejson\n+        project = connection_extras['project']\n+        response = service.jobs().query(projectId=project, body={\n+            \"query\": bql,\n+        }).execute()\n+\n+        if len(response['rows']) > 0:\n+            # Extract column names from response.\n+            columns = [c['name'] for c in response['schema']['fields']]\n+\n+            # Extract data into a two-dimensional list of values.\n+            data = []\n+            for row in response['rows']:\n+                row = map(lambda kv: kv['v'], row['f'])\n+                data.append(row)",
    "path": "airflow/hooks/bigquery_hook.py",
    "commit_id": "1916b95e41412507b52a752857bd542aced12fb5",
    "original_commit_id": "539923874ab01352bec6dfa3ac823a38f8435ce4",
    "user": {
      "login": "max-sixty",
      "id": 5635139,
      "node_id": "MDQ6VXNlcjU2MzUxMzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5635139?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/max-sixty",
      "html_url": "https://github.com/max-sixty",
      "followers_url": "https://api.github.com/users/max-sixty/followers",
      "following_url": "https://api.github.com/users/max-sixty/following{/other_user}",
      "gists_url": "https://api.github.com/users/max-sixty/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/max-sixty/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/max-sixty/subscriptions",
      "organizations_url": "https://api.github.com/users/max-sixty/orgs",
      "repos_url": "https://api.github.com/users/max-sixty/repos",
      "events_url": "https://api.github.com/users/max-sixty/events{/privacy}",
      "received_events_url": "https://api.github.com/users/max-sixty/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "I don't know much about GBQ - but in general this approach of iterating through things in python is going to be a few orders of magnitude slower than delegating to pandas. Did you try using this: http://pandas.pydata.org/pandas-docs/stable/generated/pandas.io.gbq.read_gbq.html? \n",
    "created_at": "2015-12-01T01:08:20Z",
    "updated_at": "2015-12-15T05:14:35Z",
    "html_url": "https://github.com/apache/airflow/pull/702#discussion_r46228559",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/702",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/46228559"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/702#discussion_r46228559"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/702"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/46228559/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "NONE",
    "original_position": 73,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/46233889",
    "pull_request_review_id": null,
    "id": 46233889,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjMzODg5",
    "diff_hunk": "@@ -0,0 +1,77 @@\n+import httplib2\n+import logging\n+import pandas\n+\n+from airflow.hooks.dbapi_hook import DbApiHook\n+from apiclient.discovery import build\n+from oauth2client.client import SignedJwtAssertionCredentials\n+\n+logging.getLogger(\"bigquery\").setLevel(logging.INFO)\n+\n+BQ_SCOPE = 'https://www.googleapis.com/auth/bigquery'\n+\n+class BigQueryHook(DbApiHook):\n+    \"\"\"\n+    Interact with BigQuery. Connections must be defined with an extras JSON field containing:\n+\n+    {\n+        \"project\": \"<google project ID>\",\n+        \"service_account\": \"<google service account email>\",\n+        \"key_path\": \"<p12 key path>\"\n+    }\n+    \"\"\"\n+\n+    conn_name_attr = 'bigquery_conn_id'\n+    default_conn_name = 'bigquery_default'\n+\n+    def get_conn(self):\n+        \"\"\"\n+        Returns a BigQuery service object.\n+        \"\"\"\n+        connection_info = self.get_connection(self.bigquery_conn_id)\n+        connection_extras = connection_info.extra_dejson\n+        service_account = connection_extras['service_account']\n+        key_path = connection_extras['key_path']\n+\n+        with file(key_path, 'rb') as key_file:\n+            key = key_file.read()\n+\n+        credentials = SignedJwtAssertionCredentials(\n+            service_account,\n+            key,\n+            scope=BQ_SCOPE)\n+            # TODO Support domain delegation, which will allow us to set a sub-account to execute as. We can then\n+            # pass DAG owner emails into the connection_info, and use it here.\n+            # sub='some@email.com')\n+\n+        http = httplib2.Http()\n+        http_authorized = credentials.authorize(http)\n+        service = build('bigquery', 'v2', http=http_authorized)\n+\n+        return service\n+\n+    def get_pandas_df(self, bql, parameters=None):\n+        \"\"\"\n+        Returns a Pandas DataFrame for the results produced by a BigQuery query.\n+        \"\"\"\n+        service = self.get_conn()\n+        connection_info = self.get_connection(self.bigquery_conn_id)\n+        connection_extras = connection_info.extra_dejson\n+        project = connection_extras['project']\n+        response = service.jobs().query(projectId=project, body={\n+            \"query\": bql,\n+        }).execute()\n+\n+        if len(response['rows']) > 0:\n+            # Extract column names from response.\n+            columns = [c['name'] for c in response['schema']['fields']]\n+\n+            # Extract data into a two-dimensional list of values.\n+            data = []\n+            for row in response['rows']:\n+                row = map(lambda kv: kv['v'], row['f'])\n+                data.append(row)",
    "path": "airflow/hooks/bigquery_hook.py",
    "commit_id": "1916b95e41412507b52a752857bd542aced12fb5",
    "original_commit_id": "539923874ab01352bec6dfa3ac823a38f8435ce4",
    "user": {
      "login": "criccomini",
      "id": 167569,
      "node_id": "MDQ6VXNlcjE2NzU2OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/167569?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/criccomini",
      "html_url": "https://github.com/criccomini",
      "followers_url": "https://api.github.com/users/criccomini/followers",
      "following_url": "https://api.github.com/users/criccomini/following{/other_user}",
      "gists_url": "https://api.github.com/users/criccomini/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/criccomini/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/criccomini/subscriptions",
      "organizations_url": "https://api.github.com/users/criccomini/orgs",
      "repos_url": "https://api.github.com/users/criccomini/repos",
      "events_url": "https://api.github.com/users/criccomini/events{/privacy}",
      "received_events_url": "https://api.github.com/users/criccomini/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Yea, I had it on my TODO. This kind of scared me away though:\n\n```\nTHIS IS AN EXPERIMENTAL LIBRARY\n```\n",
    "created_at": "2015-12-01T02:29:41Z",
    "updated_at": "2015-12-15T05:14:35Z",
    "html_url": "https://github.com/apache/airflow/pull/702#discussion_r46233889",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/702",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/46233889"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/702#discussion_r46233889"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/702"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/46233889/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 73,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/46234402",
    "pull_request_review_id": null,
    "id": 46234402,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjM0NDAy",
    "diff_hunk": "@@ -0,0 +1,77 @@\n+import httplib2\n+import logging\n+import pandas\n+\n+from airflow.hooks.dbapi_hook import DbApiHook\n+from apiclient.discovery import build\n+from oauth2client.client import SignedJwtAssertionCredentials\n+\n+logging.getLogger(\"bigquery\").setLevel(logging.INFO)\n+\n+BQ_SCOPE = 'https://www.googleapis.com/auth/bigquery'\n+\n+class BigQueryHook(DbApiHook):\n+    \"\"\"\n+    Interact with BigQuery. Connections must be defined with an extras JSON field containing:\n+\n+    {\n+        \"project\": \"<google project ID>\",\n+        \"service_account\": \"<google service account email>\",\n+        \"key_path\": \"<p12 key path>\"\n+    }\n+    \"\"\"\n+\n+    conn_name_attr = 'bigquery_conn_id'\n+    default_conn_name = 'bigquery_default'\n+\n+    def get_conn(self):\n+        \"\"\"\n+        Returns a BigQuery service object.\n+        \"\"\"\n+        connection_info = self.get_connection(self.bigquery_conn_id)\n+        connection_extras = connection_info.extra_dejson\n+        service_account = connection_extras['service_account']\n+        key_path = connection_extras['key_path']\n+\n+        with file(key_path, 'rb') as key_file:\n+            key = key_file.read()\n+\n+        credentials = SignedJwtAssertionCredentials(\n+            service_account,\n+            key,\n+            scope=BQ_SCOPE)\n+            # TODO Support domain delegation, which will allow us to set a sub-account to execute as. We can then\n+            # pass DAG owner emails into the connection_info, and use it here.\n+            # sub='some@email.com')\n+\n+        http = httplib2.Http()\n+        http_authorized = credentials.authorize(http)\n+        service = build('bigquery', 'v2', http=http_authorized)\n+\n+        return service\n+\n+    def get_pandas_df(self, bql, parameters=None):\n+        \"\"\"\n+        Returns a Pandas DataFrame for the results produced by a BigQuery query.\n+        \"\"\"\n+        service = self.get_conn()\n+        connection_info = self.get_connection(self.bigquery_conn_id)\n+        connection_extras = connection_info.extra_dejson\n+        project = connection_extras['project']\n+        response = service.jobs().query(projectId=project, body={\n+            \"query\": bql,\n+        }).execute()\n+\n+        if len(response['rows']) > 0:\n+            # Extract column names from response.\n+            columns = [c['name'] for c in response['schema']['fields']]\n+\n+            # Extract data into a two-dimensional list of values.\n+            data = []\n+            for row in response['rows']:\n+                row = map(lambda kv: kv['v'], row['f'])\n+                data.append(row)",
    "path": "airflow/hooks/bigquery_hook.py",
    "commit_id": "1916b95e41412507b52a752857bd542aced12fb5",
    "original_commit_id": "539923874ab01352bec6dfa3ac823a38f8435ce4",
    "user": {
      "login": "criccomini",
      "id": 167569,
      "node_id": "MDQ6VXNlcjE2NzU2OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/167569?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/criccomini",
      "html_url": "https://github.com/criccomini",
      "followers_url": "https://api.github.com/users/criccomini/followers",
      "following_url": "https://api.github.com/users/criccomini/following{/other_user}",
      "gists_url": "https://api.github.com/users/criccomini/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/criccomini/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/criccomini/subscriptions",
      "organizations_url": "https://api.github.com/users/criccomini/orgs",
      "repos_url": "https://api.github.com/users/criccomini/repos",
      "events_url": "https://api.github.com/users/criccomini/events{/privacy}",
      "received_events_url": "https://api.github.com/users/criccomini/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Poked at this a bit. The Pandas GBQ implementation appears to use 3 legged oauth, and thus requires a user at the terminal to actually be present. Running gbq.read_gbq actually opens a browser window for the human to complete OAuth. This doesn't work with two legged OAuth, which requires a service account to run. My entire implementation is predicated off of two legged OAuth. Some discussion on Google cloud is documented [here](https://developers.google.com/identity/protocols/OAuth2ServiceAccount).\n",
    "created_at": "2015-12-01T02:39:32Z",
    "updated_at": "2015-12-15T05:14:35Z",
    "html_url": "https://github.com/apache/airflow/pull/702#discussion_r46234402",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/702",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/46234402"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/702#discussion_r46234402"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/702"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/46234402/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 73,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/46234699",
    "pull_request_review_id": null,
    "id": 46234699,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjM0Njk5",
    "diff_hunk": "@@ -0,0 +1,77 @@\n+import httplib2\n+import logging\n+import pandas\n+\n+from airflow.hooks.dbapi_hook import DbApiHook\n+from apiclient.discovery import build\n+from oauth2client.client import SignedJwtAssertionCredentials\n+\n+logging.getLogger(\"bigquery\").setLevel(logging.INFO)\n+\n+BQ_SCOPE = 'https://www.googleapis.com/auth/bigquery'\n+\n+class BigQueryHook(DbApiHook):\n+    \"\"\"\n+    Interact with BigQuery. Connections must be defined with an extras JSON field containing:\n+\n+    {\n+        \"project\": \"<google project ID>\",\n+        \"service_account\": \"<google service account email>\",\n+        \"key_path\": \"<p12 key path>\"\n+    }\n+    \"\"\"\n+\n+    conn_name_attr = 'bigquery_conn_id'\n+    default_conn_name = 'bigquery_default'\n+\n+    def get_conn(self):\n+        \"\"\"\n+        Returns a BigQuery service object.\n+        \"\"\"\n+        connection_info = self.get_connection(self.bigquery_conn_id)\n+        connection_extras = connection_info.extra_dejson\n+        service_account = connection_extras['service_account']\n+        key_path = connection_extras['key_path']\n+\n+        with file(key_path, 'rb') as key_file:\n+            key = key_file.read()\n+\n+        credentials = SignedJwtAssertionCredentials(\n+            service_account,\n+            key,\n+            scope=BQ_SCOPE)\n+            # TODO Support domain delegation, which will allow us to set a sub-account to execute as. We can then\n+            # pass DAG owner emails into the connection_info, and use it here.\n+            # sub='some@email.com')\n+\n+        http = httplib2.Http()\n+        http_authorized = credentials.authorize(http)\n+        service = build('bigquery', 'v2', http=http_authorized)\n+\n+        return service\n+\n+    def get_pandas_df(self, bql, parameters=None):\n+        \"\"\"\n+        Returns a Pandas DataFrame for the results produced by a BigQuery query.\n+        \"\"\"\n+        service = self.get_conn()\n+        connection_info = self.get_connection(self.bigquery_conn_id)\n+        connection_extras = connection_info.extra_dejson\n+        project = connection_extras['project']\n+        response = service.jobs().query(projectId=project, body={\n+            \"query\": bql,\n+        }).execute()\n+\n+        if len(response['rows']) > 0:\n+            # Extract column names from response.\n+            columns = [c['name'] for c in response['schema']['fields']]\n+\n+            # Extract data into a two-dimensional list of values.\n+            data = []\n+            for row in response['rows']:\n+                row = map(lambda kv: kv['v'], row['f'])\n+                data.append(row)",
    "path": "airflow/hooks/bigquery_hook.py",
    "commit_id": "1916b95e41412507b52a752857bd542aced12fb5",
    "original_commit_id": "539923874ab01352bec6dfa3ac823a38f8435ce4",
    "user": {
      "login": "criccomini",
      "id": 167569,
      "node_id": "MDQ6VXNlcjE2NzU2OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/167569?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/criccomini",
      "html_url": "https://github.com/criccomini",
      "followers_url": "https://api.github.com/users/criccomini/followers",
      "following_url": "https://api.github.com/users/criccomini/following{/other_user}",
      "gists_url": "https://api.github.com/users/criccomini/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/criccomini/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/criccomini/subscriptions",
      "organizations_url": "https://api.github.com/users/criccomini/orgs",
      "repos_url": "https://api.github.com/users/criccomini/repos",
      "events_url": "https://api.github.com/users/criccomini/events{/privacy}",
      "received_events_url": "https://api.github.com/users/criccomini/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "https://github.com/pydata/pandas/blob/master/pandas/io/gbq.py#L199 Seems to be the most interesting part of Pandas' GBQ integration.\n",
    "created_at": "2015-12-01T02:46:30Z",
    "updated_at": "2015-12-15T05:14:35Z",
    "html_url": "https://github.com/apache/airflow/pull/702#discussion_r46234699",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/702",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/46234699"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/702#discussion_r46234699"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/702"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/46234699/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 73,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/46236438",
    "pull_request_review_id": null,
    "id": 46236438,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjM2NDM4",
    "diff_hunk": "@@ -0,0 +1,77 @@\n+import httplib2\n+import logging\n+import pandas\n+\n+from airflow.hooks.dbapi_hook import DbApiHook\n+from apiclient.discovery import build\n+from oauth2client.client import SignedJwtAssertionCredentials\n+\n+logging.getLogger(\"bigquery\").setLevel(logging.INFO)\n+\n+BQ_SCOPE = 'https://www.googleapis.com/auth/bigquery'\n+\n+class BigQueryHook(DbApiHook):\n+    \"\"\"\n+    Interact with BigQuery. Connections must be defined with an extras JSON field containing:\n+\n+    {\n+        \"project\": \"<google project ID>\",\n+        \"service_account\": \"<google service account email>\",\n+        \"key_path\": \"<p12 key path>\"\n+    }\n+    \"\"\"\n+\n+    conn_name_attr = 'bigquery_conn_id'\n+    default_conn_name = 'bigquery_default'\n+\n+    def get_conn(self):\n+        \"\"\"\n+        Returns a BigQuery service object.\n+        \"\"\"\n+        connection_info = self.get_connection(self.bigquery_conn_id)\n+        connection_extras = connection_info.extra_dejson\n+        service_account = connection_extras['service_account']\n+        key_path = connection_extras['key_path']\n+\n+        with file(key_path, 'rb') as key_file:\n+            key = key_file.read()\n+\n+        credentials = SignedJwtAssertionCredentials(\n+            service_account,\n+            key,\n+            scope=BQ_SCOPE)\n+            # TODO Support domain delegation, which will allow us to set a sub-account to execute as. We can then\n+            # pass DAG owner emails into the connection_info, and use it here.\n+            # sub='some@email.com')\n+\n+        http = httplib2.Http()\n+        http_authorized = credentials.authorize(http)\n+        service = build('bigquery', 'v2', http=http_authorized)\n+\n+        return service\n+\n+    def get_pandas_df(self, bql, parameters=None):\n+        \"\"\"\n+        Returns a Pandas DataFrame for the results produced by a BigQuery query.\n+        \"\"\"\n+        service = self.get_conn()\n+        connection_info = self.get_connection(self.bigquery_conn_id)\n+        connection_extras = connection_info.extra_dejson\n+        project = connection_extras['project']\n+        response = service.jobs().query(projectId=project, body={\n+            \"query\": bql,\n+        }).execute()\n+\n+        if len(response['rows']) > 0:\n+            # Extract column names from response.\n+            columns = [c['name'] for c in response['schema']['fields']]\n+\n+            # Extract data into a two-dimensional list of values.\n+            data = []\n+            for row in response['rows']:\n+                row = map(lambda kv: kv['v'], row['f'])\n+                data.append(row)",
    "path": "airflow/hooks/bigquery_hook.py",
    "commit_id": "1916b95e41412507b52a752857bd542aced12fb5",
    "original_commit_id": "539923874ab01352bec6dfa3ac823a38f8435ce4",
    "user": {
      "login": "criccomini",
      "id": 167569,
      "node_id": "MDQ6VXNlcjE2NzU2OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/167569?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/criccomini",
      "html_url": "https://github.com/criccomini",
      "followers_url": "https://api.github.com/users/criccomini/followers",
      "following_url": "https://api.github.com/users/criccomini/following{/other_user}",
      "gists_url": "https://api.github.com/users/criccomini/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/criccomini/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/criccomini/subscriptions",
      "organizations_url": "https://api.github.com/users/criccomini/orgs",
      "repos_url": "https://api.github.com/users/criccomini/repos",
      "events_url": "https://api.github.com/users/criccomini/events{/privacy}",
      "received_events_url": "https://api.github.com/users/criccomini/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Figured out a hack. PR update incoming.\n",
    "created_at": "2015-12-01T03:20:30Z",
    "updated_at": "2015-12-15T05:14:35Z",
    "html_url": "https://github.com/apache/airflow/pull/702#discussion_r46236438",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/702",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/46236438"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/702#discussion_r46236438"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/702"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/46236438/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 73,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/46363989",
    "pull_request_review_id": null,
    "id": 46363989,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzYzOTg5",
    "diff_hunk": "@@ -13,6 +13,7 @@\n     'webhdfs_hook': ['WebHDFSHook'],\n     'mysql_hook': ['MySqlHook'],\n     'postgres_hook': ['PostgresHook'],\n+    'bigquery_hook': ['BigQueryHook'],",
    "path": "airflow/hooks/__init__.py",
    "commit_id": "1916b95e41412507b52a752857bd542aced12fb5",
    "original_commit_id": "8bae4e1ccabe6426a68f53ff322e1e667c36f730",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "this will need to move to airflow.contrib.hooks.**init**.py\n",
    "created_at": "2015-12-02T00:53:46Z",
    "updated_at": "2015-12-15T05:14:35Z",
    "html_url": "https://github.com/apache/airflow/pull/702#discussion_r46363989",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/702",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/46363989"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/702#discussion_r46363989"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/702"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/46363989/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 4,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/46384688",
    "pull_request_review_id": null,
    "id": 46384688,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mzg0Njg4",
    "diff_hunk": "@@ -212,33 +212,34 @@ def kill_zombies(self, session):\n         Fails tasks that haven't had a heartbeat in too long\n         \"\"\"\n         from airflow.jobs import LocalTaskJob as LJ\n+        TI = TaskInstance\n         logging.info(\"Finding 'running' jobs without a recent heartbeat\")\n         secs = (\n             configuration.getint('scheduler', 'job_heartbeat_sec') * 3) + 120\n         limit_dttm = datetime.now() - timedelta(seconds=secs)\n         logging.info(\n             \"Failing jobs without heartbeat after {}\".format(limit_dttm))\n-        jobs = (\n-            session\n-            .query(LJ)\n+\n+        tis = (",
    "path": "airflow/models.py",
    "commit_id": "2a00f85c9467d5183878028e75485b843cb7aeba",
    "original_commit_id": "b08e4be1bcbbe557a69f265ac0a9a050513e01fc",
    "user": {
      "login": "artwr",
      "id": 1518713,
      "node_id": "MDQ6VXNlcjE1MTg3MTM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1518713?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/artwr",
      "html_url": "https://github.com/artwr",
      "followers_url": "https://api.github.com/users/artwr/followers",
      "following_url": "https://api.github.com/users/artwr/following{/other_user}",
      "gists_url": "https://api.github.com/users/artwr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/artwr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/artwr/subscriptions",
      "organizations_url": "https://api.github.com/users/artwr/orgs",
      "repos_url": "https://api.github.com/users/artwr/repos",
      "events_url": "https://api.github.com/users/artwr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/artwr/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Shouldn't the base table still be the job? Or I guess in a way I feel that we need to kill the full outer join of this : \nCase 1) Zombie task instance TI.state == State.Running and LJ.State != State.Running and \n         2) LJ.State == State.Running and TI.state != State.Running.\n\nStill need to think about some of this.\n",
    "created_at": "2015-12-02T07:46:09Z",
    "updated_at": "2015-12-11T01:43:39Z",
    "html_url": "https://github.com/apache/airflow/pull/712#discussion_r46384688",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/712",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/46384688"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/712#discussion_r46384688"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/712"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/46384688/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 230,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 15,
    "position": 14,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/46440263",
    "pull_request_review_id": null,
    "id": 46440263,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDQwMjYz",
    "diff_hunk": "@@ -311,7 +311,8 @@ def collect_dags(\n                                 [re.findall(p, filepath) for p in patterns]):\n                             self.process_file(\n                                 filepath, only_if_updated=only_if_updated)\n-                    except:\n+                    except Exception as e:\n+                        logging.warning(e)\n                         pass",
    "path": "airflow/models.py",
    "commit_id": "638f325a700e8e261608b476a134dc8c0243408d",
    "original_commit_id": "def28c1fb2ab55e7c2761a39047a499e24b5e4c3",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Let's remove this `pass`\n",
    "created_at": "2015-12-02T16:49:57Z",
    "updated_at": "2015-12-02T20:44:04Z",
    "html_url": "https://github.com/apache/airflow/pull/716#discussion_r46440263",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/716",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/46440263"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/716#discussion_r46440263"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/716"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/46440263/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 7,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/46582330",
    "pull_request_review_id": null,
    "id": 46582330,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTgyMzMw",
    "diff_hunk": "@@ -78,7 +80,7 @@ def execute(self, context):\n                     raise AirflowException(\"Bash command failed\")\n \n         if self.xcom_push:\n-            return str(line.strip())\n+            return str(line.strip(), sys.getdefaultencoding())",
    "path": "airflow/operators/bash_operator.py",
    "commit_id": "ece4c787d29673347b8e7cbb238d3ec83bd7f4a7",
    "original_commit_id": "d3dcbe7c7096af93f3746bfa7c4be12349cb58a8",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Would `\"{}\".format(line.strip())` work here? I'd like to use format consistently across the board since it seems to be the most elegant yet reliable way to cast to a string across 2.7 / 3.4+\n",
    "created_at": "2015-12-03T17:25:03Z",
    "updated_at": "2015-12-08T15:26:54Z",
    "html_url": "https://github.com/apache/airflow/pull/723#discussion_r46582330",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/723",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/46582330"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/723#discussion_r46582330"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/723"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/46582330/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 14,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/46585434",
    "pull_request_review_id": null,
    "id": 46585434,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTg1NDM0",
    "diff_hunk": "@@ -78,7 +80,7 @@ def execute(self, context):\n                     raise AirflowException(\"Bash command failed\")\n \n         if self.xcom_push:\n-            return str(line.strip())\n+            return str(line.strip(), sys.getdefaultencoding())",
    "path": "airflow/operators/bash_operator.py",
    "commit_id": "ece4c787d29673347b8e7cbb238d3ec83bd7f4a7",
    "original_commit_id": "d3dcbe7c7096af93f3746bfa7c4be12349cb58a8",
    "user": {
      "login": "thibault-ketterer",
      "id": 4283686,
      "node_id": "MDQ6VXNlcjQyODM2ODY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4283686?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thibault-ketterer",
      "html_url": "https://github.com/thibault-ketterer",
      "followers_url": "https://api.github.com/users/thibault-ketterer/followers",
      "following_url": "https://api.github.com/users/thibault-ketterer/following{/other_user}",
      "gists_url": "https://api.github.com/users/thibault-ketterer/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thibault-ketterer/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thibault-ketterer/subscriptions",
      "organizations_url": "https://api.github.com/users/thibault-ketterer/orgs",
      "repos_url": "https://api.github.com/users/thibault-ketterer/repos",
      "events_url": "https://api.github.com/users/thibault-ketterer/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thibault-ketterer/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "well, yes , I am gonna check this tomorrow (France time)\n",
    "created_at": "2015-12-03T17:49:14Z",
    "updated_at": "2015-12-08T15:26:54Z",
    "html_url": "https://github.com/apache/airflow/pull/723#discussion_r46585434",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/723",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/46585434"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/723#discussion_r46585434"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/723"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/46585434/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 14,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/46683127",
    "pull_request_review_id": null,
    "id": 46683127,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjgzMTI3",
    "diff_hunk": "@@ -78,7 +80,7 @@ def execute(self, context):\n                     raise AirflowException(\"Bash command failed\")\n \n         if self.xcom_push:\n-            return str(line.strip())\n+            return str(line.strip(), sys.getdefaultencoding())",
    "path": "airflow/operators/bash_operator.py",
    "commit_id": "ece4c787d29673347b8e7cbb238d3ec83bd7f4a7",
    "original_commit_id": "d3dcbe7c7096af93f3746bfa7c4be12349cb58a8",
    "user": {
      "login": "thibault-ketterer",
      "id": 4283686,
      "node_id": "MDQ6VXNlcjQyODM2ODY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4283686?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thibault-ketterer",
      "html_url": "https://github.com/thibault-ketterer",
      "followers_url": "https://api.github.com/users/thibault-ketterer/followers",
      "following_url": "https://api.github.com/users/thibault-ketterer/following{/other_user}",
      "gists_url": "https://api.github.com/users/thibault-ketterer/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thibault-ketterer/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thibault-ketterer/subscriptions",
      "organizations_url": "https://api.github.com/users/thibault-ketterer/orgs",
      "repos_url": "https://api.github.com/users/thibault-ketterer/repos",
      "events_url": "https://api.github.com/users/thibault-ketterer/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thibault-ketterer/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "no luck here, format is giving me the same result as str with python3\n\n``` python\n>>> '{}'.format(b'text')\n\"b'text'\"\n```\n\nI could not find a better way to do it that is workling well with python2 and 3\n\nThere may be another way with decode\n\n``` python\n'{}'.format(b'text'.decode('utf-8'))\n```\n\n``` python\n'{}'.format(b'text'.decode(sys.getdefaultencoding()))\n```\n\nAny other idea ?\n",
    "created_at": "2015-12-04T13:52:31Z",
    "updated_at": "2015-12-08T15:26:54Z",
    "html_url": "https://github.com/apache/airflow/pull/723#discussion_r46683127",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/723",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/46683127"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/723#discussion_r46683127"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/723"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/46683127/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 14,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/46914526",
    "pull_request_review_id": null,
    "id": 46914526,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTE0NTI2",
    "diff_hunk": "@@ -43,6 +42,48 @@\n SIMPLE_LOG_FORMAT = '%(asctime)s %(levelname)s - %(message)s'\n \n \n+def log_to_stdout():",
    "path": "airflow/settings.py",
    "commit_id": "9410cfbb893e1d2a220afd34407713768d63cd71",
    "original_commit_id": "8c13c044d510535df6c5bccc95928126eec39571",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Can we move this and WithLogger to `airlfow.utils` instead of settings?\n",
    "created_at": "2015-12-08T04:40:26Z",
    "updated_at": "2015-12-08T12:52:30Z",
    "html_url": "https://github.com/apache/airflow/pull/740#discussion_r46914526",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/740",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/46914526"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/740#discussion_r46914526"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/740"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/46914526/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 24,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/46914744",
    "pull_request_review_id": null,
    "id": 46914744,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTE0NzQ0",
    "diff_hunk": "@@ -43,6 +42,48 @@\n SIMPLE_LOG_FORMAT = '%(asctime)s %(levelname)s - %(message)s'\n \n \n+def log_to_stdout():\n+\n+    root_logger = logging.getLogger()\n+\n+    # default log level if not set externally (e.g. with --logging-level=DEBUG)\n+    if root_logger.level == logging.NOTSET:\n+        root_logger.setLevel(LOGGING_LEVEL)\n+\n+    for handler in root_logger.handlers:\n+        if isinstance(handler, logging.StreamHandler):\n+            root_logger.warn(\"not adding a stream handler: already present\")\n+            return\n+\n+    logformat = logging.Formatter(\n+        \"%(asctime)s - %(name)s - %(levelname)s - %(message)s\")\n+\n+    ch = logging.StreamHandler(sys.stdout)\n+    ch.setFormatter(logformat)\n+    root_logger.addHandler(ch)\n+\n+\n+class WithLogger(object):",
    "path": "airflow/settings.py",
    "commit_id": "9410cfbb893e1d2a220afd34407713768d63cd71",
    "original_commit_id": "8c13c044d510535df6c5bccc95928126eec39571",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "`LogMixin`, `LoggingMixin`?\n",
    "created_at": "2015-12-08T04:45:38Z",
    "updated_at": "2015-12-08T12:52:30Z",
    "html_url": "https://github.com/apache/airflow/pull/740#discussion_r46914744",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/740",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/46914744"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/740#discussion_r46914744"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/740"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/46914744/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 45,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/46914808",
    "pull_request_review_id": null,
    "id": 46914808,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTE0ODA4",
    "diff_hunk": "@@ -43,6 +42,48 @@\n SIMPLE_LOG_FORMAT = '%(asctime)s %(levelname)s - %(message)s'\n \n \n+def log_to_stdout():\n+\n+    root_logger = logging.getLogger()\n+\n+    # default log level if not set externally (e.g. with --logging-level=DEBUG)\n+    if root_logger.level == logging.NOTSET:\n+        root_logger.setLevel(LOGGING_LEVEL)\n+\n+    for handler in root_logger.handlers:\n+        if isinstance(handler, logging.StreamHandler):\n+            root_logger.warn(\"not adding a stream handler: already present\")\n+            return\n+\n+    logformat = logging.Formatter(\n+        \"%(asctime)s - %(name)s - %(levelname)s - %(message)s\")\n+\n+    ch = logging.StreamHandler(sys.stdout)\n+    ch.setFormatter(logformat)\n+    root_logger.addHandler(ch)\n+\n+\n+class WithLogger(object):\n+    \"\"\"\n+    Convenience super-class to have a logger configured with the class name\n+    \"\"\"\n+\n+    def logger(self):\n+        return logging.getLogger(self.__class__.__name__)",
    "path": "airflow/settings.py",
    "commit_id": "9410cfbb893e1d2a220afd34407713768d63cd71",
    "original_commit_id": "8c13c044d510535df6c5bccc95928126eec39571",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Should the logger object be memoized somehow, otherwise getLogger is called at every logging event...\n",
    "created_at": "2015-12-08T04:47:29Z",
    "updated_at": "2015-12-08T12:52:30Z",
    "html_url": "https://github.com/apache/airflow/pull/740#discussion_r46914808",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/740",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/46914808"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/740#discussion_r46914808"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/740"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/46914808/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 51,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/47739823",
    "pull_request_review_id": null,
    "id": 47739823,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzM5ODIz",
    "diff_hunk": "@@ -13,9 +15,14 @@ class PostgresHook(DbApiHook):\n \n     def get_conn(self):\n         conn = self.get_connection(self.postgres_conn_id)\n-        return psycopg2.connect(\n+        conn_args = dict(\n             host=conn.host,\n             user=conn.login,\n             password=conn.password,\n             dbname=conn.schema,\n             port=conn.port)\n+        # check for ssl parameters in conn.extra\n+        for arg_name, arg_val in conn.extra_dejson.iteritems():",
    "path": "airflow/hooks/postgres_hook.py",
    "commit_id": "5e6b9cf12faa6ea13f0a8eaa83b115071d11c27f",
    "original_commit_id": "5e6b9cf12faa6ea13f0a8eaa83b115071d11c27f",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "`iteritems` was taken away in py3, you can just use `items` in place of it. It's a fn in py2 and a generator in py3 but will work identically for a small dict.\n",
    "created_at": "2015-12-16T06:08:11Z",
    "updated_at": "2015-12-16T06:08:11Z",
    "html_url": "https://github.com/apache/airflow/pull/766#discussion_r47739823",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/766",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/47739823"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/766#discussion_r47739823"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/766"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/47739823/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 25,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 21,
    "position": 21,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/48159639",
    "pull_request_review_id": null,
    "id": 48159639,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTU5NjM5",
    "diff_hunk": "@@ -48,7 +49,10 @@ def execute(self, **kwargs):\n         if not self.params:\n             self.construct_api_call_params()\n         sc = SlackClient(self.token)\n-        sc.api_call(self.method, **self.params)\n+        rc = json.loads(sc.api_call(self.method, **self.params).decode('utf-8'))\n+        if not rc['ok']:\n+            raise AirflowException(\"Slack API call failed: ({})\".format(rc['error']))\n+            logging.error(\"Slack API call failed ({})\".format(rc['error']))",
    "path": "airflow/operators/slack_operator.py",
    "commit_id": "f785baf7df7b04df02862619d554bb69fdf27f4b",
    "original_commit_id": "d8f193d7782aa60b138a4b1963ee027b98dfd7bb",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "this line would never be reached.\n",
    "created_at": "2015-12-21T16:04:32Z",
    "updated_at": "2015-12-21T16:18:09Z",
    "html_url": "https://github.com/apache/airflow/pull/792#discussion_r48159639",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/792",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/48159639"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/792#discussion_r48159639"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/792"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/48159639/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 18,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/48565634",
    "pull_request_review_id": null,
    "id": 48565634,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTY1NjM0",
    "diff_hunk": "@@ -1460,6 +1460,15 @@ def __init__(\n             logging.warning(\n                 \"start_date for {} isn't datetime.datetime\".format(self))\n         self.end_date = end_date\n+        # could add \"not callable(attr) \"\n+        all_triggers = [getattr(TriggerRule, attr) \\",
    "path": "airflow/models.py",
    "commit_id": "daa0407ca8523997b02f521e60108828eeacef1b",
    "original_commit_id": "ddf261ab1e4dbb6165b59f70a63ac41f713bb0d5",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Can we add a more explicite `is_valid(trigger_rule)` `@classmethod` or an `all_trigger_rules` `@classmethod` to `TriggerRule` instead?\n",
    "created_at": "2015-12-29T19:57:14Z",
    "updated_at": "2015-12-30T16:06:53Z",
    "html_url": "https://github.com/apache/airflow/pull/806#discussion_r48565634",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/806",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/48565634"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/806#discussion_r48565634"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/806"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/48565634/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 5,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/48690438",
    "pull_request_review_id": null,
    "id": 48690438,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjkwNDM4",
    "diff_hunk": "@@ -274,6 +279,10 @@ class AirflowConfigException(Exception):\n # default_principal = admin\n # default_secret = admin\n \n+# QDS credentials, if intergation with Qubole is enabled\n+[qds]\n+api_token = ''",
    "path": "airflow/configuration.py",
    "commit_id": "992a1309d7167295f58febac27461788bba52172",
    "original_commit_id": "9458ac775b7243bd0acbe1f80ac82e53e8302ef2",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "We typically store this kind of information in a connection ORM object that we access through a hook\n",
    "created_at": "2016-01-03T06:32:16Z",
    "updated_at": "2016-01-18T10:57:35Z",
    "html_url": "https://github.com/apache/airflow/pull/808#discussion_r48690438",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/808",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/48690438"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/808#discussion_r48690438"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/808"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/48690438/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 18,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/48690447",
    "pull_request_review_id": null,
    "id": 48690447,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjkwNDQ3",
    "diff_hunk": "@@ -0,0 +1,125 @@\n+import logging\n+import datetime\n+import os\n+\n+from qds_sdk.qubole import Qubole\n+from qds_sdk.commands import *",
    "path": "airflow/contrib/operators/qubole_operator.py",
    "commit_id": "992a1309d7167295f58febac27461788bba52172",
    "original_commit_id": "9458ac775b7243bd0acbe1f80ac82e53e8302ef2",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "`import *` is consider bad practice because it makes it impossible to track which namespace objects are coming from.\n",
    "created_at": "2016-01-03T06:34:20Z",
    "updated_at": "2016-01-18T10:57:35Z",
    "html_url": "https://github.com/apache/airflow/pull/808#discussion_r48690447",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/808",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/48690447"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/808#discussion_r48690447"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/808"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/48690447/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 6,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/48690452",
    "pull_request_review_id": null,
    "id": 48690452,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjkwNDUy",
    "diff_hunk": "@@ -0,0 +1,125 @@\n+import logging\n+import datetime\n+import os\n+\n+from qds_sdk.qubole import Qubole\n+from qds_sdk.commands import *\n+from airflow.models import BaseOperator\n+from airflow.utils import apply_defaults\n+from airflow import configuration\n+\n+Qubole.configure(api_token=configuration.get('qds', 'api_token'),\n+                 api_url=configuration.get('qds', 'api_url'),\n+                 version=configuration.get('qds', 'version'))\n+\n+CommandClasses = {",
    "path": "airflow/contrib/operators/qubole_operator.py",
    "commit_id": "992a1309d7167295f58febac27461788bba52172",
    "original_commit_id": "9458ac775b7243bd0acbe1f80ac82e53e8302ef2",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "camel case only for class names\n",
    "created_at": "2016-01-03T06:34:48Z",
    "updated_at": "2016-01-18T10:57:35Z",
    "html_url": "https://github.com/apache/airflow/pull/808#discussion_r48690452",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/808",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/48690452"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/808#discussion_r48690452"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/808"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/48690452/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 15,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/48690453",
    "pull_request_review_id": null,
    "id": 48690453,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjkwNDUz",
    "diff_hunk": "@@ -0,0 +1,125 @@\n+import logging\n+import datetime\n+import os\n+\n+from qds_sdk.qubole import Qubole\n+from qds_sdk.commands import *\n+from airflow.models import BaseOperator\n+from airflow.utils import apply_defaults\n+from airflow import configuration\n+\n+Qubole.configure(api_token=configuration.get('qds', 'api_token'),\n+                 api_url=configuration.get('qds', 'api_url'),\n+                 version=configuration.get('qds', 'version'))\n+\n+CommandClasses = {\n+    \"hivecmd\": HiveCommand,\n+    \"sparkcmd\": SparkCommand,\n+    \"dbtapquerycmd\": DbTapQueryCommand,\n+    \"pigcmd\":  PigCommand,\n+    \"hadoopcmd\": HadoopCommand,\n+    \"shellcmd\": ShellCommand,\n+    \"dbexportcmd\": DbExportCommand,\n+    \"dbimportcmd\": DbImportCommand,\n+    \"prestocmd\": PrestoCommand\n+}\n+\n+ArgsWithHyphen = ['cluster_label', 'app_id']",
    "path": "airflow/contrib/operators/qubole_operator.py",
    "commit_id": "992a1309d7167295f58febac27461788bba52172",
    "original_commit_id": "9458ac775b7243bd0acbe1f80ac82e53e8302ef2",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "camel case only for class names\n",
    "created_at": "2016-01-03T06:34:52Z",
    "updated_at": "2016-01-18T10:57:35Z",
    "html_url": "https://github.com/apache/airflow/pull/808#discussion_r48690453",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/808",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/48690453"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/808#discussion_r48690453"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/808"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/48690453/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 27,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/48690454",
    "pull_request_review_id": null,
    "id": 48690454,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjkwNDU0",
    "diff_hunk": "@@ -0,0 +1,125 @@\n+import logging\n+import datetime\n+import os\n+\n+from qds_sdk.qubole import Qubole\n+from qds_sdk.commands import *\n+from airflow.models import BaseOperator\n+from airflow.utils import apply_defaults\n+from airflow import configuration\n+\n+Qubole.configure(api_token=configuration.get('qds', 'api_token'),\n+                 api_url=configuration.get('qds', 'api_url'),\n+                 version=configuration.get('qds', 'version'))\n+\n+CommandClasses = {\n+    \"hivecmd\": HiveCommand,\n+    \"sparkcmd\": SparkCommand,\n+    \"dbtapquerycmd\": DbTapQueryCommand,\n+    \"pigcmd\":  PigCommand,\n+    \"hadoopcmd\": HadoopCommand,\n+    \"shellcmd\": ShellCommand,\n+    \"dbexportcmd\": DbExportCommand,\n+    \"dbimportcmd\": DbImportCommand,\n+    \"prestocmd\": PrestoCommand\n+}\n+\n+ArgsWithHyphen = ['cluster_label', 'app_id']\n+\n+CommandArgs = {",
    "path": "airflow/contrib/operators/qubole_operator.py",
    "commit_id": "992a1309d7167295f58febac27461788bba52172",
    "original_commit_id": "9458ac775b7243bd0acbe1f80ac82e53e8302ef2",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "camel case only for class names\n",
    "created_at": "2016-01-03T06:34:58Z",
    "updated_at": "2016-01-18T10:57:35Z",
    "html_url": "https://github.com/apache/airflow/pull/808#discussion_r48690454",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/808",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/48690454"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/808#discussion_r48690454"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/808"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/48690454/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 29,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/48690458",
    "pull_request_review_id": null,
    "id": 48690458,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjkwNDU4",
    "diff_hunk": "@@ -0,0 +1,125 @@\n+import logging\n+import datetime\n+import os\n+\n+from qds_sdk.qubole import Qubole\n+from qds_sdk.commands import *\n+from airflow.models import BaseOperator\n+from airflow.utils import apply_defaults\n+from airflow import configuration\n+\n+Qubole.configure(api_token=configuration.get('qds', 'api_token'),\n+                 api_url=configuration.get('qds', 'api_url'),\n+                 version=configuration.get('qds', 'version'))\n+\n+CommandClasses = {\n+    \"hivecmd\": HiveCommand,\n+    \"sparkcmd\": SparkCommand,\n+    \"dbtapquerycmd\": DbTapQueryCommand,\n+    \"pigcmd\":  PigCommand,\n+    \"hadoopcmd\": HadoopCommand,\n+    \"shellcmd\": ShellCommand,\n+    \"dbexportcmd\": DbExportCommand,\n+    \"dbimportcmd\": DbImportCommand,\n+    \"prestocmd\": PrestoCommand\n+}\n+\n+ArgsWithHyphen = ['cluster_label', 'app_id']\n+\n+CommandArgs = {\n+    \"hivecmd\": ['query', 'script_location', 'macros', 'tags', 'sample_size', 'cluster_label', 'name'],\n+    'sparkcmd': ['program', 'cmdline', 'sql', 'script_location', 'macros', 'tags', 'cluster_label', 'language', 'app_id', 'name', 'arguments', 'user_program_arguments'],\n+    'prestocmd': ['query', 'script_location', 'macros', 'tags', 'cluster_label', 'name'],\n+    'hadoopcmd': ['tags', 'cluster_label', 'name'],\n+    'shellcmd': ['script', 'script_location', 'files', 'archives', 'tags', 'cluster_label', 'name'],\n+    'pigcmd': ['script', 'script_location', 'tags', 'cluster_label', 'name'],\n+    'dbtapquerycmd': ['db_tap_id', 'query', 'macros', 'tags', 'name'],\n+    'dbexportcmd': ['mode', 'hive_table', 'partition_spec', 'dbtap_id', 'db_table', 'db_update_mode', 'db_update_keys', 'export_dir', 'fields_terminated_by', 'tags', 'name'],\n+    'dbimportcmd': ['mode', 'hive_table', 'dbtap_id', 'db_table', 'where_clause', 'parallelism', 'extract_query', 'boundary_query', 'split_column', 'tags', 'name']\n+}\n+\n+\n+class QuboleOperator(BaseOperator):\n+    \"\"\"\n+    Executes commands on Qubole (https://qubole.com).\n+\n+    :param command_type: type of command to be executed\n+    :type command_type: string\n+\n+    \"\"\"\n+\n+    ui_color = '#3064A1'\n+    ui_fgcolor = '#fff'\n+\n+    @apply_defaults\n+    def __init__(self, *args, **kwargs):\n+        self.kwargs = kwargs\n+        self.args = self.create_cmd_args()\n+        self.cls = CommandClasses[self.kwargs['command_type']]\n+        self.cmd = None\n+        super(QuboleOperator, self).__init__(*args, **kwargs)\n+\n+    def execute(self, context):\n+        args = self.cls.parse(self.args)\n+        self.cmd = self.cls.create(**args)\n+        logging.info(\"Qubole command created with Id: %s and Status: %s\" % (str(self.cmd.id), self.cmd.status))\n+\n+        while not Command.is_done(self.cmd.status):\n+            time.sleep(Qubole.poll_interval)\n+            self.cmd = self.cls.find(self.cmd.id)\n+            logging.info(\"Command Id: %s and Status: %s\" % (str(self.cmd.id), self.cmd.status))\n+\n+        if self.kwargs.has_key('fetch_logs') and self.kwargs['fetch_logs'] == True:\n+            logging.info(\"Logs for Command Id: %s, %s\" % (str(self.cmd.id), self.cmd.get_log()))\n+\n+        return self.cmd.id\n+\n+    def on_kill(self, ti):\n+        if self.cmd is None:\n+            cmd_id = ti.xcom_pull(key=\"return_value\", task_ids=self.task_id)\n+            self.cmd = self.cls.find(cmd_id)\n+        if self.cls and self.cmd:\n+            logging.info('Sending KILL signal to Qubole Command Id: %s' % self.cmd.id)\n+            self.cmd.cancel()\n+\n+    def get_results(self, ti, fp=None, inline=True, delim=None, fetch=True):",
    "path": "airflow/contrib/operators/qubole_operator.py",
    "commit_id": "992a1309d7167295f58febac27461788bba52172",
    "original_commit_id": "9458ac775b7243bd0acbe1f80ac82e53e8302ef2",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "belongs in a hook\n",
    "created_at": "2016-01-03T06:35:38Z",
    "updated_at": "2016-01-18T10:57:35Z",
    "html_url": "https://github.com/apache/airflow/pull/808#discussion_r48690458",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/808",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/48690458"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/808#discussion_r48690458"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/808"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/48690458/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 85,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/48690460",
    "pull_request_review_id": null,
    "id": 48690460,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjkwNDYw",
    "diff_hunk": "@@ -0,0 +1,125 @@\n+import logging\n+import datetime\n+import os\n+\n+from qds_sdk.qubole import Qubole\n+from qds_sdk.commands import *\n+from airflow.models import BaseOperator\n+from airflow.utils import apply_defaults\n+from airflow import configuration\n+\n+Qubole.configure(api_token=configuration.get('qds', 'api_token'),\n+                 api_url=configuration.get('qds', 'api_url'),\n+                 version=configuration.get('qds', 'version'))\n+\n+CommandClasses = {\n+    \"hivecmd\": HiveCommand,\n+    \"sparkcmd\": SparkCommand,\n+    \"dbtapquerycmd\": DbTapQueryCommand,\n+    \"pigcmd\":  PigCommand,\n+    \"hadoopcmd\": HadoopCommand,\n+    \"shellcmd\": ShellCommand,\n+    \"dbexportcmd\": DbExportCommand,\n+    \"dbimportcmd\": DbImportCommand,\n+    \"prestocmd\": PrestoCommand\n+}\n+\n+ArgsWithHyphen = ['cluster_label', 'app_id']\n+\n+CommandArgs = {\n+    \"hivecmd\": ['query', 'script_location', 'macros', 'tags', 'sample_size', 'cluster_label', 'name'],\n+    'sparkcmd': ['program', 'cmdline', 'sql', 'script_location', 'macros', 'tags', 'cluster_label', 'language', 'app_id', 'name', 'arguments', 'user_program_arguments'],\n+    'prestocmd': ['query', 'script_location', 'macros', 'tags', 'cluster_label', 'name'],\n+    'hadoopcmd': ['tags', 'cluster_label', 'name'],\n+    'shellcmd': ['script', 'script_location', 'files', 'archives', 'tags', 'cluster_label', 'name'],\n+    'pigcmd': ['script', 'script_location', 'tags', 'cluster_label', 'name'],\n+    'dbtapquerycmd': ['db_tap_id', 'query', 'macros', 'tags', 'name'],\n+    'dbexportcmd': ['mode', 'hive_table', 'partition_spec', 'dbtap_id', 'db_table', 'db_update_mode', 'db_update_keys', 'export_dir', 'fields_terminated_by', 'tags', 'name'],\n+    'dbimportcmd': ['mode', 'hive_table', 'dbtap_id', 'db_table', 'where_clause', 'parallelism', 'extract_query', 'boundary_query', 'split_column', 'tags', 'name']\n+}\n+\n+\n+class QuboleOperator(BaseOperator):\n+    \"\"\"\n+    Executes commands on Qubole (https://qubole.com).\n+\n+    :param command_type: type of command to be executed\n+    :type command_type: string\n+\n+    \"\"\"\n+\n+    ui_color = '#3064A1'\n+    ui_fgcolor = '#fff'\n+\n+    @apply_defaults\n+    def __init__(self, *args, **kwargs):",
    "path": "airflow/contrib/operators/qubole_operator.py",
    "commit_id": "992a1309d7167295f58febac27461788bba52172",
    "original_commit_id": "9458ac775b7243bd0acbe1f80ac82e53e8302ef2",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "The operator should have a clear list of documented kwargs\n",
    "created_at": "2016-01-03T06:36:20Z",
    "updated_at": "2016-01-18T10:57:35Z",
    "html_url": "https://github.com/apache/airflow/pull/808#discussion_r48690460",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/808",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/48690460"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/808#discussion_r48690460"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/808"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/48690460/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 55,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/48690462",
    "pull_request_review_id": null,
    "id": 48690462,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjkwNDYy",
    "diff_hunk": "@@ -0,0 +1,125 @@\n+import logging\n+import datetime\n+import os\n+\n+from qds_sdk.qubole import Qubole\n+from qds_sdk.commands import *\n+from airflow.models import BaseOperator\n+from airflow.utils import apply_defaults\n+from airflow import configuration\n+\n+Qubole.configure(api_token=configuration.get('qds', 'api_token'),\n+                 api_url=configuration.get('qds', 'api_url'),\n+                 version=configuration.get('qds', 'version'))\n+\n+CommandClasses = {\n+    \"hivecmd\": HiveCommand,\n+    \"sparkcmd\": SparkCommand,\n+    \"dbtapquerycmd\": DbTapQueryCommand,\n+    \"pigcmd\":  PigCommand,\n+    \"hadoopcmd\": HadoopCommand,\n+    \"shellcmd\": ShellCommand,\n+    \"dbexportcmd\": DbExportCommand,\n+    \"dbimportcmd\": DbImportCommand,\n+    \"prestocmd\": PrestoCommand\n+}\n+\n+ArgsWithHyphen = ['cluster_label', 'app_id']\n+\n+CommandArgs = {\n+    \"hivecmd\": ['query', 'script_location', 'macros', 'tags', 'sample_size', 'cluster_label', 'name'],\n+    'sparkcmd': ['program', 'cmdline', 'sql', 'script_location', 'macros', 'tags', 'cluster_label', 'language', 'app_id', 'name', 'arguments', 'user_program_arguments'],\n+    'prestocmd': ['query', 'script_location', 'macros', 'tags', 'cluster_label', 'name'],\n+    'hadoopcmd': ['tags', 'cluster_label', 'name'],\n+    'shellcmd': ['script', 'script_location', 'files', 'archives', 'tags', 'cluster_label', 'name'],\n+    'pigcmd': ['script', 'script_location', 'tags', 'cluster_label', 'name'],\n+    'dbtapquerycmd': ['db_tap_id', 'query', 'macros', 'tags', 'name'],\n+    'dbexportcmd': ['mode', 'hive_table', 'partition_spec', 'dbtap_id', 'db_table', 'db_update_mode', 'db_update_keys', 'export_dir', 'fields_terminated_by', 'tags', 'name'],\n+    'dbimportcmd': ['mode', 'hive_table', 'dbtap_id', 'db_table', 'where_clause', 'parallelism', 'extract_query', 'boundary_query', 'split_column', 'tags', 'name']\n+}\n+\n+\n+class QuboleOperator(BaseOperator):\n+    \"\"\"\n+    Executes commands on Qubole (https://qubole.com).\n+\n+    :param command_type: type of command to be executed\n+    :type command_type: string\n+\n+    \"\"\"\n+\n+    ui_color = '#3064A1'\n+    ui_fgcolor = '#fff'\n+\n+    @apply_defaults\n+    def __init__(self, *args, **kwargs):\n+        self.kwargs = kwargs\n+        self.args = self.create_cmd_args()\n+        self.cls = CommandClasses[self.kwargs['command_type']]\n+        self.cmd = None\n+        super(QuboleOperator, self).__init__(*args, **kwargs)\n+\n+    def execute(self, context):\n+        args = self.cls.parse(self.args)\n+        self.cmd = self.cls.create(**args)\n+        logging.info(\"Qubole command created with Id: %s and Status: %s\" % (str(self.cmd.id), self.cmd.status))\n+\n+        while not Command.is_done(self.cmd.status):\n+            time.sleep(Qubole.poll_interval)\n+            self.cmd = self.cls.find(self.cmd.id)\n+            logging.info(\"Command Id: %s and Status: %s\" % (str(self.cmd.id), self.cmd.status))\n+\n+        if self.kwargs.has_key('fetch_logs') and self.kwargs['fetch_logs'] == True:\n+            logging.info(\"Logs for Command Id: %s, %s\" % (str(self.cmd.id), self.cmd.get_log()))\n+\n+        return self.cmd.id\n+\n+    def on_kill(self, ti):\n+        if self.cmd is None:\n+            cmd_id = ti.xcom_pull(key=\"return_value\", task_ids=self.task_id)\n+            self.cmd = self.cls.find(cmd_id)\n+        if self.cls and self.cmd:\n+            logging.info('Sending KILL signal to Qubole Command Id: %s' % self.cmd.id)\n+            self.cmd.cancel()\n+\n+    def get_results(self, ti, fp=None, inline=True, delim=None, fetch=True):\n+        if fp is None:\n+            iso = datetime.datetime.utcnow().isoformat()\n+            logpath = os.path.expanduser(configuration.get('core', 'BASE_LOG_FOLDER'))\n+            resultpath = logpath + '/' + self.dag_id + '/' + self.task_id + '/results'\n+            configuration.mkdir_p(resultpath)\n+            fp = open(resultpath + '/' + iso, 'wb')\n+\n+        if self.cmd is None:\n+            cmd_id = ti.xcom_pull(key=\"return_value\", task_ids=self.task_id)\n+            self.cmd = self.cls.find(cmd_id)\n+\n+        self.cmd.get_results(fp, inline, delim, fetch)\n+        fp.flush()\n+        fp.close()\n+        return fp.name\n+\n+    def get_log(self, ti):\n+        if self.cmd is None:\n+            cmd_id = ti.xcom_pull(key=\"return_value\", task_ids=self.task_id)\n+        Command.get_log_id(self.cls, cmd_id)\n+\n+    def get_jobs_id(self, ti):\n+        if self.cmd is None:\n+            cmd_id = ti.xcom_pull(key=\"return_value\", task_ids=self.task_id)\n+        Command.get_jobs_id(self.cls, cmd_id)\n+\n+    def create_cmd_args(self):\n+        args = []\n+        for k,v in self.kwargs.items():\n+            if k in CommandArgs[self.kwargs['command_type']]:\n+                if k in ArgsWithHyphen:\n+                    args.append(\"--%s=%s\"%(k.replace('_', '-'),v))",
    "path": "airflow/contrib/operators/qubole_operator.py",
    "commit_id": "992a1309d7167295f58febac27461788bba52172",
    "original_commit_id": "9458ac775b7243bd0acbe1f80ac82e53e8302ef2",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "people are moving away from using the `%` operator in favor of `str.format()`\n",
    "created_at": "2016-01-03T06:37:10Z",
    "updated_at": "2016-01-18T10:57:35Z",
    "html_url": "https://github.com/apache/airflow/pull/808#discussion_r48690462",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/808",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/48690462"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/808#discussion_r48690462"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/808"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/48690462/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 117,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/48974862",
    "pull_request_review_id": null,
    "id": 48974862,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTc0ODYy",
    "diff_hunk": "@@ -427,7 +427,8 @@ def kerberos(args):\n \n def get_parser():\n     parser = argparse.ArgumentParser()\n-    subparsers = parser.add_subparsers(help='sub-command help')\n+    subparsers = parser.add_subparsers(help='sub-command help', dest='subcommand')\n+    subparsers.required=True",
    "path": "airflow/bin/cli.py",
    "commit_id": "4c95508f0f590f4f5900cf7c5a0df698edb77492",
    "original_commit_id": "d35ec608b14233a527b94d91ba8f0d5e08c2731e",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "nit: spaces around operator pls\n",
    "created_at": "2016-01-06T16:17:30Z",
    "updated_at": "2016-01-06T16:20:49Z",
    "html_url": "https://github.com/apache/airflow/pull/826#discussion_r48974862",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/826",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/48974862"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/826#discussion_r48974862"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/826"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/48974862/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 6,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/49001933",
    "pull_request_review_id": null,
    "id": 49001933,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDAxOTMz",
    "diff_hunk": "@@ -84,14 +84,15 @@ def trigger_dag(args):\n     session = settings.Session()\n     # TODO: verify dag_id\n     execution_date = datetime.now()\n+    run_id = args.run_id or \"manual__{0}\".format(datetime.datetime.utcnow().isoformat())",
    "path": "airflow/bin/cli.py",
    "commit_id": "2281287b13ad7fa3b285c021afd9df4aa70d3fa3",
    "original_commit_id": "f3c584b8ec58baba61c86cf892dac1cc4c317e5e",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "did you test this? datetime came from a `from datetime import datetime`, so datetime.datetime won't work. I think you should just use `execution_date.isoformat()`\n",
    "created_at": "2016-01-06T19:57:34Z",
    "updated_at": "2016-01-07T05:48:18Z",
    "html_url": "https://github.com/apache/airflow/pull/835#discussion_r49001933",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/835",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/49001933"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/835#discussion_r49001933"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/835"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/49001933/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 4,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/49043398",
    "pull_request_review_id": null,
    "id": 49043398,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDQzMzk4",
    "diff_hunk": "@@ -84,14 +84,15 @@ def trigger_dag(args):\n     session = settings.Session()\n     # TODO: verify dag_id\n     execution_date = datetime.now()\n+    run_id = args.run_id or \"manual__{0}\".format(datetime.datetime.utcnow().isoformat())",
    "path": "airflow/bin/cli.py",
    "commit_id": "2281287b13ad7fa3b285c021afd9df4aa70d3fa3",
    "original_commit_id": "f3c584b8ec58baba61c86cf892dac1cc4c317e5e",
    "user": {
      "login": "msumit",
      "id": 2018407,
      "node_id": "MDQ6VXNlcjIwMTg0MDc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2018407?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/msumit",
      "html_url": "https://github.com/msumit",
      "followers_url": "https://api.github.com/users/msumit/followers",
      "following_url": "https://api.github.com/users/msumit/following{/other_user}",
      "gists_url": "https://api.github.com/users/msumit/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/msumit/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/msumit/subscriptions",
      "organizations_url": "https://api.github.com/users/msumit/orgs",
      "repos_url": "https://api.github.com/users/msumit/repos",
      "events_url": "https://api.github.com/users/msumit/events{/privacy}",
      "received_events_url": "https://api.github.com/users/msumit/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Oops, my bad.. still a n00b in python.. will fix it..\n",
    "created_at": "2016-01-07T05:34:27Z",
    "updated_at": "2016-01-07T05:48:18Z",
    "html_url": "https://github.com/apache/airflow/pull/835#discussion_r49043398",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/835",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/49043398"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/835#discussion_r49043398"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/835"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/49043398/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 4,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/49043547",
    "pull_request_review_id": null,
    "id": 49043547,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDQzNTQ3",
    "diff_hunk": "@@ -84,14 +84,15 @@ def trigger_dag(args):\n     session = settings.Session()\n     # TODO: verify dag_id\n     execution_date = datetime.now()\n+    run_id = args.run_id or \"manual__{0}\".format(datetime.datetime.utcnow().isoformat())",
    "path": "airflow/bin/cli.py",
    "commit_id": "2281287b13ad7fa3b285c021afd9df4aa70d3fa3",
    "original_commit_id": "f3c584b8ec58baba61c86cf892dac1cc4c317e5e",
    "user": {
      "login": "msumit",
      "id": 2018407,
      "node_id": "MDQ6VXNlcjIwMTg0MDc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2018407?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/msumit",
      "html_url": "https://github.com/msumit",
      "followers_url": "https://api.github.com/users/msumit/followers",
      "following_url": "https://api.github.com/users/msumit/following{/other_user}",
      "gists_url": "https://api.github.com/users/msumit/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/msumit/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/msumit/subscriptions",
      "organizations_url": "https://api.github.com/users/msumit/orgs",
      "repos_url": "https://api.github.com/users/msumit/repos",
      "events_url": "https://api.github.com/users/msumit/events{/privacy}",
      "received_events_url": "https://api.github.com/users/msumit/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "btw just saw that we do import `datetime`.. https://github.com/airbnb/airflow/blob/master/airflow/bin/cli.py#L6\n\nanyways will update the PR to use `execution` date..\n",
    "created_at": "2016-01-07T05:38:48Z",
    "updated_at": "2016-01-07T05:48:18Z",
    "html_url": "https://github.com/apache/airflow/pull/835#discussion_r49043547",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/835",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/49043547"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/835#discussion_r49043547"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/835"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/49043547/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 4,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/49242527",
    "pull_request_review_id": null,
    "id": 49242527,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjQyNTI3",
    "diff_hunk": "@@ -98,6 +98,11 @@ def construct_ingest_query(\n                         \"mapreduce.map.output.compress\": \"false\",\n                         \"mapreduce.output.fileoutputformat.compress\": \"false\",\n                     },\n+                    \"partitionsSpec\" : {\n+                        \"type\" : \"hashed\",\n+                        \"targetPartitionSize\" : -1",
    "path": "airflow/hooks/druid_hook.py",
    "commit_id": "28277dd0bf23c2282b9d4f9492ad2e239a0939c2",
    "original_commit_id": "4b29e8a20df08c4f1611bba8b8a2c14238f7b2a2",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "missing comma here, let's leave a trailing comma on 104 as well\n",
    "created_at": "2016-01-08T21:50:33Z",
    "updated_at": "2016-01-08T21:51:56Z",
    "html_url": "https://github.com/apache/airflow/pull/851#discussion_r49242527",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/851",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/49242527"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/851#discussion_r49242527"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/851"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/49242527/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 15,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/49381034",
    "pull_request_review_id": null,
    "id": 49381034,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzgxMDM0",
    "diff_hunk": "@@ -39,4 +64,9 @@\n       </div>\n     </div>\n \n+    <script src=\"{{ url_for('static', filename='d3.v3.min.js') }}\"></script>\n+      <script src=\"{{ admin_static.url(",
    "path": "airflow/www/templates/airflow/chart.html",
    "commit_id": "222c0e7a84cd7b70414f25f7547074f36ff43002",
    "original_commit_id": "222c0e7a84cd7b70414f25f7547074f36ff43002",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "I think these two crept include (@68-69 and @70) aren't needed anymore as I moved it to the parent template in a recent PR.\n",
    "created_at": "2016-01-11T21:26:12Z",
    "updated_at": "2016-01-11T21:26:12Z",
    "html_url": "https://github.com/apache/airflow/pull/779#discussion_r49381034",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/779",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/49381034"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/779#discussion_r49381034"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/779"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/49381034/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 68,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 44,
    "position": 44,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/49945533",
    "pull_request_review_id": null,
    "id": 49945533,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTQ1NTMz",
    "diff_hunk": "@@ -0,0 +1,153 @@\n+import os\n+import time\n+import logging\n+\n+from airflow.utils import AirflowException\n+from airflow.hooks.base_hook import BaseHook\n+from airflow import configuration\n+\n+from qds_sdk.qubole import Qubole\n+from qds_sdk.commands import Command, HiveCommand, PrestoCommand, HadoopCommand, PigCommand, ShellCommand, \\\n+    SparkCommand, DbTapQueryCommand, DbExportCommand, DbImportCommand\n+\n+\n+COMMAND_CLASSES = {\n+    \"hivecmd\": HiveCommand,\n+    \"prestocmd\": PrestoCommand,\n+    \"hadoopcmd\": HadoopCommand,\n+    \"shellcmd\": ShellCommand,\n+    \"pigcmd\":  PigCommand,\n+    \"sparkcmd\": SparkCommand,\n+    \"dbtapquerycmd\": DbTapQueryCommand,\n+    \"dbexportcmd\": DbExportCommand,\n+    \"dbimportcmd\": DbImportCommand\n+}\n+\n+HYPHEN_ARGS = ['cluster_label', 'app_id']\n+\n+POSITIONAL_ARGS = ['sub_command', 'parameters']\n+\n+COMMAND_ARGS = {\n+    \"hivecmd\": ['query', 'script_location', 'macros', 'tags', 'sample_size', 'cluster_label', 'name'],\n+    'prestocmd': ['query', 'script_location', 'macros', 'tags', 'cluster_label', 'name'],\n+    'hadoopcmd': ['sub_command', 'tags', 'cluster_label', 'name'],\n+    'shellcmd': ['script', 'script_location', 'files', 'archives', 'parameters', 'tags', 'cluster_label', 'name'],\n+    'pigcmd': ['script', 'script_location', 'parameters', 'tags', 'cluster_label', 'name'],\n+    'dbtapquerycmd': ['db_tap_id', 'query', 'macros', 'tags', 'name'],\n+    'sparkcmd': ['program', 'cmdline', 'sql', 'script_location', 'macros', 'tags', 'cluster_label', 'language', 'app_id', 'name', 'arguments', 'user_program_arguments'],\n+    'dbexportcmd': ['mode', 'hive_table', 'partition_spec', 'dbtap_id', 'db_table', 'db_update_mode', 'db_update_keys', 'export_dir', 'fields_terminated_by', 'tags', 'name'],\n+    'dbimportcmd': ['mode', 'hive_table', 'dbtap_id', 'db_table', 'where_clause', 'parallelism', 'extract_query', 'boundary_query', 'split_column', 'tags', 'name']\n+}\n+\n+class QuboleHook(BaseHook):\n+    def __init__(self, *args, **kwargs):\n+        conn = self.get_connection(kwargs['qubole_conn_id'])\n+        Qubole.configure(api_token=conn.password, api_url=conn.host)\n+        self.task_id = kwargs['task_id']\n+        self.dag_id = kwargs['dag'].dag_id\n+        self.kwargs = kwargs\n+        self.args = self.create_cmd_args()\n+        self.cls = COMMAND_CLASSES[self.kwargs['command_type']]\n+        self.cmd = None\n+\n+    def execute(self):\n+        args = self.cls.parse(self.args)\n+        self.cmd = self.cls.create(**args)\n+        logging.info(\"Qubole command created with Id: {0} and Status: {1}\".format(str(self.cmd.id), self.cmd.status))\n+\n+        while not Command.is_done(self.cmd.status):\n+            time.sleep(Qubole.poll_interval)\n+            self.cmd = self.cls.find(self.cmd.id)\n+            logging.info(\"Command Id: {0} and Status: {1}\".format(str(self.cmd.id), self.cmd.status))\n+\n+        if self.kwargs.has_key('fetch_logs') and self.kwargs['fetch_logs'] == True:\n+            logging.info(\"Logs for Command Id: {0}, {1}\".format(str(self.cmd.id), self.cmd.get_log()))\n+\n+        if self.cmd.status != 'done':\n+            raise AirflowException('Command Id: {0} failed with Status: {1}'.format(self.cmd.id, self.cmd.status))\n+\n+        return self.cmd.id\n+\n+    def kill(self, ti):\n+        \"\"\"\n+        Kill (cancel) a Qubole commmand\n+        :param ti: Task Instance of the dag, used to determine the Quboles command id\n+        :return: response from Qubole\n+        \"\"\"\n+        if self.cmd is None:\n+            cmd_id = ti.xcom_pull(key=\"return_value\", task_ids=self.task_id)\n+            self.cmd = self.cls.find(cmd_id)\n+        if self.cls and self.cmd:\n+            logging.info('Sending KILL signal to Qubole Command Id: {0}'.format(self.cmd.id))\n+            self.cmd.cancel()\n+\n+    def get_results(self, ti=None, fp=None, inline=True, delim=None, fetch=True):\n+        \"\"\"\n+        Get results (or just s3 locations) of a command from Qubole and save it into a file\n+        :param ti: Task Instance of the dag, used to determine the Quboles command id\n+        :param fp: Optional file pointer, will create one and return if None passed\n+        :param inline: True to download actual results, False to get s3 locations only\n+        :param delim: Replaces the CTL-A chars with the given delim, defalt to ',' if None given\n+        :param fetch: when inline is True, get results directly from s3 if results are large\n+        :return: file location containing actual results or s3 locations of results\n+        \"\"\"\n+        if fp is None:\n+            iso = datetime.datetime.utcnow().isoformat()\n+            logpath = os.path.expanduser(configuration.get('core', 'BASE_LOG_FOLDER'))\n+            resultpath = logpath + '/' + self.dag_id + '/' + self.task_id + '/results'\n+            configuration.mkdir_p(resultpath)\n+            fp = open(resultpath + '/' + iso, 'wb')\n+\n+        if self.cmd is None:\n+            cmd_id = ti.xcom_pull(key=\"return_value\", task_ids=self.task_id)\n+            self.cmd = self.cls.find(cmd_id)\n+\n+        self.cmd.get_results(fp, inline, delim, fetch)\n+        fp.flush()\n+        fp.close()\n+        return fp.name\n+\n+    def get_log(self, ti):",
    "path": "airflow/contrib/hooks/qubole_hook.py",
    "commit_id": "992a1309d7167295f58febac27461788bba52172",
    "original_commit_id": "841d47c0d00ae1453fe1f431d5968fb0104a50ba",
    "user": {
      "login": "yogesh2021",
      "id": 6372253,
      "node_id": "MDQ6VXNlcjYzNzIyNTM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6372253?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yogesh2021",
      "html_url": "https://github.com/yogesh2021",
      "followers_url": "https://api.github.com/users/yogesh2021/followers",
      "following_url": "https://api.github.com/users/yogesh2021/following{/other_user}",
      "gists_url": "https://api.github.com/users/yogesh2021/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yogesh2021/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yogesh2021/subscriptions",
      "organizations_url": "https://api.github.com/users/yogesh2021/orgs",
      "repos_url": "https://api.github.com/users/yogesh2021/repos",
      "events_url": "https://api.github.com/users/yogesh2021/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yogesh2021/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Can we avoid xcom to fetch cmd_id and set an instance variable. xcoms are needed only for inter-task communication.\n",
    "created_at": "2016-01-17T12:27:49Z",
    "updated_at": "2016-01-18T10:57:35Z",
    "html_url": "https://github.com/apache/airflow/pull/808#discussion_r49945533",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/808",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/49945533"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/808#discussion_r49945533"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/808"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/49945533/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 110,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "NONE",
    "original_position": 110,
    "position": 110,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/49945863",
    "pull_request_review_id": null,
    "id": 49945863,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTQ1ODYz",
    "diff_hunk": "@@ -0,0 +1,153 @@\n+import os\n+import time\n+import logging\n+\n+from airflow.utils import AirflowException\n+from airflow.hooks.base_hook import BaseHook\n+from airflow import configuration\n+\n+from qds_sdk.qubole import Qubole\n+from qds_sdk.commands import Command, HiveCommand, PrestoCommand, HadoopCommand, PigCommand, ShellCommand, \\\n+    SparkCommand, DbTapQueryCommand, DbExportCommand, DbImportCommand\n+\n+\n+COMMAND_CLASSES = {\n+    \"hivecmd\": HiveCommand,\n+    \"prestocmd\": PrestoCommand,\n+    \"hadoopcmd\": HadoopCommand,\n+    \"shellcmd\": ShellCommand,\n+    \"pigcmd\":  PigCommand,\n+    \"sparkcmd\": SparkCommand,\n+    \"dbtapquerycmd\": DbTapQueryCommand,\n+    \"dbexportcmd\": DbExportCommand,\n+    \"dbimportcmd\": DbImportCommand\n+}\n+\n+HYPHEN_ARGS = ['cluster_label', 'app_id']\n+\n+POSITIONAL_ARGS = ['sub_command', 'parameters']\n+\n+COMMAND_ARGS = {\n+    \"hivecmd\": ['query', 'script_location', 'macros', 'tags', 'sample_size', 'cluster_label', 'name'],\n+    'prestocmd': ['query', 'script_location', 'macros', 'tags', 'cluster_label', 'name'],\n+    'hadoopcmd': ['sub_command', 'tags', 'cluster_label', 'name'],\n+    'shellcmd': ['script', 'script_location', 'files', 'archives', 'parameters', 'tags', 'cluster_label', 'name'],\n+    'pigcmd': ['script', 'script_location', 'parameters', 'tags', 'cluster_label', 'name'],\n+    'dbtapquerycmd': ['db_tap_id', 'query', 'macros', 'tags', 'name'],\n+    'sparkcmd': ['program', 'cmdline', 'sql', 'script_location', 'macros', 'tags', 'cluster_label', 'language', 'app_id', 'name', 'arguments', 'user_program_arguments'],\n+    'dbexportcmd': ['mode', 'hive_table', 'partition_spec', 'dbtap_id', 'db_table', 'db_update_mode', 'db_update_keys', 'export_dir', 'fields_terminated_by', 'tags', 'name'],\n+    'dbimportcmd': ['mode', 'hive_table', 'dbtap_id', 'db_table', 'where_clause', 'parallelism', 'extract_query', 'boundary_query', 'split_column', 'tags', 'name']\n+}\n+\n+class QuboleHook(BaseHook):\n+    def __init__(self, *args, **kwargs):\n+        conn = self.get_connection(kwargs['qubole_conn_id'])\n+        Qubole.configure(api_token=conn.password, api_url=conn.host)\n+        self.task_id = kwargs['task_id']\n+        self.dag_id = kwargs['dag'].dag_id\n+        self.kwargs = kwargs\n+        self.args = self.create_cmd_args()\n+        self.cls = COMMAND_CLASSES[self.kwargs['command_type']]\n+        self.cmd = None\n+\n+    def execute(self):\n+        args = self.cls.parse(self.args)\n+        self.cmd = self.cls.create(**args)\n+        logging.info(\"Qubole command created with Id: {0} and Status: {1}\".format(str(self.cmd.id), self.cmd.status))\n+\n+        while not Command.is_done(self.cmd.status):\n+            time.sleep(Qubole.poll_interval)\n+            self.cmd = self.cls.find(self.cmd.id)\n+            logging.info(\"Command Id: {0} and Status: {1}\".format(str(self.cmd.id), self.cmd.status))\n+\n+        if self.kwargs.has_key('fetch_logs') and self.kwargs['fetch_logs'] == True:\n+            logging.info(\"Logs for Command Id: {0}, {1}\".format(str(self.cmd.id), self.cmd.get_log()))\n+\n+        if self.cmd.status != 'done':\n+            raise AirflowException('Command Id: {0} failed with Status: {1}'.format(self.cmd.id, self.cmd.status))\n+\n+        return self.cmd.id\n+\n+    def kill(self, ti):\n+        \"\"\"\n+        Kill (cancel) a Qubole commmand\n+        :param ti: Task Instance of the dag, used to determine the Quboles command id\n+        :return: response from Qubole\n+        \"\"\"\n+        if self.cmd is None:\n+            cmd_id = ti.xcom_pull(key=\"return_value\", task_ids=self.task_id)\n+            self.cmd = self.cls.find(cmd_id)\n+        if self.cls and self.cmd:\n+            logging.info('Sending KILL signal to Qubole Command Id: {0}'.format(self.cmd.id))\n+            self.cmd.cancel()\n+\n+    def get_results(self, ti=None, fp=None, inline=True, delim=None, fetch=True):\n+        \"\"\"\n+        Get results (or just s3 locations) of a command from Qubole and save it into a file\n+        :param ti: Task Instance of the dag, used to determine the Quboles command id\n+        :param fp: Optional file pointer, will create one and return if None passed\n+        :param inline: True to download actual results, False to get s3 locations only\n+        :param delim: Replaces the CTL-A chars with the given delim, defalt to ',' if None given\n+        :param fetch: when inline is True, get results directly from s3 if results are large\n+        :return: file location containing actual results or s3 locations of results\n+        \"\"\"\n+        if fp is None:\n+            iso = datetime.datetime.utcnow().isoformat()\n+            logpath = os.path.expanduser(configuration.get('core', 'BASE_LOG_FOLDER'))\n+            resultpath = logpath + '/' + self.dag_id + '/' + self.task_id + '/results'\n+            configuration.mkdir_p(resultpath)\n+            fp = open(resultpath + '/' + iso, 'wb')\n+\n+        if self.cmd is None:\n+            cmd_id = ti.xcom_pull(key=\"return_value\", task_ids=self.task_id)\n+            self.cmd = self.cls.find(cmd_id)\n+\n+        self.cmd.get_results(fp, inline, delim, fetch)\n+        fp.flush()\n+        fp.close()\n+        return fp.name\n+\n+    def get_log(self, ti):\n+        \"\"\"\n+        Get Logs of a command from Qubole\n+        :param ti: Task Instance of the dag, used to determine the Quboles command id\n+        :return: command log as text\n+        \"\"\"\n+        if self.cmd is None:\n+            cmd_id = ti.xcom_pull(key=\"return_value\", task_ids=self.task_id)\n+        Command.get_log_id(self.cls, cmd_id)\n+\n+    def get_jobs_id(self, ti):\n+        \"\"\"\n+        Get jobs associated with a Qubole commands\n+        :param ti: Task Instance of the dag, used to determine the Quboles command id\n+        :return: Job informations assoiciated with command\n+        \"\"\"\n+        if self.cmd is None:\n+            cmd_id = ti.xcom_pull(key=\"return_value\", task_ids=self.task_id)\n+        Command.get_jobs_id(self.cls, cmd_id)\n+\n+    def create_cmd_args(self):\n+        args = []\n+        cmd_type = self.kwargs['command_type']\n+        inplace_args = None\n+\n+        for k,v in self.kwargs.items():\n+            if k in COMMAND_ARGS[cmd_type]:\n+                if k in HYPHEN_ARGS:\n+                    args.append(\"--{0}={1}\".format(k.replace('_', '-'),v))\n+                elif k in POSITIONAL_ARGS:\n+                    inplace_args = v",
    "path": "airflow/contrib/hooks/qubole_hook.py",
    "commit_id": "992a1309d7167295f58febac27461788bba52172",
    "original_commit_id": "841d47c0d00ae1453fe1f431d5968fb0104a50ba",
    "user": {
      "login": "yogesh2021",
      "id": 6372253,
      "node_id": "MDQ6VXNlcjYzNzIyNTM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6372253?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yogesh2021",
      "html_url": "https://github.com/yogesh2021",
      "followers_url": "https://api.github.com/users/yogesh2021/followers",
      "following_url": "https://api.github.com/users/yogesh2021/following{/other_user}",
      "gists_url": "https://api.github.com/users/yogesh2021/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yogesh2021/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yogesh2021/subscriptions",
      "organizations_url": "https://api.github.com/users/yogesh2021/orgs",
      "repos_url": "https://api.github.com/users/yogesh2021/repos",
      "events_url": "https://api.github.com/users/yogesh2021/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yogesh2021/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "' ' is not appended to inplace_args here and they are being split on ' ' below.\n",
    "created_at": "2016-01-17T12:53:53Z",
    "updated_at": "2016-01-18T10:57:35Z",
    "html_url": "https://github.com/apache/airflow/pull/808#discussion_r49945863",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/808",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/49945863"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/808#discussion_r49945863"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/808"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/49945863/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 140,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "NONE",
    "original_position": 140,
    "position": 140,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/49946150",
    "pull_request_review_id": null,
    "id": 49946150,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTQ2MTUw",
    "diff_hunk": "@@ -0,0 +1,153 @@\n+import os\n+import time\n+import logging\n+\n+from airflow.utils import AirflowException\n+from airflow.hooks.base_hook import BaseHook\n+from airflow import configuration\n+\n+from qds_sdk.qubole import Qubole\n+from qds_sdk.commands import Command, HiveCommand, PrestoCommand, HadoopCommand, PigCommand, ShellCommand, \\\n+    SparkCommand, DbTapQueryCommand, DbExportCommand, DbImportCommand\n+\n+\n+COMMAND_CLASSES = {\n+    \"hivecmd\": HiveCommand,\n+    \"prestocmd\": PrestoCommand,\n+    \"hadoopcmd\": HadoopCommand,\n+    \"shellcmd\": ShellCommand,\n+    \"pigcmd\":  PigCommand,\n+    \"sparkcmd\": SparkCommand,\n+    \"dbtapquerycmd\": DbTapQueryCommand,\n+    \"dbexportcmd\": DbExportCommand,\n+    \"dbimportcmd\": DbImportCommand\n+}\n+\n+HYPHEN_ARGS = ['cluster_label', 'app_id']\n+\n+POSITIONAL_ARGS = ['sub_command', 'parameters']\n+\n+COMMAND_ARGS = {\n+    \"hivecmd\": ['query', 'script_location', 'macros', 'tags', 'sample_size', 'cluster_label', 'name'],\n+    'prestocmd': ['query', 'script_location', 'macros', 'tags', 'cluster_label', 'name'],\n+    'hadoopcmd': ['sub_command', 'tags', 'cluster_label', 'name'],\n+    'shellcmd': ['script', 'script_location', 'files', 'archives', 'parameters', 'tags', 'cluster_label', 'name'],\n+    'pigcmd': ['script', 'script_location', 'parameters', 'tags', 'cluster_label', 'name'],\n+    'dbtapquerycmd': ['db_tap_id', 'query', 'macros', 'tags', 'name'],\n+    'sparkcmd': ['program', 'cmdline', 'sql', 'script_location', 'macros', 'tags', 'cluster_label', 'language', 'app_id', 'name', 'arguments', 'user_program_arguments'],\n+    'dbexportcmd': ['mode', 'hive_table', 'partition_spec', 'dbtap_id', 'db_table', 'db_update_mode', 'db_update_keys', 'export_dir', 'fields_terminated_by', 'tags', 'name'],\n+    'dbimportcmd': ['mode', 'hive_table', 'dbtap_id', 'db_table', 'where_clause', 'parallelism', 'extract_query', 'boundary_query', 'split_column', 'tags', 'name']\n+}\n+\n+class QuboleHook(BaseHook):\n+    def __init__(self, *args, **kwargs):\n+        conn = self.get_connection(kwargs['qubole_conn_id'])\n+        Qubole.configure(api_token=conn.password, api_url=conn.host)\n+        self.task_id = kwargs['task_id']\n+        self.dag_id = kwargs['dag'].dag_id\n+        self.kwargs = kwargs\n+        self.args = self.create_cmd_args()\n+        self.cls = COMMAND_CLASSES[self.kwargs['command_type']]\n+        self.cmd = None\n+\n+    def execute(self):\n+        args = self.cls.parse(self.args)\n+        self.cmd = self.cls.create(**args)\n+        logging.info(\"Qubole command created with Id: {0} and Status: {1}\".format(str(self.cmd.id), self.cmd.status))\n+\n+        while not Command.is_done(self.cmd.status):\n+            time.sleep(Qubole.poll_interval)\n+            self.cmd = self.cls.find(self.cmd.id)\n+            logging.info(\"Command Id: {0} and Status: {1}\".format(str(self.cmd.id), self.cmd.status))\n+\n+        if self.kwargs.has_key('fetch_logs') and self.kwargs['fetch_logs'] == True:\n+            logging.info(\"Logs for Command Id: {0}, {1}\".format(str(self.cmd.id), self.cmd.get_log()))\n+\n+        if self.cmd.status != 'done':\n+            raise AirflowException('Command Id: {0} failed with Status: {1}'.format(self.cmd.id, self.cmd.status))\n+\n+        return self.cmd.id\n+\n+    def kill(self, ti):\n+        \"\"\"\n+        Kill (cancel) a Qubole commmand\n+        :param ti: Task Instance of the dag, used to determine the Quboles command id\n+        :return: response from Qubole\n+        \"\"\"\n+        if self.cmd is None:\n+            cmd_id = ti.xcom_pull(key=\"return_value\", task_ids=self.task_id)\n+            self.cmd = self.cls.find(cmd_id)\n+        if self.cls and self.cmd:\n+            logging.info('Sending KILL signal to Qubole Command Id: {0}'.format(self.cmd.id))\n+            self.cmd.cancel()\n+\n+    def get_results(self, ti=None, fp=None, inline=True, delim=None, fetch=True):\n+        \"\"\"\n+        Get results (or just s3 locations) of a command from Qubole and save it into a file\n+        :param ti: Task Instance of the dag, used to determine the Quboles command id\n+        :param fp: Optional file pointer, will create one and return if None passed\n+        :param inline: True to download actual results, False to get s3 locations only\n+        :param delim: Replaces the CTL-A chars with the given delim, defalt to ',' if None given\n+        :param fetch: when inline is True, get results directly from s3 if results are large\n+        :return: file location containing actual results or s3 locations of results\n+        \"\"\"\n+        if fp is None:\n+            iso = datetime.datetime.utcnow().isoformat()\n+            logpath = os.path.expanduser(configuration.get('core', 'BASE_LOG_FOLDER'))\n+            resultpath = logpath + '/' + self.dag_id + '/' + self.task_id + '/results'\n+            configuration.mkdir_p(resultpath)\n+            fp = open(resultpath + '/' + iso, 'wb')",
    "path": "airflow/contrib/hooks/qubole_hook.py",
    "commit_id": "992a1309d7167295f58febac27461788bba52172",
    "original_commit_id": "841d47c0d00ae1453fe1f431d5968fb0104a50ba",
    "user": {
      "login": "yogesh2021",
      "id": 6372253,
      "node_id": "MDQ6VXNlcjYzNzIyNTM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6372253?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yogesh2021",
      "html_url": "https://github.com/yogesh2021",
      "followers_url": "https://api.github.com/users/yogesh2021/followers",
      "following_url": "https://api.github.com/users/yogesh2021/following{/other_user}",
      "gists_url": "https://api.github.com/users/yogesh2021/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yogesh2021/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yogesh2021/subscriptions",
      "organizations_url": "https://api.github.com/users/yogesh2021/orgs",
      "repos_url": "https://api.github.com/users/yogesh2021/repos",
      "events_url": "https://api.github.com/users/yogesh2021/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yogesh2021/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Isn't task_id sufficient to create unique path or is there any other purpose of iso?\n",
    "created_at": "2016-01-17T13:15:11Z",
    "updated_at": "2016-01-18T10:57:35Z",
    "html_url": "https://github.com/apache/airflow/pull/808#discussion_r49946150",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/808",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/49946150"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/808#discussion_r49946150"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/808"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/49946150/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 99,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "NONE",
    "original_position": 99,
    "position": 99,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/49946218",
    "pull_request_review_id": null,
    "id": 49946218,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTQ2MjE4",
    "diff_hunk": "@@ -0,0 +1,124 @@\n+from airflow.models import BaseOperator\n+from airflow.utils import apply_defaults\n+from airflow.contrib.hooks import QuboleHook\n+\n+\n+class QuboleOperator(BaseOperator):\n+    \"\"\"\n+    Executes commands on Qubole (https://qubole.com).\n+\n+    mandatory:\n+        :param command_type: type of command to be executed, e.g. hivecmd, shellcmd, hadoopcmd\n+    other:\n+        hivecmd:\n+            :param query: inline query statement\n+            :param script_location: s3 location containing query statement\n+            :param sample_size:\n+            :param macros: macro values which were used in query\n+            :param tags: array of tags to be assigned with the command\n+            :param cluster_label: cluster label on which to execute command\n+            :param name: name to be given to command\n+        prestocmd:\n+            :param query: inline query statement\n+            :param script_location: s3 location containing query statement\n+            :param macros: macro values which were used in query\n+            :param tags: array of tags to be assigned with the command\n+            :param cluster_label: cluster label on which to execute command\n+            :param name: name to be given to command\n+        hadoopcmd:\n+            :param sub_commnad: must be one these [\"jar\", \"s3distcp\", \"streaming\"] followed by 1 or more args\n+            :param tags: array of tags to be assigned with the command\n+            :param cluster_label: cluster label on which to execute command\n+            :param name: name to be given to command\n+        shellcmd:\n+            :param script: inline command with args\n+            :param script_location: s3 location containing query statement\n+            :param files: list of files in s3 bucket as file1,file2 format. These files will be copied into the working\n+                          directory where the qubole command is being executed.\n+            :param archives: list of archives in s3 bucket as archive1,archive2 format. These will be unarchived into\n+                             the working directory where the qubole command is being executed\n+            :param parameters: any extra args which need to be passed to script (only wwhen script_location is supplied)\n+            :param tags: array of tags to be assigned with the command\n+            :param cluster_label: cluster label on which to execute command\n+            :param name: name to be given to command\n+        pigcmd:\n+            :param script: inline query statement (latin_statements)\n+            :param script_location: s3 location containing pig query\n+            :param parameters: any extra args which need to be passed to script (only wwhen script_location is supplied\n+            :param tags: array of tags to be assigned with the command\n+            :param cluster_label: cluster label on which to execute command\n+            :param name: name to be given to command\n+        dbtapquerycmd:\n+            :param db_tap_id: data store ID of the target database, in Qubole.\n+            :param query: inline query statement\n+            :param macros: macro values which were used in query\n+            :param tags: array of tags to be assigned with the command\n+            :param name: name to be given to command\n+        sparkcmd:\n+            :param program: the complete Spark Program in Scala, SQL, Command, R, or Python\n+            :param cmdline: spark-submit command line, all required information must be specify in cmdline itself.\n+            :param sql: inline sql query\n+            :param script_location: s3 location containing query statement\n+            :param language: language of the program, Scala, SQL, Command, R, or Python\n+            :param app_id: ID of an Spark job server app\n+            :param arguments: spark-submit command line arguments\n+            :param user_program_arguments: arguments that the user program takes in\n+            :param macros: macro values which were used in query\n+            :param tags: array of tags to be assigned with the command\n+            :param cluster_label: cluster label on which to execute command\n+            :param name: name to be given to command\n+        dbexportcmd:\n+            :param mode: 1 (simple), 2 (advance)\n+            :param hive_table: Name of the hive table\n+            :param partition_spec: partition specification for Hive table.\n+            :param dbtap_id: data store ID of the target database, in Qubole.\n+            :param db_table: name of the db table\n+            :param db_update_mode: allowinsert or updateonly\n+            :param db_update_keys: columns used to determine the uniqueness of rows\n+            :param export_dir: HDFS/S3 location from which data will be exported.\n+            :param fields_terminated_by:\n+            :param tags: array of tags to be assigned with the command\n+            :param name: name to be given to command\n+        dbimportcmd:\n+            :param mode: 1 (simple), 2 (advance)\n+            :param hive_table: Name of the hive table\n+            :param dbtap_id: data store ID of the target database, in Qubole.\n+            :param db_table: name of the db table\n+            :param where_clause: where clause, if any\n+            :param parallelism: number of parallel db connections to use for extracting data\n+            :param extract_query: SQL query to extract data from db. $CONDITIONS must be part of the where clause.\n+            :param boundary_query: Query to be used get range of row IDs to be extracted\n+            :param split_column: Column used as row ID to split data into ranges (mode 2)\n+            :param tags: array of tags to be assigned with the command\n+            :param name: name to be given to command\n+\n+    \"\"\"\n+\n+    ui_color = '#3064A1'\n+    ui_fgcolor = '#fff'\n+\n+    @apply_defaults\n+    def __init__(self, qubole_conn_id=\"qubole_default\", *args, **kwargs):\n+        self.args = args\n+        self.kwargs = kwargs\n+        self.kwargs['qubole_conn_id'] = qubole_conn_id\n+        super(QuboleOperator, self).__init__(*args, **kwargs)\n+\n+    def execute(self, context):\n+        self.hook = QuboleHook(*self.args, **self.kwargs)\n+        return self.hook.execute()\n+\n+    def on_kill(self, ti):\n+        self.hook.kill(ti)\n+\n+    def get_results(self, ti=None, fp=None, inline=True, delim=None, fetch=True):\n+        return self.hook.get_results(ti, fp, inline, delim, fetch)\n+\n+    def get_log(self, ti):\n+        return self.hook(ti)",
    "path": "airflow/contrib/operators/qubole_operator.py",
    "commit_id": "992a1309d7167295f58febac27461788bba52172",
    "original_commit_id": "841d47c0d00ae1453fe1f431d5968fb0104a50ba",
    "user": {
      "login": "yogesh2021",
      "id": 6372253,
      "node_id": "MDQ6VXNlcjYzNzIyNTM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6372253?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yogesh2021",
      "html_url": "https://github.com/yogesh2021",
      "followers_url": "https://api.github.com/users/yogesh2021/followers",
      "following_url": "https://api.github.com/users/yogesh2021/following{/other_user}",
      "gists_url": "https://api.github.com/users/yogesh2021/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yogesh2021/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yogesh2021/subscriptions",
      "organizations_url": "https://api.github.com/users/yogesh2021/orgs",
      "repos_url": "https://api.github.com/users/yogesh2021/repos",
      "events_url": "https://api.github.com/users/yogesh2021/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yogesh2021/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "fix: self.hook.get_log(ti)\n",
    "created_at": "2016-01-17T13:22:46Z",
    "updated_at": "2016-01-18T10:57:35Z",
    "html_url": "https://github.com/apache/airflow/pull/808#discussion_r49946218",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/808",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/49946218"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/808#discussion_r49946218"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/808"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/49946218/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "NONE",
    "original_position": 118,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/49946222",
    "pull_request_review_id": null,
    "id": 49946222,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTQ2MjIy",
    "diff_hunk": "@@ -0,0 +1,124 @@\n+from airflow.models import BaseOperator\n+from airflow.utils import apply_defaults\n+from airflow.contrib.hooks import QuboleHook\n+\n+\n+class QuboleOperator(BaseOperator):\n+    \"\"\"\n+    Executes commands on Qubole (https://qubole.com).\n+\n+    mandatory:\n+        :param command_type: type of command to be executed, e.g. hivecmd, shellcmd, hadoopcmd\n+    other:\n+        hivecmd:\n+            :param query: inline query statement\n+            :param script_location: s3 location containing query statement\n+            :param sample_size:\n+            :param macros: macro values which were used in query\n+            :param tags: array of tags to be assigned with the command\n+            :param cluster_label: cluster label on which to execute command\n+            :param name: name to be given to command\n+        prestocmd:\n+            :param query: inline query statement\n+            :param script_location: s3 location containing query statement\n+            :param macros: macro values which were used in query\n+            :param tags: array of tags to be assigned with the command\n+            :param cluster_label: cluster label on which to execute command\n+            :param name: name to be given to command\n+        hadoopcmd:\n+            :param sub_commnad: must be one these [\"jar\", \"s3distcp\", \"streaming\"] followed by 1 or more args\n+            :param tags: array of tags to be assigned with the command\n+            :param cluster_label: cluster label on which to execute command\n+            :param name: name to be given to command\n+        shellcmd:\n+            :param script: inline command with args\n+            :param script_location: s3 location containing query statement\n+            :param files: list of files in s3 bucket as file1,file2 format. These files will be copied into the working\n+                          directory where the qubole command is being executed.\n+            :param archives: list of archives in s3 bucket as archive1,archive2 format. These will be unarchived into\n+                             the working directory where the qubole command is being executed\n+            :param parameters: any extra args which need to be passed to script (only wwhen script_location is supplied)\n+            :param tags: array of tags to be assigned with the command\n+            :param cluster_label: cluster label on which to execute command\n+            :param name: name to be given to command\n+        pigcmd:\n+            :param script: inline query statement (latin_statements)\n+            :param script_location: s3 location containing pig query\n+            :param parameters: any extra args which need to be passed to script (only wwhen script_location is supplied\n+            :param tags: array of tags to be assigned with the command\n+            :param cluster_label: cluster label on which to execute command\n+            :param name: name to be given to command\n+        dbtapquerycmd:\n+            :param db_tap_id: data store ID of the target database, in Qubole.\n+            :param query: inline query statement\n+            :param macros: macro values which were used in query\n+            :param tags: array of tags to be assigned with the command\n+            :param name: name to be given to command\n+        sparkcmd:\n+            :param program: the complete Spark Program in Scala, SQL, Command, R, or Python\n+            :param cmdline: spark-submit command line, all required information must be specify in cmdline itself.\n+            :param sql: inline sql query\n+            :param script_location: s3 location containing query statement\n+            :param language: language of the program, Scala, SQL, Command, R, or Python\n+            :param app_id: ID of an Spark job server app\n+            :param arguments: spark-submit command line arguments\n+            :param user_program_arguments: arguments that the user program takes in\n+            :param macros: macro values which were used in query\n+            :param tags: array of tags to be assigned with the command\n+            :param cluster_label: cluster label on which to execute command\n+            :param name: name to be given to command\n+        dbexportcmd:\n+            :param mode: 1 (simple), 2 (advance)\n+            :param hive_table: Name of the hive table\n+            :param partition_spec: partition specification for Hive table.\n+            :param dbtap_id: data store ID of the target database, in Qubole.\n+            :param db_table: name of the db table\n+            :param db_update_mode: allowinsert or updateonly\n+            :param db_update_keys: columns used to determine the uniqueness of rows\n+            :param export_dir: HDFS/S3 location from which data will be exported.\n+            :param fields_terminated_by:\n+            :param tags: array of tags to be assigned with the command\n+            :param name: name to be given to command\n+        dbimportcmd:\n+            :param mode: 1 (simple), 2 (advance)\n+            :param hive_table: Name of the hive table\n+            :param dbtap_id: data store ID of the target database, in Qubole.\n+            :param db_table: name of the db table\n+            :param where_clause: where clause, if any\n+            :param parallelism: number of parallel db connections to use for extracting data\n+            :param extract_query: SQL query to extract data from db. $CONDITIONS must be part of the where clause.\n+            :param boundary_query: Query to be used get range of row IDs to be extracted\n+            :param split_column: Column used as row ID to split data into ranges (mode 2)\n+            :param tags: array of tags to be assigned with the command\n+            :param name: name to be given to command\n+\n+    \"\"\"\n+\n+    ui_color = '#3064A1'\n+    ui_fgcolor = '#fff'\n+\n+    @apply_defaults\n+    def __init__(self, qubole_conn_id=\"qubole_default\", *args, **kwargs):\n+        self.args = args\n+        self.kwargs = kwargs\n+        self.kwargs['qubole_conn_id'] = qubole_conn_id\n+        super(QuboleOperator, self).__init__(*args, **kwargs)\n+\n+    def execute(self, context):\n+        self.hook = QuboleHook(*self.args, **self.kwargs)\n+        return self.hook.execute()\n+\n+    def on_kill(self, ti):\n+        self.hook.kill(ti)\n+\n+    def get_results(self, ti=None, fp=None, inline=True, delim=None, fetch=True):\n+        return self.hook.get_results(ti, fp, inline, delim, fetch)\n+\n+    def get_log(self, ti):\n+        return self.hook(ti)\n+\n+    def get_jobs_id(self, ti):\n+        return self.get_jobs_id(ti)",
    "path": "airflow/contrib/operators/qubole_operator.py",
    "commit_id": "992a1309d7167295f58febac27461788bba52172",
    "original_commit_id": "841d47c0d00ae1453fe1f431d5968fb0104a50ba",
    "user": {
      "login": "yogesh2021",
      "id": 6372253,
      "node_id": "MDQ6VXNlcjYzNzIyNTM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6372253?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yogesh2021",
      "html_url": "https://github.com/yogesh2021",
      "followers_url": "https://api.github.com/users/yogesh2021/followers",
      "following_url": "https://api.github.com/users/yogesh2021/following{/other_user}",
      "gists_url": "https://api.github.com/users/yogesh2021/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yogesh2021/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yogesh2021/subscriptions",
      "organizations_url": "https://api.github.com/users/yogesh2021/orgs",
      "repos_url": "https://api.github.com/users/yogesh2021/repos",
      "events_url": "https://api.github.com/users/yogesh2021/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yogesh2021/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "fix: self.hook.get_jobs_id(ti)\n",
    "created_at": "2016-01-17T13:23:20Z",
    "updated_at": "2016-01-18T10:57:35Z",
    "html_url": "https://github.com/apache/airflow/pull/808#discussion_r49946222",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/808",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/49946222"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/808#discussion_r49946222"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/808"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/49946222/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "NONE",
    "original_position": 121,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/49949971",
    "pull_request_review_id": null,
    "id": 49949971,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTQ5OTcx",
    "diff_hunk": "@@ -0,0 +1,153 @@\n+import os\n+import time\n+import logging\n+\n+from airflow.utils import AirflowException\n+from airflow.hooks.base_hook import BaseHook\n+from airflow import configuration\n+\n+from qds_sdk.qubole import Qubole\n+from qds_sdk.commands import Command, HiveCommand, PrestoCommand, HadoopCommand, PigCommand, ShellCommand, \\\n+    SparkCommand, DbTapQueryCommand, DbExportCommand, DbImportCommand\n+\n+\n+COMMAND_CLASSES = {\n+    \"hivecmd\": HiveCommand,\n+    \"prestocmd\": PrestoCommand,\n+    \"hadoopcmd\": HadoopCommand,\n+    \"shellcmd\": ShellCommand,\n+    \"pigcmd\":  PigCommand,\n+    \"sparkcmd\": SparkCommand,\n+    \"dbtapquerycmd\": DbTapQueryCommand,\n+    \"dbexportcmd\": DbExportCommand,\n+    \"dbimportcmd\": DbImportCommand\n+}\n+\n+HYPHEN_ARGS = ['cluster_label', 'app_id']\n+\n+POSITIONAL_ARGS = ['sub_command', 'parameters']\n+\n+COMMAND_ARGS = {\n+    \"hivecmd\": ['query', 'script_location', 'macros', 'tags', 'sample_size', 'cluster_label', 'name'],\n+    'prestocmd': ['query', 'script_location', 'macros', 'tags', 'cluster_label', 'name'],\n+    'hadoopcmd': ['sub_command', 'tags', 'cluster_label', 'name'],\n+    'shellcmd': ['script', 'script_location', 'files', 'archives', 'parameters', 'tags', 'cluster_label', 'name'],\n+    'pigcmd': ['script', 'script_location', 'parameters', 'tags', 'cluster_label', 'name'],\n+    'dbtapquerycmd': ['db_tap_id', 'query', 'macros', 'tags', 'name'],\n+    'sparkcmd': ['program', 'cmdline', 'sql', 'script_location', 'macros', 'tags', 'cluster_label', 'language', 'app_id', 'name', 'arguments', 'user_program_arguments'],\n+    'dbexportcmd': ['mode', 'hive_table', 'partition_spec', 'dbtap_id', 'db_table', 'db_update_mode', 'db_update_keys', 'export_dir', 'fields_terminated_by', 'tags', 'name'],\n+    'dbimportcmd': ['mode', 'hive_table', 'dbtap_id', 'db_table', 'where_clause', 'parallelism', 'extract_query', 'boundary_query', 'split_column', 'tags', 'name']\n+}\n+\n+class QuboleHook(BaseHook):\n+    def __init__(self, *args, **kwargs):\n+        conn = self.get_connection(kwargs['qubole_conn_id'])\n+        Qubole.configure(api_token=conn.password, api_url=conn.host)\n+        self.task_id = kwargs['task_id']\n+        self.dag_id = kwargs['dag'].dag_id\n+        self.kwargs = kwargs\n+        self.args = self.create_cmd_args()\n+        self.cls = COMMAND_CLASSES[self.kwargs['command_type']]\n+        self.cmd = None\n+\n+    def execute(self):\n+        args = self.cls.parse(self.args)\n+        self.cmd = self.cls.create(**args)\n+        logging.info(\"Qubole command created with Id: {0} and Status: {1}\".format(str(self.cmd.id), self.cmd.status))\n+\n+        while not Command.is_done(self.cmd.status):\n+            time.sleep(Qubole.poll_interval)\n+            self.cmd = self.cls.find(self.cmd.id)\n+            logging.info(\"Command Id: {0} and Status: {1}\".format(str(self.cmd.id), self.cmd.status))\n+\n+        if self.kwargs.has_key('fetch_logs') and self.kwargs['fetch_logs'] == True:\n+            logging.info(\"Logs for Command Id: {0}, {1}\".format(str(self.cmd.id), self.cmd.get_log()))\n+\n+        if self.cmd.status != 'done':\n+            raise AirflowException('Command Id: {0} failed with Status: {1}'.format(self.cmd.id, self.cmd.status))\n+\n+        return self.cmd.id\n+\n+    def kill(self, ti):\n+        \"\"\"\n+        Kill (cancel) a Qubole commmand\n+        :param ti: Task Instance of the dag, used to determine the Quboles command id\n+        :return: response from Qubole\n+        \"\"\"\n+        if self.cmd is None:\n+            cmd_id = ti.xcom_pull(key=\"return_value\", task_ids=self.task_id)\n+            self.cmd = self.cls.find(cmd_id)\n+        if self.cls and self.cmd:\n+            logging.info('Sending KILL signal to Qubole Command Id: {0}'.format(self.cmd.id))\n+            self.cmd.cancel()\n+\n+    def get_results(self, ti=None, fp=None, inline=True, delim=None, fetch=True):\n+        \"\"\"\n+        Get results (or just s3 locations) of a command from Qubole and save it into a file\n+        :param ti: Task Instance of the dag, used to determine the Quboles command id\n+        :param fp: Optional file pointer, will create one and return if None passed\n+        :param inline: True to download actual results, False to get s3 locations only\n+        :param delim: Replaces the CTL-A chars with the given delim, defalt to ',' if None given\n+        :param fetch: when inline is True, get results directly from s3 if results are large\n+        :return: file location containing actual results or s3 locations of results\n+        \"\"\"\n+        if fp is None:\n+            iso = datetime.datetime.utcnow().isoformat()\n+            logpath = os.path.expanduser(configuration.get('core', 'BASE_LOG_FOLDER'))\n+            resultpath = logpath + '/' + self.dag_id + '/' + self.task_id + '/results'\n+            configuration.mkdir_p(resultpath)\n+            fp = open(resultpath + '/' + iso, 'wb')",
    "path": "airflow/contrib/hooks/qubole_hook.py",
    "commit_id": "992a1309d7167295f58febac27461788bba52172",
    "original_commit_id": "841d47c0d00ae1453fe1f431d5968fb0104a50ba",
    "user": {
      "login": "yogesh2021",
      "id": 6372253,
      "node_id": "MDQ6VXNlcjYzNzIyNTM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6372253?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yogesh2021",
      "html_url": "https://github.com/yogesh2021",
      "followers_url": "https://api.github.com/users/yogesh2021/followers",
      "following_url": "https://api.github.com/users/yogesh2021/following{/other_user}",
      "gists_url": "https://api.github.com/users/yogesh2021/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yogesh2021/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yogesh2021/subscriptions",
      "organizations_url": "https://api.github.com/users/yogesh2021/orgs",
      "repos_url": "https://api.github.com/users/yogesh2021/repos",
      "events_url": "https://api.github.com/users/yogesh2021/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yogesh2021/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Yes, task_id will not be unique. `run_id` might be better option than timestamp because if number of dag runs are too much then it will be difficult for user to identify the correct results folder\n",
    "created_at": "2016-01-17T18:17:54Z",
    "updated_at": "2016-01-18T10:57:35Z",
    "html_url": "https://github.com/apache/airflow/pull/808#discussion_r49949971",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/808",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/49949971"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/808#discussion_r49949971"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/808"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/49949971/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 99,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "NONE",
    "original_position": 99,
    "position": 99,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/49950804",
    "pull_request_review_id": null,
    "id": 49950804,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTUwODA0",
    "diff_hunk": "@@ -0,0 +1,182 @@\n+from airflow import DAG\n+from airflow.operators import DummyOperator, PythonOperator, BranchPythonOperator\n+from airflow.contrib.operators import QuboleOperator\n+from datetime import datetime, timedelta\n+import filecmp\n+import random\n+\n+seven_days_ago = datetime.combine(datetime.today() - timedelta(7),\n+                                  datetime.min.time())\n+\n+default_args = {\n+    'owner': 'airflow',\n+    'depends_on_past': False,\n+    'start_date': seven_days_ago,\n+    'email': ['airflow@airflow.com'],\n+    'email_on_failure': False,\n+    'email_on_retry': False\n+}\n+\n+dag = DAG('example_qubole_operator', default_args=default_args)\n+\n+def compare_result(ds, **kwargs):",
    "path": "airflow/contrib/example_dags/example_qubole_operator.py",
    "commit_id": "992a1309d7167295f58febac27461788bba52172",
    "original_commit_id": "841d47c0d00ae1453fe1f431d5968fb0104a50ba",
    "user": {
      "login": "yogesh2021",
      "id": 6372253,
      "node_id": "MDQ6VXNlcjYzNzIyNTM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6372253?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yogesh2021",
      "html_url": "https://github.com/yogesh2021",
      "followers_url": "https://api.github.com/users/yogesh2021/followers",
      "following_url": "https://api.github.com/users/yogesh2021/following{/other_user}",
      "gists_url": "https://api.github.com/users/yogesh2021/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yogesh2021/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yogesh2021/subscriptions",
      "organizations_url": "https://api.github.com/users/yogesh2021/orgs",
      "repos_url": "https://api.github.com/users/yogesh2021/repos",
      "events_url": "https://api.github.com/users/yogesh2021/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yogesh2021/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "This implementation looks fundamentally incorrect. Either the method should use xcom_pull to fetch command ids of `t1` and `t2` and pass fetched command ids to `get_results` or we should not pass any parameter to this method as it should be able to fetch command_id of it's own task/operation[Mentioned this below as well in `get_log` method of `qubole_hook`]. I would prefer second option.\n",
    "created_at": "2016-01-17T19:22:58Z",
    "updated_at": "2016-01-18T10:57:35Z",
    "html_url": "https://github.com/apache/airflow/pull/808#discussion_r49950804",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/808",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/49950804"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/808#discussion_r49950804"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/808"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/49950804/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 22,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "NONE",
    "original_position": 22,
    "position": 22,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/49983996",
    "pull_request_review_id": null,
    "id": 49983996,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTgzOTk2",
    "diff_hunk": "@@ -0,0 +1,153 @@\n+import os\n+import time\n+import logging\n+\n+from airflow.utils import AirflowException\n+from airflow.hooks.base_hook import BaseHook\n+from airflow import configuration\n+\n+from qds_sdk.qubole import Qubole\n+from qds_sdk.commands import Command, HiveCommand, PrestoCommand, HadoopCommand, PigCommand, ShellCommand, \\\n+    SparkCommand, DbTapQueryCommand, DbExportCommand, DbImportCommand\n+\n+\n+COMMAND_CLASSES = {\n+    \"hivecmd\": HiveCommand,\n+    \"prestocmd\": PrestoCommand,\n+    \"hadoopcmd\": HadoopCommand,\n+    \"shellcmd\": ShellCommand,\n+    \"pigcmd\":  PigCommand,\n+    \"sparkcmd\": SparkCommand,\n+    \"dbtapquerycmd\": DbTapQueryCommand,\n+    \"dbexportcmd\": DbExportCommand,\n+    \"dbimportcmd\": DbImportCommand\n+}\n+\n+HYPHEN_ARGS = ['cluster_label', 'app_id']\n+\n+POSITIONAL_ARGS = ['sub_command', 'parameters']\n+\n+COMMAND_ARGS = {\n+    \"hivecmd\": ['query', 'script_location', 'macros', 'tags', 'sample_size', 'cluster_label', 'name'],\n+    'prestocmd': ['query', 'script_location', 'macros', 'tags', 'cluster_label', 'name'],\n+    'hadoopcmd': ['sub_command', 'tags', 'cluster_label', 'name'],\n+    'shellcmd': ['script', 'script_location', 'files', 'archives', 'parameters', 'tags', 'cluster_label', 'name'],\n+    'pigcmd': ['script', 'script_location', 'parameters', 'tags', 'cluster_label', 'name'],\n+    'dbtapquerycmd': ['db_tap_id', 'query', 'macros', 'tags', 'name'],\n+    'sparkcmd': ['program', 'cmdline', 'sql', 'script_location', 'macros', 'tags', 'cluster_label', 'language', 'app_id', 'name', 'arguments', 'user_program_arguments'],\n+    'dbexportcmd': ['mode', 'hive_table', 'partition_spec', 'dbtap_id', 'db_table', 'db_update_mode', 'db_update_keys', 'export_dir', 'fields_terminated_by', 'tags', 'name'],\n+    'dbimportcmd': ['mode', 'hive_table', 'dbtap_id', 'db_table', 'where_clause', 'parallelism', 'extract_query', 'boundary_query', 'split_column', 'tags', 'name']\n+}\n+\n+class QuboleHook(BaseHook):\n+    def __init__(self, *args, **kwargs):\n+        conn = self.get_connection(kwargs['qubole_conn_id'])\n+        Qubole.configure(api_token=conn.password, api_url=conn.host)\n+        self.task_id = kwargs['task_id']\n+        self.dag_id = kwargs['dag'].dag_id\n+        self.kwargs = kwargs\n+        self.args = self.create_cmd_args()\n+        self.cls = COMMAND_CLASSES[self.kwargs['command_type']]\n+        self.cmd = None\n+\n+    def execute(self):\n+        args = self.cls.parse(self.args)\n+        self.cmd = self.cls.create(**args)\n+        logging.info(\"Qubole command created with Id: {0} and Status: {1}\".format(str(self.cmd.id), self.cmd.status))\n+\n+        while not Command.is_done(self.cmd.status):\n+            time.sleep(Qubole.poll_interval)\n+            self.cmd = self.cls.find(self.cmd.id)\n+            logging.info(\"Command Id: {0} and Status: {1}\".format(str(self.cmd.id), self.cmd.status))\n+\n+        if self.kwargs.has_key('fetch_logs') and self.kwargs['fetch_logs'] == True:\n+            logging.info(\"Logs for Command Id: {0}, {1}\".format(str(self.cmd.id), self.cmd.get_log()))\n+\n+        if self.cmd.status != 'done':\n+            raise AirflowException('Command Id: {0} failed with Status: {1}'.format(self.cmd.id, self.cmd.status))\n+\n+        return self.cmd.id\n+\n+    def kill(self, ti):\n+        \"\"\"\n+        Kill (cancel) a Qubole commmand\n+        :param ti: Task Instance of the dag, used to determine the Quboles command id\n+        :return: response from Qubole\n+        \"\"\"\n+        if self.cmd is None:\n+            cmd_id = ti.xcom_pull(key=\"return_value\", task_ids=self.task_id)\n+            self.cmd = self.cls.find(cmd_id)\n+        if self.cls and self.cmd:\n+            logging.info('Sending KILL signal to Qubole Command Id: {0}'.format(self.cmd.id))\n+            self.cmd.cancel()\n+\n+    def get_results(self, ti=None, fp=None, inline=True, delim=None, fetch=True):\n+        \"\"\"\n+        Get results (or just s3 locations) of a command from Qubole and save it into a file\n+        :param ti: Task Instance of the dag, used to determine the Quboles command id\n+        :param fp: Optional file pointer, will create one and return if None passed\n+        :param inline: True to download actual results, False to get s3 locations only\n+        :param delim: Replaces the CTL-A chars with the given delim, defalt to ',' if None given\n+        :param fetch: when inline is True, get results directly from s3 if results are large\n+        :return: file location containing actual results or s3 locations of results\n+        \"\"\"\n+        if fp is None:\n+            iso = datetime.datetime.utcnow().isoformat()\n+            logpath = os.path.expanduser(configuration.get('core', 'BASE_LOG_FOLDER'))\n+            resultpath = logpath + '/' + self.dag_id + '/' + self.task_id + '/results'\n+            configuration.mkdir_p(resultpath)\n+            fp = open(resultpath + '/' + iso, 'wb')\n+\n+        if self.cmd is None:\n+            cmd_id = ti.xcom_pull(key=\"return_value\", task_ids=self.task_id)\n+            self.cmd = self.cls.find(cmd_id)\n+\n+        self.cmd.get_results(fp, inline, delim, fetch)\n+        fp.flush()\n+        fp.close()\n+        return fp.name\n+\n+    def get_log(self, ti):\n+        \"\"\"\n+        Get Logs of a command from Qubole\n+        :param ti: Task Instance of the dag, used to determine the Quboles command id\n+        :return: command log as text\n+        \"\"\"\n+        if self.cmd is None:\n+            cmd_id = ti.xcom_pull(key=\"return_value\", task_ids=self.task_id)\n+        Command.get_log_id(self.cls, cmd_id)\n+\n+    def get_jobs_id(self, ti):\n+        \"\"\"\n+        Get jobs associated with a Qubole commands\n+        :param ti: Task Instance of the dag, used to determine the Quboles command id\n+        :return: Job informations assoiciated with command\n+        \"\"\"\n+        if self.cmd is None:\n+            cmd_id = ti.xcom_pull(key=\"return_value\", task_ids=self.task_id)\n+        Command.get_jobs_id(self.cls, cmd_id)\n+\n+    def create_cmd_args(self):\n+        args = []\n+        cmd_type = self.kwargs['command_type']\n+        inplace_args = None\n+\n+        for k,v in self.kwargs.items():\n+            if k in COMMAND_ARGS[cmd_type]:\n+                if k in HYPHEN_ARGS:\n+                    args.append(\"--{0}={1}\".format(k.replace('_', '-'),v))\n+                elif k in POSITIONAL_ARGS:\n+                    inplace_args = v",
    "path": "airflow/contrib/hooks/qubole_hook.py",
    "commit_id": "992a1309d7167295f58febac27461788bba52172",
    "original_commit_id": "841d47c0d00ae1453fe1f431d5968fb0104a50ba",
    "user": {
      "login": "msumit",
      "id": 2018407,
      "node_id": "MDQ6VXNlcjIwMTg0MDc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2018407?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/msumit",
      "html_url": "https://github.com/msumit",
      "followers_url": "https://api.github.com/users/msumit/followers",
      "following_url": "https://api.github.com/users/msumit/following{/other_user}",
      "gists_url": "https://api.github.com/users/msumit/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/msumit/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/msumit/subscriptions",
      "organizations_url": "https://api.github.com/users/msumit/orgs",
      "repos_url": "https://api.github.com/users/msumit/repos",
      "events_url": "https://api.github.com/users/msumit/events{/privacy}",
      "received_events_url": "https://api.github.com/users/msumit/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "no, I want them to be split by space only. \n",
    "created_at": "2016-01-18T10:47:13Z",
    "updated_at": "2016-01-18T10:57:35Z",
    "html_url": "https://github.com/apache/airflow/pull/808#discussion_r49983996",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/808",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/49983996"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/808#discussion_r49983996"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/808"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/49983996/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 140,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 140,
    "position": 140,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/49984252",
    "pull_request_review_id": null,
    "id": 49984252,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTg0MjUy",
    "diff_hunk": "@@ -0,0 +1,153 @@\n+import os\n+import time\n+import logging\n+\n+from airflow.utils import AirflowException\n+from airflow.hooks.base_hook import BaseHook\n+from airflow import configuration\n+\n+from qds_sdk.qubole import Qubole\n+from qds_sdk.commands import Command, HiveCommand, PrestoCommand, HadoopCommand, PigCommand, ShellCommand, \\\n+    SparkCommand, DbTapQueryCommand, DbExportCommand, DbImportCommand\n+\n+\n+COMMAND_CLASSES = {\n+    \"hivecmd\": HiveCommand,\n+    \"prestocmd\": PrestoCommand,\n+    \"hadoopcmd\": HadoopCommand,\n+    \"shellcmd\": ShellCommand,\n+    \"pigcmd\":  PigCommand,\n+    \"sparkcmd\": SparkCommand,\n+    \"dbtapquerycmd\": DbTapQueryCommand,\n+    \"dbexportcmd\": DbExportCommand,\n+    \"dbimportcmd\": DbImportCommand\n+}\n+\n+HYPHEN_ARGS = ['cluster_label', 'app_id']\n+\n+POSITIONAL_ARGS = ['sub_command', 'parameters']\n+\n+COMMAND_ARGS = {\n+    \"hivecmd\": ['query', 'script_location', 'macros', 'tags', 'sample_size', 'cluster_label', 'name'],\n+    'prestocmd': ['query', 'script_location', 'macros', 'tags', 'cluster_label', 'name'],\n+    'hadoopcmd': ['sub_command', 'tags', 'cluster_label', 'name'],\n+    'shellcmd': ['script', 'script_location', 'files', 'archives', 'parameters', 'tags', 'cluster_label', 'name'],\n+    'pigcmd': ['script', 'script_location', 'parameters', 'tags', 'cluster_label', 'name'],\n+    'dbtapquerycmd': ['db_tap_id', 'query', 'macros', 'tags', 'name'],\n+    'sparkcmd': ['program', 'cmdline', 'sql', 'script_location', 'macros', 'tags', 'cluster_label', 'language', 'app_id', 'name', 'arguments', 'user_program_arguments'],\n+    'dbexportcmd': ['mode', 'hive_table', 'partition_spec', 'dbtap_id', 'db_table', 'db_update_mode', 'db_update_keys', 'export_dir', 'fields_terminated_by', 'tags', 'name'],\n+    'dbimportcmd': ['mode', 'hive_table', 'dbtap_id', 'db_table', 'where_clause', 'parallelism', 'extract_query', 'boundary_query', 'split_column', 'tags', 'name']\n+}\n+\n+class QuboleHook(BaseHook):\n+    def __init__(self, *args, **kwargs):\n+        conn = self.get_connection(kwargs['qubole_conn_id'])\n+        Qubole.configure(api_token=conn.password, api_url=conn.host)\n+        self.task_id = kwargs['task_id']\n+        self.dag_id = kwargs['dag'].dag_id\n+        self.kwargs = kwargs\n+        self.args = self.create_cmd_args()\n+        self.cls = COMMAND_CLASSES[self.kwargs['command_type']]\n+        self.cmd = None\n+\n+    def execute(self):\n+        args = self.cls.parse(self.args)\n+        self.cmd = self.cls.create(**args)\n+        logging.info(\"Qubole command created with Id: {0} and Status: {1}\".format(str(self.cmd.id), self.cmd.status))\n+\n+        while not Command.is_done(self.cmd.status):\n+            time.sleep(Qubole.poll_interval)\n+            self.cmd = self.cls.find(self.cmd.id)\n+            logging.info(\"Command Id: {0} and Status: {1}\".format(str(self.cmd.id), self.cmd.status))\n+\n+        if self.kwargs.has_key('fetch_logs') and self.kwargs['fetch_logs'] == True:\n+            logging.info(\"Logs for Command Id: {0}, {1}\".format(str(self.cmd.id), self.cmd.get_log()))\n+\n+        if self.cmd.status != 'done':\n+            raise AirflowException('Command Id: {0} failed with Status: {1}'.format(self.cmd.id, self.cmd.status))\n+\n+        return self.cmd.id\n+\n+    def kill(self, ti):\n+        \"\"\"\n+        Kill (cancel) a Qubole commmand\n+        :param ti: Task Instance of the dag, used to determine the Quboles command id\n+        :return: response from Qubole\n+        \"\"\"\n+        if self.cmd is None:\n+            cmd_id = ti.xcom_pull(key=\"return_value\", task_ids=self.task_id)\n+            self.cmd = self.cls.find(cmd_id)\n+        if self.cls and self.cmd:\n+            logging.info('Sending KILL signal to Qubole Command Id: {0}'.format(self.cmd.id))\n+            self.cmd.cancel()\n+\n+    def get_results(self, ti=None, fp=None, inline=True, delim=None, fetch=True):\n+        \"\"\"\n+        Get results (or just s3 locations) of a command from Qubole and save it into a file\n+        :param ti: Task Instance of the dag, used to determine the Quboles command id\n+        :param fp: Optional file pointer, will create one and return if None passed\n+        :param inline: True to download actual results, False to get s3 locations only\n+        :param delim: Replaces the CTL-A chars with the given delim, defalt to ',' if None given\n+        :param fetch: when inline is True, get results directly from s3 if results are large\n+        :return: file location containing actual results or s3 locations of results\n+        \"\"\"\n+        if fp is None:\n+            iso = datetime.datetime.utcnow().isoformat()\n+            logpath = os.path.expanduser(configuration.get('core', 'BASE_LOG_FOLDER'))\n+            resultpath = logpath + '/' + self.dag_id + '/' + self.task_id + '/results'\n+            configuration.mkdir_p(resultpath)\n+            fp = open(resultpath + '/' + iso, 'wb')\n+\n+        if self.cmd is None:\n+            cmd_id = ti.xcom_pull(key=\"return_value\", task_ids=self.task_id)\n+            self.cmd = self.cls.find(cmd_id)\n+\n+        self.cmd.get_results(fp, inline, delim, fetch)\n+        fp.flush()\n+        fp.close()\n+        return fp.name\n+\n+    def get_log(self, ti):",
    "path": "airflow/contrib/hooks/qubole_hook.py",
    "commit_id": "992a1309d7167295f58febac27461788bba52172",
    "original_commit_id": "841d47c0d00ae1453fe1f431d5968fb0104a50ba",
    "user": {
      "login": "msumit",
      "id": 2018407,
      "node_id": "MDQ6VXNlcjIwMTg0MDc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2018407?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/msumit",
      "html_url": "https://github.com/msumit",
      "followers_url": "https://api.github.com/users/msumit/followers",
      "following_url": "https://api.github.com/users/msumit/following{/other_user}",
      "gists_url": "https://api.github.com/users/msumit/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/msumit/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/msumit/subscriptions",
      "organizations_url": "https://api.github.com/users/msumit/orgs",
      "repos_url": "https://api.github.com/users/msumit/repos",
      "events_url": "https://api.github.com/users/msumit/events{/privacy}",
      "received_events_url": "https://api.github.com/users/msumit/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "We need some persistent way to store `cmd_id`, as callee tasks might not being processed by the same worker process, hence any such instance variable wont be available.  \n",
    "created_at": "2016-01-18T10:49:43Z",
    "updated_at": "2016-01-18T10:57:35Z",
    "html_url": "https://github.com/apache/airflow/pull/808#discussion_r49984252",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/808",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/49984252"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/808#discussion_r49984252"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/808"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/49984252/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 110,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 110,
    "position": 110,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/49984457",
    "pull_request_review_id": null,
    "id": 49984457,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTg0NDU3",
    "diff_hunk": "@@ -0,0 +1,182 @@\n+from airflow import DAG\n+from airflow.operators import DummyOperator, PythonOperator, BranchPythonOperator\n+from airflow.contrib.operators import QuboleOperator\n+from datetime import datetime, timedelta\n+import filecmp\n+import random\n+\n+seven_days_ago = datetime.combine(datetime.today() - timedelta(7),\n+                                  datetime.min.time())\n+\n+default_args = {\n+    'owner': 'airflow',\n+    'depends_on_past': False,\n+    'start_date': seven_days_ago,\n+    'email': ['airflow@airflow.com'],\n+    'email_on_failure': False,\n+    'email_on_retry': False\n+}\n+\n+dag = DAG('example_qubole_operator', default_args=default_args)\n+\n+def compare_result(ds, **kwargs):",
    "path": "airflow/contrib/example_dags/example_qubole_operator.py",
    "commit_id": "992a1309d7167295f58febac27461788bba52172",
    "original_commit_id": "841d47c0d00ae1453fe1f431d5968fb0104a50ba",
    "user": {
      "login": "msumit",
      "id": 2018407,
      "node_id": "MDQ6VXNlcjIwMTg0MDc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2018407?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/msumit",
      "html_url": "https://github.com/msumit",
      "followers_url": "https://api.github.com/users/msumit/followers",
      "following_url": "https://api.github.com/users/msumit/following{/other_user}",
      "gists_url": "https://api.github.com/users/msumit/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/msumit/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/msumit/subscriptions",
      "organizations_url": "https://api.github.com/users/msumit/orgs",
      "repos_url": "https://api.github.com/users/msumit/repos",
      "events_url": "https://api.github.com/users/msumit/events{/privacy}",
      "received_events_url": "https://api.github.com/users/msumit/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "As I explained above that task instances wont be available for other worker processes, hence we've to use xcom (or something persistent storage) to save cmd_ids. Not sure if its possible in airflow to pickle task runs and use them later.\n",
    "created_at": "2016-01-18T10:51:48Z",
    "updated_at": "2016-01-18T10:57:35Z",
    "html_url": "https://github.com/apache/airflow/pull/808#discussion_r49984457",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/808",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/49984457"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/808#discussion_r49984457"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/808"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/49984457/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 22,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 22,
    "position": 22,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/49984558",
    "pull_request_review_id": null,
    "id": 49984558,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTg0NTU4",
    "diff_hunk": "@@ -0,0 +1,153 @@\n+import os\n+import time\n+import logging\n+\n+from airflow.utils import AirflowException\n+from airflow.hooks.base_hook import BaseHook\n+from airflow import configuration\n+\n+from qds_sdk.qubole import Qubole\n+from qds_sdk.commands import Command, HiveCommand, PrestoCommand, HadoopCommand, PigCommand, ShellCommand, \\\n+    SparkCommand, DbTapQueryCommand, DbExportCommand, DbImportCommand\n+\n+\n+COMMAND_CLASSES = {\n+    \"hivecmd\": HiveCommand,\n+    \"prestocmd\": PrestoCommand,\n+    \"hadoopcmd\": HadoopCommand,\n+    \"shellcmd\": ShellCommand,\n+    \"pigcmd\":  PigCommand,\n+    \"sparkcmd\": SparkCommand,\n+    \"dbtapquerycmd\": DbTapQueryCommand,\n+    \"dbexportcmd\": DbExportCommand,\n+    \"dbimportcmd\": DbImportCommand\n+}\n+\n+HYPHEN_ARGS = ['cluster_label', 'app_id']\n+\n+POSITIONAL_ARGS = ['sub_command', 'parameters']\n+\n+COMMAND_ARGS = {\n+    \"hivecmd\": ['query', 'script_location', 'macros', 'tags', 'sample_size', 'cluster_label', 'name'],\n+    'prestocmd': ['query', 'script_location', 'macros', 'tags', 'cluster_label', 'name'],\n+    'hadoopcmd': ['sub_command', 'tags', 'cluster_label', 'name'],\n+    'shellcmd': ['script', 'script_location', 'files', 'archives', 'parameters', 'tags', 'cluster_label', 'name'],\n+    'pigcmd': ['script', 'script_location', 'parameters', 'tags', 'cluster_label', 'name'],\n+    'dbtapquerycmd': ['db_tap_id', 'query', 'macros', 'tags', 'name'],\n+    'sparkcmd': ['program', 'cmdline', 'sql', 'script_location', 'macros', 'tags', 'cluster_label', 'language', 'app_id', 'name', 'arguments', 'user_program_arguments'],\n+    'dbexportcmd': ['mode', 'hive_table', 'partition_spec', 'dbtap_id', 'db_table', 'db_update_mode', 'db_update_keys', 'export_dir', 'fields_terminated_by', 'tags', 'name'],\n+    'dbimportcmd': ['mode', 'hive_table', 'dbtap_id', 'db_table', 'where_clause', 'parallelism', 'extract_query', 'boundary_query', 'split_column', 'tags', 'name']\n+}\n+\n+class QuboleHook(BaseHook):\n+    def __init__(self, *args, **kwargs):\n+        conn = self.get_connection(kwargs['qubole_conn_id'])\n+        Qubole.configure(api_token=conn.password, api_url=conn.host)\n+        self.task_id = kwargs['task_id']\n+        self.dag_id = kwargs['dag'].dag_id\n+        self.kwargs = kwargs\n+        self.args = self.create_cmd_args()\n+        self.cls = COMMAND_CLASSES[self.kwargs['command_type']]\n+        self.cmd = None\n+\n+    def execute(self):\n+        args = self.cls.parse(self.args)\n+        self.cmd = self.cls.create(**args)\n+        logging.info(\"Qubole command created with Id: {0} and Status: {1}\".format(str(self.cmd.id), self.cmd.status))\n+\n+        while not Command.is_done(self.cmd.status):\n+            time.sleep(Qubole.poll_interval)\n+            self.cmd = self.cls.find(self.cmd.id)\n+            logging.info(\"Command Id: {0} and Status: {1}\".format(str(self.cmd.id), self.cmd.status))\n+\n+        if self.kwargs.has_key('fetch_logs') and self.kwargs['fetch_logs'] == True:\n+            logging.info(\"Logs for Command Id: {0}, {1}\".format(str(self.cmd.id), self.cmd.get_log()))\n+\n+        if self.cmd.status != 'done':\n+            raise AirflowException('Command Id: {0} failed with Status: {1}'.format(self.cmd.id, self.cmd.status))\n+\n+        return self.cmd.id\n+\n+    def kill(self, ti):\n+        \"\"\"\n+        Kill (cancel) a Qubole commmand\n+        :param ti: Task Instance of the dag, used to determine the Quboles command id\n+        :return: response from Qubole\n+        \"\"\"\n+        if self.cmd is None:\n+            cmd_id = ti.xcom_pull(key=\"return_value\", task_ids=self.task_id)\n+            self.cmd = self.cls.find(cmd_id)\n+        if self.cls and self.cmd:\n+            logging.info('Sending KILL signal to Qubole Command Id: {0}'.format(self.cmd.id))\n+            self.cmd.cancel()\n+\n+    def get_results(self, ti=None, fp=None, inline=True, delim=None, fetch=True):\n+        \"\"\"\n+        Get results (or just s3 locations) of a command from Qubole and save it into a file\n+        :param ti: Task Instance of the dag, used to determine the Quboles command id\n+        :param fp: Optional file pointer, will create one and return if None passed\n+        :param inline: True to download actual results, False to get s3 locations only\n+        :param delim: Replaces the CTL-A chars with the given delim, defalt to ',' if None given\n+        :param fetch: when inline is True, get results directly from s3 if results are large\n+        :return: file location containing actual results or s3 locations of results\n+        \"\"\"\n+        if fp is None:\n+            iso = datetime.datetime.utcnow().isoformat()\n+            logpath = os.path.expanduser(configuration.get('core', 'BASE_LOG_FOLDER'))\n+            resultpath = logpath + '/' + self.dag_id + '/' + self.task_id + '/results'\n+            configuration.mkdir_p(resultpath)\n+            fp = open(resultpath + '/' + iso, 'wb')",
    "path": "airflow/contrib/hooks/qubole_hook.py",
    "commit_id": "992a1309d7167295f58febac27461788bba52172",
    "original_commit_id": "841d47c0d00ae1453fe1f431d5968fb0104a50ba",
    "user": {
      "login": "msumit",
      "id": 2018407,
      "node_id": "MDQ6VXNlcjIwMTg0MDc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2018407?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/msumit",
      "html_url": "https://github.com/msumit",
      "followers_url": "https://api.github.com/users/msumit/followers",
      "following_url": "https://api.github.com/users/msumit/following{/other_user}",
      "gists_url": "https://api.github.com/users/msumit/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/msumit/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/msumit/subscriptions",
      "organizations_url": "https://api.github.com/users/msumit/orgs",
      "repos_url": "https://api.github.com/users/msumit/repos",
      "events_url": "https://api.github.com/users/msumit/events{/privacy}",
      "received_events_url": "https://api.github.com/users/msumit/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "yeah, we want them not to be uniq, as a task's results can be called multiple times in diff format, i.e. plaintext, s3 url etc.\n",
    "created_at": "2016-01-18T10:52:51Z",
    "updated_at": "2016-01-18T10:57:35Z",
    "html_url": "https://github.com/apache/airflow/pull/808#discussion_r49984558",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/808",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/49984558"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/808#discussion_r49984558"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/808"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/49984558/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 99,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 99,
    "position": 99,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/50137615",
    "pull_request_review_id": null,
    "id": 50137615,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTM3NjE1",
    "diff_hunk": "@@ -41,33 +45,56 @@ def validate(cls):\n if plugins_folder not in sys.path:\n     sys.path.append(plugins_folder)\n \n-plugins = []\n \n-# Crawl through the plugins folder to find AirflowPlugin derivatives\n-for root, dirs, files in os.walk(plugins_folder, followlinks=True):\n-    for f in files:\n-        try:\n-            filepath = os.path.join(root, f)\n-            if not os.path.isfile(filepath):\n-                continue\n-            mod_name, file_ext = os.path.splitext(\n-                os.path.split(filepath)[-1])\n-            if file_ext != '.py':\n-                continue\n-            namespace = root.replace('/', '__') + '_' + mod_name\n-            m = imp.load_source(namespace, filepath)\n-            for obj in list(m.__dict__.values()):\n-                if (\n-                        inspect.isclass(obj) and\n-                        issubclass(obj, AirflowPlugin) and\n-                        obj is not AirflowPlugin):\n-                    obj.validate()\n-                    if obj not in plugins:\n-                        plugins.append(obj)\n+if 'plugins' not in globals():",
    "path": "airflow/plugins_manager.py",
    "commit_id": "65fe02f0dd9576e6212e88eaebb734660183ea8b",
    "original_commit_id": "e5aa2c97de6d36c5c6cb205ee782913d54e9b4ee",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "I don't understand what this line is for...\n",
    "created_at": "2016-01-19T16:43:20Z",
    "updated_at": "2016-12-05T15:22:10Z",
    "html_url": "https://github.com/apache/airflow/pull/730#discussion_r50137615",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/730",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/50137615"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/730#discussion_r50137615"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/730"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/50137615/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 45,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/50234240",
    "pull_request_review_id": null,
    "id": 50234240,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjM0MjQw",
    "diff_hunk": "@@ -41,33 +45,56 @@ def validate(cls):\n if plugins_folder not in sys.path:\n     sys.path.append(plugins_folder)\n \n-plugins = []\n \n-# Crawl through the plugins folder to find AirflowPlugin derivatives\n-for root, dirs, files in os.walk(plugins_folder, followlinks=True):\n-    for f in files:\n-        try:\n-            filepath = os.path.join(root, f)\n-            if not os.path.isfile(filepath):\n-                continue\n-            mod_name, file_ext = os.path.splitext(\n-                os.path.split(filepath)[-1])\n-            if file_ext != '.py':\n-                continue\n-            namespace = root.replace('/', '__') + '_' + mod_name\n-            m = imp.load_source(namespace, filepath)\n-            for obj in list(m.__dict__.values()):\n-                if (\n-                        inspect.isclass(obj) and\n-                        issubclass(obj, AirflowPlugin) and\n-                        obj is not AirflowPlugin):\n-                    obj.validate()\n-                    if obj not in plugins:\n-                        plugins.append(obj)\n+if 'plugins' not in globals():",
    "path": "airflow/plugins_manager.py",
    "commit_id": "65fe02f0dd9576e6212e88eaebb734660183ea8b",
    "original_commit_id": "e5aa2c97de6d36c5c6cb205ee782913d54e9b4ee",
    "user": {
      "login": "mahrz24",
      "id": 45788,
      "node_id": "MDQ6VXNlcjQ1Nzg4",
      "avatar_url": "https://avatars.githubusercontent.com/u/45788?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mahrz24",
      "html_url": "https://github.com/mahrz24",
      "followers_url": "https://api.github.com/users/mahrz24/followers",
      "following_url": "https://api.github.com/users/mahrz24/following{/other_user}",
      "gists_url": "https://api.github.com/users/mahrz24/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mahrz24/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mahrz24/subscriptions",
      "organizations_url": "https://api.github.com/users/mahrz24/orgs",
      "repos_url": "https://api.github.com/users/mahrz24/repos",
      "events_url": "https://api.github.com/users/mahrz24/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mahrz24/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "It guards the plugins from being loaded twice, which can cause problems depending on what the plugin code does. It seems natural to assume that plugins are only loaded once unless there is some explicit trigger like a file change.\n",
    "created_at": "2016-01-20T09:57:22Z",
    "updated_at": "2016-12-05T15:22:10Z",
    "html_url": "https://github.com/apache/airflow/pull/730#discussion_r50234240",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/730",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/50234240"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/730#discussion_r50234240"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/730"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/50234240/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "NONE",
    "original_position": 45,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/50436397",
    "pull_request_review_id": null,
    "id": 50436397,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDM2Mzk3",
    "diff_hunk": "@@ -157,8 +180,11 @@ def login(self, request):\n         session.close()\n \n         return redirect(request.args.get(\"next\") or url_for(\"admin.index\"))\n-    except AuthenticationError:\n-        flash(\"Incorrect login details\")\n+    except (LdapException, AuthenticationError) as e:\n+        if e:\n+            flash(e, \"error\")",
    "path": "airflow/contrib/auth/backends/ldap_auth.py",
    "commit_id": "88417320cc14b45050fbd38184f753065c4b132e",
    "original_commit_id": "6e7b70490aee827064666364451ee86e07f592e4",
    "user": {
      "login": "mtagle",
      "id": 2165162,
      "node_id": "MDQ6VXNlcjIxNjUxNjI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2165162?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mtagle",
      "html_url": "https://github.com/mtagle",
      "followers_url": "https://api.github.com/users/mtagle/followers",
      "following_url": "https://api.github.com/users/mtagle/following{/other_user}",
      "gists_url": "https://api.github.com/users/mtagle/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mtagle/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mtagle/subscriptions",
      "organizations_url": "https://api.github.com/users/mtagle/orgs",
      "repos_url": "https://api.github.com/users/mtagle/repos",
      "events_url": "https://api.github.com/users/mtagle/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mtagle/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Looks like you'll always call this line if there is an exception rather than line 187, even though line 187 looks like it would match the old behavior more closely.  Maybe this is the source of the error.\n",
    "created_at": "2016-01-21T17:53:20Z",
    "updated_at": "2016-01-23T02:11:48Z",
    "html_url": "https://github.com/apache/airflow/pull/813#discussion_r50436397",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/813",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/50436397"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/813#discussion_r50436397"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/813"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/50436397/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 209,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 74,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/50484731",
    "pull_request_review_id": null,
    "id": 50484731,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDg0NzMx",
    "diff_hunk": "@@ -157,8 +180,11 @@ def login(self, request):\n         session.close()\n \n         return redirect(request.args.get(\"next\") or url_for(\"admin.index\"))\n-    except AuthenticationError:\n-        flash(\"Incorrect login details\")\n+    except (LdapException, AuthenticationError) as e:\n+        if e:\n+            flash(e, \"error\")",
    "path": "airflow/contrib/auth/backends/ldap_auth.py",
    "commit_id": "88417320cc14b45050fbd38184f753065c4b132e",
    "original_commit_id": "6e7b70490aee827064666364451ee86e07f592e4",
    "user": {
      "login": "NeilHanlon",
      "id": 680198,
      "node_id": "MDQ6VXNlcjY4MDE5OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/680198?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/NeilHanlon",
      "html_url": "https://github.com/NeilHanlon",
      "followers_url": "https://api.github.com/users/NeilHanlon/followers",
      "following_url": "https://api.github.com/users/NeilHanlon/following{/other_user}",
      "gists_url": "https://api.github.com/users/NeilHanlon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/NeilHanlon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/NeilHanlon/subscriptions",
      "organizations_url": "https://api.github.com/users/NeilHanlon/orgs",
      "repos_url": "https://api.github.com/users/NeilHanlon/repos",
      "events_url": "https://api.github.com/users/NeilHanlon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/NeilHanlon/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "I do not believe so, but let me login to my work machine and test out this theory.\n\nIIRC, there was no message in e.. but I could be very wrong (or I had a bad rebase)\n",
    "created_at": "2016-01-21T23:59:35Z",
    "updated_at": "2016-01-23T02:11:48Z",
    "html_url": "https://github.com/apache/airflow/pull/813#discussion_r50484731",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/813",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/50484731"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/813#discussion_r50484731"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/813"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/50484731/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 209,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 74,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/50668032",
    "pull_request_review_id": null,
    "id": 50668032,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjY4MDMy",
    "diff_hunk": "@@ -332,6 +340,41 @@ def collect_dags(\n                     except Exception as e:\n                         logging.warning(e)\n \n+    def collect_dags_from_entrypoint_group(self, entrypoint_group=None):\n+        \"\"\"\n+        Given an entry point group, this method takes all entry points in the group that\n+        are DAGs and adds them to the dagbag collection.\n+\n+        Note that the entry point group will be formatted as '{entrypoint_group}.dags'.\n+        \"\"\"\n+        entrypoint_group = entrypoint_group or self.entrypoint_group\n+\n+        for entry_point in iter_entry_points(group=entrypoint_group + '.dags', name=None):\n+            dist = entry_point.dist\n+            logging.info(\"Importing package \" + dist.project_name)\n+\n+            try:\n+                logging.info(\"Importing DAG from module \" + entry_point.module_name)\n+                dag = entry_point.load()\n+                logging.info(dag)\n+                if isinstance(dag, DAG):\n+                    logging.info(\"Is dag\")\n+                    # Get the file defining the dag to display it in the ui\n+                    module_path = sys.modules[entry_point.module_name].__file__\n+\n+                    # Do not use pyc files for reloading\n+                    if module_path.endswith(\".pyc\"):\n+                        module_path = module_path[:-1]\n+\n+                    dag.full_filepath = module_path\n+\n+                    dag.is_subdag = False\n+                    self.bag_dag(dag, parent_dag=dag, root_dag=dag)\n+\n+            except Exception as e:\n+                logging.exception(e)\n+                logging.error('Failed to import plugin ' + entry_point.module_name)",
    "path": "airflow/models.py",
    "commit_id": "65fe02f0dd9576e6212e88eaebb734660183ea8b",
    "original_commit_id": "e5aa2c97de6d36c5c6cb205ee782913d54e9b4ee",
    "user": {
      "login": "amerkel2",
      "id": 15261944,
      "node_id": "MDQ6VXNlcjE1MjYxOTQ0",
      "avatar_url": "https://avatars.githubusercontent.com/u/15261944?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/amerkel2",
      "html_url": "https://github.com/amerkel2",
      "followers_url": "https://api.github.com/users/amerkel2/followers",
      "following_url": "https://api.github.com/users/amerkel2/following{/other_user}",
      "gists_url": "https://api.github.com/users/amerkel2/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/amerkel2/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/amerkel2/subscriptions",
      "organizations_url": "https://api.github.com/users/amerkel2/orgs",
      "repos_url": "https://api.github.com/users/amerkel2/repos",
      "events_url": "https://api.github.com/users/amerkel2/events{/privacy}",
      "received_events_url": "https://api.github.com/users/amerkel2/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Should be \"Failed to import DAG\".\n",
    "created_at": "2016-01-25T09:06:15Z",
    "updated_at": "2016-12-05T15:22:10Z",
    "html_url": "https://github.com/apache/airflow/pull/730#discussion_r50668032",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/730",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/50668032"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/730#discussion_r50668032"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/730"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/50668032/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "NONE",
    "original_position": 81,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/50727380",
    "pull_request_review_id": null,
    "id": 50727380,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzI3Mzgw",
    "diff_hunk": "@@ -193,7 +193,7 @@ def process_file(self, filepath, only_if_updated=True, safe_mode=True):\n         if safe_mode and os.path.isfile(filepath):\n             # Skip file if no obvious references to airflow or DAG are found.\n             with open(filepath, 'r') as f:\n-                content = f.read()\n+                content = f.read().decode('utf-8')",
    "path": "airflow/models.py",
    "commit_id": "fe8e115d2183dea9bc087ffcecedef909a931fd7",
    "original_commit_id": "fe8e115d2183dea9bc087ffcecedef909a931fd7",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "this breaks the python3.4 build\n",
    "created_at": "2016-01-25T17:39:12Z",
    "updated_at": "2016-01-25T17:39:12Z",
    "html_url": "https://github.com/apache/airflow/pull/908#discussion_r50727380",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/908",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/50727380"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/908#discussion_r50727380"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/908"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/50727380/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 196,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 5,
    "position": 5,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/50744740",
    "pull_request_review_id": null,
    "id": 50744740,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzQ0NzQw",
    "diff_hunk": "@@ -0,0 +1,84 @@\n+'''\n+This sample \"listen to directory\". move the new file and print it, using docker-containers.\n+The following operators are being used: DockerOperator, BashOperator & ShortCircuitOperator.\n+TODO: Review the workflow, change it accordingly to to your environment & enable the code.\n+'''\n+\n+# from __future__ import print_function",
    "path": "airflow/example_dags/docker_copy_data.py",
    "commit_id": "7f74bf8b127b4faeb0128a029ac3c8706863cdfe",
    "original_commit_id": "7f74bf8b127b4faeb0128a029ac3c8706863cdfe",
    "user": {
      "login": "criccomini",
      "id": 167569,
      "node_id": "MDQ6VXNlcjE2NzU2OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/167569?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/criccomini",
      "html_url": "https://github.com/criccomini",
      "followers_url": "https://api.github.com/users/criccomini/followers",
      "following_url": "https://api.github.com/users/criccomini/following{/other_user}",
      "gists_url": "https://api.github.com/users/criccomini/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/criccomini/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/criccomini/subscriptions",
      "organizations_url": "https://api.github.com/users/criccomini/orgs",
      "repos_url": "https://api.github.com/users/criccomini/repos",
      "events_url": "https://api.github.com/users/criccomini/events{/privacy}",
      "received_events_url": "https://api.github.com/users/criccomini/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Curious why this whole file is commented out?\n",
    "created_at": "2016-01-25T19:41:48Z",
    "updated_at": "2016-01-25T19:41:48Z",
    "html_url": "https://github.com/apache/airflow/pull/882#discussion_r50744740",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/882",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/50744740"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/882#discussion_r50744740"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/882"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/50744740/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 7,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 7,
    "position": 7,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/50801883",
    "pull_request_review_id": null,
    "id": 50801883,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODAxODgz",
    "diff_hunk": "@@ -0,0 +1,84 @@\n+'''\n+This sample \"listen to directory\". move the new file and print it, using docker-containers.\n+The following operators are being used: DockerOperator, BashOperator & ShortCircuitOperator.\n+TODO: Review the workflow, change it accordingly to to your environment & enable the code.\n+'''\n+\n+# from __future__ import print_function",
    "path": "airflow/example_dags/docker_copy_data.py",
    "commit_id": "7f74bf8b127b4faeb0128a029ac3c8706863cdfe",
    "original_commit_id": "7f74bf8b127b4faeb0128a029ac3c8706863cdfe",
    "user": {
      "login": "asnir",
      "id": 1627312,
      "node_id": "MDQ6VXNlcjE2MjczMTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1627312?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/asnir",
      "html_url": "https://github.com/asnir",
      "followers_url": "https://api.github.com/users/asnir/followers",
      "following_url": "https://api.github.com/users/asnir/following{/other_user}",
      "gists_url": "https://api.github.com/users/asnir/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/asnir/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/asnir/subscriptions",
      "organizations_url": "https://api.github.com/users/asnir/orgs",
      "repos_url": "https://api.github.com/users/asnir/repos",
      "events_url": "https://api.github.com/users/asnir/events{/privacy}",
      "received_events_url": "https://api.github.com/users/asnir/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "@criccomini \nYou just need to adapt it to your environment, for example you might change the following settings:\n- docker_url - replace it with swarm/docker endpoint\n- volumes - '/your/host/input_dir/path' & etc.\n\n_p.s. Race condition may occur (handling the same file again)._\n",
    "created_at": "2016-01-26T07:28:07Z",
    "updated_at": "2016-01-26T08:12:41Z",
    "html_url": "https://github.com/apache/airflow/pull/882#discussion_r50801883",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/882",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/50801883"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/882#discussion_r50801883"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/882"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/50801883/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 7,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "NONE",
    "original_position": 7,
    "position": 7,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/50802319",
    "pull_request_review_id": null,
    "id": 50802319,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODAyMzE5",
    "diff_hunk": "@@ -0,0 +1,84 @@\n+'''\n+This sample \"listen to directory\". move the new file and print it, using docker-containers.\n+The following operators are being used: DockerOperator, BashOperator & ShortCircuitOperator.\n+TODO: Review the workflow, change it accordingly to to your environment & enable the code.\n+'''\n+\n+# from __future__ import print_function",
    "path": "airflow/example_dags/docker_copy_data.py",
    "commit_id": "7f74bf8b127b4faeb0128a029ac3c8706863cdfe",
    "original_commit_id": "7f74bf8b127b4faeb0128a029ac3c8706863cdfe",
    "user": {
      "login": "asnir",
      "id": 1627312,
      "node_id": "MDQ6VXNlcjE2MjczMTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1627312?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/asnir",
      "html_url": "https://github.com/asnir",
      "followers_url": "https://api.github.com/users/asnir/followers",
      "following_url": "https://api.github.com/users/asnir/following{/other_user}",
      "gists_url": "https://api.github.com/users/asnir/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/asnir/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/asnir/subscriptions",
      "organizations_url": "https://api.github.com/users/asnir/orgs",
      "repos_url": "https://api.github.com/users/asnir/repos",
      "events_url": "https://api.github.com/users/asnir/events{/privacy}",
      "received_events_url": "https://api.github.com/users/asnir/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "p.s. you have another code example: https://github.com/asnir/airflow/commit/f1063c9dfadd65a4a1b00398f40245679185e4c2\n\n``` python\nt3 = DockerOperator(api_version='1.19',\n     docker_url='tcp://localhost:2375',\n     command='/bin/sleep 30',\n     image='centos:latest',\n     network_mode='bridge',\n     task_id='docker_op_tester',\n     dag=dag)\n\n```\n",
    "created_at": "2016-01-26T07:36:47Z",
    "updated_at": "2016-01-26T07:36:47Z",
    "html_url": "https://github.com/apache/airflow/pull/882#discussion_r50802319",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/882",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/50802319"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/882#discussion_r50802319"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/882"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/50802319/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 7,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "NONE",
    "original_position": 7,
    "position": 7,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/50843356",
    "pull_request_review_id": null,
    "id": 50843356,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODQzMzU2",
    "diff_hunk": "@@ -332,6 +340,41 @@ def collect_dags(\n                     except Exception as e:\n                         logging.warning(e)\n \n+    def collect_dags_from_entrypoint_group(self, entrypoint_group=None):\n+        \"\"\"\n+        Given an entry point group, this method takes all entry points in the group that\n+        are DAGs and adds them to the dagbag collection.\n+\n+        Note that the entry point group will be formatted as '{entrypoint_group}.dags'.\n+        \"\"\"\n+        entrypoint_group = entrypoint_group or self.entrypoint_group\n+\n+        for entry_point in iter_entry_points(group=entrypoint_group + '.dags', name=None):\n+            dist = entry_point.dist\n+            logging.info(\"Importing package \" + dist.project_name)\n+\n+            try:\n+                logging.info(\"Importing DAG from module \" + entry_point.module_name)\n+                dag = entry_point.load()\n+                logging.info(dag)\n+                if isinstance(dag, DAG):\n+                    logging.info(\"Is dag\")\n+                    # Get the file defining the dag to display it in the ui\n+                    module_path = sys.modules[entry_point.module_name].__file__\n+\n+                    # Do not use pyc files for reloading\n+                    if module_path.endswith(\".pyc\"):\n+                        module_path = module_path[:-1]\n+\n+                    dag.full_filepath = module_path\n+\n+                    dag.is_subdag = False\n+                    self.bag_dag(dag, parent_dag=dag, root_dag=dag)\n+\n+            except Exception as e:\n+                logging.exception(e)\n+                logging.error('Failed to import plugin ' + entry_point.module_name)",
    "path": "airflow/models.py",
    "commit_id": "65fe02f0dd9576e6212e88eaebb734660183ea8b",
    "original_commit_id": "e5aa2c97de6d36c5c6cb205ee782913d54e9b4ee",
    "user": {
      "login": "mahrz24",
      "id": 45788,
      "node_id": "MDQ6VXNlcjQ1Nzg4",
      "avatar_url": "https://avatars.githubusercontent.com/u/45788?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mahrz24",
      "html_url": "https://github.com/mahrz24",
      "followers_url": "https://api.github.com/users/mahrz24/followers",
      "following_url": "https://api.github.com/users/mahrz24/following{/other_user}",
      "gists_url": "https://api.github.com/users/mahrz24/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mahrz24/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mahrz24/subscriptions",
      "organizations_url": "https://api.github.com/users/mahrz24/orgs",
      "repos_url": "https://api.github.com/users/mahrz24/repos",
      "events_url": "https://api.github.com/users/mahrz24/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mahrz24/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Indeed! I just fixed it.\n",
    "created_at": "2016-01-26T14:49:51Z",
    "updated_at": "2016-12-05T15:22:10Z",
    "html_url": "https://github.com/apache/airflow/pull/730#discussion_r50843356",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/730",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/50843356"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/730#discussion_r50843356"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/730"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/50843356/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "NONE",
    "original_position": 81,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/50858176",
    "pull_request_review_id": null,
    "id": 50858176,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODU4MTc2",
    "diff_hunk": "@@ -795,10 +795,13 @@ def log(self):\n \n         title = \"Log\"\n \n-        return self.render(\n-            'airflow/ti_code.html',\n-            code=log, dag=dag, title=title, task_id=task_id,\n-            execution_date=execution_date, form=form)\n+        if (request.args.get('no_render')):\n+            return log\n+        else:",
    "path": "airflow/www/views.py",
    "commit_id": "5e49f55c4a811e4380f8102c05e34284efc5c82d",
    "original_commit_id": "5e49f55c4a811e4380f8102c05e34284efc5c82d",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "no need for an `else` and indentation\n",
    "created_at": "2016-01-26T16:24:18Z",
    "updated_at": "2016-01-26T16:24:18Z",
    "html_url": "https://github.com/apache/airflow/pull/915#discussion_r50858176",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/915",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/50858176"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/915#discussion_r50858176"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/915"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/50858176/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 800,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 10,
    "position": 10,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/50858210",
    "pull_request_review_id": null,
    "id": 50858210,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODU4MjEw",
    "diff_hunk": "@@ -1278,26 +1281,29 @@ class GraphForm(Form):\n         session.close()\n         doc_md = markdown.markdown(dag.doc_md) if hasattr(dag, 'doc_md') else ''\n \n-        return self.render(\n-            'airflow/graph.html',\n-            dag=dag,\n-            form=form,\n-            width=request.args.get('width', \"100%\"),\n-            height=request.args.get('height', \"800\"),\n-            execution_date=dttm.isoformat(),\n-            state_token=state_token(dr_state),\n-            doc_md=doc_md,\n-            arrange=arrange,\n-            operators=sorted(\n-                list(set([op.__class__ for op in dag.tasks])),\n-                key=lambda x: x.__name__\n-            ),\n-            blur=blur,\n-            root=root or '',\n-            task_instances=json.dumps(task_instances, indent=2),\n-            tasks=json.dumps(tasks, indent=2),\n-            nodes=json.dumps(nodes, indent=2),\n-            edges=json.dumps(edges, indent=2),)\n+        if (request.args.get('no_render')):\n+\t        return json.dumps(task_instances)\n+        else:",
    "path": "airflow/www/views.py",
    "commit_id": "5e49f55c4a811e4380f8102c05e34284efc5c82d",
    "original_commit_id": "5e49f55c4a811e4380f8102c05e34284efc5c82d",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "no need for an else and indent\n",
    "created_at": "2016-01-26T16:24:32Z",
    "updated_at": "2016-01-26T16:24:32Z",
    "html_url": "https://github.com/apache/airflow/pull/915#discussion_r50858210",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/915",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/50858210"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/915#discussion_r50858210"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/915"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/50858210/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 1286,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 44,
    "position": 44,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/50858247",
    "pull_request_review_id": null,
    "id": 50858247,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODU4MjQ3",
    "diff_hunk": "@@ -1278,26 +1281,29 @@ class GraphForm(Form):\n         session.close()\n         doc_md = markdown.markdown(dag.doc_md) if hasattr(dag, 'doc_md') else ''\n \n-        return self.render(\n-            'airflow/graph.html',\n-            dag=dag,\n-            form=form,\n-            width=request.args.get('width', \"100%\"),\n-            height=request.args.get('height', \"800\"),\n-            execution_date=dttm.isoformat(),\n-            state_token=state_token(dr_state),\n-            doc_md=doc_md,\n-            arrange=arrange,\n-            operators=sorted(\n-                list(set([op.__class__ for op in dag.tasks])),\n-                key=lambda x: x.__name__\n-            ),\n-            blur=blur,\n-            root=root or '',\n-            task_instances=json.dumps(task_instances, indent=2),\n-            tasks=json.dumps(tasks, indent=2),\n-            nodes=json.dumps(nodes, indent=2),\n-            edges=json.dumps(edges, indent=2),)\n+        if (request.args.get('no_render')):\n+\t        return json.dumps(task_instances)",
    "path": "airflow/www/views.py",
    "commit_id": "5e49f55c4a811e4380f8102c05e34284efc5c82d",
    "original_commit_id": "5e49f55c4a811e4380f8102c05e34284efc5c82d",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "indent is off by 4\n",
    "created_at": "2016-01-26T16:24:47Z",
    "updated_at": "2016-01-26T16:24:47Z",
    "html_url": "https://github.com/apache/airflow/pull/915#discussion_r50858247",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/915",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/50858247"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/915#discussion_r50858247"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/915"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/50858247/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 1285,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 43,
    "position": 43,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/50859096",
    "pull_request_review_id": null,
    "id": 50859096,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODU5MDk2",
    "diff_hunk": "@@ -0,0 +1,28 @@\n+from airflow.hooks.base_hook import BaseHook\n+from airflow.utils import AirflowException\n+import json\n+import boto3\n+\n+class ECSHook(BaseHook):\n+    \n+    def __init__( self, aws_conn_id=\"ecs_default\"):\n+        self.conn = self.get_connection(aws_conn_id)    \n+        self._a_key = None\n+        self._s_key = None\n+        self._region_key = None\n+        self.extra_params = json.loads(self.conn.extra)\n+        if 'aws_secret_access_key' in self.extra_params:\n+            self._a_key = self.extra_params['aws_access_key_id']\n+            self._s_key = self.extra_params['aws_secret_access_key']\n+            self._region_key = self.extra_params['region_name']\n+        else:\n+            raise AirflowException(\"aws_ecs doesn't exist in the repository\")\n+        \n+    def get_conn(self):\n+\n+        client = boto3.client('ecs', region_name=self._region_key, \n+                               aws_access_key_id=self._a_key, \n+                               aws_secret_access_key=self._s_key)\n+#        client = boto3.client('ecs')",
    "path": "airflow/contrib/hooks/ecs_hook.py",
    "commit_id": "735ddc2a0d60546357a7a0b3ee54d17da589dbc2",
    "original_commit_id": "dc27a98bcf4095c99aac1206676870168a4d09c7",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "remove line\n",
    "created_at": "2016-01-26T16:30:22Z",
    "updated_at": "2016-05-05T20:02:21Z",
    "html_url": "https://github.com/apache/airflow/pull/652#discussion_r50859096",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/652",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/50859096"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/652#discussion_r50859096"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/652"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/50859096/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 26,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/50859157",
    "pull_request_review_id": null,
    "id": 50859157,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODU5MTU3",
    "diff_hunk": "@@ -0,0 +1,28 @@\n+from airflow.hooks.base_hook import BaseHook\n+from airflow.utils import AirflowException\n+import json\n+import boto3\n+\n+class ECSHook(BaseHook):\n+    \n+    def __init__( self, aws_conn_id=\"ecs_default\"):\n+        self.conn = self.get_connection(aws_conn_id)    \n+        self._a_key = None\n+        self._s_key = None\n+        self._region_key = None\n+        self.extra_params = json.loads(self.conn.extra)\n+        if 'aws_secret_access_key' in self.extra_params:\n+            self._a_key = self.extra_params['aws_access_key_id']\n+            self._s_key = self.extra_params['aws_secret_access_key']\n+            self._region_key = self.extra_params['region_name']\n+        else:\n+            raise AirflowException(\"aws_ecs doesn't exist in the repository\")\n+        \n+    def get_conn(self):\n+\n+        client = boto3.client('ecs', region_name=self._region_key, \n+                               aws_access_key_id=self._a_key, \n+                               aws_secret_access_key=self._s_key)\n+#        client = boto3.client('ecs')\n+        return client\n+    ",
    "path": "airflow/contrib/hooks/ecs_hook.py",
    "commit_id": "735ddc2a0d60546357a7a0b3ee54d17da589dbc2",
    "original_commit_id": "dc27a98bcf4095c99aac1206676870168a4d09c7",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "rm line\n",
    "created_at": "2016-01-26T16:30:53Z",
    "updated_at": "2016-05-05T20:02:21Z",
    "html_url": "https://github.com/apache/airflow/pull/652#discussion_r50859157",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/652",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/50859157"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/652#discussion_r50859157"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/652"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/50859157/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 27,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 28,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/50859187",
    "pull_request_review_id": null,
    "id": 50859187,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODU5MTg3",
    "diff_hunk": "@@ -0,0 +1,31 @@\n+from airflow.hooks.base_hook import BaseHook\n+import pysftp\n+\n+class SFTPHook(BaseHook):\n+    \n+    \n+    def __init__(self,  ftp_conn_id='sftp_default'):\n+        self.ftp_conn_id = ftp_conn_id\n+        self.conn = None\n+        \n+    def get_conn(self):\n+        \"\"\"\n+        Returns a SFTP connection object\n+        \"\"\"\n+        if self.conn is None:",
    "path": "airflow/contrib/hooks/sftp_hook.py",
    "commit_id": "735ddc2a0d60546357a7a0b3ee54d17da589dbc2",
    "original_commit_id": "dc27a98bcf4095c99aac1206676870168a4d09c7",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "`if not self.conn:`\n",
    "created_at": "2016-01-26T16:31:07Z",
    "updated_at": "2016-05-05T20:02:21Z",
    "html_url": "https://github.com/apache/airflow/pull/652#discussion_r50859187",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/652",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/50859187"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/652#discussion_r50859187"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/652"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/50859187/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 15,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 15,
    "position": 15,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/50859248",
    "pull_request_review_id": null,
    "id": 50859248,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODU5MjQ4",
    "diff_hunk": "@@ -0,0 +1,31 @@\n+from airflow.hooks.base_hook import BaseHook\n+import pysftp\n+\n+class SFTPHook(BaseHook):\n+    \n+    \n+    def __init__(self,  ftp_conn_id='sftp_default'):\n+        self.ftp_conn_id = ftp_conn_id\n+        self.conn = None\n+        \n+    def get_conn(self):\n+        \"\"\"\n+        Returns a SFTP connection object\n+        \"\"\"\n+        if self.conn is None:\n+            params = self.get_connection(self.ftp_conn_id)\n+            self.conn = pysftp.Connection(params.host, username=params.login, password=params.password)\n+\n+        return self.conn\n+    \n+    def list_directory(self, path):\n+        fileList = self.conn.listdir(path)\n+        fileList.reverse()\n+        return fileList\n+    \n+    def get_file(self, from_file, to_file):\n+        self.conn.get(from_file, to_file)\n+    ",
    "path": "airflow/contrib/hooks/sftp_hook.py",
    "commit_id": "735ddc2a0d60546357a7a0b3ee54d17da589dbc2",
    "original_commit_id": "dc27a98bcf4095c99aac1206676870168a4d09c7",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "remove empty lines\n",
    "created_at": "2016-01-26T16:31:34Z",
    "updated_at": "2016-05-05T20:02:21Z",
    "html_url": "https://github.com/apache/airflow/pull/652#discussion_r50859248",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/652",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/50859248"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/652#discussion_r50859248"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/652"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/50859248/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 28,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 28,
    "position": 28,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/50859569",
    "pull_request_review_id": null,
    "id": 50859569,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODU5NTY5",
    "diff_hunk": "@@ -0,0 +1,72 @@\n+from airflow.models import BaseOperator\n+from airflow.contrib.hooks.sftp_hook import SFTPHook\n+from airflow.hooks.S3_hook import S3Hook\n+import os\n+\n+\n+import logging\n+class FTPToS3(BaseOperator):\n+    \n+ \n+        \n+    ui_color = '#f0ede4'\n+    \"\"\"\n+    Copy file from a FTP folder to a S3 folder\n+\n+    :param s3_bucket: s3 destination bucket\n+    :type: s3_bucket:str\n+    :param s3_key: s3 destination key\n+    :type s3_key: str\n+    :param ftp_folder: ftp folder where the the source files are stored\n+    :type ftp_folder: str\n+    :param: sftp_conn_id: the configuration key defined in the ariflow panel\n+    :type: sftp_conn_id: str\n+    :param: s3_conn_id: the configuration key defined in the airflow panel\n+    :type: s3_conn_id: str\n+    :param: filter: a filter function that receiver file_name as parameters.\n+    :type: filter: function\n+    :param: replace: replace destination file\n+    :type: replace: bool\n+    :param: tmp_directory: just a temporary directory\n+    :type: tmp_directory: str\n+    \"\"\"\n+  \n+    def __init__(self, s3_bucket, s3_key, ftp_folder, sftp_conn_id='sftp_default', s3_conn_id='s3_default', filter= None, replace = False, tmp_directory = \"tmp\"): \n+        self.s3_key =  s3_key\n+        self.s3_bucket = s3_bucket\n+        self.sftp_conn_id = sftp_conn_id\n+        self.s3_conn_id = s3_conn_id\n+        self.filter = filter\n+        self.ftp_folder = ftp_folder\n+        self.tmp_directory = tmp_directory\n+        self.replace = replace\n+        \n+    def execute(self, context):\n+        sftp_hook = SFTPHook(ftp_conn_id = self.sftp_conn_id)\n+        s3_hook =  S3Hook(s3_conn_id = self.s3_conn_id)\n+        sftp_hook.get_conn()\n+        file_list = sftp_hook.list_directory(self.ftp_folder)\n+        if (self.filter != None):\n+            filter(self.filter, file_list)\n+          \n+        #create tmp directory\n+        if not os.path.exists(self.tmp_directory):\n+            os.makedirs(self.tmp_directory)  \n+        \n+        for file_name  in file_list:\n+            s3_key_file = self.s3_key +\"/\"+str(file_name)\n+            exists = s3_hook.check_for_key(s3_key_file, self.s3_bucket)\n+            \n+            if (exists) and (not self.replace):\n+                continue\n+            \n+            ftp_file_fullpath = self.ftp_folder + \"/\" + str(file_name)",
    "path": "airflow/contrib/operators/ftp_to_s3.py",
    "commit_id": "735ddc2a0d60546357a7a0b3ee54d17da589dbc2",
    "original_commit_id": "dc27a98bcf4095c99aac1206676870168a4d09c7",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "`os.path.join`\n",
    "created_at": "2016-01-26T16:33:32Z",
    "updated_at": "2016-05-05T20:02:21Z",
    "html_url": "https://github.com/apache/airflow/pull/652#discussion_r50859569",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/652",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/50859569"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/652#discussion_r50859569"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/652"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/50859569/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 63,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/50859686",
    "pull_request_review_id": null,
    "id": 50859686,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODU5Njg2",
    "diff_hunk": "@@ -0,0 +1,72 @@\n+from airflow.models import BaseOperator\n+from airflow.contrib.hooks.sftp_hook import SFTPHook\n+from airflow.hooks.S3_hook import S3Hook\n+import os\n+\n+\n+import logging\n+class FTPToS3(BaseOperator):\n+    \n+ \n+        \n+    ui_color = '#f0ede4'\n+    \"\"\"\n+    Copy file from a FTP folder to a S3 folder\n+\n+    :param s3_bucket: s3 destination bucket\n+    :type: s3_bucket:str\n+    :param s3_key: s3 destination key\n+    :type s3_key: str\n+    :param ftp_folder: ftp folder where the the source files are stored\n+    :type ftp_folder: str\n+    :param: sftp_conn_id: the configuration key defined in the ariflow panel\n+    :type: sftp_conn_id: str\n+    :param: s3_conn_id: the configuration key defined in the airflow panel\n+    :type: s3_conn_id: str\n+    :param: filter: a filter function that receiver file_name as parameters.\n+    :type: filter: function\n+    :param: replace: replace destination file\n+    :type: replace: bool\n+    :param: tmp_directory: just a temporary directory\n+    :type: tmp_directory: str\n+    \"\"\"\n+  \n+    def __init__(self, s3_bucket, s3_key, ftp_folder, sftp_conn_id='sftp_default', s3_conn_id='s3_default', filter= None, replace = False, tmp_directory = \"tmp\"): \n+        self.s3_key =  s3_key\n+        self.s3_bucket = s3_bucket\n+        self.sftp_conn_id = sftp_conn_id\n+        self.s3_conn_id = s3_conn_id\n+        self.filter = filter\n+        self.ftp_folder = ftp_folder\n+        self.tmp_directory = tmp_directory\n+        self.replace = replace\n+        \n+    def execute(self, context):\n+        sftp_hook = SFTPHook(ftp_conn_id = self.sftp_conn_id)\n+        s3_hook =  S3Hook(s3_conn_id = self.s3_conn_id)\n+        sftp_hook.get_conn()\n+        file_list = sftp_hook.list_directory(self.ftp_folder)\n+        if (self.filter != None):\n+            filter(self.filter, file_list)\n+          \n+        #create tmp directory\n+        if not os.path.exists(self.tmp_directory):\n+            os.makedirs(self.tmp_directory)  \n+        \n+        for file_name  in file_list:\n+            s3_key_file = self.s3_key +\"/\"+str(file_name)\n+            exists = s3_hook.check_for_key(s3_key_file, self.s3_bucket)\n+            \n+            if (exists) and (not self.replace):\n+                continue\n+            \n+            ftp_file_fullpath = self.ftp_folder + \"/\" + str(file_name)\n+            local_file_fullpath = self.tmp_directory + \"/\" + str(file_name)\n+            \n+            logging.info(\"Dowloading file [\"+str(ftp_file_fullpath)+\"] from sftp to local [\"+str(local_file_fullpath)+\"]\");\n+            sftp_hook.get_file(ftp_file_fullpath, local_file_fullpath)\n+            logging.info(\"Done.\")\n+            logging.info(\"Uploading file [\"+str(local_file_fullpath)+\"] to S3 on bucket [\"+str(self.s3_bucket)+\"] and key [\"+str(s3_key_file)+\"]\")",
    "path": "airflow/contrib/operators/ftp_to_s3.py",
    "commit_id": "735ddc2a0d60546357a7a0b3ee54d17da589dbc2",
    "original_commit_id": "dc27a98bcf4095c99aac1206676870168a4d09c7",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "use `\"{}\".format()` syntax\n",
    "created_at": "2016-01-26T16:34:07Z",
    "updated_at": "2016-05-05T20:02:21Z",
    "html_url": "https://github.com/apache/airflow/pull/652#discussion_r50859686",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/652",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/50859686"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/652#discussion_r50859686"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/652"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/50859686/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 69,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/50859782",
    "pull_request_review_id": null,
    "id": 50859782,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODU5Nzgy",
    "diff_hunk": "@@ -0,0 +1,72 @@\n+from airflow.models import BaseOperator\n+from airflow.contrib.hooks.sftp_hook import SFTPHook\n+from airflow.hooks.S3_hook import S3Hook\n+import os\n+\n+\n+import logging\n+class FTPToS3(BaseOperator):\n+    \n+ \n+        \n+    ui_color = '#f0ede4'\n+    \"\"\"\n+    Copy file from a FTP folder to a S3 folder\n+\n+    :param s3_bucket: s3 destination bucket\n+    :type: s3_bucket:str\n+    :param s3_key: s3 destination key\n+    :type s3_key: str\n+    :param ftp_folder: ftp folder where the the source files are stored\n+    :type ftp_folder: str\n+    :param: sftp_conn_id: the configuration key defined in the ariflow panel\n+    :type: sftp_conn_id: str\n+    :param: s3_conn_id: the configuration key defined in the airflow panel\n+    :type: s3_conn_id: str\n+    :param: filter: a filter function that receiver file_name as parameters.\n+    :type: filter: function\n+    :param: replace: replace destination file\n+    :type: replace: bool\n+    :param: tmp_directory: just a temporary directory\n+    :type: tmp_directory: str\n+    \"\"\"\n+  \n+    def __init__(self, s3_bucket, s3_key, ftp_folder, sftp_conn_id='sftp_default', s3_conn_id='s3_default', filter= None, replace = False, tmp_directory = \"tmp\"): ",
    "path": "airflow/contrib/operators/ftp_to_s3.py",
    "commit_id": "735ddc2a0d60546357a7a0b3ee54d17da589dbc2",
    "original_commit_id": "dc27a98bcf4095c99aac1206676870168a4d09c7",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "inconsistent spacing around operator\n",
    "created_at": "2016-01-26T16:34:35Z",
    "updated_at": "2016-05-05T20:02:21Z",
    "html_url": "https://github.com/apache/airflow/pull/652#discussion_r50859782",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/652",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/50859782"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/652#discussion_r50859782"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/652"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/50859782/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 34,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/51188860",
    "pull_request_review_id": null,
    "id": 51188860,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTg4ODYw",
    "diff_hunk": "@@ -41,6 +41,22 @@ def expand_env_var(env_var):\n         else:\n             env_var = interpolated\n \n+def run_bash_command(command):",
    "path": "airflow/configuration.py",
    "commit_id": "f319098134cfebdce2aa9b0c7fae984cff3849d8",
    "original_commit_id": "57e18538d6e8420950622603e741cacaac9ac03a",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "please move this function to `airflow/utils.py`, I think by default it's just plain old `sh`. maybe rerun `run_command`\n",
    "created_at": "2016-01-28T21:17:34Z",
    "updated_at": "2016-01-30T20:47:44Z",
    "html_url": "https://github.com/apache/airflow/pull/743#discussion_r51188860",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/743",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/51188860"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/743#discussion_r51188860"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/743"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/51188860/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 4,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/51188897",
    "pull_request_review_id": null,
    "id": 51188897,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTg4ODk3",
    "diff_hunk": "@@ -41,6 +41,22 @@ def expand_env_var(env_var):\n         else:\n             env_var = interpolated\n \n+def run_bash_command(command):\n+    \"\"\"\n+    Runs bash command and returns the derived value.",
    "path": "airflow/configuration.py",
    "commit_id": "f319098134cfebdce2aa9b0c7fae984cff3849d8",
    "original_commit_id": "57e18538d6e8420950622603e741cacaac9ac03a",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "`returns stdout`\n",
    "created_at": "2016-01-28T21:17:50Z",
    "updated_at": "2016-01-30T20:47:44Z",
    "html_url": "https://github.com/apache/airflow/pull/743#discussion_r51188897",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/743",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/51188897"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/743#discussion_r51188897"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/743"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/51188897/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 6,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/51189057",
    "pull_request_review_id": null,
    "id": 51189057,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTg5MDU3",
    "diff_hunk": "@@ -41,6 +41,22 @@ def expand_env_var(env_var):\n         else:\n             env_var = interpolated\n \n+def run_bash_command(command):\n+    \"\"\"\n+    Runs bash command and returns the derived value.\n+    \"\"\"    \n+    if not command:",
    "path": "airflow/configuration.py",
    "commit_id": "f319098134cfebdce2aa9b0c7fae984cff3849d8",
    "original_commit_id": "57e18538d6e8420950622603e741cacaac9ac03a",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "No need to handle this, should be handled on the calling side if anywhere. \n",
    "created_at": "2016-01-28T21:18:52Z",
    "updated_at": "2016-01-30T20:47:44Z",
    "html_url": "https://github.com/apache/airflow/pull/743#discussion_r51189057",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/743",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/51189057"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/743#discussion_r51189057"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/743"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/51189057/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 8,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/51189193",
    "pull_request_review_id": null,
    "id": 51189193,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTg5MTkz",
    "diff_hunk": "@@ -41,6 +41,22 @@ def expand_env_var(env_var):\n         else:\n             env_var = interpolated\n \n+def run_bash_command(command):\n+    \"\"\"\n+    Runs bash command and returns the derived value.\n+    \"\"\"    \n+    if not command:\n+        return command\n+\n+    import subprocess",
    "path": "airflow/configuration.py",
    "commit_id": "f319098134cfebdce2aa9b0c7fae984cff3849d8",
    "original_commit_id": "57e18538d6e8420950622603e741cacaac9ac03a",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "imports goes at module top, except in unusual cases, `utils.py` might have it already as you move it\n",
    "created_at": "2016-01-28T21:20:03Z",
    "updated_at": "2016-01-30T20:47:44Z",
    "html_url": "https://github.com/apache/airflow/pull/743#discussion_r51189193",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/743",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/51189193"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/743#discussion_r51189193"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/743"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/51189193/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 11,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/51189576",
    "pull_request_review_id": null,
    "id": 51189576,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTg5NTc2",
    "diff_hunk": "@@ -41,6 +41,22 @@ def expand_env_var(env_var):\n         else:\n             env_var = interpolated\n \n+def run_bash_command(command):\n+    \"\"\"\n+    Runs bash command and returns the derived value.\n+    \"\"\"    \n+    if not command:\n+        return command\n+\n+    import subprocess\n+    process = subprocess.Popen(command.split(), stdout=subprocess.PIPE)\n+    values = process.stdout.readline()\n+    process.terminate()",
    "path": "airflow/configuration.py",
    "commit_id": "f319098134cfebdce2aa9b0c7fae984cff3849d8",
    "original_commit_id": "57e18538d6e8420950622603e741cacaac9ac03a",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "I think the right way to do this is using `Popen.communicate`\n",
    "created_at": "2016-01-28T21:23:08Z",
    "updated_at": "2016-01-30T20:47:44Z",
    "html_url": "https://github.com/apache/airflow/pull/743#discussion_r51189576",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/743",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/51189576"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/743#discussion_r51189576"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/743"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/51189576/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 14,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/51189660",
    "pull_request_review_id": null,
    "id": 51189660,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTg5NjYw",
    "diff_hunk": "@@ -41,6 +41,22 @@ def expand_env_var(env_var):\n         else:\n             env_var = interpolated\n \n+def run_bash_command(command):\n+    \"\"\"\n+    Runs bash command and returns the derived value.\n+    \"\"\"    \n+    if not command:\n+        return command\n+\n+    import subprocess\n+    process = subprocess.Popen(command.split(), stdout=subprocess.PIPE)\n+    values = process.stdout.readline()\n+    process.terminate()\n+\n+    if values:\n+        return values\n+\n+    return None",
    "path": "airflow/configuration.py",
    "commit_id": "f319098134cfebdce2aa9b0c7fae984cff3849d8",
    "original_commit_id": "57e18538d6e8420950622603e741cacaac9ac03a",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "`return None` is implicit in python\n",
    "created_at": "2016-01-28T21:23:41Z",
    "updated_at": "2016-01-30T20:47:44Z",
    "html_url": "https://github.com/apache/airflow/pull/743#discussion_r51189660",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/743",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/51189660"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/743#discussion_r51189660"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/743"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/51189660/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 19,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/51190574",
    "pull_request_review_id": null,
    "id": 51190574,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTkwNTc0",
    "diff_hunk": "@@ -330,13 +346,36 @@ def __init__(self, defaults, *args, **kwargs):\n \n     def _validate(self):\n         if self.get(\"core\", \"executor\") != 'SequentialExecutor' \\\n-                and \"sqlite\" in self.get('core', 'sql_alchemy_conn'):\n+                and \"sqlite\" in self.get_with_fallback('core', 'sql_alchemy_conn'):\n             raise AirflowConfigException(\"error: cannot use sqlite with the {}\".\n                                                        format(self.get('core', 'executor')))\n \n         self.is_validated = True\n \n     def get(self, section, key, **kwargs):\n+        return self._get(section, key, True)\n+\n+    def get_with_fallback(self, section, key, **kwargs):\n+        ret_val = self._get(section, key, False)",
    "path": "airflow/configuration.py",
    "commit_id": "f319098134cfebdce2aa9b0c7fae984cff3849d8",
    "original_commit_id": "57e18538d6e8420950622603e741cacaac9ac03a",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "`_get` handles defaults, meaning if a default is set it will take precedence over the command\n",
    "created_at": "2016-01-28T21:30:42Z",
    "updated_at": "2016-01-30T20:47:44Z",
    "html_url": "https://github.com/apache/airflow/pull/743#discussion_r51190574",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/743",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/51190574"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/743#discussion_r51190574"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/743"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/51190574/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 38,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/51191424",
    "pull_request_review_id": null,
    "id": 51191424,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTkxNDI0",
    "diff_hunk": "@@ -41,6 +41,22 @@ def expand_env_var(env_var):\n         else:\n             env_var = interpolated\n \n+def run_bash_command(command):",
    "path": "airflow/configuration.py",
    "commit_id": "f319098134cfebdce2aa9b0c7fae984cff3849d8",
    "original_commit_id": "57e18538d6e8420950622603e741cacaac9ac03a",
    "user": {
      "login": "praveev",
      "id": 297278,
      "node_id": "MDQ6VXNlcjI5NzI3OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/297278?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/praveev",
      "html_url": "https://github.com/praveev",
      "followers_url": "https://api.github.com/users/praveev/followers",
      "following_url": "https://api.github.com/users/praveev/following{/other_user}",
      "gists_url": "https://api.github.com/users/praveev/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/praveev/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/praveev/subscriptions",
      "organizations_url": "https://api.github.com/users/praveev/orgs",
      "repos_url": "https://api.github.com/users/praveev/repos",
      "events_url": "https://api.github.com/users/praveev/events{/privacy}",
      "received_events_url": "https://api.github.com/users/praveev/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "when i move this, it creates a circular dependency between configuration.py and utils.py\n",
    "created_at": "2016-01-28T21:36:58Z",
    "updated_at": "2016-01-30T20:47:44Z",
    "html_url": "https://github.com/apache/airflow/pull/743#discussion_r51191424",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/743",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/51191424"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/743#discussion_r51191424"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/743"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/51191424/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "NONE",
    "original_position": 4,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/51191916",
    "pull_request_review_id": null,
    "id": 51191916,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTkxOTE2",
    "diff_hunk": "@@ -330,13 +346,36 @@ def __init__(self, defaults, *args, **kwargs):\n \n     def _validate(self):\n         if self.get(\"core\", \"executor\") != 'SequentialExecutor' \\\n-                and \"sqlite\" in self.get('core', 'sql_alchemy_conn'):\n+                and \"sqlite\" in self.get_with_fallback('core', 'sql_alchemy_conn'):\n             raise AirflowConfigException(\"error: cannot use sqlite with the {}\".\n                                                        format(self.get('core', 'executor')))\n \n         self.is_validated = True\n \n     def get(self, section, key, **kwargs):\n+        return self._get(section, key, True)\n+\n+    def get_with_fallback(self, section, key, **kwargs):\n+        ret_val = self._get(section, key, False)",
    "path": "airflow/configuration.py",
    "commit_id": "f319098134cfebdce2aa9b0c7fae984cff3849d8",
    "original_commit_id": "57e18538d6e8420950622603e741cacaac9ac03a",
    "user": {
      "login": "praveev",
      "id": 297278,
      "node_id": "MDQ6VXNlcjI5NzI3OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/297278?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/praveev",
      "html_url": "https://github.com/praveev",
      "followers_url": "https://api.github.com/users/praveev/followers",
      "following_url": "https://api.github.com/users/praveev/following{/other_user}",
      "gists_url": "https://api.github.com/users/praveev/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/praveev/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/praveev/subscriptions",
      "organizations_url": "https://api.github.com/users/praveev/orgs",
      "repos_url": "https://api.github.com/users/praveev/repos",
      "events_url": "https://api.github.com/users/praveev/events{/privacy}",
      "received_events_url": "https://api.github.com/users/praveev/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "yes default will take precedence over the command. is this a note or a comment to change something?\n",
    "created_at": "2016-01-28T21:40:13Z",
    "updated_at": "2016-01-30T20:47:44Z",
    "html_url": "https://github.com/apache/airflow/pull/743#discussion_r51191916",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/743",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/51191916"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/743#discussion_r51191916"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/743"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/51191916/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "NONE",
    "original_position": 38,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/51198043",
    "pull_request_review_id": null,
    "id": 51198043,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTk4MDQz",
    "diff_hunk": "@@ -41,6 +41,22 @@ def expand_env_var(env_var):\n         else:\n             env_var = interpolated\n \n+def run_bash_command(command):",
    "path": "airflow/configuration.py",
    "commit_id": "f319098134cfebdce2aa9b0c7fae984cff3849d8",
    "original_commit_id": "57e18538d6e8420950622603e741cacaac9ac03a",
    "user": {
      "login": "praveev",
      "id": 297278,
      "node_id": "MDQ6VXNlcjI5NzI3OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/297278?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/praveev",
      "html_url": "https://github.com/praveev",
      "followers_url": "https://api.github.com/users/praveev/followers",
      "following_url": "https://api.github.com/users/praveev/following{/other_user}",
      "gists_url": "https://api.github.com/users/praveev/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/praveev/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/praveev/subscriptions",
      "organizations_url": "https://api.github.com/users/praveev/orgs",
      "repos_url": "https://api.github.com/users/praveev/repos",
      "events_url": "https://api.github.com/users/praveev/events{/privacy}",
      "received_events_url": "https://api.github.com/users/praveev/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "thinking of how best to resolve this dependency issue but a case can be made for keeping this here. there are several other places in code where bash and other types of command are run using subprocess inline. thoughts?\n",
    "created_at": "2016-01-28T22:25:33Z",
    "updated_at": "2016-01-30T20:47:44Z",
    "html_url": "https://github.com/apache/airflow/pull/743#discussion_r51198043",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/743",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/51198043"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/743#discussion_r51198043"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/743"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/51198043/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "NONE",
    "original_position": 4,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/51337420",
    "pull_request_review_id": null,
    "id": 51337420,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzM3NDIw",
    "diff_hunk": "@@ -41,6 +41,22 @@ def expand_env_var(env_var):\n         else:\n             env_var = interpolated\n \n+def run_bash_command(command):",
    "path": "airflow/configuration.py",
    "commit_id": "f319098134cfebdce2aa9b0c7fae984cff3849d8",
    "original_commit_id": "57e18538d6e8420950622603e741cacaac9ac03a",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "ok fine\n",
    "created_at": "2016-01-30T01:44:49Z",
    "updated_at": "2016-01-30T20:47:44Z",
    "html_url": "https://github.com/apache/airflow/pull/743#discussion_r51337420",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/743",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/51337420"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/743#discussion_r51337420"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/743"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/51337420/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 4,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/51337480",
    "pull_request_review_id": null,
    "id": 51337480,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzM3NDgw",
    "diff_hunk": "@@ -330,13 +346,36 @@ def __init__(self, defaults, *args, **kwargs):\n \n     def _validate(self):\n         if self.get(\"core\", \"executor\") != 'SequentialExecutor' \\\n-                and \"sqlite\" in self.get('core', 'sql_alchemy_conn'):\n+                and \"sqlite\" in self.get_with_fallback('core', 'sql_alchemy_conn'):\n             raise AirflowConfigException(\"error: cannot use sqlite with the {}\".\n                                                        format(self.get('core', 'executor')))\n \n         self.is_validated = True\n \n     def get(self, section, key, **kwargs):\n+        return self._get(section, key, True)\n+\n+    def get_with_fallback(self, section, key, **kwargs):\n+        ret_val = self._get(section, key, False)",
    "path": "airflow/configuration.py",
    "commit_id": "f319098134cfebdce2aa9b0c7fae984cff3849d8",
    "original_commit_id": "57e18538d6e8420950622603e741cacaac9ac03a",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Setting a default on any of these would result in never ever getting to the command, which wouldn't be expected. I think the order should be 1-conf, 2-envvar, 3-command(if listed as a \"commandable\" param, 4-default) \n",
    "created_at": "2016-01-30T01:47:03Z",
    "updated_at": "2016-01-30T20:47:44Z",
    "html_url": "https://github.com/apache/airflow/pull/743#discussion_r51337480",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/743",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/51337480"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/743#discussion_r51337480"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/743"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/51337480/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 38,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/51764012",
    "pull_request_review_id": null,
    "id": 51764012,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzY0MDEy",
    "diff_hunk": "@@ -2099,7 +2099,7 @@ def on_model_change(self, form, model, is_created):\n \n     @classmethod\n     def alert_fernet_key(cls):\n-        return not configuration.has_option('core', 'fernet_key')\n+        return conf.get('core', 'fernet_key') is None",
    "path": "airflow/www/views.py",
    "commit_id": "b5ed58c112f447276627e6484b6dab60d6bfc65a",
    "original_commit_id": "b5ed58c112f447276627e6484b6dab60d6bfc65a",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "This is the actual fix, the rest is just search and replace\n",
    "created_at": "2016-02-03T18:25:17Z",
    "updated_at": "2016-02-03T18:25:17Z",
    "html_url": "https://github.com/apache/airflow/pull/948#discussion_r51764012",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/948",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/51764012"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/948#discussion_r51764012"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/948"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/51764012/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 2102,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 127,
    "position": 127,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/51786607",
    "pull_request_review_id": null,
    "id": 51786607,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzg2NjA3",
    "diff_hunk": "@@ -2099,7 +2099,7 @@ def on_model_change(self, form, model, is_created):\n \n     @classmethod\n     def alert_fernet_key(cls):\n-        return not configuration.has_option('core', 'fernet_key')\n+        return conf.get('core', 'fernet_key') is None",
    "path": "airflow/www/views.py",
    "commit_id": "b5ed58c112f447276627e6484b6dab60d6bfc65a",
    "original_commit_id": "b5ed58c112f447276627e6484b6dab60d6bfc65a",
    "user": {
      "login": "r39132",
      "id": 581734,
      "node_id": "MDQ6VXNlcjU4MTczNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/581734?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/r39132",
      "html_url": "https://github.com/r39132",
      "followers_url": "https://api.github.com/users/r39132/followers",
      "following_url": "https://api.github.com/users/r39132/following{/other_user}",
      "gists_url": "https://api.github.com/users/r39132/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/r39132/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/r39132/subscriptions",
      "organizations_url": "https://api.github.com/users/r39132/orgs",
      "repos_url": "https://api.github.com/users/r39132/repos",
      "events_url": "https://api.github.com/users/r39132/events{/privacy}",
      "received_events_url": "https://api.github.com/users/r39132/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Cool. I can help test it once you merge it, but looks good to the eye!\n",
    "created_at": "2016-02-03T21:03:52Z",
    "updated_at": "2016-02-03T21:03:52Z",
    "html_url": "https://github.com/apache/airflow/pull/948#discussion_r51786607",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/948",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/51786607"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/948#discussion_r51786607"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/948"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/51786607/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 2102,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 127,
    "position": 127,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/51788478",
    "pull_request_review_id": null,
    "id": 51788478,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzg4NDc4",
    "diff_hunk": "@@ -2099,7 +2099,7 @@ def on_model_change(self, form, model, is_created):\n \n     @classmethod\n     def alert_fernet_key(cls):\n-        return not configuration.has_option('core', 'fernet_key')\n+        return conf.get('core', 'fernet_key') is None",
    "path": "airflow/www/views.py",
    "commit_id": "b5ed58c112f447276627e6484b6dab60d6bfc65a",
    "original_commit_id": "b5ed58c112f447276627e6484b6dab60d6bfc65a",
    "user": {
      "login": "r39132",
      "id": 581734,
      "node_id": "MDQ6VXNlcjU4MTczNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/581734?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/r39132",
      "html_url": "https://github.com/r39132",
      "followers_url": "https://api.github.com/users/r39132/followers",
      "following_url": "https://api.github.com/users/r39132/following{/other_user}",
      "gists_url": "https://api.github.com/users/r39132/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/r39132/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/r39132/subscriptions",
      "organizations_url": "https://api.github.com/users/r39132/orgs",
      "repos_url": "https://api.github.com/users/r39132/repos",
      "events_url": "https://api.github.com/users/r39132/events{/privacy}",
      "received_events_url": "https://api.github.com/users/r39132/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "This fix addresses the problem raised by the reporter in https://github.com/airbnb/airflow/issues/920, but I've raised some concerns about how we are managing configuration in that issue, which we can fix by providing an easy way to inspect a unified view of the winning configuration in one place. \n",
    "created_at": "2016-02-03T21:17:37Z",
    "updated_at": "2016-02-03T21:17:37Z",
    "html_url": "https://github.com/apache/airflow/pull/948#discussion_r51788478",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/948",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/51788478"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/948#discussion_r51788478"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/948"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/51788478/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 2102,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 127,
    "position": 127,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/51816375",
    "pull_request_review_id": null,
    "id": 51816375,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODE2Mzc1",
    "diff_hunk": "@@ -27,12 +27,15 @@ class BigQueryHook(GoogleCloudBaseHook):\n     \"\"\"\n     conn_name_attr = 'bigquery_conn_id'\n \n-    def __init__(self, scope='https://www.googleapis.com/auth/bigquery', bigquery_conn_id='bigquery_default'):\n+    def __init__(self,\n+                 scope='https://www.googleapis.com/auth/bigquery',\n+                 bigquery_conn_id='bigquery_default',\n+                 sub=None):",
    "path": "airflow/contrib/hooks/bigquery_hook.py",
    "commit_id": "f639334766144d1e3322b73dd8d8b953c80c7b93",
    "original_commit_id": "f95a140587bd70627f751e42ce04bbfeab20a81c",
    "user": {
      "login": "criccomini",
      "id": 167569,
      "node_id": "MDQ6VXNlcjE2NzU2OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/167569?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/criccomini",
      "html_url": "https://github.com/criccomini",
      "followers_url": "https://api.github.com/users/criccomini/followers",
      "following_url": "https://api.github.com/users/criccomini/following{/other_user}",
      "gists_url": "https://api.github.com/users/criccomini/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/criccomini/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/criccomini/subscriptions",
      "organizations_url": "https://api.github.com/users/criccomini/orgs",
      "repos_url": "https://api.github.com/users/criccomini/repos",
      "events_url": "https://api.github.com/users/criccomini/events{/privacy}",
      "received_events_url": "https://api.github.com/users/criccomini/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Slightly more descriptive name would be nice (delegate_to?)\n",
    "created_at": "2016-02-04T01:16:52Z",
    "updated_at": "2016-02-04T17:40:47Z",
    "html_url": "https://github.com/apache/airflow/pull/949#discussion_r51816375",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/949",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/51816375"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/949#discussion_r51816375"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/949"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/51816375/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 8,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/51816416",
    "pull_request_review_id": null,
    "id": 51816416,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODE2NDE2",
    "diff_hunk": "@@ -27,12 +27,15 @@ class BigQueryHook(GoogleCloudBaseHook):\n     \"\"\"\n     conn_name_attr = 'bigquery_conn_id'\n \n-    def __init__(self, scope='https://www.googleapis.com/auth/bigquery', bigquery_conn_id='bigquery_default'):\n+    def __init__(self,\n+                 scope='https://www.googleapis.com/auth/bigquery',\n+                 bigquery_conn_id='bigquery_default',\n+                 sub=None):\n         \"\"\"\n         :param scope: The scope of the hook.\n         :type scope: string\n         \"\"\"\n-        super(BigQueryHook, self).__init__(scope, bigquery_conn_id)\n+        super(BigQueryHook, self).__init__(scope, bigquery_conn_id, sub)",
    "path": "airflow/contrib/hooks/bigquery_hook.py",
    "commit_id": "f639334766144d1e3322b73dd8d8b953c80c7b93",
    "original_commit_id": "f95a140587bd70627f751e42ce04bbfeab20a81c",
    "user": {
      "login": "criccomini",
      "id": 167569,
      "node_id": "MDQ6VXNlcjE2NzU2OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/167569?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/criccomini",
      "html_url": "https://github.com/criccomini",
      "followers_url": "https://api.github.com/users/criccomini/followers",
      "following_url": "https://api.github.com/users/criccomini/following{/other_user}",
      "gists_url": "https://api.github.com/users/criccomini/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/criccomini/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/criccomini/subscriptions",
      "organizations_url": "https://api.github.com/users/criccomini/orgs",
      "repos_url": "https://api.github.com/users/criccomini/repos",
      "events_url": "https://api.github.com/users/criccomini/events{/privacy}",
      "received_events_url": "https://api.github.com/users/criccomini/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "PyDoc for params above.\n",
    "created_at": "2016-02-04T01:17:16Z",
    "updated_at": "2016-02-04T17:40:47Z",
    "html_url": "https://github.com/apache/airflow/pull/949#discussion_r51816416",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/949",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/51816416"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/949#discussion_r51816416"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/949"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/51816416/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 14,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/51816524",
    "pull_request_review_id": null,
    "id": 51816524,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODE2NTI0",
    "diff_hunk": "@@ -36,6 +39,10 @@ def _authorize(self):\n         service_account = connection_extras.get('service_account', False)\n         key_path = connection_extras.get('key_path', False)\n \n+        kwargs = {}\n+        if self.sub:\n+            kwargs['sub'] = self.sub",
    "path": "airflow/contrib/hooks/gc_base_hook.py",
    "commit_id": "f639334766144d1e3322b73dd8d8b953c80c7b93",
    "original_commit_id": "f95a140587bd70627f751e42ce04bbfeab20a81c",
    "user": {
      "login": "criccomini",
      "id": 167569,
      "node_id": "MDQ6VXNlcjE2NzU2OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/167569?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/criccomini",
      "html_url": "https://github.com/criccomini",
      "followers_url": "https://api.github.com/users/criccomini/followers",
      "following_url": "https://api.github.com/users/criccomini/following{/other_user}",
      "gists_url": "https://api.github.com/users/criccomini/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/criccomini/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/criccomini/subscriptions",
      "organizations_url": "https://api.github.com/users/criccomini/orgs",
      "repos_url": "https://api.github.com/users/criccomini/repos",
      "events_url": "https://api.github.com/users/criccomini/events{/privacy}",
      "received_events_url": "https://api.github.com/users/criccomini/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "I think you can do this more idiomatically as:\n\n```\nkwargs = {'sub': self.sub} if self.sub else {}\n```\n",
    "created_at": "2016-02-04T01:18:38Z",
    "updated_at": "2016-02-04T17:40:47Z",
    "html_url": "https://github.com/apache/airflow/pull/949#discussion_r51816524",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/949",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/51816524"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/949#discussion_r51816524"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/949"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/51816524/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 26,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/51906589",
    "pull_request_review_id": null,
    "id": 51906589,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTA2NTg5",
    "diff_hunk": "@@ -36,6 +39,10 @@ def _authorize(self):\n         service_account = connection_extras.get('service_account', False)\n         key_path = connection_extras.get('key_path', False)\n \n+        kwargs = {}\n+        if self.sub:\n+            kwargs['sub'] = self.sub",
    "path": "airflow/contrib/hooks/gc_base_hook.py",
    "commit_id": "f639334766144d1e3322b73dd8d8b953c80c7b93",
    "original_commit_id": "f95a140587bd70627f751e42ce04bbfeab20a81c",
    "user": {
      "login": "mtagle",
      "id": 2165162,
      "node_id": "MDQ6VXNlcjIxNjUxNjI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2165162?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mtagle",
      "html_url": "https://github.com/mtagle",
      "followers_url": "https://api.github.com/users/mtagle/followers",
      "following_url": "https://api.github.com/users/mtagle/following{/other_user}",
      "gists_url": "https://api.github.com/users/mtagle/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mtagle/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mtagle/subscriptions",
      "organizations_url": "https://api.github.com/users/mtagle/orgs",
      "repos_url": "https://api.github.com/users/mtagle/repos",
      "events_url": "https://api.github.com/users/mtagle/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mtagle/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "my thought is this is a bit more extensible if we ever need to add anything else to kwargs.\n",
    "created_at": "2016-02-04T17:28:59Z",
    "updated_at": "2016-02-04T17:40:47Z",
    "html_url": "https://github.com/apache/airflow/pull/949#discussion_r51906589",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/949",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/51906589"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/949#discussion_r51906589"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/949"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/51906589/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 26,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/52035457",
    "pull_request_review_id": null,
    "id": 52035457,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDM1NDU3",
    "diff_hunk": "@@ -981,7 +981,8 @@ def run(\n             if self.try_number == 0:\n                 msg = \"First run\"\n             else:\n-                msg = \"Attempt {self.try_number} out of {tot_tries}\"\n+                msg = \"Attempt {} out of {}\".format(self.try_number,",
    "path": "airflow/models.py",
    "commit_id": "bbed0b23506cc4dcb5f31089686b58dda57474d3",
    "original_commit_id": "c8b47fce064186de6cb1fb7077a76c9af1de5106",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "I think this will now say \"Attempt 1\" on the 2nd try (1st retry) since the string is formatted before the counter is incremented. Maybe we need a message that's more clear since it looks like the current one threw you off...\n",
    "created_at": "2016-02-05T16:12:24Z",
    "updated_at": "2016-02-05T19:01:21Z",
    "html_url": "https://github.com/apache/airflow/pull/958#discussion_r52035457",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/958",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/52035457"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/958#discussion_r52035457"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/958"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/52035457/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 5,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/52038658",
    "pull_request_review_id": null,
    "id": 52038658,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDM4NjU4",
    "diff_hunk": "@@ -981,7 +981,8 @@ def run(\n             if self.try_number == 0:\n                 msg = \"First run\"\n             else:\n-                msg = \"Attempt {self.try_number} out of {tot_tries}\"\n+                msg = \"Attempt {} out of {}\".format(self.try_number,",
    "path": "airflow/models.py",
    "commit_id": "bbed0b23506cc4dcb5f31089686b58dda57474d3",
    "original_commit_id": "c8b47fce064186de6cb1fb7077a76c9af1de5106",
    "user": {
      "login": "r39132",
      "id": 581734,
      "node_id": "MDQ6VXNlcjU4MTczNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/581734?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/r39132",
      "html_url": "https://github.com/r39132",
      "followers_url": "https://api.github.com/users/r39132/followers",
      "following_url": "https://api.github.com/users/r39132/following{/other_user}",
      "gists_url": "https://api.github.com/users/r39132/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/r39132/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/r39132/subscriptions",
      "organizations_url": "https://api.github.com/users/r39132/orgs",
      "repos_url": "https://api.github.com/users/r39132/repos",
      "events_url": "https://api.github.com/users/r39132/events{/privacy}",
      "received_events_url": "https://api.github.com/users/r39132/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "I see. 'First Run' should really say 'Attempt 1'. I'll fix it.  \n",
    "created_at": "2016-02-05T16:32:20Z",
    "updated_at": "2016-02-05T19:01:21Z",
    "html_url": "https://github.com/apache/airflow/pull/958#discussion_r52038658",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/958",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/52038658"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/958#discussion_r52038658"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/958"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/52038658/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 5,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/52089195",
    "pull_request_review_id": null,
    "id": 52089195,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDg5MTk1",
    "diff_hunk": "@@ -978,10 +978,11 @@ def run(\n         elif force or self.state in State.runnable():\n             HR = \"\\n\" + (\"-\" * 80) + \"\\n\"  # Line break\n             tot_tries = task.retries + 1\n-            if self.try_number == 0:\n-                msg = \"First run\"\n-            else:\n-                msg = \"Attempt {self.try_number} out of {tot_tries}\"\n+            # For reporting purposes, we report based on 1-indexed,\n+            # not 0-indexed lists (i.e. Attempt 1 instead of\n+            # Attempt 0 for the first attempt)\n+            msg = \"Attempt {} out of {}\".format(self.try_number+1,\n+                                                tot_tries)\n             self.try_number += 1\n             msg = msg.format(**locals())",
    "path": "airflow/models.py",
    "commit_id": "bbed0b23506cc4dcb5f31089686b58dda57474d3",
    "original_commit_id": "bbed0b23506cc4dcb5f31089686b58dda57474d3",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "this line isn't needed anymore...\n",
    "created_at": "2016-02-05T23:56:35Z",
    "updated_at": "2016-02-05T23:56:35Z",
    "html_url": "https://github.com/apache/airflow/pull/958#discussion_r52089195",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/958",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/52089195"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/958#discussion_r52089195"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/958"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/52089195/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 987,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 14,
    "position": 14,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/52125227",
    "pull_request_review_id": null,
    "id": 52125227,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTI1MjI3",
    "diff_hunk": "@@ -37,8 +38,9 @@ def get_conn(self):\n                 if _kerberos_security_mode:\n                   client = KerberosClient(connection_str)\n                 else:\n-                  client = InsecureClient(connection_str)\n-                client.content('/')\n+                  proxy_user = self.proxy_user or nn.login\n+                  client = InsecureClient(connection_str, user=proxy_user)\n+                client.status('/')",
    "path": "airflow/hooks/webhdfs_hook.py",
    "commit_id": "9a3a75547db61937ccdc1e28011af0cf6cf070ec",
    "original_commit_id": "9a3a75547db61937ccdc1e28011af0cf6cf070ec",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "I'm not familiar with the lib, what is this change about?\n",
    "created_at": "2016-02-07T21:31:14Z",
    "updated_at": "2016-02-07T21:31:14Z",
    "html_url": "https://github.com/apache/airflow/pull/942#discussion_r52125227",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/942",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/52125227"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/942#discussion_r52125227"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/942"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/52125227/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 43,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 19,
    "position": 19,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/52126085",
    "pull_request_review_id": null,
    "id": 52126085,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTI2MDg1",
    "diff_hunk": "@@ -37,8 +38,9 @@ def get_conn(self):\n                 if _kerberos_security_mode:\n                   client = KerberosClient(connection_str)\n                 else:\n-                  client = InsecureClient(connection_str)\n-                client.content('/')\n+                  proxy_user = self.proxy_user or nn.login\n+                  client = InsecureClient(connection_str, user=proxy_user)\n+                client.status('/')",
    "path": "airflow/hooks/webhdfs_hook.py",
    "commit_id": "9a3a75547db61937ccdc1e28011af0cf6cf070ec",
    "original_commit_id": "9a3a75547db61937ccdc1e28011af0cf6cf070ec",
    "user": {
      "login": "xadhoom",
      "id": 197981,
      "node_id": "MDQ6VXNlcjE5Nzk4MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/197981?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/xadhoom",
      "html_url": "https://github.com/xadhoom",
      "followers_url": "https://api.github.com/users/xadhoom/followers",
      "following_url": "https://api.github.com/users/xadhoom/following{/other_user}",
      "gists_url": "https://api.github.com/users/xadhoom/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/xadhoom/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/xadhoom/subscriptions",
      "organizations_url": "https://api.github.com/users/xadhoom/orgs",
      "repos_url": "https://api.github.com/users/xadhoom/repos",
      "events_url": "https://api.github.com/users/xadhoom/events{/privacy}",
      "received_events_url": "https://api.github.com/users/xadhoom/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "As I understand, the content method is called to check if the namenode is valid, but it fails also on current airflow, if the task is run as any user != hdfs, while the status method will not, so I think that calling status is better for checking the namenode validity.\nThe other change is for adding the \"doAs\" also to the hdfs client.\n",
    "created_at": "2016-02-07T22:20:49Z",
    "updated_at": "2016-02-07T22:20:49Z",
    "html_url": "https://github.com/apache/airflow/pull/942#discussion_r52126085",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/942",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/52126085"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/942#discussion_r52126085"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/942"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/52126085/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 43,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 19,
    "position": 19,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/52270400",
    "pull_request_review_id": null,
    "id": 52270400,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjcwNDAw",
    "diff_hunk": "@@ -268,5 +274,17 @@\n         return false\n     }\n \n+    d3.select(\"#refresh_button\").on(\"click\",\n+        function() {\n+            $.get(",
    "path": "airflow/www/templates/airflow/graph.html",
    "commit_id": "040bf87b8eb724968bb52eeb3d6201b09e4159d7",
    "original_commit_id": "2ea8ffed8e56a16ce6a01bad3e7bff9327536dbd",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "We need some sort of indicator that things are getting fetched here, maybe the loading.gif count elsewhere.\n\nAlso error handling the .get call. What if the async call fails?\n",
    "created_at": "2016-02-09T05:59:34Z",
    "updated_at": "2016-02-11T02:29:17Z",
    "html_url": "https://github.com/apache/airflow/pull/940#discussion_r52270400",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/940",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/52270400"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/940#discussion_r52270400"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/940"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/52270400/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 294,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 131,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/52280807",
    "pull_request_review_id": null,
    "id": 52280807,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjgwODA3",
    "diff_hunk": "@@ -826,12 +832,16 @@ def are_dependencies_met(\n                 TI.state == State.SUCCESS,\n             ).first()\n             if not previous_ti:\n+                if verbose:\n+                    logging.warning(\"depends_on_past not satisfied\")\n                 return False\n \n             # Applying wait_for_downstream\n             previous_ti.task = self.task\n             if task.wait_for_downstream and not \\\n                     previous_ti.are_dependents_done(session):\n+                if verbose:\n+                    logging.warning(\"wait_for_downstream not satisfied\")",
    "path": "airflow/models.py",
    "commit_id": "9101ea043b53b88722f2da70791761d4133af33c",
    "original_commit_id": "9101ea043b53b88722f2da70791761d4133af33c",
    "user": {
      "login": "kretes",
      "id": 1224887,
      "node_id": "MDQ6VXNlcjEyMjQ4ODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1224887?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kretes",
      "html_url": "https://github.com/kretes",
      "followers_url": "https://api.github.com/users/kretes/followers",
      "following_url": "https://api.github.com/users/kretes/following{/other_user}",
      "gists_url": "https://api.github.com/users/kretes/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kretes/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kretes/subscriptions",
      "organizations_url": "https://api.github.com/users/kretes/orgs",
      "repos_url": "https://api.github.com/users/kretes/repos",
      "events_url": "https://api.github.com/users/kretes/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kretes/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Looks better. is it possible at this stage to get even more information e.g. which of (possibly many) dependencies failed.\nBTW. I got confused - isn't it upstream task that is a dependency here, not a downstream one?\n",
    "created_at": "2016-02-09T08:57:17Z",
    "updated_at": "2016-02-09T08:57:17Z",
    "html_url": "https://github.com/apache/airflow/pull/976#discussion_r52280807",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/976",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/52280807"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/976#discussion_r52280807"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/976"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/52280807/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 844,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 35,
    "position": 35,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/52336765",
    "pull_request_review_id": null,
    "id": 52336765,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzM2NzY1",
    "diff_hunk": "@@ -268,5 +274,17 @@\n         return false\n     }\n \n+    d3.select(\"#refresh_button\").on(\"click\",\n+        function() {\n+            $.get(",
    "path": "airflow/www/templates/airflow/graph.html",
    "commit_id": "040bf87b8eb724968bb52eeb3d6201b09e4159d7",
    "original_commit_id": "2ea8ffed8e56a16ce6a01bad3e7bff9327536dbd",
    "user": {
      "login": "KevYuen",
      "id": 4744103,
      "node_id": "MDQ6VXNlcjQ3NDQxMDM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4744103?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/KevYuen",
      "html_url": "https://github.com/KevYuen",
      "followers_url": "https://api.github.com/users/KevYuen/followers",
      "following_url": "https://api.github.com/users/KevYuen/following{/other_user}",
      "gists_url": "https://api.github.com/users/KevYuen/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/KevYuen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/KevYuen/subscriptions",
      "organizations_url": "https://api.github.com/users/KevYuen/orgs",
      "repos_url": "https://api.github.com/users/KevYuen/repos",
      "events_url": "https://api.github.com/users/KevYuen/events{/privacy}",
      "received_events_url": "https://api.github.com/users/KevYuen/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Will add those when I have sometime this week.\n",
    "created_at": "2016-02-09T16:53:04Z",
    "updated_at": "2016-02-11T02:29:17Z",
    "html_url": "https://github.com/apache/airflow/pull/940#discussion_r52336765",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/940",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/52336765"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/940#discussion_r52336765"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/940"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/52336765/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 294,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 131,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/52361553",
    "pull_request_review_id": null,
    "id": 52361553,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzYxNTUz",
    "diff_hunk": "@@ -826,12 +832,16 @@ def are_dependencies_met(\n                 TI.state == State.SUCCESS,\n             ).first()\n             if not previous_ti:\n+                if verbose:\n+                    logging.warning(\"depends_on_past not satisfied\")\n                 return False\n \n             # Applying wait_for_downstream\n             previous_ti.task = self.task\n             if task.wait_for_downstream and not \\\n                     previous_ti.are_dependents_done(session):\n+                if verbose:\n+                    logging.warning(\"wait_for_downstream not satisfied\")",
    "path": "airflow/models.py",
    "commit_id": "9101ea043b53b88722f2da70791761d4133af33c",
    "original_commit_id": "9101ea043b53b88722f2da70791761d4133af33c",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Downstream jobs run after, so they depend on upstream jobs.\n",
    "created_at": "2016-02-09T19:37:24Z",
    "updated_at": "2016-02-09T19:37:24Z",
    "html_url": "https://github.com/apache/airflow/pull/976#discussion_r52361553",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/976",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/52361553"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/976#discussion_r52361553"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/976"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/52361553/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 844,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 35,
    "position": 35,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/52361658",
    "pull_request_review_id": null,
    "id": 52361658,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzYxNjU4",
    "diff_hunk": "@@ -826,12 +832,16 @@ def are_dependencies_met(\n                 TI.state == State.SUCCESS,\n             ).first()\n             if not previous_ti:\n+                if verbose:\n+                    logging.warning(\"depends_on_past not satisfied\")\n                 return False\n \n             # Applying wait_for_downstream\n             previous_ti.task = self.task\n             if task.wait_for_downstream and not \\\n                     previous_ti.are_dependents_done(session):\n+                if verbose:\n+                    logging.warning(\"wait_for_downstream not satisfied\")",
    "path": "airflow/models.py",
    "commit_id": "9101ea043b53b88722f2da70791761d4133af33c",
    "original_commit_id": "9101ea043b53b88722f2da70791761d4133af33c",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "wait_for_downstream is a very specific flag it's documented in the docs.\n",
    "created_at": "2016-02-09T19:38:00Z",
    "updated_at": "2016-02-09T19:38:00Z",
    "html_url": "https://github.com/apache/airflow/pull/976#discussion_r52361658",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/976",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/52361658"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/976#discussion_r52361658"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/976"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/52361658/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 844,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 35,
    "position": 35,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/52503392",
    "pull_request_review_id": null,
    "id": 52503392,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTAzMzky",
    "diff_hunk": "@@ -162,44 +241,210 @@ def run_with_configuration(self, configuration):\n         For more details about the configuration parameter.\n \n         :param configuration: The configuration parameter maps directly to\n-        BigQuery's configuration field in the job object. See\n-        https://cloud.google.com/bigquery/docs/reference/v2/jobs for details.\n+            BigQuery's configuration field in the job object. See\n+            https://cloud.google.com/bigquery/docs/reference/v2/jobs for\n+            details.\n         \"\"\"\n-        service = self.get_conn()\n-        connection_extras = self._extras_dejson()\n-        project = connection_extras['project']\n-        jobs = service.jobs()\n+        jobs = self.service.jobs()\n         job_data = {\n             'configuration': configuration\n         }\n \n         # Send query and wait for reply.\n         query_reply = jobs \\\n-            .insert(projectId=project, body=job_data) \\\n+            .insert(projectId=self.project_id, body=job_data) \\\n             .execute()\n         job_id = query_reply['jobReference']['jobId']\n-        job = jobs.get(projectId=project, jobId=job_id).execute()\n+        job = jobs.get(projectId=self.project_id, jobId=job_id).execute()\n \n         # Wait for query to finish.\n         while not job['status']['state'] == 'DONE':\n-            logging.info('Waiting for job to complete: %s, %s', project, job_id)\n+            logging.info('Waiting for job to complete: %s, %s', self.project_id, job_id)\n             time.sleep(5)\n-            job = jobs.get(projectId=project, jobId=job_id).execute()\n+            job = jobs.get(projectId=self.project_id, jobId=job_id).execute()\n \n         # Check if job had errors.\n         if 'errorResult' in job['status']:\n             raise Exception('BigQuery job failed. Final error was: %s', job['status']['errorResult'])\n \n-class BigQueryPandasConnector(GbqConnector):\n+        return job_id\n+\n+class BigQueryCursor(BigQueryBaseCursor):\n     \"\"\"\n-    This connector behaves identically to GbqConnector (from Pandas), except\n-    that it allows the service to be injected, and disables a call to\n-    self.get_credentials(). This allows Airflow to use BigQuery with Pandas\n-    without forcing a three legged OAuth connection. Instead, we can inject\n-    service account credentials into the binding.\n+    A very basic BigQuery PEP 249 cursor implementation. The PyHive PEP 249\n+    implementation was used as a reference:\n+\n+    https://github.com/dropbox/PyHive/blob/master/pyhive/presto.py\n+    https://github.com/dropbox/PyHive/blob/master/pyhive/common.py\n     \"\"\"\n-    def __init__(self, project_id, service, reauth=False):\n-        self.test_google_api_imports()\n-        self.project_id = project_id\n-        self.reauth = reauth\n-        self.service = service\n+\n+    def __init__(self, service, project_id):\n+        super(BigQueryCursor, self).__init__(service=service, project_id=project_id)\n+        self.buffersize = None\n+        self.page_token = None\n+        self.job_id = None\n+        self.buffer = []\n+\n+    @property\n+    def description(self):\n+        \"\"\" The schema description method is not currently implemented. \"\"\"\n+        raise NotImplementedError\n+\n+    def close(self):\n+        \"\"\" By default, do nothing \"\"\"\n+        pass\n+\n+    @property\n+    def rowcount(self):\n+        \"\"\" By default, return -1 to indicate that this is not supported. \"\"\"\n+        return -1\n+\n+    def execute(self, operation, parameters=None):\n+        \"\"\"\n+        Executes a BigQuery query, and returns the job ID.",
    "path": "airflow/contrib/hooks/bigquery_hook.py",
    "commit_id": "d8a72893a314602a296308312aa658f3afce2d0b",
    "original_commit_id": "d8a72893a314602a296308312aa658f3afce2d0b",
    "user": {
      "login": "mtagle",
      "id": 2165162,
      "node_id": "MDQ6VXNlcjIxNjUxNjI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2165162?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mtagle",
      "html_url": "https://github.com/mtagle",
      "followers_url": "https://api.github.com/users/mtagle/followers",
      "following_url": "https://api.github.com/users/mtagle/following{/other_user}",
      "gists_url": "https://api.github.com/users/mtagle/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mtagle/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mtagle/subscriptions",
      "organizations_url": "https://api.github.com/users/mtagle/orgs",
      "repos_url": "https://api.github.com/users/mtagle/repos",
      "events_url": "https://api.github.com/users/mtagle/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mtagle/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "looks like this function sets, but does not return, the job id.\n",
    "created_at": "2016-02-10T18:42:39Z",
    "updated_at": "2016-02-10T18:42:39Z",
    "html_url": "https://github.com/apache/airflow/pull/981#discussion_r52503392",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/981",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/52503392"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/981#discussion_r52503392"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/981"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/52503392/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 304,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 295,
    "position": 295,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/52522061",
    "pull_request_review_id": null,
    "id": 52522061,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTIyMDYx",
    "diff_hunk": "@@ -826,12 +832,16 @@ def are_dependencies_met(\n                 TI.state == State.SUCCESS,\n             ).first()\n             if not previous_ti:\n+                if verbose:\n+                    logging.warning(\"depends_on_past not satisfied\")\n                 return False\n \n             # Applying wait_for_downstream\n             previous_ti.task = self.task\n             if task.wait_for_downstream and not \\\n                     previous_ti.are_dependents_done(session):\n+                if verbose:\n+                    logging.warning(\"wait_for_downstream not satisfied\")",
    "path": "airflow/models.py",
    "commit_id": "9101ea043b53b88722f2da70791761d4133af33c",
    "original_commit_id": "9101ea043b53b88722f2da70791761d4133af33c",
    "user": {
      "login": "kretes",
      "id": 1224887,
      "node_id": "MDQ6VXNlcjEyMjQ4ODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1224887?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kretes",
      "html_url": "https://github.com/kretes",
      "followers_url": "https://api.github.com/users/kretes/followers",
      "following_url": "https://api.github.com/users/kretes/following{/other_user}",
      "gists_url": "https://api.github.com/users/kretes/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kretes/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kretes/subscriptions",
      "organizations_url": "https://api.github.com/users/kretes/orgs",
      "repos_url": "https://api.github.com/users/kretes/repos",
      "events_url": "https://api.github.com/users/kretes/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kretes/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "yes, I get it now, 'wait_for_downstream' could be more precisely called 'wait_for_past_downstream'.\n",
    "created_at": "2016-02-10T20:46:04Z",
    "updated_at": "2016-02-10T20:46:04Z",
    "html_url": "https://github.com/apache/airflow/pull/976#discussion_r52522061",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/976",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/52522061"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/976#discussion_r52522061"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/976"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/52522061/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 844,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 35,
    "position": 35,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/52522598",
    "pull_request_review_id": null,
    "id": 52522598,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTIyNTk4",
    "diff_hunk": "@@ -895,6 +905,8 @@ def are_dependencies_met(\n         if not main_session:\n             session.commit()\n             session.close()\n+        if verbose:\n+            logging.warning(\"Trigger rule `{}` not satisfied\".format(tr))",
    "path": "airflow/models.py",
    "commit_id": "9101ea043b53b88722f2da70791761d4133af33c",
    "original_commit_id": "9101ea043b53b88722f2da70791761d4133af33c",
    "user": {
      "login": "kretes",
      "id": 1224887,
      "node_id": "MDQ6VXNlcjEyMjQ4ODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1224887?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kretes",
      "html_url": "https://github.com/kretes",
      "followers_url": "https://api.github.com/users/kretes/followers",
      "following_url": "https://api.github.com/users/kretes/following{/other_user}",
      "gists_url": "https://api.github.com/users/kretes/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kretes/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kretes/subscriptions",
      "organizations_url": "https://api.github.com/users/kretes/orgs",
      "repos_url": "https://api.github.com/users/kretes/repos",
      "events_url": "https://api.github.com/users/kretes/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kretes/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "here in task._upstream_list we have a list of upstream dependencies, but if some is not satisfied we would still just see e.g. 'Trigger rule `ALL_SUCCESS` not satisfied' while airflow user would more likely be interested in the list of upstream tasks missing. This does not matter for ONE_SUCCESS and ONE_FAILED but for ALL_\\* it does.\nGiven the way the query is done now (using just sum of tasks in a specific state) it is not that straightforward to print it all out here, but you could consider that at some point.\n",
    "created_at": "2016-02-10T20:50:12Z",
    "updated_at": "2016-02-10T20:50:12Z",
    "html_url": "https://github.com/apache/airflow/pull/976#discussion_r52522598",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/976",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/52522598"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/976#discussion_r52522598"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/976"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/52522598/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 909,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 44,
    "position": 44,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/52525506",
    "pull_request_review_id": null,
    "id": 52525506,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTI1NTA2",
    "diff_hunk": "@@ -826,12 +832,16 @@ def are_dependencies_met(\n                 TI.state == State.SUCCESS,\n             ).first()\n             if not previous_ti:\n+                if verbose:\n+                    logging.warning(\"depends_on_past not satisfied\")\n                 return False\n \n             # Applying wait_for_downstream\n             previous_ti.task = self.task\n             if task.wait_for_downstream and not \\\n                     previous_ti.are_dependents_done(session):\n+                if verbose:\n+                    logging.warning(\"wait_for_downstream not satisfied\")",
    "path": "airflow/models.py",
    "commit_id": "9101ea043b53b88722f2da70791761d4133af33c",
    "original_commit_id": "9101ea043b53b88722f2da70791761d4133af33c",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "right, I added the feature early on and can't change the API easily anymore...\n",
    "created_at": "2016-02-10T21:11:42Z",
    "updated_at": "2016-02-10T21:11:42Z",
    "html_url": "https://github.com/apache/airflow/pull/976#discussion_r52525506",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/976",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/52525506"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/976#discussion_r52525506"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/976"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/52525506/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 844,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 35,
    "position": 35,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/52525888",
    "pull_request_review_id": null,
    "id": 52525888,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTI1ODg4",
    "diff_hunk": "@@ -895,6 +905,8 @@ def are_dependencies_met(\n         if not main_session:\n             session.commit()\n             session.close()\n+        if verbose:\n+            logging.warning(\"Trigger rule `{}` not satisfied\".format(tr))",
    "path": "airflow/models.py",
    "commit_id": "9101ea043b53b88722f2da70791761d4133af33c",
    "original_commit_id": "9101ea043b53b88722f2da70791761d4133af33c",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Right, it'd be nice to show the details but would cost. This query above is optimize for a single scan and return the minimum amount of info to be able to do the job...\n\nI'm planning to get in this area of the code and change things a bit eventually to power a UI page detailing the dependencies and explaining which ones are met and which ones aren't. This would answer clearly the most common question \"Why isn't my task running?\"\n",
    "created_at": "2016-02-10T21:14:21Z",
    "updated_at": "2016-02-10T21:14:21Z",
    "html_url": "https://github.com/apache/airflow/pull/976#discussion_r52525888",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/976",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/52525888"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/976#discussion_r52525888"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/976"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/52525888/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 909,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 44,
    "position": 44,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/53211575",
    "pull_request_review_id": null,
    "id": 53211575,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjExNTc1",
    "diff_hunk": "@@ -127,7 +127,7 @@ def set_is_paused(is_paused, args):\n \n \n def run(args):\n-\n+    utils.set_sqla_nopool()",
    "path": "airflow/bin/cli.py",
    "commit_id": "1d01a26689583a0b3753f3307a80db2fb8b2e96d",
    "original_commit_id": "c28d9add6f54a6dad96e751e2a7137909e4c8abf",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "This is the entry point\n",
    "created_at": "2016-02-17T18:52:36Z",
    "updated_at": "2016-03-23T05:33:24Z",
    "html_url": "https://github.com/apache/airflow/pull/1021#discussion_r53211575",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1021",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/53211575"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1021#discussion_r53211575"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1021"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/53211575/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 135,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 23,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/53392476",
    "pull_request_review_id": null,
    "id": 53392476,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzkyNDc2",
    "diff_hunk": "@@ -617,11 +619,20 @@ def handle_timeout(self, signum, frame):\n         raise AirflowTaskTimeout(self.error_message)\n \n     def __enter__(self):\n-        signal.signal(signal.SIGALRM, self.handle_timeout)\n-        signal.alarm(self.seconds)\n+        try:\n+            signal.signal(signal.SIGALRM, self.handle_timeout)\n+            signal.alarm(self.seconds)\n+        except Exception as e:",
    "path": "airflow/utils.py",
    "commit_id": "1d01a26689583a0b3753f3307a80db2fb8b2e96d",
    "original_commit_id": "c28d9add6f54a6dad96e751e2a7137909e4c8abf",
    "user": {
      "login": "aoen",
      "id": 1592778,
      "node_id": "MDQ6VXNlcjE1OTI3Nzg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1592778?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aoen",
      "html_url": "https://github.com/aoen",
      "followers_url": "https://api.github.com/users/aoen/followers",
      "following_url": "https://api.github.com/users/aoen/following{/other_user}",
      "gists_url": "https://api.github.com/users/aoen/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aoen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aoen/subscriptions",
      "organizations_url": "https://api.github.com/users/aoen/orgs",
      "repos_url": "https://api.github.com/users/aoen/repos",
      "events_url": "https://api.github.com/users/aoen/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aoen/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Might be a good idea to log the exception (and maybe even the trace) too, even if it's only debug level\n",
    "created_at": "2016-02-18T22:21:25Z",
    "updated_at": "2016-03-23T05:33:24Z",
    "html_url": "https://github.com/apache/airflow/pull/1021#discussion_r53392476",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1021",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/53392476"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1021#discussion_r53392476"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1021"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/53392476/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 63,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/53392545",
    "pull_request_review_id": null,
    "id": 53392545,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzkyNTQ1",
    "diff_hunk": "@@ -617,11 +619,20 @@ def handle_timeout(self, signum, frame):\n         raise AirflowTaskTimeout(self.error_message)\n \n     def __enter__(self):\n-        signal.signal(signal.SIGALRM, self.handle_timeout)\n-        signal.alarm(self.seconds)\n+        try:\n+            signal.signal(signal.SIGALRM, self.handle_timeout)\n+            signal.alarm(self.seconds)\n+        except Exception as e:\n+            logging.warning(\n+                \"timeout could not be activated, it doens't work within \"\n+                \"threads. Most likely you are using a LocalExecutor. \"\n+                \"Timeouts aren't compatible with LocalExecutor\")\n \n     def __exit__(self, type, value, traceback):\n-        signal.alarm(0)\n+        try:\n+            signal.alarm(0)\n+        except Exception as e:",
    "path": "airflow/utils.py",
    "commit_id": "1d01a26689583a0b3753f3307a80db2fb8b2e96d",
    "original_commit_id": "c28d9add6f54a6dad96e751e2a7137909e4c8abf",
    "user": {
      "login": "aoen",
      "id": 1592778,
      "node_id": "MDQ6VXNlcjE1OTI3Nzg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1592778?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aoen",
      "html_url": "https://github.com/aoen",
      "followers_url": "https://api.github.com/users/aoen/followers",
      "following_url": "https://api.github.com/users/aoen/following{/other_user}",
      "gists_url": "https://api.github.com/users/aoen/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aoen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aoen/subscriptions",
      "organizations_url": "https://api.github.com/users/aoen/orgs",
      "repos_url": "https://api.github.com/users/aoen/repos",
      "events_url": "https://api.github.com/users/aoen/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aoen/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Might be a good idea to log the exception (and maybe even the trace) too, even if it's only debug level\n",
    "created_at": "2016-02-18T22:21:55Z",
    "updated_at": "2016-03-23T05:33:24Z",
    "html_url": "https://github.com/apache/airflow/pull/1021#discussion_r53392545",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1021",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/53392545"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1021#discussion_r53392545"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1021"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/53392545/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 73,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/53393438",
    "pull_request_review_id": null,
    "id": 53393438,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzkzNDM4",
    "diff_hunk": "@@ -775,3 +786,33 @@ def logger(self):\n             self._logger = logging.root.getChild(self.__class__.__module__ + '.' +self.__class__.__name__)\n             return self._logger\n \n+\n+def get_sqla_engine(pool_size=5, pool_recycle=3600):\n+    \"\"\"\n+    Get a sqlalchemy engine object, pass pool_size=0 to get an engine\n+    without a connection pool.\n+    \"\"\"\n+    CONN = settings.SQL_ALCHEMY_CONN\n+    engine_args = {}\n+    if 'sqlite' not in CONN and pool_size:\n+        # Engine args not supported by sqlite",
    "path": "airflow/utils.py",
    "commit_id": "1d01a26689583a0b3753f3307a80db2fb8b2e96d",
    "original_commit_id": "c28d9add6f54a6dad96e751e2a7137909e4c8abf",
    "user": {
      "login": "aoen",
      "id": 1592778,
      "node_id": "MDQ6VXNlcjE1OTI3Nzg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1592778?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aoen",
      "html_url": "https://github.com/aoen",
      "followers_url": "https://api.github.com/users/aoen/followers",
      "following_url": "https://api.github.com/users/aoen/following{/other_user}",
      "gists_url": "https://api.github.com/users/aoen/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aoen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aoen/subscriptions",
      "organizations_url": "https://api.github.com/users/aoen/orgs",
      "repos_url": "https://api.github.com/users/aoen/repos",
      "events_url": "https://api.github.com/users/aoen/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aoen/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "I'm curious why NullPool for sqllite instead of the default SingletonThreadPool: http://docs.sqlalchemy.org/en/latest/dialects/sqlite.html\n",
    "created_at": "2016-02-18T22:29:02Z",
    "updated_at": "2016-03-23T05:33:24Z",
    "html_url": "https://github.com/apache/airflow/pull/1021#discussion_r53393438",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1021",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/53393438"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1021#discussion_r53393438"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1021"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/53393438/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 990,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 91,
    "position": 91,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/53393714",
    "pull_request_review_id": null,
    "id": 53393714,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzkzNzE0",
    "diff_hunk": "@@ -775,3 +786,33 @@ def logger(self):\n             self._logger = logging.root.getChild(self.__class__.__module__ + '.' +self.__class__.__name__)\n             return self._logger\n \n+\n+def get_sqla_engine(pool_size=5, pool_recycle=3600):\n+    \"\"\"\n+    Get a sqlalchemy engine object, pass pool_size=0 to get an engine\n+    without a connection pool.\n+    \"\"\"\n+    CONN = settings.SQL_ALCHEMY_CONN\n+    engine_args = {}\n+    if 'sqlite' not in CONN and pool_size:\n+        # Engine args not supported by sqlite\n+        engine_args['pool_size'] = pool_size\n+        engine_args['pool_recycle'] = pool_recycle\n+        engine_args['poolclass'] = QueuePool\n+    else:\n+        engine_args['poolclass'] = NullPool\n+\n+    engine = create_engine(CONN, **engine_args)\n+    return engine\n+\n+\n+def set_sqla_nopool():\n+    \"\"\"\n+    Switcharoo to set a SqlAlchemy engine that does not have pool.\n+    This is used to limit the number of concurrent connections in\n+    in the metadata database when running thousands of task instances.",
    "path": "airflow/utils.py",
    "commit_id": "1d01a26689583a0b3753f3307a80db2fb8b2e96d",
    "original_commit_id": "c28d9add6f54a6dad96e751e2a7137909e4c8abf",
    "user": {
      "login": "aoen",
      "id": 1592778,
      "node_id": "MDQ6VXNlcjE1OTI3Nzg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1592778?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aoen",
      "html_url": "https://github.com/aoen",
      "followers_url": "https://api.github.com/users/aoen/followers",
      "following_url": "https://api.github.com/users/aoen/following{/other_user}",
      "gists_url": "https://api.github.com/users/aoen/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aoen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aoen/subscriptions",
      "organizations_url": "https://api.github.com/users/aoen/orgs",
      "repos_url": "https://api.github.com/users/aoen/repos",
      "events_url": "https://api.github.com/users/aoen/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aoen/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Nit: duplicate \"in\"\n",
    "created_at": "2016-02-18T22:31:04Z",
    "updated_at": "2016-03-23T05:33:24Z",
    "html_url": "https://github.com/apache/airflow/pull/1021#discussion_r53393714",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1021",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/53393714"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1021#discussion_r53393714"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1021"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/53393714/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 1005,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 106,
    "position": 106,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/53423630",
    "pull_request_review_id": null,
    "id": 53423630,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDIzNjMw",
    "diff_hunk": "@@ -617,11 +619,20 @@ def handle_timeout(self, signum, frame):\n         raise AirflowTaskTimeout(self.error_message)\n \n     def __enter__(self):\n-        signal.signal(signal.SIGALRM, self.handle_timeout)\n-        signal.alarm(self.seconds)\n+        try:\n+            signal.signal(signal.SIGALRM, self.handle_timeout)\n+            signal.alarm(self.seconds)\n+        except Exception as e:",
    "path": "airflow/utils.py",
    "commit_id": "1d01a26689583a0b3753f3307a80db2fb8b2e96d",
    "original_commit_id": "c28d9add6f54a6dad96e751e2a7137909e4c8abf",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Yeah I usually `logging.exception(e)`, but since timeouts are not expected to work when using `LocalExecutor` I thought this might throw people off. Some of these logging messages can really pollute your stdout while say running a backfill if they show 32 times.\n",
    "created_at": "2016-02-19T05:16:00Z",
    "updated_at": "2016-03-23T05:33:24Z",
    "html_url": "https://github.com/apache/airflow/pull/1021#discussion_r53423630",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1021",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/53423630"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1021#discussion_r53423630"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1021"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/53423630/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 63,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/53423738",
    "pull_request_review_id": null,
    "id": 53423738,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDIzNzM4",
    "diff_hunk": "@@ -775,3 +786,33 @@ def logger(self):\n             self._logger = logging.root.getChild(self.__class__.__module__ + '.' +self.__class__.__name__)\n             return self._logger\n \n+\n+def get_sqla_engine(pool_size=5, pool_recycle=3600):\n+    \"\"\"\n+    Get a sqlalchemy engine object, pass pool_size=0 to get an engine\n+    without a connection pool.\n+    \"\"\"\n+    CONN = settings.SQL_ALCHEMY_CONN\n+    engine_args = {}\n+    if 'sqlite' not in CONN and pool_size:\n+        # Engine args not supported by sqlite",
    "path": "airflow/utils.py",
    "commit_id": "1d01a26689583a0b3753f3307a80db2fb8b2e96d",
    "original_commit_id": "c28d9add6f54a6dad96e751e2a7137909e4c8abf",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "sqlite will raise if passed pool related arguments while setting up the engine since it doesn't support it\n",
    "created_at": "2016-02-19T05:17:24Z",
    "updated_at": "2016-03-23T05:33:24Z",
    "html_url": "https://github.com/apache/airflow/pull/1021#discussion_r53423738",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1021",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/53423738"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1021#discussion_r53423738"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1021"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/53423738/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 990,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 91,
    "position": 91,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/53524617",
    "pull_request_review_id": null,
    "id": 53524617,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTI0NjE3",
    "diff_hunk": "@@ -775,3 +786,33 @@ def logger(self):\n             self._logger = logging.root.getChild(self.__class__.__module__ + '.' +self.__class__.__name__)\n             return self._logger\n \n+\n+def get_sqla_engine(pool_size=5, pool_recycle=3600):\n+    \"\"\"\n+    Get a sqlalchemy engine object, pass pool_size=0 to get an engine\n+    without a connection pool.\n+    \"\"\"\n+    CONN = settings.SQL_ALCHEMY_CONN\n+    engine_args = {}\n+    if 'sqlite' not in CONN and pool_size:\n+        # Engine args not supported by sqlite",
    "path": "airflow/utils.py",
    "commit_id": "1d01a26689583a0b3753f3307a80db2fb8b2e96d",
    "original_commit_id": "c28d9add6f54a6dad96e751e2a7137909e4c8abf",
    "user": {
      "login": "aoen",
      "id": 1592778,
      "node_id": "MDQ6VXNlcjE1OTI3Nzg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1592778?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aoen",
      "html_url": "https://github.com/aoen",
      "followers_url": "https://api.github.com/users/aoen/followers",
      "following_url": "https://api.github.com/users/aoen/following{/other_user}",
      "gists_url": "https://api.github.com/users/aoen/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aoen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aoen/subscriptions",
      "organizations_url": "https://api.github.com/users/aoen/orgs",
      "repos_url": "https://api.github.com/users/aoen/repos",
      "events_url": "https://api.github.com/users/aoen/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aoen/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "I understand about the args, I'm curious about the pool type though. From what I can see, not setting engine_args['poolclass'] or setting it to SingletonThreadPool should be OK.\n",
    "created_at": "2016-02-19T22:00:21Z",
    "updated_at": "2016-03-23T05:33:24Z",
    "html_url": "https://github.com/apache/airflow/pull/1021#discussion_r53524617",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1021",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/53524617"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1021#discussion_r53524617"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1021"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/53524617/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 990,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 91,
    "position": 91,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/53525101",
    "pull_request_review_id": null,
    "id": 53525101,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTI1MTAx",
    "diff_hunk": "@@ -617,11 +619,20 @@ def handle_timeout(self, signum, frame):\n         raise AirflowTaskTimeout(self.error_message)\n \n     def __enter__(self):\n-        signal.signal(signal.SIGALRM, self.handle_timeout)\n-        signal.alarm(self.seconds)\n+        try:\n+            signal.signal(signal.SIGALRM, self.handle_timeout)\n+            signal.alarm(self.seconds)\n+        except Exception as e:",
    "path": "airflow/utils.py",
    "commit_id": "1d01a26689583a0b3753f3307a80db2fb8b2e96d",
    "original_commit_id": "c28d9add6f54a6dad96e751e2a7137909e4c8abf",
    "user": {
      "login": "aoen",
      "id": 1592778,
      "node_id": "MDQ6VXNlcjE1OTI3Nzg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1592778?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aoen",
      "html_url": "https://github.com/aoen",
      "followers_url": "https://api.github.com/users/aoen/followers",
      "following_url": "https://api.github.com/users/aoen/following{/other_user}",
      "gists_url": "https://api.github.com/users/aoen/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aoen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aoen/subscriptions",
      "organizations_url": "https://api.github.com/users/aoen/orgs",
      "repos_url": "https://api.github.com/users/aoen/repos",
      "events_url": "https://api.github.com/users/aoen/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aoen/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "I am worried about the code in the try/except throwing an exception when it is not being run via LocalExecutor. Maybe we can check if we are running in a local executor and maybe catching a narrower scope of exceptions.\n",
    "created_at": "2016-02-19T22:04:24Z",
    "updated_at": "2016-03-23T05:33:24Z",
    "html_url": "https://github.com/apache/airflow/pull/1021#discussion_r53525101",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1021",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/53525101"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1021#discussion_r53525101"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1021"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/53525101/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 63,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/53570391",
    "pull_request_review_id": null,
    "id": 53570391,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTcwMzkx",
    "diff_hunk": "@@ -617,11 +619,20 @@ def handle_timeout(self, signum, frame):\n         raise AirflowTaskTimeout(self.error_message)\n \n     def __enter__(self):\n-        signal.signal(signal.SIGALRM, self.handle_timeout)\n-        signal.alarm(self.seconds)\n+        try:\n+            signal.signal(signal.SIGALRM, self.handle_timeout)\n+            signal.alarm(self.seconds)\n+        except Exception as e:",
    "path": "airflow/utils.py",
    "commit_id": "1d01a26689583a0b3753f3307a80db2fb8b2e96d",
    "original_commit_id": "c28d9add6f54a6dad96e751e2a7137909e4c8abf",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Yeah totally makes sense.\n",
    "created_at": "2016-02-21T18:11:11Z",
    "updated_at": "2016-03-23T05:33:24Z",
    "html_url": "https://github.com/apache/airflow/pull/1021#discussion_r53570391",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1021",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/53570391"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1021#discussion_r53570391"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1021"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/53570391/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 63,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/53578198",
    "pull_request_review_id": null,
    "id": 53578198,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTc4MTk4",
    "diff_hunk": "@@ -32,19 +32,30 @@ def get_conn(self):\n         '''\n         Returns a snakebite HDFSClient object.\n         '''\n+        connections = self.get_connections(self.hdfs_conn_id)\n+\n         use_sasl = False\n         if configuration.get('core', 'security') == 'kerberos':\n             use_sasl = True\n \n-        connections = self.get_connections(self.hdfs_conn_id)\n         client = None\n-\t''' When using HAClient, proxy_user must be the same, so is ok to always take the first '''\n-\teffective_user = self.proxy_user or connections[0].login\n+\n+        ''' When using HAClient, proxy_user must be the same, so is ok to always take the first '''\n+        effective_user = self.proxy_user or connections[0].login\n         if len(connections) == 1:\n-            client = Client(connections[0].host, connections[0].port, use_sasl=use_sasl, effective_user=effective_user)\n+            autoconfig = connections[0].extra_dejson.get('autoconfig', 'false')\n+            if autoconfig == 'true':",
    "path": "airflow/hooks/hdfs_hook.py",
    "commit_id": "545fcb2eeb111a8a61c25534baaf82ee73681887",
    "original_commit_id": "dd65ea8bbb98d90e0253c445331a60ac0743d008",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "json supports booleans, so you may want to simply `if autoconfig:`, or more explicitely `if autoconfig is True or autoconfig.lower() == 'true` maybe\n",
    "created_at": "2016-02-22T00:57:44Z",
    "updated_at": "2016-02-22T16:39:57Z",
    "html_url": "https://github.com/apache/airflow/pull/1049#discussion_r53578198",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1049",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/53578198"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1049#discussion_r53578198"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1049"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/53578198/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 29,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/53578408",
    "pull_request_review_id": null,
    "id": 53578408,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTc4NDA4",
    "diff_hunk": "@@ -32,19 +32,30 @@ def get_conn(self):\n         '''\n         Returns a snakebite HDFSClient object.\n         '''\n+        connections = self.get_connections(self.hdfs_conn_id)\n+\n         use_sasl = False\n         if configuration.get('core', 'security') == 'kerberos':\n             use_sasl = True\n \n-        connections = self.get_connections(self.hdfs_conn_id)\n         client = None\n-\t''' When using HAClient, proxy_user must be the same, so is ok to always take the first '''\n-\teffective_user = self.proxy_user or connections[0].login\n+\n+        ''' When using HAClient, proxy_user must be the same, so is ok to always take the first '''\n+        effective_user = self.proxy_user or connections[0].login\n         if len(connections) == 1:\n-            client = Client(connections[0].host, connections[0].port, use_sasl=use_sasl, effective_user=effective_user)\n+            autoconfig = connections[0].extra_dejson.get('autoconfig', 'false')\n+            if autoconfig == 'true':\n+                client = AutoConfigClient(effective_user=effective_user, use_sasl=use_sasl)\n+            else:\n+                client = Client(connections[0].host, connections[0].port,\n+                                effective_user=effective_user, use_sasl=use_sasl)\n+        elif len(connections) > 1:",
    "path": "airflow/hooks/hdfs_hook.py",
    "commit_id": "545fcb2eeb111a8a61c25534baaf82ee73681887",
    "original_commit_id": "dd65ea8bbb98d90e0253c445331a60ac0743d008",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "52-54 are redundant with 55-57\n",
    "created_at": "2016-02-22T01:06:28Z",
    "updated_at": "2016-02-22T16:39:57Z",
    "html_url": "https://github.com/apache/airflow/pull/1049#discussion_r53578408",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1049",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/53578408"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1049#discussion_r53578408"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1049"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/53578408/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 52,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 34,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/53720960",
    "pull_request_review_id": null,
    "id": 53720960,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzIwOTYw",
    "diff_hunk": "@@ -85,7 +85,10 @@ def trigger_dag(args):\n \n     session = settings.Session()\n     # TODO: verify dag_id\n-    execution_date = datetime.now()\n+    if args.execution_date:\n+        execution_date = dateutil.parser.parse(args.execution_date)",
    "path": "airflow/bin/cli.py",
    "commit_id": "33b6280430081d325b239681adc3d81254627b58",
    "original_commit_id": "33b6280430081d325b239681adc3d81254627b58",
    "user": {
      "login": "aoen",
      "id": 1592778,
      "node_id": "MDQ6VXNlcjE1OTI3Nzg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1592778?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aoen",
      "html_url": "https://github.com/aoen",
      "followers_url": "https://api.github.com/users/aoen/followers",
      "following_url": "https://api.github.com/users/aoen/following{/other_user}",
      "gists_url": "https://api.github.com/users/aoen/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aoen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aoen/subscriptions",
      "organizations_url": "https://api.github.com/users/aoen/orgs",
      "repos_url": "https://api.github.com/users/aoen/repos",
      "events_url": "https://api.github.com/users/aoen/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aoen/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Can you catch the exception if the execution date can not be parsed/provide a meaningful error message and exit?\n",
    "created_at": "2016-02-23T00:53:44Z",
    "updated_at": "2016-02-23T00:53:44Z",
    "html_url": "https://github.com/apache/airflow/pull/1059#discussion_r53720960",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1059",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/53720960"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1059#discussion_r53720960"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1059"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/53720960/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 89,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 6,
    "position": 6,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/53720978",
    "pull_request_review_id": null,
    "id": 53720978,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzIwOTc4",
    "diff_hunk": "@@ -557,6 +560,8 @@ def get_parser():\n     parser_trigger_dag = subparsers.add_parser('trigger_dag', help=ht)\n     parser_trigger_dag.add_argument(\"dag_id\", help=\"The id of the dag to run\")\n     parser_trigger_dag.add_argument(\n+        \"execution_date\", help=\"The execution date to trigger\")",
    "path": "airflow/bin/cli.py",
    "commit_id": "33b6280430081d325b239681adc3d81254627b58",
    "original_commit_id": "33b6280430081d325b239681adc3d81254627b58",
    "user": {
      "login": "aoen",
      "id": 1592778,
      "node_id": "MDQ6VXNlcjE1OTI3Nzg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1592778?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aoen",
      "html_url": "https://github.com/aoen",
      "followers_url": "https://api.github.com/users/aoen/followers",
      "following_url": "https://api.github.com/users/aoen/following{/other_user}",
      "gists_url": "https://api.github.com/users/aoen/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aoen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aoen/subscriptions",
      "organizations_url": "https://api.github.com/users/aoen/orgs",
      "repos_url": "https://api.github.com/users/aoen/repos",
      "events_url": "https://api.github.com/users/aoen/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aoen/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Nit: \"The execution date to trigger the DAG at\"\n",
    "created_at": "2016-02-23T00:53:55Z",
    "updated_at": "2016-02-23T00:53:55Z",
    "html_url": "https://github.com/apache/airflow/pull/1059#discussion_r53720978",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1059",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/53720978"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1059#discussion_r53720978"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1059"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/53720978/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 563,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 16,
    "position": 16,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/53864193",
    "pull_request_review_id": null,
    "id": 53864193,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODY0MTkz",
    "diff_hunk": "@@ -570,8 +570,8 @@ def prioritize_queued(self, session, executor, dagbag):\n                     self.logger.info(\"Pickling DAG {}\".format(dag))\n                     pickle_id = dag.pickle(session).id\n \n-                if dag.dag_id in overloaded_dags or dag.concurrency_reached:\n-                    overloaded_dags.add(dag.dag_id)\n+                if dag.dag_id in dag_blacklist or dag.concurrency_reached:",
    "path": "airflow/jobs.py",
    "commit_id": "a47b3d57a849fb367e6a7d01bbf831d2742b892d",
    "original_commit_id": "6bbb7fbb04d7cdde0da2620d6ca13b4cba30f19a",
    "user": {
      "login": "aoen",
      "id": 1592778,
      "node_id": "MDQ6VXNlcjE1OTI3Nzg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1592778?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aoen",
      "html_url": "https://github.com/aoen",
      "followers_url": "https://api.github.com/users/aoen/followers",
      "following_url": "https://api.github.com/users/aoen/following{/other_user}",
      "gists_url": "https://api.github.com/users/aoen/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aoen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aoen/subscriptions",
      "organizations_url": "https://api.github.com/users/aoen/orgs",
      "repos_url": "https://api.github.com/users/aoen/repos",
      "events_url": "https://api.github.com/users/aoen/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aoen/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Don't need the first part of the if since they are already in the blacklist\n",
    "created_at": "2016-02-23T22:47:07Z",
    "updated_at": "2016-02-23T22:55:22Z",
    "html_url": "https://github.com/apache/airflow/pull/1065#discussion_r53864193",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1065",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/53864193"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1065#discussion_r53864193"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1065"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/53864193/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 15,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/53864739",
    "pull_request_review_id": null,
    "id": 53864739,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODY0NzM5",
    "diff_hunk": "@@ -570,8 +570,8 @@ def prioritize_queued(self, session, executor, dagbag):\n                     self.logger.info(\"Pickling DAG {}\".format(dag))\n                     pickle_id = dag.pickle(session).id\n \n-                if dag.dag_id in overloaded_dags or dag.concurrency_reached:\n-                    overloaded_dags.add(dag.dag_id)\n+                if dag.dag_id in dag_blacklist or dag.concurrency_reached:",
    "path": "airflow/jobs.py",
    "commit_id": "a47b3d57a849fb367e6a7d01bbf831d2742b892d",
    "original_commit_id": "6bbb7fbb04d7cdde0da2620d6ca13b4cba30f19a",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "that's for the `or concurrency_reached`, I can break it down as an elif, though `dag_blacklist` is a set so it won't grow anyways\n",
    "created_at": "2016-02-23T22:51:28Z",
    "updated_at": "2016-02-23T22:55:22Z",
    "html_url": "https://github.com/apache/airflow/pull/1065#discussion_r53864739",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1065",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/53864739"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1065#discussion_r53864739"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1065"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/53864739/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 15,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/53876159",
    "pull_request_review_id": null,
    "id": 53876159,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODc2MTU5",
    "diff_hunk": "@@ -0,0 +1,104 @@\n+from apiclient.discovery import build\n+from airflow.contrib.hooks.gc_base_hook import GoogleCloudBaseHook\n+\n+class DatastoreHook(GoogleCloudBaseHook):\n+    \"\"\"\n+    Interact with Google Cloud Datastore. Connections must be defined with an\n+    extras JSON field containing:\n+\n+    {\n+        \"project\": \"<google project ID>\",\n+        \"service_account\": \"<google service account email>\",\n+        \"key_path\": \"<p12 key path>\"\n+    }\n+\n+    If you have used ``gcloud auth`` to authenticate on the machine that's\n+    running Airflow, you can exclude the service_account and key_path\n+    parameters.\n+    \"\"\"\n+\n+    conn_name_attr = 'datastore_conn_id'\n+\n+    def __init__(self,\n+                 scope=['https://www.googleapis.com/auth/datastore',\n+                        'https://www.googleapis.com/auth/userinfo.email'],\n+                 datastore_conn_id='google_cloud_datastore_default',\n+                 delegate_to=None):\n+        super(DatastoreHook, self).__init__(scope, datastore_conn_id, delegate_to)\n+        # datasetId is the same as the project name\n+        self.datasetId = self._extras_dejson().get('project')",
    "path": "airflow/contrib/hooks/datastore_hook.py",
    "commit_id": "7cc60500178b016aa16766587aa61decad300cb9",
    "original_commit_id": "2fe8f188f64c7144fb7f9e521b827af7d8009be8",
    "user": {
      "login": "criccomini",
      "id": 167569,
      "node_id": "MDQ6VXNlcjE2NzU2OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/167569?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/criccomini",
      "html_url": "https://github.com/criccomini",
      "followers_url": "https://api.github.com/users/criccomini/followers",
      "following_url": "https://api.github.com/users/criccomini/following{/other_user}",
      "gists_url": "https://api.github.com/users/criccomini/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/criccomini/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/criccomini/subscriptions",
      "organizations_url": "https://api.github.com/users/criccomini/orgs",
      "repos_url": "https://api.github.com/users/criccomini/repos",
      "events_url": "https://api.github.com/users/criccomini/events{/privacy}",
      "received_events_url": "https://api.github.com/users/criccomini/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "prefer snake_case\n",
    "created_at": "2016-02-24T00:33:35Z",
    "updated_at": "2016-02-24T00:40:56Z",
    "html_url": "https://github.com/apache/airflow/pull/1068#discussion_r53876159",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1068",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/53876159"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1068#discussion_r53876159"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1068"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/53876159/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 29,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/54049056",
    "pull_request_review_id": null,
    "id": 54049056,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDQ5MDU2",
    "diff_hunk": "@@ -776,3 +778,33 @@ def logger(self):\n             self._logger = logging.root.getChild(self.__class__.__module__ + '.' +self.__class__.__name__)\n             return self._logger\n \n+\n+def get_sqla_engine(pool_size=5, pool_recycle=3600):",
    "path": "airflow/utils.py",
    "commit_id": "1d01a26689583a0b3753f3307a80db2fb8b2e96d",
    "original_commit_id": "d49a1d838d58d7b1304e67785f75d7ad894d96c3",
    "user": {
      "login": "plypaul",
      "id": 5704934,
      "node_id": "MDQ6VXNlcjU3MDQ5MzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5704934?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/plypaul",
      "html_url": "https://github.com/plypaul",
      "followers_url": "https://api.github.com/users/plypaul/followers",
      "following_url": "https://api.github.com/users/plypaul/following{/other_user}",
      "gists_url": "https://api.github.com/users/plypaul/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/plypaul/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/plypaul/subscriptions",
      "organizations_url": "https://api.github.com/users/plypaul/orgs",
      "repos_url": "https://api.github.com/users/plypaul/repos",
      "events_url": "https://api.github.com/users/plypaul/events{/privacy}",
      "received_events_url": "https://api.github.com/users/plypaul/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "How does the user configure the pool size?\n",
    "created_at": "2016-02-25T05:01:16Z",
    "updated_at": "2016-03-23T05:33:24Z",
    "html_url": "https://github.com/apache/airflow/pull/1021#discussion_r54049056",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1021",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/54049056"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1021#discussion_r54049056"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1021"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/54049056/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 982,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 59,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/54115076",
    "pull_request_review_id": null,
    "id": 54115076,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTE1MDc2",
    "diff_hunk": "@@ -776,3 +778,33 @@ def logger(self):\n             self._logger = logging.root.getChild(self.__class__.__module__ + '.' +self.__class__.__name__)\n             return self._logger\n \n+\n+def get_sqla_engine(pool_size=5, pool_recycle=3600):",
    "path": "airflow/utils.py",
    "commit_id": "1d01a26689583a0b3753f3307a80db2fb8b2e96d",
    "original_commit_id": "d49a1d838d58d7b1304e67785f75d7ad894d96c3",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "It should be parameterized but wasn't / and still isn't. I could parameterized it as part of this PR if you think that's in scope. We probably need to allow different settings for the web server and the scheduler(s).\n",
    "created_at": "2016-02-25T15:48:16Z",
    "updated_at": "2016-03-23T05:33:24Z",
    "html_url": "https://github.com/apache/airflow/pull/1021#discussion_r54115076",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1021",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/54115076"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1021#discussion_r54115076"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1021"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/54115076/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 982,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 59,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/54119369",
    "pull_request_review_id": null,
    "id": 54119369,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTE5MzY5",
    "diff_hunk": "@@ -28,8 +28,12 @@ def get_conn(self):\n         \"\"\"\n         conn = self.get_connection(self.oracle_conn_id)\n         dsn = conn.extra_dejson.get('dsn', None)\n+\tsid = conn.extra_dejson.get('sid', None)",
    "path": "airflow/hooks/oracle_hook.py",
    "commit_id": "8d3903a2c955fc826e35c23061e0731a0e982037",
    "original_commit_id": "99f6bfb06b76ab1b2a1f003726780c2b7ae80245",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "indent looks off, is that a `\\t`?\n",
    "created_at": "2016-02-25T16:13:25Z",
    "updated_at": "2016-02-26T08:55:39Z",
    "html_url": "https://github.com/apache/airflow/pull/1079#discussion_r54119369",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1079",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/54119369"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1079#discussion_r54119369"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1079"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/54119369/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 4,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/54119421",
    "pull_request_review_id": null,
    "id": 54119421,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTE5NDIx",
    "diff_hunk": "@@ -28,8 +28,12 @@ def get_conn(self):\n         \"\"\"\n         conn = self.get_connection(self.oracle_conn_id)\n         dsn = conn.extra_dejson.get('dsn', None)\n+\tsid = conn.extra_dejson.get('sid', None)\n         service_name = conn.extra_dejson.get('service_name', None)\n-        if dsn and service_name:            \n+        if dsn and sid and not service_name:\n+            dsn = cx_Oracle.makedsn(dsn, conn.port, sid)\n+            conn = cx_Oracle.connect(conn.login, conn.password, dsn=dsn)\n+\telif dsn and service_name and not sid:            ",
    "path": "airflow/hooks/oracle_hook.py",
    "commit_id": "8d3903a2c955fc826e35c23061e0731a0e982037",
    "original_commit_id": "99f6bfb06b76ab1b2a1f003726780c2b7ae80245",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "same here, no tab pls\n",
    "created_at": "2016-02-25T16:13:40Z",
    "updated_at": "2016-02-26T08:55:39Z",
    "html_url": "https://github.com/apache/airflow/pull/1079#discussion_r54119421",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1079",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/54119421"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1079#discussion_r54119421"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1079"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/54119421/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 10,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/54121613",
    "pull_request_review_id": null,
    "id": 54121613,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTIxNjEz",
    "diff_hunk": "@@ -228,6 +228,84 @@ Not like this, where the join task is skipped\n \n .. image:: img/branch_bad.png\n \n+SubDAGs\n+'''''''\n+\n+Sometimes sections of your workflow can be grouped into logical units that\n+can also be represented as DAGs. The ``SubDagOperator`` is useful in these\n+situations.\n+\n+For example, consider the following DAG:\n+\n+.. image:: img/subdag_before.png\n+\n+We can combine all of the parallel ``task-*`` operators into a single SubDAG,\n+so that the resulting DAG resembles the following:\n+\n+.. image:: img/subdag_after.png\n+\n+Note that SubDAG operators should contain a factory method that returns a DAG\n+object. This will prevent the SubDAG from being treated like a separate DAG in\n+the main UI. For example:\n+\n+.. code:: python\n+\n+  #dags/subdag.py\n+  from airflow.models import DAG\n+  from airflow.operators import DummyOperator\n+\n+\n+  # Dag is returned by a factory method\n+  def sub_dag(start_date, schedule_interval):\n+    dag = DAG(\n+      'main_dag.dummy_operator',\n+      schedule_interval=schedule_interval,\n+      start_date=start_date,\n+    )\n+\n+    dummy_operator = DummyOperator(\n+      task_id='dummy_task',\n+      dag=dag,\n+    )\n+\n+    return dag\n+\n+This SubDAG can then be referenced in your main DAG file:\n+\n+.. code:: python\n+\n+  # main_dag.py\n+  from datetime import datetime, timedelta\n+  from airflow.models import DAG\n+  from airflow.operators import SubDagOperator\n+  from dags.subdag import sub_dag\n+\n+\n+  main_dag = DAG(\n+    dag_id='main_dag',\n+    schedule_interval=timedelta(hours=1),\n+    start_date=datetime(2016, 1, 1)\n+  )\n+\n+  sub_dag = SubDagOperator(\n+    subdag=sub_dag(main_dag.start_date, main_dag.schedule_interval),\n+    task_id='dummy_task',\n+    dag=main_dag,\n+  )\n+\n+Some other tips when using SubDags:\n+\n+-  by convention, a SubDAG's ``dag_id`` should be prefixed by its parent and\n+   a dot. As in ``parent.child``.\n+-  share arguments between the main DAG and the SubDAG by passing arguments to\n+   the SubDAG operator (as demonstrated above).\n+-  SubDAGs must have a schedule and be enabled. If the SubDAG's schedule is\n+   set to ``None`` or ``@once``, the SubDAG will succeed without having done\n+   anything.\n+-  you can click into a SubDagOperator from the graph view of the main DAG to\n+   show the tasks contained within the SubDAG.\n+",
    "path": "docs/concepts.rst",
    "commit_id": "22ca9c295e3382602f2bb4138c441674eb101d25",
    "original_commit_id": "f070630af25e5c66839246c608f4c953cfa17528",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "- refrain from using `depends_on_past=True` in tasks within the subdag as this can be confusing\n- it's possible to specify an `executor` for the subdag, it's common to use SequentialExecutor if you want to run the subdag in-process and effectively limit its parallelism to 1. Using LocalExecutor can be bad as it may over subscribe your worker, running multiple tasks in a single slot\n- subdags are perfect for repeating patterns, and defining a function that returns a DAG object is a nice design pattern. For example, Airbnb uses the stage-check-echange pattern when loading data where the data is staged in a temporary table, data quality checks are performed against that table and once the checks all pass the partition is exchanged into production\n- clearing a `SubDagOperator` also clears the state of the tasks within\n- marking success on a `SubDagOperator` does not affect the state of the tasks within\n",
    "created_at": "2016-02-25T16:26:43Z",
    "updated_at": "2016-03-01T23:22:58Z",
    "html_url": "https://github.com/apache/airflow/pull/1076#discussion_r54121613",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1076",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/54121613"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1076#discussion_r54121613"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1076"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/54121613/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 80,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/54149177",
    "pull_request_review_id": null,
    "id": 54149177,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTQ5MTc3",
    "diff_hunk": "@@ -0,0 +1,183 @@\n+import json\n+import logging\n+\n+from airflow.contrib.hooks.gcs_hook import GoogleCloudStorageHook\n+from airflow.hooks import MySqlHook\n+from airflow.models import BaseOperator\n+from airflow.utils import apply_defaults\n+from collections import OrderedDict\n+from MySQLdb.constants import FIELD_TYPE\n+from tempfile import NamedTemporaryFile\n+\n+class MySqlToGoogleCloudStorageOperator(BaseOperator):\n+    \"\"\"\n+    Copy data from MySQL to Google cloud storage in JSON format.\n+    \"\"\"\n+    template_fields = ('sql', 'bucket', 'filename', 'schema_filename')\n+    template_ext = ('.sql',)\n+    ui_color = '#a0e08c'\n+\n+    @apply_defaults\n+    def __init__(self,\n+                 sql,\n+                 bucket,\n+                 filename,\n+                 schema_filename=None,\n+                 approx_max_file_size_bytes=1900000000L,\n+                 mysql_conn_id='mysql_default',\n+                 google_cloud_storage_conn_id='google_cloud_storage_default',\n+                 delegate_to=None,\n+                 *args,\n+                 **kwargs):\n+        \"\"\"\n+        :param sql: The SQL to execute on the MySQL table.\n+        :type sql: string\n+        :param bucket: The bucket to upload to.\n+        :type bucket: string\n+        :param filename: The filename to use as the object name when uploading\n+            to Google cloud storage. A {} should be specified in the filename\n+            to allow the operator to inject file numbers in cases where the\n+            file is split due to size.\n+        :type filename: string\n+        :param schema_filename: If set, the filename to use as the object name\n+            when uploading a .json file containing the BigQuery schema fields\n+            for the table that was dumped from MySQL.\n+        :type schema_filename: string\n+        :param approx_max_file_size_bytes: This operator supports the ability\n+            to split large table dumps into multiple files (see notes in the\n+            filenamed param docs above). Google cloud storage allows for files\n+            to be a maximum of 4GB. This param allows developers to specify the\n+            file size of the splits.\n+        :type approx_max_file_size_bytes: long\n+        :param mysql_conn_id: Reference to a specific MySQL hook.\n+        :type mysql_conn_id: string\n+        :param google_cloud_storage_conn_id: Reference to a specific Google\n+            cloud storage hook.\n+        :type google_cloud_storage_conn_id: string\n+        :param delegate_to: The account to impersonate, if any. For this to\n+            work, the service account making the request must have domain-wide\n+            delegation enabled.\n+        \"\"\"\n+        super(MySqlToGoogleCloudStorageOperator, self).__init__(*args, **kwargs)\n+        self.sql = sql;\n+        self.bucket = bucket\n+        self.filename = filename\n+        self.schema_filename = schema_filename\n+        self.approx_max_file_size_bytes = approx_max_file_size_bytes\n+        self.mysql_conn_id = mysql_conn_id\n+        self.google_cloud_storage_conn_id = google_cloud_storage_conn_id\n+        self.delegate_to = delegate_to\n+\n+    def execute(self, context):\n+        cursor = self._query_mysql()\n+        files_to_upload = self._write_local_data_files(cursor)\n+\n+        # If a schema is set, create a BQ schema JSON file.\n+        if self.schema_filename:\n+            files_to_upload.update(self._write_local_schema_file(cursor))\n+\n+        # Flush all files before uploading\n+        for file_handle in files_to_upload.values():\n+            file_handle.flush()\n+\n+        self._upload_to_gcs(files_to_upload)\n+\n+        # Close all temp file handles.\n+        for file_handle in files_to_upload.values():\n+            file_handle.close()",
    "path": "airflow/contrib/operators/mysql_to_gcs.py",
    "commit_id": "40834dbfe473b2fb8299fa005a7a86580f3c8917",
    "original_commit_id": "40834dbfe473b2fb8299fa005a7a86580f3c8917",
    "user": {
      "login": "r39132",
      "id": 581734,
      "node_id": "MDQ6VXNlcjU4MTczNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/581734?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/r39132",
      "html_url": "https://github.com/r39132",
      "followers_url": "https://api.github.com/users/r39132/followers",
      "following_url": "https://api.github.com/users/r39132/following{/other_user}",
      "gists_url": "https://api.github.com/users/r39132/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/r39132/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/r39132/subscriptions",
      "organizations_url": "https://api.github.com/users/r39132/orgs",
      "repos_url": "https://api.github.com/users/r39132/repos",
      "events_url": "https://api.github.com/users/r39132/events{/privacy}",
      "received_events_url": "https://api.github.com/users/r39132/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "To avoid leaking temp files, it might be good to clean these up in a finally!\n",
    "created_at": "2016-02-25T19:25:34Z",
    "updated_at": "2016-02-25T19:25:34Z",
    "html_url": "https://github.com/apache/airflow/pull/1080#discussion_r54149177",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1080",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/54149177"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1080#discussion_r54149177"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1080"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/54149177/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 87,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 87,
    "position": 87,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/54149353",
    "pull_request_review_id": null,
    "id": 54149353,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTQ5MzUz",
    "diff_hunk": "@@ -0,0 +1,183 @@\n+import json\n+import logging\n+\n+from airflow.contrib.hooks.gcs_hook import GoogleCloudStorageHook\n+from airflow.hooks import MySqlHook\n+from airflow.models import BaseOperator\n+from airflow.utils import apply_defaults\n+from collections import OrderedDict\n+from MySQLdb.constants import FIELD_TYPE\n+from tempfile import NamedTemporaryFile\n+\n+class MySqlToGoogleCloudStorageOperator(BaseOperator):\n+    \"\"\"\n+    Copy data from MySQL to Google cloud storage in JSON format.\n+    \"\"\"\n+    template_fields = ('sql', 'bucket', 'filename', 'schema_filename')\n+    template_ext = ('.sql',)\n+    ui_color = '#a0e08c'\n+\n+    @apply_defaults\n+    def __init__(self,\n+                 sql,\n+                 bucket,\n+                 filename,\n+                 schema_filename=None,\n+                 approx_max_file_size_bytes=1900000000L,\n+                 mysql_conn_id='mysql_default',\n+                 google_cloud_storage_conn_id='google_cloud_storage_default',\n+                 delegate_to=None,\n+                 *args,\n+                 **kwargs):\n+        \"\"\"\n+        :param sql: The SQL to execute on the MySQL table.\n+        :type sql: string\n+        :param bucket: The bucket to upload to.\n+        :type bucket: string\n+        :param filename: The filename to use as the object name when uploading\n+            to Google cloud storage. A {} should be specified in the filename\n+            to allow the operator to inject file numbers in cases where the\n+            file is split due to size.\n+        :type filename: string\n+        :param schema_filename: If set, the filename to use as the object name\n+            when uploading a .json file containing the BigQuery schema fields\n+            for the table that was dumped from MySQL.\n+        :type schema_filename: string\n+        :param approx_max_file_size_bytes: This operator supports the ability\n+            to split large table dumps into multiple files (see notes in the\n+            filenamed param docs above). Google cloud storage allows for files\n+            to be a maximum of 4GB. This param allows developers to specify the\n+            file size of the splits.\n+        :type approx_max_file_size_bytes: long\n+        :param mysql_conn_id: Reference to a specific MySQL hook.\n+        :type mysql_conn_id: string\n+        :param google_cloud_storage_conn_id: Reference to a specific Google\n+            cloud storage hook.\n+        :type google_cloud_storage_conn_id: string\n+        :param delegate_to: The account to impersonate, if any. For this to\n+            work, the service account making the request must have domain-wide\n+            delegation enabled.\n+        \"\"\"\n+        super(MySqlToGoogleCloudStorageOperator, self).__init__(*args, **kwargs)\n+        self.sql = sql;\n+        self.bucket = bucket\n+        self.filename = filename\n+        self.schema_filename = schema_filename\n+        self.approx_max_file_size_bytes = approx_max_file_size_bytes\n+        self.mysql_conn_id = mysql_conn_id\n+        self.google_cloud_storage_conn_id = google_cloud_storage_conn_id\n+        self.delegate_to = delegate_to\n+\n+    def execute(self, context):\n+        cursor = self._query_mysql()\n+        files_to_upload = self._write_local_data_files(cursor)\n+\n+        # If a schema is set, create a BQ schema JSON file.\n+        if self.schema_filename:\n+            files_to_upload.update(self._write_local_schema_file(cursor))\n+\n+        # Flush all files before uploading\n+        for file_handle in files_to_upload.values():\n+            file_handle.flush()\n+\n+        self._upload_to_gcs(files_to_upload)\n+\n+        # Close all temp file handles.\n+        for file_handle in files_to_upload.values():\n+            file_handle.close()\n+\n+    def _query_mysql(self):\n+        \"\"\"\n+        Queries mysql and returns a cursor to the results.\n+        \"\"\"\n+        mysql = MySqlHook(mysql_conn_id=self.mysql_conn_id)\n+        conn = mysql.get_conn()\n+        cursor = conn.cursor()\n+        cursor.execute(self.sql)\n+        return cursor\n+\n+    def _write_local_data_files(self, cursor):\n+        \"\"\"\n+        Takes a cursor, and writes results to a local file.\n+\n+        :return: A dictionary where keys are filenames to be used as object\n+            names in GCS, and values are file handles to local files that\n+            contain the data for the GCS objects.\n+        \"\"\"\n+        schema = map(lambda schema_tuple: schema_tuple[0], cursor.description)\n+        file_no = 0\n+        tmp_file_handle = NamedTemporaryFile(delete=True)\n+        tmp_file_handles = { self.filename.format(file_no): tmp_file_handle }\n+\n+        for row in cursor:\n+            row_dict = dict(zip(schema, row))\n+            # TODO validate that row isn't > 2MB. BQ enforces a hard row size of 2MB.",
    "path": "airflow/contrib/operators/mysql_to_gcs.py",
    "commit_id": "40834dbfe473b2fb8299fa005a7a86580f3c8917",
    "original_commit_id": "40834dbfe473b2fb8299fa005a7a86580f3c8917",
    "user": {
      "login": "r39132",
      "id": 581734,
      "node_id": "MDQ6VXNlcjU4MTczNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/581734?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/r39132",
      "html_url": "https://github.com/r39132",
      "followers_url": "https://api.github.com/users/r39132/followers",
      "following_url": "https://api.github.com/users/r39132/following{/other_user}",
      "gists_url": "https://api.github.com/users/r39132/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/r39132/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/r39132/subscriptions",
      "organizations_url": "https://api.github.com/users/r39132/orgs",
      "repos_url": "https://api.github.com/users/r39132/repos",
      "events_url": "https://api.github.com/users/r39132/events{/privacy}",
      "received_events_url": "https://api.github.com/users/r39132/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Can you add a guard for the row_size<=2MB limit now or do you plan to add it in the next PR?\n",
    "created_at": "2016-02-25T19:26:51Z",
    "updated_at": "2016-02-25T19:27:23Z",
    "html_url": "https://github.com/apache/airflow/pull/1080#discussion_r54149353",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1080",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/54149353"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1080#discussion_r54149353"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1080"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/54149353/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 114,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 114,
    "position": 114,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/54164257",
    "pull_request_review_id": null,
    "id": 54164257,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTY0MjU3",
    "diff_hunk": "@@ -0,0 +1,183 @@\n+import json\n+import logging\n+\n+from airflow.contrib.hooks.gcs_hook import GoogleCloudStorageHook\n+from airflow.hooks import MySqlHook\n+from airflow.models import BaseOperator\n+from airflow.utils import apply_defaults\n+from collections import OrderedDict\n+from MySQLdb.constants import FIELD_TYPE\n+from tempfile import NamedTemporaryFile\n+\n+class MySqlToGoogleCloudStorageOperator(BaseOperator):\n+    \"\"\"\n+    Copy data from MySQL to Google cloud storage in JSON format.\n+    \"\"\"\n+    template_fields = ('sql', 'bucket', 'filename', 'schema_filename')\n+    template_ext = ('.sql',)\n+    ui_color = '#a0e08c'\n+\n+    @apply_defaults\n+    def __init__(self,\n+                 sql,\n+                 bucket,\n+                 filename,\n+                 schema_filename=None,\n+                 approx_max_file_size_bytes=1900000000L,\n+                 mysql_conn_id='mysql_default',\n+                 google_cloud_storage_conn_id='google_cloud_storage_default',\n+                 delegate_to=None,\n+                 *args,\n+                 **kwargs):\n+        \"\"\"\n+        :param sql: The SQL to execute on the MySQL table.\n+        :type sql: string\n+        :param bucket: The bucket to upload to.\n+        :type bucket: string\n+        :param filename: The filename to use as the object name when uploading\n+            to Google cloud storage. A {} should be specified in the filename\n+            to allow the operator to inject file numbers in cases where the\n+            file is split due to size.\n+        :type filename: string\n+        :param schema_filename: If set, the filename to use as the object name\n+            when uploading a .json file containing the BigQuery schema fields\n+            for the table that was dumped from MySQL.\n+        :type schema_filename: string\n+        :param approx_max_file_size_bytes: This operator supports the ability\n+            to split large table dumps into multiple files (see notes in the\n+            filenamed param docs above). Google cloud storage allows for files\n+            to be a maximum of 4GB. This param allows developers to specify the\n+            file size of the splits.\n+        :type approx_max_file_size_bytes: long\n+        :param mysql_conn_id: Reference to a specific MySQL hook.\n+        :type mysql_conn_id: string\n+        :param google_cloud_storage_conn_id: Reference to a specific Google\n+            cloud storage hook.\n+        :type google_cloud_storage_conn_id: string\n+        :param delegate_to: The account to impersonate, if any. For this to\n+            work, the service account making the request must have domain-wide\n+            delegation enabled.\n+        \"\"\"\n+        super(MySqlToGoogleCloudStorageOperator, self).__init__(*args, **kwargs)\n+        self.sql = sql;\n+        self.bucket = bucket\n+        self.filename = filename\n+        self.schema_filename = schema_filename\n+        self.approx_max_file_size_bytes = approx_max_file_size_bytes\n+        self.mysql_conn_id = mysql_conn_id\n+        self.google_cloud_storage_conn_id = google_cloud_storage_conn_id\n+        self.delegate_to = delegate_to\n+\n+    def execute(self, context):\n+        cursor = self._query_mysql()\n+        files_to_upload = self._write_local_data_files(cursor)\n+\n+        # If a schema is set, create a BQ schema JSON file.\n+        if self.schema_filename:\n+            files_to_upload.update(self._write_local_schema_file(cursor))\n+\n+        # Flush all files before uploading\n+        for file_handle in files_to_upload.values():\n+            file_handle.flush()\n+\n+        self._upload_to_gcs(files_to_upload)\n+\n+        # Close all temp file handles.\n+        for file_handle in files_to_upload.values():\n+            file_handle.close()",
    "path": "airflow/contrib/operators/mysql_to_gcs.py",
    "commit_id": "40834dbfe473b2fb8299fa005a7a86580f3c8917",
    "original_commit_id": "40834dbfe473b2fb8299fa005a7a86580f3c8917",
    "user": {
      "login": "criccomini",
      "id": 167569,
      "node_id": "MDQ6VXNlcjE2NzU2OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/167569?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/criccomini",
      "html_url": "https://github.com/criccomini",
      "followers_url": "https://api.github.com/users/criccomini/followers",
      "following_url": "https://api.github.com/users/criccomini/following{/other_user}",
      "gists_url": "https://api.github.com/users/criccomini/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/criccomini/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/criccomini/subscriptions",
      "organizations_url": "https://api.github.com/users/criccomini/orgs",
      "repos_url": "https://api.github.com/users/criccomini/repos",
      "events_url": "https://api.github.com/users/criccomini/events{/privacy}",
      "received_events_url": "https://api.github.com/users/criccomini/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "NamedTempFiles are cleaned as part of close(). They're also cleaned on Python proc shutdown.\n",
    "created_at": "2016-02-25T21:04:57Z",
    "updated_at": "2016-02-25T21:04:57Z",
    "html_url": "https://github.com/apache/airflow/pull/1080#discussion_r54164257",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1080",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/54164257"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1080#discussion_r54164257"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1080"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/54164257/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 87,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 87,
    "position": 87,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/54164346",
    "pull_request_review_id": null,
    "id": 54164346,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTY0MzQ2",
    "diff_hunk": "@@ -0,0 +1,183 @@\n+import json\n+import logging\n+\n+from airflow.contrib.hooks.gcs_hook import GoogleCloudStorageHook\n+from airflow.hooks import MySqlHook\n+from airflow.models import BaseOperator\n+from airflow.utils import apply_defaults\n+from collections import OrderedDict\n+from MySQLdb.constants import FIELD_TYPE\n+from tempfile import NamedTemporaryFile\n+\n+class MySqlToGoogleCloudStorageOperator(BaseOperator):\n+    \"\"\"\n+    Copy data from MySQL to Google cloud storage in JSON format.\n+    \"\"\"\n+    template_fields = ('sql', 'bucket', 'filename', 'schema_filename')\n+    template_ext = ('.sql',)\n+    ui_color = '#a0e08c'\n+\n+    @apply_defaults\n+    def __init__(self,\n+                 sql,\n+                 bucket,\n+                 filename,\n+                 schema_filename=None,\n+                 approx_max_file_size_bytes=1900000000L,\n+                 mysql_conn_id='mysql_default',\n+                 google_cloud_storage_conn_id='google_cloud_storage_default',\n+                 delegate_to=None,\n+                 *args,\n+                 **kwargs):\n+        \"\"\"\n+        :param sql: The SQL to execute on the MySQL table.\n+        :type sql: string\n+        :param bucket: The bucket to upload to.\n+        :type bucket: string\n+        :param filename: The filename to use as the object name when uploading\n+            to Google cloud storage. A {} should be specified in the filename\n+            to allow the operator to inject file numbers in cases where the\n+            file is split due to size.\n+        :type filename: string\n+        :param schema_filename: If set, the filename to use as the object name\n+            when uploading a .json file containing the BigQuery schema fields\n+            for the table that was dumped from MySQL.\n+        :type schema_filename: string\n+        :param approx_max_file_size_bytes: This operator supports the ability\n+            to split large table dumps into multiple files (see notes in the\n+            filenamed param docs above). Google cloud storage allows for files\n+            to be a maximum of 4GB. This param allows developers to specify the\n+            file size of the splits.\n+        :type approx_max_file_size_bytes: long\n+        :param mysql_conn_id: Reference to a specific MySQL hook.\n+        :type mysql_conn_id: string\n+        :param google_cloud_storage_conn_id: Reference to a specific Google\n+            cloud storage hook.\n+        :type google_cloud_storage_conn_id: string\n+        :param delegate_to: The account to impersonate, if any. For this to\n+            work, the service account making the request must have domain-wide\n+            delegation enabled.\n+        \"\"\"\n+        super(MySqlToGoogleCloudStorageOperator, self).__init__(*args, **kwargs)\n+        self.sql = sql;\n+        self.bucket = bucket\n+        self.filename = filename\n+        self.schema_filename = schema_filename\n+        self.approx_max_file_size_bytes = approx_max_file_size_bytes\n+        self.mysql_conn_id = mysql_conn_id\n+        self.google_cloud_storage_conn_id = google_cloud_storage_conn_id\n+        self.delegate_to = delegate_to\n+\n+    def execute(self, context):\n+        cursor = self._query_mysql()\n+        files_to_upload = self._write_local_data_files(cursor)\n+\n+        # If a schema is set, create a BQ schema JSON file.\n+        if self.schema_filename:\n+            files_to_upload.update(self._write_local_schema_file(cursor))\n+\n+        # Flush all files before uploading\n+        for file_handle in files_to_upload.values():\n+            file_handle.flush()\n+\n+        self._upload_to_gcs(files_to_upload)\n+\n+        # Close all temp file handles.\n+        for file_handle in files_to_upload.values():\n+            file_handle.close()\n+\n+    def _query_mysql(self):\n+        \"\"\"\n+        Queries mysql and returns a cursor to the results.\n+        \"\"\"\n+        mysql = MySqlHook(mysql_conn_id=self.mysql_conn_id)\n+        conn = mysql.get_conn()\n+        cursor = conn.cursor()\n+        cursor.execute(self.sql)\n+        return cursor\n+\n+    def _write_local_data_files(self, cursor):\n+        \"\"\"\n+        Takes a cursor, and writes results to a local file.\n+\n+        :return: A dictionary where keys are filenames to be used as object\n+            names in GCS, and values are file handles to local files that\n+            contain the data for the GCS objects.\n+        \"\"\"\n+        schema = map(lambda schema_tuple: schema_tuple[0], cursor.description)\n+        file_no = 0\n+        tmp_file_handle = NamedTemporaryFile(delete=True)\n+        tmp_file_handles = { self.filename.format(file_no): tmp_file_handle }\n+\n+        for row in cursor:\n+            row_dict = dict(zip(schema, row))\n+            # TODO validate that row isn't > 2MB. BQ enforces a hard row size of 2MB.",
    "path": "airflow/contrib/operators/mysql_to_gcs.py",
    "commit_id": "40834dbfe473b2fb8299fa005a7a86580f3c8917",
    "original_commit_id": "40834dbfe473b2fb8299fa005a7a86580f3c8917",
    "user": {
      "login": "criccomini",
      "id": 167569,
      "node_id": "MDQ6VXNlcjE2NzU2OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/167569?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/criccomini",
      "html_url": "https://github.com/criccomini",
      "followers_url": "https://api.github.com/users/criccomini/followers",
      "following_url": "https://api.github.com/users/criccomini/following{/other_user}",
      "gists_url": "https://api.github.com/users/criccomini/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/criccomini/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/criccomini/subscriptions",
      "organizations_url": "https://api.github.com/users/criccomini/orgs",
      "repos_url": "https://api.github.com/users/criccomini/repos",
      "events_url": "https://api.github.com/users/criccomini/events{/privacy}",
      "received_events_url": "https://api.github.com/users/criccomini/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "I plan to do it in next PR. I plan to hit this problem when we pull some of our tables, and what to fix it when I have a real issue with it. I am just at the point where I have enough back-logged non-merged code that I want to split the commits up.\n",
    "created_at": "2016-02-25T21:05:42Z",
    "updated_at": "2016-02-25T21:05:42Z",
    "html_url": "https://github.com/apache/airflow/pull/1080#discussion_r54164346",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1080",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/54164346"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1080#discussion_r54164346"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1080"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/54164346/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 114,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 114,
    "position": 114,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/54208741",
    "pull_request_review_id": null,
    "id": 54208741,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjA4NzQx",
    "diff_hunk": "@@ -0,0 +1,55 @@\n+from datetime import datetime\n+\n+from airflow.models import DAG\n+from airflow.operators import DummyOperator, SubDagOperator\n+\n+from airflow.example_dags.subdags import subdag\n+\n+\n+args = {\n+    'owner': 'airflow',\n+    'start_date': datetime(2016, 1, 1),\n+}\n+\n+dag = DAG(\n+    dag_id='example_subdag_operator',\n+    default_args=args,\n+    schedule_interval=\"@daily\",",
    "path": "airflow/example_dags/example_subdag_operator.py",
    "commit_id": "22ca9c295e3382602f2bb4138c441674eb101d25",
    "original_commit_id": "da7e52becedbcf5c76459553c2a0eb1c9f5700a2",
    "user": {
      "login": "r39132",
      "id": 581734,
      "node_id": "MDQ6VXNlcjU4MTczNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/581734?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/r39132",
      "html_url": "https://github.com/r39132",
      "followers_url": "https://api.github.com/users/r39132/followers",
      "following_url": "https://api.github.com/users/r39132/following{/other_user}",
      "gists_url": "https://api.github.com/users/r39132/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/r39132/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/r39132/subscriptions",
      "organizations_url": "https://api.github.com/users/r39132/orgs",
      "repos_url": "https://api.github.com/users/r39132/repos",
      "events_url": "https://api.github.com/users/r39132/events{/privacy}",
      "received_events_url": "https://api.github.com/users/r39132/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Change the schedule_interval to `@once` to avoid a lot of scheduling work when examples are loaded. For example, in 1 year, a newbie may not want his/her system churning out 365 dag_runs for this example. The other option is to set the start_date to a few days in the past, but I'd prefer the `@once` because I don't think the start_date can be reset for a DAG once it is loaded the first time. Hence, if an example is reloaded later, the scheduler will be mightily busy.\n",
    "created_at": "2016-02-26T06:16:49Z",
    "updated_at": "2016-03-01T23:22:58Z",
    "html_url": "https://github.com/apache/airflow/pull/1076#discussion_r54208741",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1076",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/54208741"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1076#discussion_r54208741"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1076"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/54208741/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 17,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/54208867",
    "pull_request_review_id": null,
    "id": 54208867,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjA4ODY3",
    "diff_hunk": "@@ -228,6 +228,101 @@ Not like this, where the join task is skipped\n \n .. image:: img/branch_bad.png\n \n+SubDAGs\n+'''''''\n+\n+SubDAGs are perfect for repeating patterns. Defining a function that returns a\n+DAG object is a nice design pattern when using Airflow.\n+\n+Airbnb uses the *stage-check-echange* pattern when loading data. Data is staged",
    "path": "docs/concepts.rst",
    "commit_id": "22ca9c295e3382602f2bb4138c441674eb101d25",
    "original_commit_id": "da7e52becedbcf5c76459553c2a0eb1c9f5700a2",
    "user": {
      "login": "r39132",
      "id": 581734,
      "node_id": "MDQ6VXNlcjU4MTczNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/581734?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/r39132",
      "html_url": "https://github.com/r39132",
      "followers_url": "https://api.github.com/users/r39132/followers",
      "following_url": "https://api.github.com/users/r39132/following{/other_user}",
      "gists_url": "https://api.github.com/users/r39132/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/r39132/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/r39132/subscriptions",
      "organizations_url": "https://api.github.com/users/r39132/orgs",
      "repos_url": "https://api.github.com/users/r39132/repos",
      "events_url": "https://api.github.com/users/r39132/events{/privacy}",
      "received_events_url": "https://api.github.com/users/r39132/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "echange is French for exchange. Do not know if that is a nod to Airflow's French roots, but probably good to make it `exchange` for the anglophones.\n",
    "created_at": "2016-02-26T06:19:51Z",
    "updated_at": "2016-03-01T23:22:58Z",
    "html_url": "https://github.com/apache/airflow/pull/1076#discussion_r54208867",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1076",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/54208867"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1076#discussion_r54208867"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1076"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/54208867/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 10,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/54335085",
    "pull_request_review_id": null,
    "id": 54335085,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzM1MDg1",
    "diff_hunk": "@@ -2,7 +2,6 @@\n from airflow.utils import apply_defaults\n from airflow.contrib.hooks import QuboleHook\n \n-",
    "path": "airflow/contrib/operators/qubole_operator.py",
    "commit_id": "1a4b1ab8b15a168fd3c4a826714d5137cdb34ff8",
    "original_commit_id": "5dbc93e681cd07c8869d1301f73b17f132014349",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "PEP8 says 2 lines before class definitions\n",
    "created_at": "2016-02-27T16:04:44Z",
    "updated_at": "2016-03-02T01:05:40Z",
    "html_url": "https://github.com/apache/airflow/pull/1090#discussion_r54335085",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1090",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/54335085"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1090#discussion_r54335085"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1090"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/54335085/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 5,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 4,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/54376103",
    "pull_request_review_id": null,
    "id": 54376103,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Mzc2MTAz",
    "diff_hunk": "@@ -0,0 +1,19 @@\n+from airflow.models import DAG\n+from airflow.operators import DummyOperator\n+\n+\n+def subdag(name, args):\n+    dag_subdag = DAG(\n+      dag_id='example_subdag_operator.%s' % name,",
    "path": "airflow/example_dags/subdags/subdag.py",
    "commit_id": "22ca9c295e3382602f2bb4138c441674eb101d25",
    "original_commit_id": "91f0e3a25cfa7f1bc2c91db2ed41a85a52c9e327",
    "user": {
      "login": "r39132",
      "id": 581734,
      "node_id": "MDQ6VXNlcjU4MTczNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/581734?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/r39132",
      "html_url": "https://github.com/r39132",
      "followers_url": "https://api.github.com/users/r39132/followers",
      "following_url": "https://api.github.com/users/r39132/following{/other_user}",
      "gists_url": "https://api.github.com/users/r39132/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/r39132/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/r39132/subscriptions",
      "organizations_url": "https://api.github.com/users/r39132/orgs",
      "repos_url": "https://api.github.com/users/r39132/repos",
      "events_url": "https://api.github.com/users/r39132/events{/privacy}",
      "received_events_url": "https://api.github.com/users/r39132/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "- `example_subdag_operator` should not be hard-coded, but should be a parameter passed to an argument named `parent_dag_name` \n- The `name` argument should be renamed to `child_dag_name` \n\nThe function then becomes `def subdag(parent_dag_name, child_dag_name, args)`\n",
    "created_at": "2016-02-29T07:35:07Z",
    "updated_at": "2016-03-01T23:22:58Z",
    "html_url": "https://github.com/apache/airflow/pull/1076#discussion_r54376103",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1076",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/54376103"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1076#discussion_r54376103"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1076"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/54376103/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 7,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/54376263",
    "pull_request_review_id": null,
    "id": 54376263,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Mzc2MjYz",
    "diff_hunk": "@@ -0,0 +1,55 @@\n+from datetime import datetime\n+\n+from airflow.models import DAG\n+from airflow.operators import DummyOperator, SubDagOperator\n+\n+from airflow.example_dags.subdags import subdag\n+\n+\n+args = {\n+    'owner': 'airflow',\n+    'start_date': datetime(2016, 1, 1),\n+}\n+\n+dag = DAG(\n+    dag_id='example_subdag_operator',",
    "path": "airflow/example_dags/example_subdag_operator.py",
    "commit_id": "22ca9c295e3382602f2bb4138c441674eb101d25",
    "original_commit_id": "91f0e3a25cfa7f1bc2c91db2ed41a85a52c9e327",
    "user": {
      "login": "r39132",
      "id": 581734,
      "node_id": "MDQ6VXNlcjU4MTczNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/581734?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/r39132",
      "html_url": "https://github.com/r39132",
      "followers_url": "https://api.github.com/users/r39132/followers",
      "following_url": "https://api.github.com/users/r39132/following{/other_user}",
      "gists_url": "https://api.github.com/users/r39132/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/r39132/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/r39132/subscriptions",
      "organizations_url": "https://api.github.com/users/r39132/orgs",
      "repos_url": "https://api.github.com/users/r39132/repos",
      "events_url": "https://api.github.com/users/r39132/events{/privacy}",
      "received_events_url": "https://api.github.com/users/r39132/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Make this (`example_subdag_operator`) a constant and pass the constant into the subdag() function calls below as another parameter.\n",
    "created_at": "2016-02-29T07:37:40Z",
    "updated_at": "2016-03-01T23:22:58Z",
    "html_url": "https://github.com/apache/airflow/pull/1076#discussion_r54376263",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1076",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/54376263"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1076#discussion_r54376263"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1076"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/54376263/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 15,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/54376655",
    "pull_request_review_id": null,
    "id": 54376655,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Mzc2NjU1",
    "diff_hunk": "@@ -228,6 +228,101 @@ Not like this, where the join task is skipped\n \n .. image:: img/branch_bad.png\n \n+SubDAGs\n+'''''''\n+\n+SubDAGs are perfect for repeating patterns. Defining a function that returns a\n+DAG object is a nice design pattern when using Airflow.\n+\n+Airbnb uses the *stage-check-exchange* pattern when loading data. Data is staged\n+in a temporary table, after which data quality checks are performed against\n+that table. Once the checks all pass the partition is moved into the production\n+table.\n+\n+As another example, consider the following DAG:\n+\n+.. image:: img/subdag_before.png\n+\n+We can combine all of the parallel ``task-*`` operators into a single SubDAG,\n+so that the resulting DAG resembles the following:\n+\n+.. image:: img/subdag_after.png\n+\n+Note that SubDAG operators should contain a factory method that returns a DAG\n+object. This will prevent the SubDAG from being treated like a separate DAG in\n+the main UI. For example:\n+\n+.. code:: python\n+\n+  #dags/subdag.py\n+  from airflow.models import DAG\n+  from airflow.operators import DummyOperator\n+\n+\n+  # Dag is returned by a factory method\n+  def sub_dag(start_date, schedule_interval):\n+    dag = DAG(\n+      'main_dag.dummy_operator',",
    "path": "docs/concepts.rst",
    "commit_id": "22ca9c295e3382602f2bb4138c441674eb101d25",
    "original_commit_id": "91f0e3a25cfa7f1bc2c91db2ed41a85a52c9e327",
    "user": {
      "login": "r39132",
      "id": 581734,
      "node_id": "MDQ6VXNlcjU4MTczNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/581734?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/r39132",
      "html_url": "https://github.com/r39132",
      "followers_url": "https://api.github.com/users/r39132/followers",
      "following_url": "https://api.github.com/users/r39132/following{/other_user}",
      "gists_url": "https://api.github.com/users/r39132/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/r39132/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/r39132/subscriptions",
      "organizations_url": "https://api.github.com/users/r39132/orgs",
      "repos_url": "https://api.github.com/users/r39132/repos",
      "events_url": "https://api.github.com/users/r39132/events{/privacy}",
      "received_events_url": "https://api.github.com/users/r39132/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "It will be good to stick to the `parent_dag`, `child_dag` terminology that is used in other parts of this documentation. Also, as per my other comments, it would be good to pass the parent dag's name as an argument to the `sub_dag()` function instead of hard-coding the dag name to `main_dag.dummy_operator`. This will make the sub_dags generators more reusable across parent dags.\n",
    "created_at": "2016-02-29T07:44:18Z",
    "updated_at": "2016-03-01T23:22:58Z",
    "html_url": "https://github.com/apache/airflow/pull/1076#discussion_r54376655",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1076",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/54376655"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1076#discussion_r54376655"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1076"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/54376655/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 38,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/54376813",
    "pull_request_review_id": null,
    "id": 54376813,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Mzc2ODEz",
    "diff_hunk": "@@ -228,6 +228,101 @@ Not like this, where the join task is skipped\n \n .. image:: img/branch_bad.png\n \n+SubDAGs\n+'''''''\n+\n+SubDAGs are perfect for repeating patterns. Defining a function that returns a\n+DAG object is a nice design pattern when using Airflow.\n+\n+Airbnb uses the *stage-check-exchange* pattern when loading data. Data is staged\n+in a temporary table, after which data quality checks are performed against\n+that table. Once the checks all pass the partition is moved into the production\n+table.\n+\n+As another example, consider the following DAG:\n+\n+.. image:: img/subdag_before.png\n+\n+We can combine all of the parallel ``task-*`` operators into a single SubDAG,\n+so that the resulting DAG resembles the following:\n+\n+.. image:: img/subdag_after.png\n+\n+Note that SubDAG operators should contain a factory method that returns a DAG\n+object. This will prevent the SubDAG from being treated like a separate DAG in\n+the main UI. For example:\n+\n+.. code:: python\n+\n+  #dags/subdag.py\n+  from airflow.models import DAG\n+  from airflow.operators import DummyOperator\n+\n+\n+  # Dag is returned by a factory method\n+  def sub_dag(start_date, schedule_interval):\n+    dag = DAG(\n+      'main_dag.dummy_operator',\n+      schedule_interval=schedule_interval,\n+      start_date=start_date,\n+    )\n+\n+    dummy_operator = DummyOperator(\n+      task_id='dummy_task',\n+      dag=dag,\n+    )\n+\n+    return dag\n+\n+This SubDAG can then be referenced in your main DAG file:\n+\n+.. code:: python\n+\n+  # main_dag.py\n+  from datetime import datetime, timedelta\n+  from airflow.models import DAG\n+  from airflow.operators import SubDagOperator\n+  from dags.subdag import sub_dag\n+\n+\n+  main_dag = DAG(\n+    dag_id='main_dag',",
    "path": "docs/concepts.rst",
    "commit_id": "22ca9c295e3382602f2bb4138c441674eb101d25",
    "original_commit_id": "91f0e3a25cfa7f1bc2c91db2ed41a85a52c9e327",
    "user": {
      "login": "r39132",
      "id": 581734,
      "node_id": "MDQ6VXNlcjU4MTczNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/581734?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/r39132",
      "html_url": "https://github.com/r39132",
      "followers_url": "https://api.github.com/users/r39132/followers",
      "following_url": "https://api.github.com/users/r39132/following{/other_user}",
      "gists_url": "https://api.github.com/users/r39132/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/r39132/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/r39132/subscriptions",
      "organizations_url": "https://api.github.com/users/r39132/orgs",
      "repos_url": "https://api.github.com/users/r39132/repos",
      "events_url": "https://api.github.com/users/r39132/events{/privacy}",
      "received_events_url": "https://api.github.com/users/r39132/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "As mentioned above, define `main_dag` in a constant and pass it to the `sub_dag` function call below as another parameter.\n",
    "created_at": "2016-02-29T07:46:25Z",
    "updated_at": "2016-03-01T23:22:58Z",
    "html_url": "https://github.com/apache/airflow/pull/1076#discussion_r54376813",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1076",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/54376813"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1076#discussion_r54376813"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1076"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/54376813/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 62,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/54461043",
    "pull_request_review_id": null,
    "id": 54461043,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDYxMDQz",
    "diff_hunk": "@@ -776,3 +778,33 @@ def logger(self):\n             self._logger = logging.root.getChild(self.__class__.__module__ + '.' +self.__class__.__name__)\n             return self._logger\n \n+\n+def get_sqla_engine(pool_size=5, pool_recycle=3600):",
    "path": "airflow/utils.py",
    "commit_id": "1d01a26689583a0b3753f3307a80db2fb8b2e96d",
    "original_commit_id": "d49a1d838d58d7b1304e67785f75d7ad894d96c3",
    "user": {
      "login": "plypaul",
      "id": 5704934,
      "node_id": "MDQ6VXNlcjU3MDQ5MzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5704934?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/plypaul",
      "html_url": "https://github.com/plypaul",
      "followers_url": "https://api.github.com/users/plypaul/followers",
      "following_url": "https://api.github.com/users/plypaul/following{/other_user}",
      "gists_url": "https://api.github.com/users/plypaul/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/plypaul/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/plypaul/subscriptions",
      "organizations_url": "https://api.github.com/users/plypaul/orgs",
      "repos_url": "https://api.github.com/users/plypaul/repos",
      "events_url": "https://api.github.com/users/plypaul/events{/privacy}",
      "received_events_url": "https://api.github.com/users/plypaul/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Yeah, my concern is that if this setting value has issues, there's no easy way for users to fix it.\n",
    "created_at": "2016-02-29T19:14:55Z",
    "updated_at": "2016-03-23T05:33:24Z",
    "html_url": "https://github.com/apache/airflow/pull/1021#discussion_r54461043",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1021",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/54461043"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1021#discussion_r54461043"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1021"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/54461043/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 982,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 59,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/54509763",
    "pull_request_review_id": null,
    "id": 54509763,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTA5NzYz",
    "diff_hunk": "@@ -308,12 +313,12 @@ def manage_slas(self, dag, session=None):\n                 self.logger.info(' --------------> ABOUT TO CALL SLA MISS CALL BACK ')\n                 dag.sla_miss_callback(dag, task_list, blocking_task_list, slas, blocking_tis)\n                 notification_sent = True\n-            from airflow import ascii\n+            from airflow.utils import asciiart",
    "path": "airflow/jobs.py",
    "commit_id": "fb86cb2def73f55da5dff69feb959a32a3c724a3",
    "original_commit_id": "9686c12b1e31754fa21d942d1867ff8e2a887ee9",
    "user": {
      "login": "aoen",
      "id": 1592778,
      "node_id": "MDQ6VXNlcjE1OTI3Nzg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1592778?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aoen",
      "html_url": "https://github.com/aoen",
      "followers_url": "https://api.github.com/users/aoen/followers",
      "following_url": "https://api.github.com/users/aoen/following{/other_user}",
      "gists_url": "https://api.github.com/users/aoen/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aoen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aoen/subscriptions",
      "organizations_url": "https://api.github.com/users/aoen/orgs",
      "repos_url": "https://api.github.com/users/aoen/repos",
      "events_url": "https://api.github.com/users/aoen/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aoen/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Nit: Scope creep, but can you pull this to the top of the file?\n",
    "created_at": "2016-03-01T01:24:55Z",
    "updated_at": "2016-03-01T04:53:41Z",
    "html_url": "https://github.com/apache/airflow/pull/1098#discussion_r54509763",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1098",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/54509763"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1098#discussion_r54509763"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1098"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/54509763/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 31,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/54510053",
    "pull_request_review_id": null,
    "id": 54510053,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTEwMDUz",
    "diff_hunk": "@@ -1238,7 +1242,7 @@ def email_alert(self, exception, is_retry=False):\n             \"Log file: {self.log_filepath}<br>\"\n             \"Mark success: <a href='{self.mark_success_url}'>Link</a><br>\"\n         ).format(**locals())\n-        utils.send_email(task.email, title, body)\n+        utils.email.send_email(task.email, title, body)",
    "path": "airflow/models.py",
    "commit_id": "fb86cb2def73f55da5dff69feb959a32a3c724a3",
    "original_commit_id": "9686c12b1e31754fa21d942d1867ff8e2a887ee9",
    "user": {
      "login": "aoen",
      "id": 1592778,
      "node_id": "MDQ6VXNlcjE1OTI3Nzg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1592778?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aoen",
      "html_url": "https://github.com/aoen",
      "followers_url": "https://api.github.com/users/aoen/followers",
      "following_url": "https://api.github.com/users/aoen/following{/other_user}",
      "gists_url": "https://api.github.com/users/aoen/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aoen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aoen/subscriptions",
      "organizations_url": "https://api.github.com/users/aoen/orgs",
      "repos_url": "https://api.github.com/users/aoen/repos",
      "events_url": "https://api.github.com/users/aoen/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aoen/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Nit: from utils.email import send_email to be consistent with the other files\n",
    "created_at": "2016-03-01T01:28:20Z",
    "updated_at": "2016-03-01T04:53:41Z",
    "html_url": "https://github.com/apache/airflow/pull/1098#discussion_r54510053",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1098",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/54510053"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1098#discussion_r54510053"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1098"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/54510053/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 40,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/54510441",
    "pull_request_review_id": null,
    "id": 54510441,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTEwNDQx",
    "diff_hunk": "@@ -0,0 +1,107 @@\n+from __future__ import absolute_import\n+from __future__ import division\n+from __future__ import print_function\n+from __future__ import unicode_literals\n+\n+from builtins import object\n+\n+import logging\n+import signal\n+\n+\n+class AirflowTaskTimeout(Exception):",
    "path": "airflow/utils/classes.py",
    "commit_id": "fb86cb2def73f55da5dff69feb959a32a3c724a3",
    "original_commit_id": "9686c12b1e31754fa21d942d1867ff8e2a887ee9",
    "user": {
      "login": "aoen",
      "id": 1592778,
      "node_id": "MDQ6VXNlcjE1OTI3Nzg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1592778?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aoen",
      "html_url": "https://github.com/aoen",
      "followers_url": "https://api.github.com/users/aoen/followers",
      "following_url": "https://api.github.com/users/aoen/following{/other_user}",
      "gists_url": "https://api.github.com/users/aoen/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aoen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aoen/subscriptions",
      "organizations_url": "https://api.github.com/users/aoen/orgs",
      "repos_url": "https://api.github.com/users/aoen/repos",
      "events_url": "https://api.github.com/users/aoen/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aoen/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "I think you meant to remove this from here\n",
    "created_at": "2016-03-01T01:33:29Z",
    "updated_at": "2016-03-01T04:53:41Z",
    "html_url": "https://github.com/apache/airflow/pull/1098#discussion_r54510441",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1098",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/54510441"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1098#discussion_r54510441"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1098"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/54510441/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 12,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/54510733",
    "pull_request_review_id": null,
    "id": 54510733,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTEwNzMz",
    "diff_hunk": "@@ -0,0 +1,107 @@\n+from __future__ import absolute_import",
    "path": "airflow/utils/classes.py",
    "commit_id": "fb86cb2def73f55da5dff69feb959a32a3c724a3",
    "original_commit_id": "9686c12b1e31754fa21d942d1867ff8e2a887ee9",
    "user": {
      "login": "aoen",
      "id": 1592778,
      "node_id": "MDQ6VXNlcjE1OTI3Nzg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1592778?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aoen",
      "html_url": "https://github.com/aoen",
      "followers_url": "https://api.github.com/users/aoen/followers",
      "following_url": "https://api.github.com/users/aoen/following{/other_user}",
      "gists_url": "https://api.github.com/users/aoen/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aoen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aoen/subscriptions",
      "organizations_url": "https://api.github.com/users/aoen/orgs",
      "repos_url": "https://api.github.com/users/aoen/repos",
      "events_url": "https://api.github.com/users/aoen/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aoen/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Nit: Do you think it would make sense to put the classes into their own files? better for modularization, and helps remove the vagueness of the name \"classes.py\"\n",
    "created_at": "2016-03-01T01:35:33Z",
    "updated_at": "2016-03-01T04:53:41Z",
    "html_url": "https://github.com/apache/airflow/pull/1098#discussion_r54510733",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1098",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/54510733"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1098#discussion_r54510733"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1098"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/54510733/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 1,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/54510986",
    "pull_request_review_id": null,
    "id": 54510986,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTEwOTg2",
    "diff_hunk": "@@ -0,0 +1,204 @@\n+from __future__ import absolute_import\n+from __future__ import division\n+from __future__ import print_function\n+from __future__ import unicode_literals\n+\n+from functools import wraps\n+import logging\n+import os\n+\n+from alembic.config import Config\n+from alembic import command\n+from alembic.migration import MigrationContext\n+\n+from sqlalchemy import event, exc\n+from sqlalchemy.pool import Pool\n+\n+from ..airflow import settings\n+from ..airflow import configuration",
    "path": "airflow/utils/db.py",
    "commit_id": "fb86cb2def73f55da5dff69feb959a32a3c724a3",
    "original_commit_id": "9686c12b1e31754fa21d942d1867ff8e2a887ee9",
    "user": {
      "login": "aoen",
      "id": 1592778,
      "node_id": "MDQ6VXNlcjE1OTI3Nzg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1592778?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aoen",
      "html_url": "https://github.com/aoen",
      "followers_url": "https://api.github.com/users/aoen/followers",
      "following_url": "https://api.github.com/users/aoen/following{/other_user}",
      "gists_url": "https://api.github.com/users/aoen/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aoen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aoen/subscriptions",
      "organizations_url": "https://api.github.com/users/aoen/orgs",
      "repos_url": "https://api.github.com/users/aoen/repos",
      "events_url": "https://api.github.com/users/aoen/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aoen/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Could we make these absolute imports? http://stackoverflow.com/questions/4209641/absolute-vs-explicit-relative-import-of-python-module\n",
    "created_at": "2016-03-01T01:38:15Z",
    "updated_at": "2016-03-01T04:53:41Z",
    "html_url": "https://github.com/apache/airflow/pull/1098#discussion_r54510986",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1098",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/54510986"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1098#discussion_r54510986"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1098"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/54510986/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 18,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/54512372",
    "pull_request_review_id": null,
    "id": 54512372,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTEyMzcy",
    "diff_hunk": "@@ -0,0 +1,107 @@\n+from __future__ import absolute_import\n+from __future__ import division\n+from __future__ import print_function\n+from __future__ import unicode_literals\n+\n+from builtins import object\n+\n+import logging\n+import signal\n+\n+\n+class AirflowTaskTimeout(Exception):",
    "path": "airflow/utils/classes.py",
    "commit_id": "fb86cb2def73f55da5dff69feb959a32a3c724a3",
    "original_commit_id": "9686c12b1e31754fa21d942d1867ff8e2a887ee9",
    "user": {
      "login": "artwr",
      "id": 1518713,
      "node_id": "MDQ6VXNlcjE1MTg3MTM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1518713?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/artwr",
      "html_url": "https://github.com/artwr",
      "followers_url": "https://api.github.com/users/artwr/followers",
      "following_url": "https://api.github.com/users/artwr/following{/other_user}",
      "gists_url": "https://api.github.com/users/artwr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/artwr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/artwr/subscriptions",
      "organizations_url": "https://api.github.com/users/artwr/orgs",
      "repos_url": "https://api.github.com/users/artwr/repos",
      "events_url": "https://api.github.com/users/artwr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/artwr/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "I was torn on this one since it is used right below in the timeout class. But I will move it to exceptions for consistency.\n",
    "created_at": "2016-03-01T01:54:53Z",
    "updated_at": "2016-03-01T04:53:41Z",
    "html_url": "https://github.com/apache/airflow/pull/1098#discussion_r54512372",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1098",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/54512372"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1098#discussion_r54512372"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1098"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/54512372/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 12,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/54512460",
    "pull_request_review_id": null,
    "id": 54512460,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTEyNDYw",
    "diff_hunk": "@@ -0,0 +1,107 @@\n+from __future__ import absolute_import",
    "path": "airflow/utils/classes.py",
    "commit_id": "fb86cb2def73f55da5dff69feb959a32a3c724a3",
    "original_commit_id": "9686c12b1e31754fa21d942d1867ff8e2a887ee9",
    "user": {
      "login": "artwr",
      "id": 1518713,
      "node_id": "MDQ6VXNlcjE1MTg3MTM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1518713?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/artwr",
      "html_url": "https://github.com/artwr",
      "followers_url": "https://api.github.com/users/artwr/followers",
      "following_url": "https://api.github.com/users/artwr/following{/other_user}",
      "gists_url": "https://api.github.com/users/artwr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/artwr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/artwr/subscriptions",
      "organizations_url": "https://api.github.com/users/artwr/orgs",
      "repos_url": "https://api.github.com/users/artwr/repos",
      "events_url": "https://api.github.com/users/artwr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/artwr/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "I think it does. Actually, I would love to do the same to the `models.py`.\n",
    "created_at": "2016-03-01T01:55:57Z",
    "updated_at": "2016-03-01T04:53:41Z",
    "html_url": "https://github.com/apache/airflow/pull/1098#discussion_r54512460",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1098",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/54512460"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1098#discussion_r54512460"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1098"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/54512460/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 1,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/54512576",
    "pull_request_review_id": null,
    "id": 54512576,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTEyNTc2",
    "diff_hunk": "@@ -0,0 +1,107 @@\n+from __future__ import absolute_import\n+from __future__ import division\n+from __future__ import print_function\n+from __future__ import unicode_literals\n+\n+from builtins import object\n+\n+import logging\n+import signal\n+\n+\n+class AirflowTaskTimeout(Exception):",
    "path": "airflow/utils/classes.py",
    "commit_id": "fb86cb2def73f55da5dff69feb959a32a3c724a3",
    "original_commit_id": "9686c12b1e31754fa21d942d1867ff8e2a887ee9",
    "user": {
      "login": "aoen",
      "id": 1592778,
      "node_id": "MDQ6VXNlcjE1OTI3Nzg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1592778?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aoen",
      "html_url": "https://github.com/aoen",
      "followers_url": "https://api.github.com/users/aoen/followers",
      "following_url": "https://api.github.com/users/aoen/following{/other_user}",
      "gists_url": "https://api.github.com/users/aoen/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aoen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aoen/subscriptions",
      "organizations_url": "https://api.github.com/users/aoen/orgs",
      "repos_url": "https://api.github.com/users/aoen/repos",
      "events_url": "https://api.github.com/users/aoen/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aoen/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "I think it is in both places ATM.\n",
    "created_at": "2016-03-01T01:57:01Z",
    "updated_at": "2016-03-01T04:53:41Z",
    "html_url": "https://github.com/apache/airflow/pull/1098#discussion_r54512576",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1098",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/54512576"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1098#discussion_r54512576"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1098"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/54512576/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 12,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/54639294",
    "pull_request_review_id": null,
    "id": 54639294,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjM5Mjk0",
    "diff_hunk": "@@ -27,8 +30,9 @@ def __init__(self,\n         super(DatastoreHook, self).__init__(scope, datastore_conn_id, delegate_to)\n         # datasetId is the same as the project name\n         self.dataset_id = self._extras_dejson().get('project')\n+        self.connection = self._get_conn()\n \n-    def get_conn(self):\n+    def _get_conn(self):",
    "path": "airflow/contrib/hooks/datastore_hook.py",
    "commit_id": "95a0a7025e331c32dd6620d5b0afab600ba40ef7",
    "original_commit_id": "c7a893b7be7c9555dbe4eb8b416561833bf64347",
    "user": {
      "login": "criccomini",
      "id": 167569,
      "node_id": "MDQ6VXNlcjE2NzU2OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/167569?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/criccomini",
      "html_url": "https://github.com/criccomini",
      "followers_url": "https://api.github.com/users/criccomini/followers",
      "following_url": "https://api.github.com/users/criccomini/following{/other_user}",
      "gists_url": "https://api.github.com/users/criccomini/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/criccomini/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/criccomini/subscriptions",
      "organizations_url": "https://api.github.com/users/criccomini/orgs",
      "repos_url": "https://api.github.com/users/criccomini/repos",
      "events_url": "https://api.github.com/users/criccomini/events{/privacy}",
      "received_events_url": "https://api.github.com/users/criccomini/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Can you leave this public? There are use cases where getting the connection would be nice.\n",
    "created_at": "2016-03-01T21:33:11Z",
    "updated_at": "2016-03-01T22:51:46Z",
    "html_url": "https://github.com/apache/airflow/pull/1101#discussion_r54639294",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1101",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/54639294"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1101#discussion_r54639294"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1101"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/54639294/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 17,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/54915029",
    "pull_request_review_id": null,
    "id": 54915029,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTE1MDI5",
    "diff_hunk": "@@ -110,7 +112,10 @@ def _write_local_data_files(self, cursor):\n         tmp_file_handles = { self.filename.format(file_no): tmp_file_handle }\n \n         for row in cursor:\n+            # Convert datetime objects to utc seconds\n+            row = map(lambda v: time.mktime(v.timetuple()) if type(v) in (datetime, date) else v, row)",
    "path": "airflow/contrib/operators/mysql_to_gcs.py",
    "commit_id": "2d14f3646d9132ea5015050f543111142a48b1ff",
    "original_commit_id": "69b4a246ffcd22282596269e0160e486785a39a4",
    "user": {
      "login": "mtagle",
      "id": 2165162,
      "node_id": "MDQ6VXNlcjIxNjUxNjI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2165162?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mtagle",
      "html_url": "https://github.com/mtagle",
      "followers_url": "https://api.github.com/users/mtagle/followers",
      "following_url": "https://api.github.com/users/mtagle/following{/other_user}",
      "gists_url": "https://api.github.com/users/mtagle/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mtagle/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mtagle/subscriptions",
      "organizations_url": "https://api.github.com/users/mtagle/orgs",
      "repos_url": "https://api.github.com/users/mtagle/repos",
      "events_url": "https://api.github.com/users/mtagle/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mtagle/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "I learned yesterday that functools.partial is considered more pythonic than lambda.\n(http://stackoverflow.com/a/3252425)\nnot really a big deal, but in case you care.\n",
    "created_at": "2016-03-03T17:28:21Z",
    "updated_at": "2016-03-03T19:46:51Z",
    "html_url": "https://github.com/apache/airflow/pull/1110#discussion_r54915029",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1110",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/54915029"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1110#discussion_r54915029"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1110"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/54915029/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 116,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 19,
    "position": 19,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/54937179",
    "pull_request_review_id": null,
    "id": 54937179,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTM3MTc5",
    "diff_hunk": "@@ -130,6 +133,7 @@ def run(self):\n         'doc': doc,\n         'docker': docker,\n         'druid': druid,\n+        'gcs': gcs,",
    "path": "setup.py",
    "commit_id": "6df0c0778ec6f12b237295e5096bdfdf07219d4f",
    "original_commit_id": "6df0c0778ec6f12b237295e5096bdfdf07219d4f",
    "user": {
      "login": "criccomini",
      "id": 167569,
      "node_id": "MDQ6VXNlcjE2NzU2OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/167569?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/criccomini",
      "html_url": "https://github.com/criccomini",
      "followers_url": "https://api.github.com/users/criccomini/followers",
      "following_url": "https://api.github.com/users/criccomini/following{/other_user}",
      "gists_url": "https://api.github.com/users/criccomini/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/criccomini/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/criccomini/subscriptions",
      "organizations_url": "https://api.github.com/users/criccomini/orgs",
      "repos_url": "https://api.github.com/users/criccomini/repos",
      "events_url": "https://api.github.com/users/criccomini/events{/privacy}",
      "received_events_url": "https://api.github.com/users/criccomini/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Curious: is this introducing a new airflow[gcs] extra package? Up to now, the Google contrib stuff has come as part of the main airflow package.\n",
    "created_at": "2016-03-03T19:50:58Z",
    "updated_at": "2016-03-03T19:50:58Z",
    "html_url": "https://github.com/apache/airflow/pull/1109#discussion_r54937179",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1109",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/54937179"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1109#discussion_r54937179"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1109"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/54937179/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 136,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 14,
    "position": 14,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/54937772",
    "pull_request_review_id": null,
    "id": 54937772,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTM3Nzcy",
    "diff_hunk": "@@ -233,35 +234,96 @@ def run(args):\n         executor.heartbeat()\n         executor.end()\n \n-    if configuration.get('core', 'S3_LOG_FOLDER').startswith('s3:'):\n-        import boto\n-        s3_log = filename.replace(log, configuration.get('core', 'S3_LOG_FOLDER'))\n-        bucket, key = s3_log.lstrip('s3:/').split('/', 1)\n-        if os.path.exists(filename):\n-\n-            # get logs\n-            with open(filename, 'r') as logfile:\n-                new_log = logfile.read()\n-\n-            # remove old logs (since they are already in S3)\n-            if old_log:\n-                new_log.replace(old_log, '')\n-\n-            try:\n-                s3 = boto.connect_s3()\n-                s3_key = boto.s3.key.Key(s3.get_bucket(bucket), key)\n-\n-                # append new logs to old S3 logs, if available\n-                if s3_key.exists():\n-                    old_s3_log = s3_key.get_contents_as_string().decode()\n-                    new_log = old_s3_log + '\\n' + new_log\n-\n-                # send log to S3\n-                encrypt = configuration.get('core', 'ENCRYPT_S3_LOGS')\n-                s3_key.set_contents_from_string(new_log, encrypt_key=encrypt)\n-            except:\n-                print('Could not send logs to S3.')\n-\n+    # check for deprecated configuration\n+    remote_log_base = configuration.get('core', 'REMOTE_BASE_LOG_FOLDER')\n+    if not remote_log_base and configuration.get('core', 'S3_LOG_FOLDER'):\n+        warnings.warn(\n+            'The S3_LOG_FOLDER configuration key has been replaced by '\n+            'REMOTE_BASE_LOG_FOLDER. Your configuration still works but please '\n+            'update airflow.cfg to ensure future compatibility.',\n+            DeprecationWarning)\n+        remote_log_base = configuration.get('core', 'S3_LOG_FOLDER')\n+\n+    if remote_log_base.startswith('s3:/'):\n+        store_s3_logs(log_filename=filename, old_log=old_log)\n+    elif remote_log_base.startswith('gs:/'):\n+        store_gcs_logs(log_filename=filename, old_log=old_log)\n+    elif remote_log_base:\n+        raise ValueError(\n+            'Unsupported remote log location: {}'.format(remote_log_base))\n+\n+def store_s3_logs(log_filename, old_log):\n+    \"\"\"\n+    Store logs in S3\n+    \"\"\"\n+    import boto\n+    remote_log_base = configuration.get('core', 'REMOTE_BASE_LOG_FOLDER')\n+    log_location = os.path.expanduser(\n+        configuration.get('core', 'BASE_LOG_FOLDER'))\n+    remote_log = log_filename.replace(log_location, remote_log_base)\n+    bucket, key = remote_log.lstrip('s3:/').split('/', 1)\n+    if os.path.exists(log_filename):\n+\n+        # get logs\n+        with open(log_filename, 'r') as logfile:\n+            new_log = logfile.read()\n+\n+        # remove old logs (since they are already in the remote location)\n+        if old_log:\n+            new_log.replace(old_log, '')\n+\n+        try:\n+            s3 = boto.connect_s3()\n+            s3_key = boto.s3.key.Key(s3.get_bucket(bucket), key)\n+\n+            # append new logs to old S3 logs, if available\n+            if s3_key.exists():\n+                old_s3_log = s3_key.get_contents_as_string().decode()\n+                new_log = old_s3_log + '\\n' + new_log\n+\n+            # send log to S3\n+            encrypt = configuration.get('core', 'ENCRYPT_S3_LOGS')\n+            s3_key.set_contents_from_string(new_log, encrypt_key=encrypt)\n+        except:\n+            print('Could not send logs to S3.')\n+\n+def store_gcs_logs(log_filename, old_log):",
    "path": "airflow/bin/cli.py",
    "commit_id": "6df0c0778ec6f12b237295e5096bdfdf07219d4f",
    "original_commit_id": "6df0c0778ec6f12b237295e5096bdfdf07219d4f",
    "user": {
      "login": "criccomini",
      "id": 167569,
      "node_id": "MDQ6VXNlcjE2NzU2OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/167569?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/criccomini",
      "html_url": "https://github.com/criccomini",
      "followers_url": "https://api.github.com/users/criccomini/followers",
      "following_url": "https://api.github.com/users/criccomini/following{/other_user}",
      "gists_url": "https://api.github.com/users/criccomini/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/criccomini/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/criccomini/subscriptions",
      "organizations_url": "https://api.github.com/users/criccomini/orgs",
      "repos_url": "https://api.github.com/users/criccomini/repos",
      "events_url": "https://api.github.com/users/criccomini/events{/privacy}",
      "received_events_url": "https://api.github.com/users/criccomini/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "IMO, it makes more sense to use the Google cloud storage hook here. This way, we can use service accounts, and such. Also curious why the S3 hook wasn't used above?\n",
    "created_at": "2016-03-03T19:54:37Z",
    "updated_at": "2016-03-03T19:54:37Z",
    "html_url": "https://github.com/apache/airflow/pull/1109#discussion_r54937772",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1109",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/54937772"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1109#discussion_r54937772"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1109"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/54937772/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 290,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 103,
    "position": 103,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/54946359",
    "pull_request_review_id": null,
    "id": 54946359,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTQ2MzU5",
    "diff_hunk": "@@ -233,35 +234,96 @@ def run(args):\n         executor.heartbeat()\n         executor.end()\n \n-    if configuration.get('core', 'S3_LOG_FOLDER').startswith('s3:'):\n-        import boto\n-        s3_log = filename.replace(log, configuration.get('core', 'S3_LOG_FOLDER'))\n-        bucket, key = s3_log.lstrip('s3:/').split('/', 1)\n-        if os.path.exists(filename):\n-\n-            # get logs\n-            with open(filename, 'r') as logfile:\n-                new_log = logfile.read()\n-\n-            # remove old logs (since they are already in S3)\n-            if old_log:\n-                new_log.replace(old_log, '')\n-\n-            try:\n-                s3 = boto.connect_s3()\n-                s3_key = boto.s3.key.Key(s3.get_bucket(bucket), key)\n-\n-                # append new logs to old S3 logs, if available\n-                if s3_key.exists():\n-                    old_s3_log = s3_key.get_contents_as_string().decode()\n-                    new_log = old_s3_log + '\\n' + new_log\n-\n-                # send log to S3\n-                encrypt = configuration.get('core', 'ENCRYPT_S3_LOGS')\n-                s3_key.set_contents_from_string(new_log, encrypt_key=encrypt)\n-            except:\n-                print('Could not send logs to S3.')\n-\n+    # check for deprecated configuration\n+    remote_log_base = configuration.get('core', 'REMOTE_BASE_LOG_FOLDER')\n+    if not remote_log_base and configuration.get('core', 'S3_LOG_FOLDER'):\n+        warnings.warn(\n+            'The S3_LOG_FOLDER configuration key has been replaced by '\n+            'REMOTE_BASE_LOG_FOLDER. Your configuration still works but please '\n+            'update airflow.cfg to ensure future compatibility.',\n+            DeprecationWarning)\n+        remote_log_base = configuration.get('core', 'S3_LOG_FOLDER')\n+\n+    if remote_log_base.startswith('s3:/'):\n+        store_s3_logs(log_filename=filename, old_log=old_log)\n+    elif remote_log_base.startswith('gs:/'):\n+        store_gcs_logs(log_filename=filename, old_log=old_log)\n+    elif remote_log_base:\n+        raise ValueError(\n+            'Unsupported remote log location: {}'.format(remote_log_base))\n+\n+def store_s3_logs(log_filename, old_log):\n+    \"\"\"\n+    Store logs in S3\n+    \"\"\"\n+    import boto\n+    remote_log_base = configuration.get('core', 'REMOTE_BASE_LOG_FOLDER')\n+    log_location = os.path.expanduser(\n+        configuration.get('core', 'BASE_LOG_FOLDER'))\n+    remote_log = log_filename.replace(log_location, remote_log_base)\n+    bucket, key = remote_log.lstrip('s3:/').split('/', 1)\n+    if os.path.exists(log_filename):\n+\n+        # get logs\n+        with open(log_filename, 'r') as logfile:\n+            new_log = logfile.read()\n+\n+        # remove old logs (since they are already in the remote location)\n+        if old_log:\n+            new_log.replace(old_log, '')\n+\n+        try:\n+            s3 = boto.connect_s3()\n+            s3_key = boto.s3.key.Key(s3.get_bucket(bucket), key)\n+\n+            # append new logs to old S3 logs, if available\n+            if s3_key.exists():\n+                old_s3_log = s3_key.get_contents_as_string().decode()\n+                new_log = old_s3_log + '\\n' + new_log\n+\n+            # send log to S3\n+            encrypt = configuration.get('core', 'ENCRYPT_S3_LOGS')\n+            s3_key.set_contents_from_string(new_log, encrypt_key=encrypt)\n+        except:\n+            print('Could not send logs to S3.')\n+\n+def store_gcs_logs(log_filename, old_log):",
    "path": "airflow/bin/cli.py",
    "commit_id": "6df0c0778ec6f12b237295e5096bdfdf07219d4f",
    "original_commit_id": "6df0c0778ec6f12b237295e5096bdfdf07219d4f",
    "user": {
      "login": "jlowin",
      "id": 153965,
      "node_id": "MDQ6VXNlcjE1Mzk2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/153965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jlowin",
      "html_url": "https://github.com/jlowin",
      "followers_url": "https://api.github.com/users/jlowin/followers",
      "following_url": "https://api.github.com/users/jlowin/following{/other_user}",
      "gists_url": "https://api.github.com/users/jlowin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jlowin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jlowin/subscriptions",
      "organizations_url": "https://api.github.com/users/jlowin/orgs",
      "repos_url": "https://api.github.com/users/jlowin/repos",
      "events_url": "https://api.github.com/users/jlowin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jlowin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "The original intent (with S3) was to allow as minimal configuration as possible so that log backups \"just worked\" -- as long as AWS credentials were available on the host, logs would be shipped. All users had to do was put the location in `airflow.cfg`. With hooks, it requires not just modifying `airflow.cfg` but also creating connections, etc. Today it probably seems obvious to use a connection but back when Airflow was new it wasn't :)\n\nSo with that said, I'm not opposed to using hooks, but I prefer this implementation to the current `GCSHook`. Here we leverage the `gcloud` python library to move the logs in just a few lines of code; I think the `GCSHook` rolls its own REST API access and seems quite fragile (why not let Google maintain the API?). Internally, we have a `GCSHook` that is much closer to the `S3Hook` implementation, just wrapping `gcloud` instead of `boto`. This just exposes a little of that functionality.\n\nHowever, this is compatible with service accounts, just define `GOOGLE_APPLICATION_CREDENTIALS=/path/to/service/key.json` in your environment.\n",
    "created_at": "2016-03-03T20:51:49Z",
    "updated_at": "2016-03-03T20:51:49Z",
    "html_url": "https://github.com/apache/airflow/pull/1109#discussion_r54946359",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1109",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/54946359"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1109#discussion_r54946359"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1109"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/54946359/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 290,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 103,
    "position": 103,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/54946761",
    "pull_request_review_id": null,
    "id": 54946761,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTQ2NzYx",
    "diff_hunk": "@@ -130,6 +133,7 @@ def run(self):\n         'doc': doc,\n         'docker': docker,\n         'druid': druid,\n+        'gcs': gcs,",
    "path": "setup.py",
    "commit_id": "6df0c0778ec6f12b237295e5096bdfdf07219d4f",
    "original_commit_id": "6df0c0778ec6f12b237295e5096bdfdf07219d4f",
    "user": {
      "login": "jlowin",
      "id": 153965,
      "node_id": "MDQ6VXNlcjE1Mzk2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/153965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jlowin",
      "html_url": "https://github.com/jlowin",
      "followers_url": "https://api.github.com/users/jlowin/followers",
      "following_url": "https://api.github.com/users/jlowin/following{/other_user}",
      "gists_url": "https://api.github.com/users/jlowin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jlowin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jlowin/subscriptions",
      "organizations_url": "https://api.github.com/users/jlowin/orgs",
      "repos_url": "https://api.github.com/users/jlowin/repos",
      "events_url": "https://api.github.com/users/jlowin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jlowin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "See comment below regarding `gcloud` vs `oath2client`, etc -- for users who don't use GCP, there's no reason to saddle them with extra dependencies. Users who want to use S3 (for anything, not just logs) install `airflow[s3]` and users who want to use GCS should install `airflow[gcs]` or potentially `airflow[gcp]` if the relevant hooks and operators move out of contrib.\n",
    "created_at": "2016-03-03T20:54:41Z",
    "updated_at": "2016-03-03T20:54:41Z",
    "html_url": "https://github.com/apache/airflow/pull/1109#discussion_r54946761",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1109",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/54946761"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1109#discussion_r54946761"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1109"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/54946761/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 136,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 14,
    "position": 14,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/54990829",
    "pull_request_review_id": null,
    "id": 54990829,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTkwODI5",
    "diff_hunk": "@@ -47,11 +47,15 @@ def get_conn(self):\n             if autoconfig:\n                 client = AutoConfigClient(effective_user=effective_user, use_sasl=use_sasl)\n             else:\n+                hdfs_namenode_principal = connections[0].extra_dejson.get('hdfs_namenode_principal', None)\n                 client = Client(connections[0].host, connections[0].port,\n-                                effective_user=effective_user, use_sasl=use_sasl)\n+                                effective_user=effective_user, use_sasl=use_sasl,\n+                                hdfs_namenode_principal=hdfs_namenode_principal)\n         elif len(connections) > 1:\n+            hdfs_namenode_principal = connections[0].extra_dejson.get('hdfs_namenode_principal', None)",
    "path": "airflow/hooks/hdfs_hook.py",
    "commit_id": "4af24ee2df42bd4917217788f1f0782d031f139f",
    "original_commit_id": "5bfb8575bdbfcb70c3180acb1fd84c188075a1db",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "`None` is redundant/implicit here, no need to write it\n",
    "created_at": "2016-03-04T05:09:03Z",
    "updated_at": "2016-03-18T18:25:22Z",
    "html_url": "https://github.com/apache/airflow/pull/1112#discussion_r54990829",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1112",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/54990829"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1112#discussion_r54990829"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1112"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/54990829/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 10,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/55067217",
    "pull_request_review_id": null,
    "id": 55067217,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDY3MjE3",
    "diff_hunk": "@@ -233,35 +234,96 @@ def run(args):\n         executor.heartbeat()\n         executor.end()\n \n-    if configuration.get('core', 'S3_LOG_FOLDER').startswith('s3:'):\n-        import boto\n-        s3_log = filename.replace(log, configuration.get('core', 'S3_LOG_FOLDER'))\n-        bucket, key = s3_log.lstrip('s3:/').split('/', 1)\n-        if os.path.exists(filename):\n-\n-            # get logs\n-            with open(filename, 'r') as logfile:\n-                new_log = logfile.read()\n-\n-            # remove old logs (since they are already in S3)\n-            if old_log:\n-                new_log.replace(old_log, '')\n-\n-            try:\n-                s3 = boto.connect_s3()\n-                s3_key = boto.s3.key.Key(s3.get_bucket(bucket), key)\n-\n-                # append new logs to old S3 logs, if available\n-                if s3_key.exists():\n-                    old_s3_log = s3_key.get_contents_as_string().decode()\n-                    new_log = old_s3_log + '\\n' + new_log\n-\n-                # send log to S3\n-                encrypt = configuration.get('core', 'ENCRYPT_S3_LOGS')\n-                s3_key.set_contents_from_string(new_log, encrypt_key=encrypt)\n-            except:\n-                print('Could not send logs to S3.')\n-\n+    # check for deprecated configuration\n+    remote_log_base = configuration.get('core', 'REMOTE_BASE_LOG_FOLDER')\n+    if not remote_log_base and configuration.get('core', 'S3_LOG_FOLDER'):\n+        warnings.warn(\n+            'The S3_LOG_FOLDER configuration key has been replaced by '\n+            'REMOTE_BASE_LOG_FOLDER. Your configuration still works but please '\n+            'update airflow.cfg to ensure future compatibility.',\n+            DeprecationWarning)\n+        remote_log_base = configuration.get('core', 'S3_LOG_FOLDER')\n+\n+    if remote_log_base.startswith('s3:/'):\n+        store_s3_logs(log_filename=filename, old_log=old_log)\n+    elif remote_log_base.startswith('gs:/'):\n+        store_gcs_logs(log_filename=filename, old_log=old_log)\n+    elif remote_log_base:\n+        raise ValueError(\n+            'Unsupported remote log location: {}'.format(remote_log_base))\n+\n+def store_s3_logs(log_filename, old_log):\n+    \"\"\"\n+    Store logs in S3\n+    \"\"\"\n+    import boto\n+    remote_log_base = configuration.get('core', 'REMOTE_BASE_LOG_FOLDER')\n+    log_location = os.path.expanduser(\n+        configuration.get('core', 'BASE_LOG_FOLDER'))\n+    remote_log = log_filename.replace(log_location, remote_log_base)\n+    bucket, key = remote_log.lstrip('s3:/').split('/', 1)\n+    if os.path.exists(log_filename):\n+\n+        # get logs\n+        with open(log_filename, 'r') as logfile:\n+            new_log = logfile.read()\n+\n+        # remove old logs (since they are already in the remote location)\n+        if old_log:\n+            new_log.replace(old_log, '')\n+\n+        try:\n+            s3 = boto.connect_s3()\n+            s3_key = boto.s3.key.Key(s3.get_bucket(bucket), key)\n+\n+            # append new logs to old S3 logs, if available\n+            if s3_key.exists():\n+                old_s3_log = s3_key.get_contents_as_string().decode()\n+                new_log = old_s3_log + '\\n' + new_log\n+\n+            # send log to S3\n+            encrypt = configuration.get('core', 'ENCRYPT_S3_LOGS')\n+            s3_key.set_contents_from_string(new_log, encrypt_key=encrypt)\n+        except:\n+            print('Could not send logs to S3.')\n+\n+def store_gcs_logs(log_filename, old_log):",
    "path": "airflow/bin/cli.py",
    "commit_id": "6df0c0778ec6f12b237295e5096bdfdf07219d4f",
    "original_commit_id": "6df0c0778ec6f12b237295e5096bdfdf07219d4f",
    "user": {
      "login": "criccomini",
      "id": 167569,
      "node_id": "MDQ6VXNlcjE2NzU2OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/167569?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/criccomini",
      "html_url": "https://github.com/criccomini",
      "followers_url": "https://api.github.com/users/criccomini/followers",
      "following_url": "https://api.github.com/users/criccomini/following{/other_user}",
      "gists_url": "https://api.github.com/users/criccomini/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/criccomini/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/criccomini/subscriptions",
      "organizations_url": "https://api.github.com/users/criccomini/orgs",
      "repos_url": "https://api.github.com/users/criccomini/repos",
      "events_url": "https://api.github.com/users/criccomini/events{/privacy}",
      "received_events_url": "https://api.github.com/users/criccomini/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "> I think the GCSHook rolls its own REST API access and seems quite fragile\n\nIt does not. It uses Google's Python client library.\n\n> However, this is compatible with service accounts\n\nCool, this is my main concern.\n",
    "created_at": "2016-03-04T18:21:41Z",
    "updated_at": "2016-03-04T18:21:41Z",
    "html_url": "https://github.com/apache/airflow/pull/1109#discussion_r55067217",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1109",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/55067217"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1109#discussion_r55067217"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1109"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/55067217/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 290,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 103,
    "position": 103,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/55067301",
    "pull_request_review_id": null,
    "id": 55067301,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDY3MzAx",
    "diff_hunk": "@@ -130,6 +133,7 @@ def run(self):\n         'doc': doc,\n         'docker': docker,\n         'druid': druid,\n+        'gcs': gcs,",
    "path": "setup.py",
    "commit_id": "6df0c0778ec6f12b237295e5096bdfdf07219d4f",
    "original_commit_id": "6df0c0778ec6f12b237295e5096bdfdf07219d4f",
    "user": {
      "login": "criccomini",
      "id": 167569,
      "node_id": "MDQ6VXNlcjE2NzU2OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/167569?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/criccomini",
      "html_url": "https://github.com/criccomini",
      "followers_url": "https://api.github.com/users/criccomini/followers",
      "following_url": "https://api.github.com/users/criccomini/following{/other_user}",
      "gists_url": "https://api.github.com/users/criccomini/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/criccomini/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/criccomini/subscriptions",
      "organizations_url": "https://api.github.com/users/criccomini/orgs",
      "repos_url": "https://api.github.com/users/criccomini/repos",
      "events_url": "https://api.github.com/users/criccomini/events{/privacy}",
      "received_events_url": "https://api.github.com/users/criccomini/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Can you make this 'gcp' instead of 'gcs'? That way we can lump GCS, BQ, Datastore, etc libraries into it.\n",
    "created_at": "2016-03-04T18:22:14Z",
    "updated_at": "2016-03-04T18:22:14Z",
    "html_url": "https://github.com/apache/airflow/pull/1109#discussion_r55067301",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1109",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/55067301"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1109#discussion_r55067301"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1109"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/55067301/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 136,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 14,
    "position": 14,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/55094735",
    "pull_request_review_id": null,
    "id": 55094735,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDk0NzM1",
    "diff_hunk": "@@ -19,13 +19,11 @@ future\n google-api-python-client",
    "path": "requirements.txt",
    "commit_id": "1f6fa7d1a0b51450c60522bfe004b38c776a8ed2",
    "original_commit_id": "bdd8ade782c8e5bcf2458fea4ac916eb2b9f1b09",
    "user": {
      "login": "criccomini",
      "id": 167569,
      "node_id": "MDQ6VXNlcjE2NzU2OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/167569?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/criccomini",
      "html_url": "https://github.com/criccomini",
      "followers_url": "https://api.github.com/users/criccomini/followers",
      "following_url": "https://api.github.com/users/criccomini/following{/other_user}",
      "gists_url": "https://api.github.com/users/criccomini/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/criccomini/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/criccomini/subscriptions",
      "organizations_url": "https://api.github.com/users/criccomini/orgs",
      "repos_url": "https://api.github.com/users/criccomini/repos",
      "events_url": "https://api.github.com/users/criccomini/events{/privacy}",
      "received_events_url": "https://api.github.com/users/criccomini/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Do you need to remove this?\n",
    "created_at": "2016-03-04T21:56:28Z",
    "updated_at": "2016-03-04T22:00:13Z",
    "html_url": "https://github.com/apache/airflow/pull/1118#discussion_r55094735",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1118",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/55094735"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1118#discussion_r55094735"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1118"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/55094735/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 1,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/55095180",
    "pull_request_review_id": null,
    "id": 55095180,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDk1MTgw",
    "diff_hunk": "@@ -19,13 +19,11 @@ future\n google-api-python-client",
    "path": "requirements.txt",
    "commit_id": "1f6fa7d1a0b51450c60522bfe004b38c776a8ed2",
    "original_commit_id": "bdd8ade782c8e5bcf2458fea4ac916eb2b9f1b09",
    "user": {
      "login": "jlowin",
      "id": 153965,
      "node_id": "MDQ6VXNlcjE1Mzk2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/153965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jlowin",
      "html_url": "https://github.com/jlowin",
      "followers_url": "https://api.github.com/users/jlowin/followers",
      "following_url": "https://api.github.com/users/jlowin/following{/other_user}",
      "gists_url": "https://api.github.com/users/jlowin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jlowin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jlowin/subscriptions",
      "organizations_url": "https://api.github.com/users/jlowin/orgs",
      "repos_url": "https://api.github.com/users/jlowin/repos",
      "events_url": "https://api.github.com/users/jlowin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jlowin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "indeed.\n",
    "created_at": "2016-03-04T22:00:05Z",
    "updated_at": "2016-03-04T22:00:13Z",
    "html_url": "https://github.com/apache/airflow/pull/1118#discussion_r55095180",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1118",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/55095180"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1118#discussion_r55095180"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1118"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/55095180/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 1,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/55107000",
    "pull_request_review_id": null,
    "id": 55107000,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MTA3MDAw",
    "diff_hunk": "@@ -53,6 +53,14 @@ def run(self):\n ]\n docker = ['docker-py>=1.6.0']\n druid = ['pydruid>=0.2.1']\n+gcloud = [\n+    'gcloud>=1.1.0',\n+]\n+gcp_api = [\n+    'httplib2',\n+    'google-api-python-client',",
    "path": "setup.py",
    "commit_id": "3629c90445defd01bb75c5968ce430c61facf292",
    "original_commit_id": "7e9fb21bb82ce7f7e0f6ffd1a4b8fe43ef162b89",
    "user": {
      "login": "jlowin",
      "id": 153965,
      "node_id": "MDQ6VXNlcjE1Mzk2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/153965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jlowin",
      "html_url": "https://github.com/jlowin",
      "followers_url": "https://api.github.com/users/jlowin/followers",
      "following_url": "https://api.github.com/users/jlowin/following{/other_user}",
      "gists_url": "https://api.github.com/users/jlowin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jlowin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jlowin/subscriptions",
      "organizations_url": "https://api.github.com/users/jlowin/orgs",
      "repos_url": "https://api.github.com/users/jlowin/repos",
      "events_url": "https://api.github.com/users/jlowin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jlowin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "@criccomini I think that for compatibility this might be better as `google-api-python-client<1.5` but I'm not sure. As far as I can tell 1.5 is the first version that depends on `oauth2client 2.0`.\n",
    "created_at": "2016-03-05T00:01:48Z",
    "updated_at": "2016-03-05T17:13:16Z",
    "html_url": "https://github.com/apache/airflow/pull/1119#discussion_r55107000",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1119",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/55107000"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1119#discussion_r55107000"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1119"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/55107000/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 61,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 9,
    "position": 9,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/55107042",
    "pull_request_review_id": null,
    "id": 55107042,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MTA3MDQy",
    "diff_hunk": "@@ -16,16 +16,13 @@ flask-cache\n flask-login\n flower\n future\n-google-api-python-client",
    "path": "requirements.txt",
    "commit_id": "3629c90445defd01bb75c5968ce430c61facf292",
    "original_commit_id": "7e9fb21bb82ce7f7e0f6ffd1a4b8fe43ef162b89",
    "user": {
      "login": "criccomini",
      "id": 167569,
      "node_id": "MDQ6VXNlcjE2NzU2OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/167569?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/criccomini",
      "html_url": "https://github.com/criccomini",
      "followers_url": "https://api.github.com/users/criccomini/followers",
      "following_url": "https://api.github.com/users/criccomini/following{/other_user}",
      "gists_url": "https://api.github.com/users/criccomini/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/criccomini/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/criccomini/subscriptions",
      "organizations_url": "https://api.github.com/users/criccomini/orgs",
      "repos_url": "https://api.github.com/users/criccomini/repos",
      "events_url": "https://api.github.com/users/criccomini/events{/privacy}",
      "received_events_url": "https://api.github.com/users/criccomini/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "This stuff can go now. I merged #1118 \n",
    "created_at": "2016-03-05T00:02:27Z",
    "updated_at": "2016-03-05T17:13:16Z",
    "html_url": "https://github.com/apache/airflow/pull/1119#discussion_r55107042",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1119",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/55107042"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1119#discussion_r55107042"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1119"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/55107042/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 19,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 4,
    "position": 4,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/55109982",
    "pull_request_review_id": null,
    "id": 55109982,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MTA5OTgy",
    "diff_hunk": "@@ -79,6 +86,7 @@ Currently **officially** using Airflow:\n * [WeTransfer](https://github.com/WeTransfer) [[@jochem](https://github.com/jochem)]\n * Wooga\n * Xoom [[@gepser](https://github.com/gepser) & [@omarvides](https://github.com/omarvides)]\n+* [WePay](http://www.wepay.com) [[@criccomini](https://github.com/criccomini) & [@mtagle](https://github.com/mtagle)]\n * Yahoo!",
    "path": "README.md",
    "commit_id": "05b64d9f328be926846eea24567156867191cdf0",
    "original_commit_id": "6abd7e2402da69e3b41740ce7d982f65d9349a99",
    "user": {
      "login": "r39132",
      "id": 581734,
      "node_id": "MDQ6VXNlcjU4MTczNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/581734?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/r39132",
      "html_url": "https://github.com/r39132",
      "followers_url": "https://api.github.com/users/r39132/followers",
      "following_url": "https://api.github.com/users/r39132/following{/other_user}",
      "gists_url": "https://api.github.com/users/r39132/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/r39132/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/r39132/subscriptions",
      "organizations_url": "https://api.github.com/users/r39132/orgs",
      "repos_url": "https://api.github.com/users/r39132/repos",
      "events_url": "https://api.github.com/users/r39132/events{/privacy}",
      "received_events_url": "https://api.github.com/users/r39132/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "You can add bolke under ING to this \"currently officially using\" list \n",
    "created_at": "2016-03-05T00:50:24Z",
    "updated_at": "2016-03-05T16:52:40Z",
    "html_url": "https://github.com/apache/airflow/pull/1116#discussion_r55109982",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1116",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/55109982"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1116#discussion_r55109982"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1116"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/55109982/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 90,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 19,
    "position": 28,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/55110031",
    "pull_request_review_id": null,
    "id": 55110031,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MTEwMDMx",
    "diff_hunk": "@@ -49,6 +49,13 @@ As the Airflow community grows, we'd like to keep track of who is using\n the platform. Please send a PR with your company name and @githubhandle\n if you may.\n \n+Committers:\n+\n+* [@mistercrunch](https://github.com/mistercrunch) ([Airbnb](http://airbnb.io/))\n+* [@r39132](https://github.com/r39132) ([Agari](https://github.com/agaridata))\n+* [@criccomini](https://github.com/criccomini) ([WePay](http://www.wepay.com))\n+* [@bolkedebruin](https://github.com/bolkedebruin)",
    "path": "README.md",
    "commit_id": "05b64d9f328be926846eea24567156867191cdf0",
    "original_commit_id": "6abd7e2402da69e3b41740ce7d982f65d9349a99",
    "user": {
      "login": "r39132",
      "id": 581734,
      "node_id": "MDQ6VXNlcjU4MTczNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/581734?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/r39132",
      "html_url": "https://github.com/r39132",
      "followers_url": "https://api.github.com/users/r39132/followers",
      "following_url": "https://api.github.com/users/r39132/following{/other_user}",
      "gists_url": "https://api.github.com/users/r39132/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/r39132/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/r39132/subscriptions",
      "organizations_url": "https://api.github.com/users/r39132/orgs",
      "repos_url": "https://api.github.com/users/r39132/repos",
      "events_url": "https://api.github.com/users/r39132/events{/privacy}",
      "received_events_url": "https://api.github.com/users/r39132/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "ING is the company for bolke. Good to add that if we are adding companies. \n",
    "created_at": "2016-03-05T00:50:56Z",
    "updated_at": "2016-03-05T16:52:40Z",
    "html_url": "https://github.com/apache/airflow/pull/1116#discussion_r55110031",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1116",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/55110031"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1116#discussion_r55110031"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1116"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/55110031/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 9,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/55129220",
    "pull_request_review_id": null,
    "id": 55129220,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MTI5MjIw",
    "diff_hunk": "@@ -60,3 +60,41 @@ documentation\n \n - Verify that the ``fernet_key`` defined in ``$AIRFLOW_HOME/airflow.cfg`` is a valid Fernet key. It must be a base64-encoded 32-byte key. You need to restart the webserver after you update the key\n - For existing connections (the ones that you had defined before installing ``airflow[crypto]`` and creating a Fernet key), you need to open each connection in the connection admin UI, re-type the password, and save it\n+\n+**What's the deal with ``start_date``?**\n+\n+``start_date`` is partly legacy from the pre-DagRun era, but it is still\n+relevant in many ways. When creating a new DAG, you probably want to set\n+a global ``start_date`` for your tasks using ``default_args``. The first\n+DagRun to be created will be based on the ``min(start_date)`` for all your\n+task. From that point on, the scheduler creates new DagRuns based on\n+your ``schedule_interval`` and the corresponding task instances run as your\n+dependencies are met. When introducing new tasks to your DAG, you need to\n+pay special attention to ``start_date``, and may want to reactivate\n+inactive DagRuns to get the new task to get onboarded properly.\n+\n+We recommend against using dynamic values as ``start_date``, especially\n+``datetime.now()`` as it can be quite confusing. The task is triggered\n+once the period closes, and in theory an ``@hourly`` DAG would never get to\n+an hour after now as ``now()`` moves along.\n+\n+We also recommend using rounded ``start_date`` in relation to your\n+``schedule_interval``. This means an ``@hourly`` would be at ``00:00``\n+minutes:seconds, a ``@daily`` job at midnight, a ``@monthly`` job on the\n+first of the month. You can use any sensor or a ``TimeDeltaSensor`` to delay\n+the execution of tasks within that period. While ``schedule_interval``\n+does allow specifying a ``datetime.timedelta``\n+object, we recommend using the macros or cron expressions instead, as\n+it enforces this idea of rounded schedules.\n+\n+When using ``depends_on_past=True`` it's important to pay special attention\n+to ``start_date`` as the past dependency is not enforced only on the specific\n+schedule of the ``start_date`` specified for the task. It' also\n+important to watch DagRun activity status in time when introducing\n+new ``depends_on_past=True``, unless you are planning on running a backfill\n+for the new task(s).\n+\n+Also important to note is that the tasks ``start_date``, in the context of a\n+backfill CLI command, get overridden by the backfill's command ``start_date``.\n+This allows for a backfill on tasks that have ``depends_on_past=True`` to\n+actually start, if it wasn't the case, the backfill just wouldn't start.",
    "path": "docs/faq.rst",
    "commit_id": "be69d391f574fa59196f682cd53db1fe5f60ef6b",
    "original_commit_id": "be69d391f574fa59196f682cd53db1fe5f60ef6b",
    "user": {
      "login": "r39132",
      "id": 581734,
      "node_id": "MDQ6VXNlcjU4MTczNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/581734?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/r39132",
      "html_url": "https://github.com/r39132",
      "followers_url": "https://api.github.com/users/r39132/followers",
      "following_url": "https://api.github.com/users/r39132/following{/other_user}",
      "gists_url": "https://api.github.com/users/r39132/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/r39132/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/r39132/subscriptions",
      "organizations_url": "https://api.github.com/users/r39132/orgs",
      "repos_url": "https://api.github.com/users/r39132/repos",
      "events_url": "https://api.github.com/users/r39132/events{/privacy}",
      "received_events_url": "https://api.github.com/users/r39132/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "See comments on gitter.. but I'd prefer to move FAQs to the wiki. \n\n<img width=\"723\" alt=\"screenshot 2016-03-05 14 43 15\" src=\"https://cloud.githubusercontent.com/assets/581734/13551032/a2328546-e2e0-11e5-9ed1-9d32b76f209e.png\">\n",
    "created_at": "2016-03-05T22:43:42Z",
    "updated_at": "2016-03-05T22:43:42Z",
    "html_url": "https://github.com/apache/airflow/pull/1127#discussion_r55129220",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1127",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/55129220"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1127#discussion_r55129220"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1127"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/55129220/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 100,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 41,
    "position": 41,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/55130331",
    "pull_request_review_id": null,
    "id": 55130331,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MTMwMzMx",
    "diff_hunk": "@@ -60,3 +60,41 @@ documentation\n \n - Verify that the ``fernet_key`` defined in ``$AIRFLOW_HOME/airflow.cfg`` is a valid Fernet key. It must be a base64-encoded 32-byte key. You need to restart the webserver after you update the key\n - For existing connections (the ones that you had defined before installing ``airflow[crypto]`` and creating a Fernet key), you need to open each connection in the connection admin UI, re-type the password, and save it\n+\n+**What's the deal with ``start_date``?**\n+\n+``start_date`` is partly legacy from the pre-DagRun era, but it is still\n+relevant in many ways. When creating a new DAG, you probably want to set\n+a global ``start_date`` for your tasks using ``default_args``. The first\n+DagRun to be created will be based on the ``min(start_date)`` for all your\n+task. From that point on, the scheduler creates new DagRuns based on\n+your ``schedule_interval`` and the corresponding task instances run as your\n+dependencies are met. When introducing new tasks to your DAG, you need to\n+pay special attention to ``start_date``, and may want to reactivate\n+inactive DagRuns to get the new task to get onboarded properly.\n+\n+We recommend against using dynamic values as ``start_date``, especially\n+``datetime.now()`` as it can be quite confusing. The task is triggered\n+once the period closes, and in theory an ``@hourly`` DAG would never get to\n+an hour after now as ``now()`` moves along.\n+\n+We also recommend using rounded ``start_date`` in relation to your\n+``schedule_interval``. This means an ``@hourly`` would be at ``00:00``\n+minutes:seconds, a ``@daily`` job at midnight, a ``@monthly`` job on the\n+first of the month. You can use any sensor or a ``TimeDeltaSensor`` to delay\n+the execution of tasks within that period. While ``schedule_interval``\n+does allow specifying a ``datetime.timedelta``\n+object, we recommend using the macros or cron expressions instead, as\n+it enforces this idea of rounded schedules.\n+\n+When using ``depends_on_past=True`` it's important to pay special attention\n+to ``start_date`` as the past dependency is not enforced only on the specific\n+schedule of the ``start_date`` specified for the task. It' also\n+important to watch DagRun activity status in time when introducing\n+new ``depends_on_past=True``, unless you are planning on running a backfill\n+for the new task(s).\n+\n+Also important to note is that the tasks ``start_date``, in the context of a\n+backfill CLI command, get overridden by the backfill's command ``start_date``.\n+This allows for a backfill on tasks that have ``depends_on_past=True`` to\n+actually start, if it wasn't the case, the backfill just wouldn't start.",
    "path": "docs/faq.rst",
    "commit_id": "be69d391f574fa59196f682cd53db1fe5f60ef6b",
    "original_commit_id": "be69d391f574fa59196f682cd53db1fe5f60ef6b",
    "user": {
      "login": "criccomini",
      "id": 167569,
      "node_id": "MDQ6VXNlcjE2NzU2OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/167569?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/criccomini",
      "html_url": "https://github.com/criccomini",
      "followers_url": "https://api.github.com/users/criccomini/followers",
      "following_url": "https://api.github.com/users/criccomini/following{/other_user}",
      "gists_url": "https://api.github.com/users/criccomini/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/criccomini/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/criccomini/subscriptions",
      "organizations_url": "https://api.github.com/users/criccomini/orgs",
      "repos_url": "https://api.github.com/users/criccomini/repos",
      "events_url": "https://api.github.com/users/criccomini/events{/privacy}",
      "received_events_url": "https://api.github.com/users/criccomini/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "I also added a comment about start_date with datetime.now() to the common pitfalls wiki.\n",
    "created_at": "2016-03-06T00:10:15Z",
    "updated_at": "2016-03-06T00:10:15Z",
    "html_url": "https://github.com/apache/airflow/pull/1127#discussion_r55130331",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1127",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/55130331"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1127#discussion_r55130331"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1127"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/55130331/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 100,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 41,
    "position": 41,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/55263351",
    "pull_request_review_id": null,
    "id": 55263351,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MjYzMzUx",
    "diff_hunk": "@@ -183,6 +184,9 @@ class AirflowConfigException(Exception):\n # Whether to disable pickling dags\n donot_pickle = False\n \n+# How long before timing out a python file import while filing the DagBag",
    "path": "airflow/configuration.py",
    "commit_id": "3ee00854f17669068b91cf71f0e5e1311083d0a9",
    "original_commit_id": "3ee00854f17669068b91cf71f0e5e1311083d0a9",
    "user": {
      "login": "aoen",
      "id": 1592778,
      "node_id": "MDQ6VXNlcjE1OTI3Nzg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1592778?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aoen",
      "html_url": "https://github.com/aoen",
      "followers_url": "https://api.github.com/users/aoen/followers",
      "following_url": "https://api.github.com/users/aoen/following{/other_user}",
      "gists_url": "https://api.github.com/users/aoen/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aoen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aoen/subscriptions",
      "organizations_url": "https://api.github.com/users/aoen/orgs",
      "repos_url": "https://api.github.com/users/aoen/repos",
      "events_url": "https://api.github.com/users/aoen/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aoen/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Nit: filing -> filling\n",
    "created_at": "2016-03-07T20:06:04Z",
    "updated_at": "2016-03-07T20:06:04Z",
    "html_url": "https://github.com/apache/airflow/pull/1134#discussion_r55263351",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1134",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/55263351"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1134#discussion_r55263351"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1134"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/55263351/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 187,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 12,
    "position": 12,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/55281229",
    "pull_request_review_id": null,
    "id": 55281229,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MjgxMjI5",
    "diff_hunk": "@@ -7,7 +7,12 @@\n         jdbc: {\n             hidden_fields: ['port', 'schema', 'extra'],\n             relabeling: {'host': 'Connection URL'},\n+        },\n+        google_cloud_platform: {\n+            hidden_fields: ['host', 'schema', 'login', 'password', 'port', 'extra'],",
    "path": "airflow/www/static/connection_form.js",
    "commit_id": "3629c90445defd01bb75c5968ce430c61facf292",
    "original_commit_id": "3629c90445defd01bb75c5968ce430c61facf292",
    "user": {
      "login": "criccomini",
      "id": 167569,
      "node_id": "MDQ6VXNlcjE2NzU2OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/167569?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/criccomini",
      "html_url": "https://github.com/criccomini",
      "followers_url": "https://api.github.com/users/criccomini/followers",
      "following_url": "https://api.github.com/users/criccomini/following{/other_user}",
      "gists_url": "https://api.github.com/users/criccomini/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/criccomini/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/criccomini/subscriptions",
      "organizations_url": "https://api.github.com/users/criccomini/orgs",
      "repos_url": "https://api.github.com/users/criccomini/repos",
      "events_url": "https://api.github.com/users/criccomini/events{/privacy}",
      "received_events_url": "https://api.github.com/users/criccomini/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Don't we still need 'extra'?\n",
    "created_at": "2016-03-07T22:07:02Z",
    "updated_at": "2016-03-07T22:07:02Z",
    "html_url": "https://github.com/apache/airflow/pull/1119#discussion_r55281229",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1119",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/55281229"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1119#discussion_r55281229"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1119"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/55281229/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 12,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 6,
    "position": 6,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/55281852",
    "pull_request_review_id": null,
    "id": 55281852,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MjgxODUy",
    "diff_hunk": "@@ -7,7 +7,12 @@\n         jdbc: {\n             hidden_fields: ['port', 'schema', 'extra'],\n             relabeling: {'host': 'Connection URL'},\n+        },\n+        google_cloud_platform: {",
    "path": "airflow/www/static/connection_form.js",
    "commit_id": "3629c90445defd01bb75c5968ce430c61facf292",
    "original_commit_id": "3629c90445defd01bb75c5968ce430c61facf292",
    "user": {
      "login": "criccomini",
      "id": 167569,
      "node_id": "MDQ6VXNlcjE2NzU2OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/167569?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/criccomini",
      "html_url": "https://github.com/criccomini",
      "followers_url": "https://api.github.com/users/criccomini/followers",
      "following_url": "https://api.github.com/users/criccomini/following{/other_user}",
      "gists_url": "https://api.github.com/users/criccomini/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/criccomini/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/criccomini/subscriptions",
      "organizations_url": "https://api.github.com/users/criccomini/orgs",
      "repos_url": "https://api.github.com/users/criccomini/repos",
      "events_url": "https://api.github.com/users/criccomini/events{/privacy}",
      "received_events_url": "https://api.github.com/users/criccomini/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Not sure if this will work with data profiler. Right now, we have different types for BQ, GCS, datastore, etc. This allows us to set data profiler to query BigQuery. This code is in models.py's get_hook method:\n\n```\n        elif self.conn_type == 'bigquery':\n            return contrib_hooks.BigQueryHook(bigquery_conn_id=self.conn_id)\n```\n\nI suppose we could assume it's a BQ hook if the connection is of type 'google_cloud_platform'. But it's worth considering.\n",
    "created_at": "2016-03-07T22:11:13Z",
    "updated_at": "2016-03-07T22:11:13Z",
    "html_url": "https://github.com/apache/airflow/pull/1119#discussion_r55281852",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1119",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/55281852"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1119#discussion_r55281852"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1119"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/55281852/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 11,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 5,
    "position": 5,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/55281902",
    "pull_request_review_id": null,
    "id": 55281902,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MjgxOTAy",
    "diff_hunk": "@@ -7,7 +7,12 @@\n         jdbc: {\n             hidden_fields: ['port', 'schema', 'extra'],\n             relabeling: {'host': 'Connection URL'},\n+        },\n+        google_cloud_platform: {",
    "path": "airflow/www/static/connection_form.js",
    "commit_id": "3629c90445defd01bb75c5968ce430c61facf292",
    "original_commit_id": "3629c90445defd01bb75c5968ce430c61facf292",
    "user": {
      "login": "criccomini",
      "id": 167569,
      "node_id": "MDQ6VXNlcjE2NzU2OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/167569?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/criccomini",
      "html_url": "https://github.com/criccomini",
      "followers_url": "https://api.github.com/users/criccomini/followers",
      "following_url": "https://api.github.com/users/criccomini/following{/other_user}",
      "gists_url": "https://api.github.com/users/criccomini/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/criccomini/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/criccomini/subscriptions",
      "organizations_url": "https://api.github.com/users/criccomini/orgs",
      "repos_url": "https://api.github.com/users/criccomini/repos",
      "events_url": "https://api.github.com/users/criccomini/events{/privacy}",
      "received_events_url": "https://api.github.com/users/criccomini/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "(note, this is a forward looking comment, for when we migrate BQ to the new gcloud based hook)\n",
    "created_at": "2016-03-07T22:11:31Z",
    "updated_at": "2016-03-07T22:11:31Z",
    "html_url": "https://github.com/apache/airflow/pull/1119#discussion_r55281902",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1119",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/55281902"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1119#discussion_r55281902"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1119"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/55281902/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 11,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 5,
    "position": 5,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/55282798",
    "pull_request_review_id": null,
    "id": 55282798,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MjgyNzk4",
    "diff_hunk": "@@ -7,7 +7,12 @@\n         jdbc: {\n             hidden_fields: ['port', 'schema', 'extra'],\n             relabeling: {'host': 'Connection URL'},\n+        },\n+        google_cloud_platform: {\n+            hidden_fields: ['host', 'schema', 'login', 'password', 'port', 'extra'],",
    "path": "airflow/www/static/connection_form.js",
    "commit_id": "3629c90445defd01bb75c5968ce430c61facf292",
    "original_commit_id": "3629c90445defd01bb75c5968ce430c61facf292",
    "user": {
      "login": "jlowin",
      "id": 153965,
      "node_id": "MDQ6VXNlcjE1Mzk2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/153965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jlowin",
      "html_url": "https://github.com/jlowin",
      "followers_url": "https://api.github.com/users/jlowin/followers",
      "following_url": "https://api.github.com/users/jlowin/following{/other_user}",
      "gists_url": "https://api.github.com/users/jlowin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jlowin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jlowin/subscriptions",
      "organizations_url": "https://api.github.com/users/jlowin/orgs",
      "repos_url": "https://api.github.com/users/jlowin/repos",
      "events_url": "https://api.github.com/users/jlowin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jlowin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "No, new connections should be set up using \"project\", \"key_path\", etc. fields that are displayed in the Airflow UI, not extras. I think \"extras\" is opaque for users who haven't read the code. However, if someone uses a connection that predates this change and DOES have an \"extra\" field, the code [here](https://github.com/airbnb/airflow/pull/1119/files#diff-a9d313c95097c265b6b934953bdfb2dbR78) will recognize that and handle it properly.\n\nAs far as I know, the connection type is largely irrelevant to Airflow -- you could create an \"FTP\" connection and pass it to `GCSHook`, and as long as it had the correct attributes it would work properly. The only thing that the type does affect is the fields that are displayed/handled by the UI (which are put in the \"extras\" field anyway behind the scenes)\n\nSo bottom line, lets say you have a connection of type `google_cloud_storage` with `key_path` in extras, and you've been using it with `GoogleCloudStorageHook`, you should be able to pass that same connection to a `GCSHook` no problem.\n",
    "created_at": "2016-03-07T22:17:51Z",
    "updated_at": "2016-03-07T22:17:51Z",
    "html_url": "https://github.com/apache/airflow/pull/1119#discussion_r55282798",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1119",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/55282798"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1119#discussion_r55282798"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1119"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/55282798/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 12,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 6,
    "position": 6,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/55283042",
    "pull_request_review_id": null,
    "id": 55283042,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MjgzMDQy",
    "diff_hunk": "@@ -7,7 +7,12 @@\n         jdbc: {\n             hidden_fields: ['port', 'schema', 'extra'],\n             relabeling: {'host': 'Connection URL'},\n+        },\n+        google_cloud_platform: {\n+            hidden_fields: ['host', 'schema', 'login', 'password', 'port', 'extra'],",
    "path": "airflow/www/static/connection_form.js",
    "commit_id": "3629c90445defd01bb75c5968ce430c61facf292",
    "original_commit_id": "3629c90445defd01bb75c5968ce430c61facf292",
    "user": {
      "login": "criccomini",
      "id": 167569,
      "node_id": "MDQ6VXNlcjE2NzU2OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/167569?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/criccomini",
      "html_url": "https://github.com/criccomini",
      "followers_url": "https://api.github.com/users/criccomini/followers",
      "following_url": "https://api.github.com/users/criccomini/following{/other_user}",
      "gists_url": "https://api.github.com/users/criccomini/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/criccomini/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/criccomini/subscriptions",
      "organizations_url": "https://api.github.com/users/criccomini/orgs",
      "repos_url": "https://api.github.com/users/criccomini/repos",
      "events_url": "https://api.github.com/users/criccomini/events{/privacy}",
      "received_events_url": "https://api.github.com/users/criccomini/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Cool. See note about connection type, above, though. Data profiler does use it.\n",
    "created_at": "2016-03-07T22:19:24Z",
    "updated_at": "2016-03-07T22:19:24Z",
    "html_url": "https://github.com/apache/airflow/pull/1119#discussion_r55283042",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1119",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/55283042"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1119#discussion_r55283042"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1119"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/55283042/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 12,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 6,
    "position": 6,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/55374441",
    "pull_request_review_id": null,
    "id": 55374441,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1Mzc0NDQx",
    "diff_hunk": "@@ -233,35 +234,121 @@ def run(args):\n         executor.heartbeat()\n         executor.end()\n \n-    if configuration.get('core', 'S3_LOG_FOLDER').startswith('s3:'):\n-        import boto\n-        s3_log = filename.replace(log, configuration.get('core', 'S3_LOG_FOLDER'))\n-        bucket, key = s3_log.lstrip('s3:/').split('/', 1)\n-        if os.path.exists(filename):\n+    # store logs remotely\n+    remote_base = configuration.get('core', 'REMOTE_BASE_LOG_FOLDER')\n \n-            # get logs\n-            with open(filename, 'r') as logfile:\n-                new_log = logfile.read()\n+    # deprecated as of March 2016\n+    if not remote_base and configuration.get('core', 'S3_LOG_FOLDER'):\n+        warnings.warn(\n+            'The S3_LOG_FOLDER configuration key has been replaced by '\n+            'REMOTE_BASE_LOG_FOLDER. Your configuration still works but please '\n+            'update airflow.cfg to ensure future compatibility.',\n+            DeprecationWarning)\n+        remote_base = configuration.get('core', 'S3_LOG_FOLDER')\n \n-            # remove old logs (since they are already in S3)\n-            if old_log:\n-                new_log.replace(old_log, '')\n+    if os.path.exists(filename):\n+        # read log and remove old logs to get just the latest additions\n+        with open(filename, 'r') as logfile:\n+            log = logfile.read().replace(old_log, '')\n \n+        remote_log_location = filename.replace(log_base, remote_base)\n+        # S3\n+        if remote_base.startswith('s3:/'):\n             try:\n-                s3 = boto.connect_s3()\n-                s3_key = boto.s3.key.Key(s3.get_bucket(bucket), key)\n-\n-                # append new logs to old S3 logs, if available\n-                if s3_key.exists():\n-                    old_s3_log = s3_key.get_contents_as_string().decode()\n-                    new_log = old_s3_log + '\\n' + new_log\n-\n-                # send log to S3\n-                encrypt = configuration.get('core', 'ENCRYPT_S3_LOGS')\n-                s3_key.set_contents_from_string(new_log, encrypt_key=encrypt)\n+                store_s3_log(log, remote_log_location)\n             except:\n                 print('Could not send logs to S3.')",
    "path": "airflow/bin/cli.py",
    "commit_id": "e2336faa794686eb434518c31ba6749c26270fdf",
    "original_commit_id": "3a0eeda1e7d8b904303a79b209dccf628c74b39a",
    "user": {
      "login": "criccomini",
      "id": 167569,
      "node_id": "MDQ6VXNlcjE2NzU2OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/167569?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/criccomini",
      "html_url": "https://github.com/criccomini",
      "followers_url": "https://api.github.com/users/criccomini/followers",
      "following_url": "https://api.github.com/users/criccomini/following{/other_user}",
      "gists_url": "https://api.github.com/users/criccomini/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/criccomini/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/criccomini/subscriptions",
      "organizations_url": "https://api.github.com/users/criccomini/orgs",
      "repos_url": "https://api.github.com/users/criccomini/repos",
      "events_url": "https://api.github.com/users/criccomini/events{/privacy}",
      "received_events_url": "https://api.github.com/users/criccomini/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Does it make sense to do logging.error() instead of prints for these?\n",
    "created_at": "2016-03-08T15:28:01Z",
    "updated_at": "2016-03-17T21:49:06Z",
    "html_url": "https://github.com/apache/airflow/pull/1137#discussion_r55374441",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1137",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/55374441"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1137#discussion_r55374441"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1137"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/55374441/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 82,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/55374750",
    "pull_request_review_id": null,
    "id": 55374750,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1Mzc0NzUw",
    "diff_hunk": "@@ -233,35 +234,121 @@ def run(args):\n         executor.heartbeat()\n         executor.end()\n \n-    if configuration.get('core', 'S3_LOG_FOLDER').startswith('s3:'):\n-        import boto\n-        s3_log = filename.replace(log, configuration.get('core', 'S3_LOG_FOLDER'))\n-        bucket, key = s3_log.lstrip('s3:/').split('/', 1)\n-        if os.path.exists(filename):\n+    # store logs remotely\n+    remote_base = configuration.get('core', 'REMOTE_BASE_LOG_FOLDER')\n \n-            # get logs\n-            with open(filename, 'r') as logfile:\n-                new_log = logfile.read()\n+    # deprecated as of March 2016\n+    if not remote_base and configuration.get('core', 'S3_LOG_FOLDER'):\n+        warnings.warn(\n+            'The S3_LOG_FOLDER configuration key has been replaced by '\n+            'REMOTE_BASE_LOG_FOLDER. Your configuration still works but please '\n+            'update airflow.cfg to ensure future compatibility.',\n+            DeprecationWarning)\n+        remote_base = configuration.get('core', 'S3_LOG_FOLDER')\n \n-            # remove old logs (since they are already in S3)\n-            if old_log:\n-                new_log.replace(old_log, '')\n+    if os.path.exists(filename):\n+        # read log and remove old logs to get just the latest additions\n+        with open(filename, 'r') as logfile:\n+            log = logfile.read().replace(old_log, '')",
    "path": "airflow/bin/cli.py",
    "commit_id": "e2336faa794686eb434518c31ba6749c26270fdf",
    "original_commit_id": "3a0eeda1e7d8b904303a79b209dccf628c74b39a",
    "user": {
      "login": "criccomini",
      "id": 167569,
      "node_id": "MDQ6VXNlcjE2NzU2OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/167569?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/criccomini",
      "html_url": "https://github.com/criccomini",
      "followers_url": "https://api.github.com/users/criccomini/followers",
      "following_url": "https://api.github.com/users/criccomini/following{/other_user}",
      "gists_url": "https://api.github.com/users/criccomini/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/criccomini/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/criccomini/subscriptions",
      "organizations_url": "https://api.github.com/users/criccomini/orgs",
      "repos_url": "https://api.github.com/users/criccomini/repos",
      "events_url": "https://api.github.com/users/criccomini/events{/privacy}",
      "received_events_url": "https://api.github.com/users/criccomini/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "As I read this, you're loading the full strings for each log into memory, and doing a string replace. It seems to me it'd be more memory/cpu efficient to get the size of the old_log, and truncate that length from the beginning of the new file.\n",
    "created_at": "2016-03-08T15:29:33Z",
    "updated_at": "2016-03-17T21:49:06Z",
    "html_url": "https://github.com/apache/airflow/pull/1137#discussion_r55374750",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1137",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/55374750"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1137#discussion_r55374750"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1137"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/55374750/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 63,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/55375723",
    "pull_request_review_id": null,
    "id": 55375723,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1Mzc1NzIz",
    "diff_hunk": "@@ -803,6 +809,71 @@ def log(self):\n             code=log, dag=dag, title=title, task_id=task_id,\n             execution_date=execution_date, form=form)\n \n+    def read_s3_log(self, log, remote_log_location):",
    "path": "airflow/www/views.py",
    "commit_id": "e2336faa794686eb434518c31ba6749c26270fdf",
    "original_commit_id": "3a0eeda1e7d8b904303a79b209dccf628c74b39a",
    "user": {
      "login": "criccomini",
      "id": 167569,
      "node_id": "MDQ6VXNlcjE2NzU2OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/167569?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/criccomini",
      "html_url": "https://github.com/criccomini",
      "followers_url": "https://api.github.com/users/criccomini/followers",
      "following_url": "https://api.github.com/users/criccomini/following{/other_user}",
      "gists_url": "https://api.github.com/users/criccomini/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/criccomini/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/criccomini/subscriptions",
      "organizations_url": "https://api.github.com/users/criccomini/orgs",
      "repos_url": "https://api.github.com/users/criccomini/repos",
      "events_url": "https://api.github.com/users/criccomini/events{/privacy}",
      "received_events_url": "https://api.github.com/users/criccomini/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "python docs\n",
    "created_at": "2016-03-08T15:34:07Z",
    "updated_at": "2016-03-17T21:49:06Z",
    "html_url": "https://github.com/apache/airflow/pull/1137#discussion_r55375723",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1137",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/55375723"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1137#discussion_r55375723"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1137"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/55375723/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 49,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/55375728",
    "pull_request_review_id": null,
    "id": 55375728,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1Mzc1NzI4",
    "diff_hunk": "@@ -803,6 +809,71 @@ def log(self):\n             code=log, dag=dag, title=title, task_id=task_id,\n             execution_date=execution_date, form=form)\n \n+    def read_s3_log(self, log, remote_log_location):\n+        remote_conn_id = conf.get('core', 'REMOTE_LOG_CONN_ID')\n+        try:\n+            from airflow.hooks import S3Hook\n+            s3_hook = S3Hook(remote_conn_id)\n+        except:\n+            log += (\n+                '*** Could not retrieve logs: '\n+                'Could not create an S3Hook with connection id \"{}\". '\n+                'Please make sure that airflow[s3] is installed and '\n+                'the S3 connection exists.\\n'.format(remote_conn_id))\n+            return log\n+\n+        log += '*** Fetching log from S3: {}\\n'.format(remote_log_location)\n+        log += ('*** Note: remote logs are only available once '\n+                'tasks have completed.\\n')\n+        s3_key = s3_hook.get_key(remote_log_location)\n+        if s3_key:\n+            log += '\\n' + s3_key.get_contents_as_string().decode()\n+        else:\n+            log += '*** No log found on S3.\\n'\n+        return log\n+\n+    def read_gcs_log(self, log, remote_log_location):",
    "path": "airflow/www/views.py",
    "commit_id": "e2336faa794686eb434518c31ba6749c26270fdf",
    "original_commit_id": "3a0eeda1e7d8b904303a79b209dccf628c74b39a",
    "user": {
      "login": "criccomini",
      "id": 167569,
      "node_id": "MDQ6VXNlcjE2NzU2OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/167569?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/criccomini",
      "html_url": "https://github.com/criccomini",
      "followers_url": "https://api.github.com/users/criccomini/followers",
      "following_url": "https://api.github.com/users/criccomini/following{/other_user}",
      "gists_url": "https://api.github.com/users/criccomini/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/criccomini/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/criccomini/subscriptions",
      "organizations_url": "https://api.github.com/users/criccomini/orgs",
      "repos_url": "https://api.github.com/users/criccomini/repos",
      "events_url": "https://api.github.com/users/criccomini/events{/privacy}",
      "received_events_url": "https://api.github.com/users/criccomini/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "python docs\n",
    "created_at": "2016-03-08T15:34:11Z",
    "updated_at": "2016-03-17T21:49:06Z",
    "html_url": "https://github.com/apache/airflow/pull/1137#discussion_r55375728",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1137",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/55375728"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1137#discussion_r55375728"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1137"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/55375728/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 72,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/55375948",
    "pull_request_review_id": null,
    "id": 55375948,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1Mzc1OTQ4",
    "diff_hunk": "@@ -803,6 +809,71 @@ def log(self):\n             code=log, dag=dag, title=title, task_id=task_id,\n             execution_date=execution_date, form=form)\n \n+    def read_s3_log(self, log, remote_log_location):\n+        remote_conn_id = conf.get('core', 'REMOTE_LOG_CONN_ID')\n+        try:\n+            from airflow.hooks import S3Hook\n+            s3_hook = S3Hook(remote_conn_id)\n+        except:\n+            log += (\n+                '*** Could not retrieve logs: '\n+                'Could not create an S3Hook with connection id \"{}\". '\n+                'Please make sure that airflow[s3] is installed and '\n+                'the S3 connection exists.\\n'.format(remote_conn_id))\n+            return log\n+\n+        log += '*** Fetching log from S3: {}\\n'.format(remote_log_location)\n+        log += ('*** Note: remote logs are only available once '\n+                'tasks have completed.\\n')\n+        s3_key = s3_hook.get_key(remote_log_location)\n+        if s3_key:\n+            log += '\\n' + s3_key.get_contents_as_string().decode()\n+        else:\n+            log += '*** No log found on S3.\\n'\n+        return log\n+\n+    def read_gcs_log(self, log, remote_log_location):\n+        remote_conn_id = conf.get('core', 'REMOTE_LOG_CONN_ID')\n+        try:",
    "path": "airflow/www/views.py",
    "commit_id": "e2336faa794686eb434518c31ba6749c26270fdf",
    "original_commit_id": "3a0eeda1e7d8b904303a79b209dccf628c74b39a",
    "user": {
      "login": "criccomini",
      "id": 167569,
      "node_id": "MDQ6VXNlcjE2NzU2OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/167569?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/criccomini",
      "html_url": "https://github.com/criccomini",
      "followers_url": "https://api.github.com/users/criccomini/followers",
      "following_url": "https://api.github.com/users/criccomini/following{/other_user}",
      "gists_url": "https://api.github.com/users/criccomini/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/criccomini/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/criccomini/subscriptions",
      "organizations_url": "https://api.github.com/users/criccomini/orgs",
      "repos_url": "https://api.github.com/users/criccomini/repos",
      "events_url": "https://api.github.com/users/criccomini/events{/privacy}",
      "received_events_url": "https://api.github.com/users/criccomini/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "This is done in two places. Does it make sense to put it in one place as a util method?\n",
    "created_at": "2016-03-08T15:35:36Z",
    "updated_at": "2016-03-17T21:49:06Z",
    "html_url": "https://github.com/apache/airflow/pull/1137#discussion_r55375948",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1137",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/55375948"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1137#discussion_r55375948"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1137"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/55375948/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 74,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/55381963",
    "pull_request_review_id": null,
    "id": 55381963,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MzgxOTYz",
    "diff_hunk": "@@ -233,35 +234,121 @@ def run(args):\n         executor.heartbeat()\n         executor.end()\n \n-    if configuration.get('core', 'S3_LOG_FOLDER').startswith('s3:'):\n-        import boto\n-        s3_log = filename.replace(log, configuration.get('core', 'S3_LOG_FOLDER'))\n-        bucket, key = s3_log.lstrip('s3:/').split('/', 1)\n-        if os.path.exists(filename):\n+    # store logs remotely\n+    remote_base = configuration.get('core', 'REMOTE_BASE_LOG_FOLDER')\n \n-            # get logs\n-            with open(filename, 'r') as logfile:\n-                new_log = logfile.read()\n+    # deprecated as of March 2016\n+    if not remote_base and configuration.get('core', 'S3_LOG_FOLDER'):\n+        warnings.warn(\n+            'The S3_LOG_FOLDER configuration key has been replaced by '\n+            'REMOTE_BASE_LOG_FOLDER. Your configuration still works but please '\n+            'update airflow.cfg to ensure future compatibility.',\n+            DeprecationWarning)\n+        remote_base = configuration.get('core', 'S3_LOG_FOLDER')\n \n-            # remove old logs (since they are already in S3)\n-            if old_log:\n-                new_log.replace(old_log, '')\n+    if os.path.exists(filename):\n+        # read log and remove old logs to get just the latest additions\n+        with open(filename, 'r') as logfile:\n+            log = logfile.read().replace(old_log, '')\n \n+        remote_log_location = filename.replace(log_base, remote_base)\n+        # S3\n+        if remote_base.startswith('s3:/'):\n             try:\n-                s3 = boto.connect_s3()\n-                s3_key = boto.s3.key.Key(s3.get_bucket(bucket), key)\n-\n-                # append new logs to old S3 logs, if available\n-                if s3_key.exists():\n-                    old_s3_log = s3_key.get_contents_as_string().decode()\n-                    new_log = old_s3_log + '\\n' + new_log\n-\n-                # send log to S3\n-                encrypt = configuration.get('core', 'ENCRYPT_S3_LOGS')\n-                s3_key.set_contents_from_string(new_log, encrypt_key=encrypt)\n+                store_s3_log(log, remote_log_location)\n             except:\n                 print('Could not send logs to S3.')",
    "path": "airflow/bin/cli.py",
    "commit_id": "e2336faa794686eb434518c31ba6749c26270fdf",
    "original_commit_id": "3a0eeda1e7d8b904303a79b209dccf628c74b39a",
    "user": {
      "login": "jlowin",
      "id": 153965,
      "node_id": "MDQ6VXNlcjE1Mzk2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/153965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jlowin",
      "html_url": "https://github.com/jlowin",
      "followers_url": "https://api.github.com/users/jlowin/followers",
      "following_url": "https://api.github.com/users/jlowin/following{/other_user}",
      "gists_url": "https://api.github.com/users/jlowin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jlowin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jlowin/subscriptions",
      "organizations_url": "https://api.github.com/users/jlowin/orgs",
      "repos_url": "https://api.github.com/users/jlowin/repos",
      "events_url": "https://api.github.com/users/jlowin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jlowin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "I was trying to follow the model elsewhere in `cli.py` -- print instead of logging. I thought maybe it was because the logs are being redirected for the task, so if there's an error you wouldn't actually see it unless you could load the log.\n",
    "created_at": "2016-03-08T16:12:36Z",
    "updated_at": "2016-03-17T21:49:06Z",
    "html_url": "https://github.com/apache/airflow/pull/1137#discussion_r55381963",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1137",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/55381963"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1137#discussion_r55381963"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1137"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/55381963/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 82,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/55534495",
    "pull_request_review_id": null,
    "id": 55534495,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NTM0NDk1",
    "diff_hunk": "@@ -359,6 +363,27 @@ def run_load(self, destination_dataset_table, schema_fields, source_uris, source\n \n         return self.run_with_configuration(configuration)\n \n+    def _split_project_dataset_table_input(self, var_name, project_dataset_table):\n+        \"\"\"\n+        :param var_name: the name of the variable input, for logging and erroring purposes.\n+        :type var_name: str\n+        :param project_dataset_table: input string in (<project>.)<dataset>.<project> format.\n+            if project is not included in the string, self.project_id will be returned in the tuple.\n+        :type project_dataset_table: str\n+        :return: (project, dataset, table) tuple\n+        \"\"\"\n+        table_split = project_dataset_table.split('.')\n+        assert len(table_split) == 2 | len(table_split) == 3, \\",
    "path": "airflow/contrib/hooks/bigquery_hook.py",
    "commit_id": "ab73b70544e8f25ee6e244174166d501d3373ec8",
    "original_commit_id": "01c5b75e0858ef1c4033a044d6a91d357924adc2",
    "user": {
      "login": "criccomini",
      "id": 167569,
      "node_id": "MDQ6VXNlcjE2NzU2OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/167569?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/criccomini",
      "html_url": "https://github.com/criccomini",
      "followers_url": "https://api.github.com/users/criccomini/followers",
      "following_url": "https://api.github.com/users/criccomini/following{/other_user}",
      "gists_url": "https://api.github.com/users/criccomini/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/criccomini/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/criccomini/subscriptions",
      "organizations_url": "https://api.github.com/users/criccomini/orgs",
      "repos_url": "https://api.github.com/users/criccomini/repos",
      "events_url": "https://api.github.com/users/criccomini/events{/privacy}",
      "received_events_url": "https://api.github.com/users/criccomini/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Should this be 'or' instead of '|'?\n",
    "created_at": "2016-03-09T15:26:51Z",
    "updated_at": "2016-03-09T21:30:26Z",
    "html_url": "https://github.com/apache/airflow/pull/1139#discussion_r55534495",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1139",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/55534495"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1139#discussion_r55534495"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1139"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/55534495/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 163,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/55535016",
    "pull_request_review_id": null,
    "id": 55535016,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NTM1MDE2",
    "diff_hunk": "@@ -359,6 +363,27 @@ def run_load(self, destination_dataset_table, schema_fields, source_uris, source\n \n         return self.run_with_configuration(configuration)\n \n+    def _split_project_dataset_table_input(self, var_name, project_dataset_table):\n+        \"\"\"\n+        :param var_name: the name of the variable input, for logging and erroring purposes.\n+        :type var_name: str\n+        :param project_dataset_table: input string in (<project>.)<dataset>.<project> format.\n+            if project is not included in the string, self.project_id will be returned in the tuple.\n+        :type project_dataset_table: str\n+        :return: (project, dataset, table) tuple\n+        \"\"\"\n+        table_split = project_dataset_table.split('.')\n+        assert len(table_split) == 2 | len(table_split) == 3, \\\n+            'Expected {var} in the format of (<project.)<dataset>.<table>, got {input}'.format(var=var_name, input=project_dataset_table)\n+\n+        if len(table_split) == 2:\n+            logging.log('project not included in {var}: {input}; using project \"{project}\"'.format(var=var_name, input=project_dataset_table, project=self.project_id))",
    "path": "airflow/contrib/hooks/bigquery_hook.py",
    "commit_id": "ab73b70544e8f25ee6e244174166d501d3373ec8",
    "original_commit_id": "01c5b75e0858ef1c4033a044d6a91d357924adc2",
    "user": {
      "login": "criccomini",
      "id": 167569,
      "node_id": "MDQ6VXNlcjE2NzU2OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/167569?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/criccomini",
      "html_url": "https://github.com/criccomini",
      "followers_url": "https://api.github.com/users/criccomini/followers",
      "following_url": "https://api.github.com/users/criccomini/following{/other_user}",
      "gists_url": "https://api.github.com/users/criccomini/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/criccomini/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/criccomini/subscriptions",
      "organizations_url": "https://api.github.com/users/criccomini/orgs",
      "repos_url": "https://api.github.com/users/criccomini/repos",
      "events_url": "https://api.github.com/users/criccomini/events{/privacy}",
      "received_events_url": "https://api.github.com/users/criccomini/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "logging.info? logging.log does exist, but appears to take different parameters.\n",
    "created_at": "2016-03-09T15:30:11Z",
    "updated_at": "2016-03-09T21:30:26Z",
    "html_url": "https://github.com/apache/airflow/pull/1139#discussion_r55535016",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1139",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/55535016"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1139#discussion_r55535016"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1139"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/55535016/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 167,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/56116815",
    "pull_request_review_id": null,
    "id": 56116815,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MTE2ODE1",
    "diff_hunk": "@@ -863,10 +871,23 @@ def _execute(self):\n         while return_code is None:\n             self.heartbeat()\n             return_code = self.process.poll()\n+        if return_code != 0:\n+            msg = (\"LocalTaskJob process exited with non zero status \"\n+                   \"{return_code}\".format(**locals()))\n+            logging.error(msg)",
    "path": "airflow/jobs.py",
    "commit_id": "e1469ee8fe0f17117ba4e37931211f2280b93ee3",
    "original_commit_id": "e67e68c7f4a0f62c9a0db78d8f136d4b7525f0ac",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Shouldn't there be a `raise AirflowExcetion(msg)` here instead?\n",
    "created_at": "2016-03-15T05:31:12Z",
    "updated_at": "2016-03-15T17:26:45Z",
    "html_url": "https://github.com/apache/airflow/pull/1122#discussion_r56116815",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1122",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/56116815"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1122#discussion_r56116815"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1122"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/56116815/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 45,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/56116884",
    "pull_request_review_id": null,
    "id": 56116884,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MTE2ODg0",
    "diff_hunk": "@@ -153,11 +158,14 @@ def run(self):\n         self.id = id_\n \n         # Run\n-        self._execute()\n+        try:\n+            self._execute()\n+            self.state = State.SUCCESS\n+        except Exception as e:\n+            self.on_failure(e)",
    "path": "airflow/jobs.py",
    "commit_id": "e1469ee8fe0f17117ba4e37931211f2280b93ee3",
    "original_commit_id": "e67e68c7f4a0f62c9a0db78d8f136d4b7525f0ac",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "`self.state = State.FAILED` should be here as well as `logging.exception(e)`\n",
    "created_at": "2016-03-15T05:32:14Z",
    "updated_at": "2016-03-15T17:26:45Z",
    "html_url": "https://github.com/apache/airflow/pull/1122#discussion_r56116884",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1122",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/56116884"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1122#discussion_r56116884"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1122"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/56116884/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 167,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 30,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/56204745",
    "pull_request_review_id": null,
    "id": 56204745,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MjA0NzQ1",
    "diff_hunk": "@@ -153,11 +158,14 @@ def run(self):\n         self.id = id_\n \n         # Run\n-        self._execute()\n+        try:\n+            self._execute()\n+            self.state = State.SUCCESS\n+        except Exception as e:\n+            self.on_failure(e)",
    "path": "airflow/jobs.py",
    "commit_id": "e1469ee8fe0f17117ba4e37931211f2280b93ee3",
    "original_commit_id": "e67e68c7f4a0f62c9a0db78d8f136d4b7525f0ac",
    "user": {
      "login": "lucafuji",
      "id": 1295785,
      "node_id": "MDQ6VXNlcjEyOTU3ODU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1295785?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lucafuji",
      "html_url": "https://github.com/lucafuji",
      "followers_url": "https://api.github.com/users/lucafuji/followers",
      "following_url": "https://api.github.com/users/lucafuji/following{/other_user}",
      "gists_url": "https://api.github.com/users/lucafuji/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lucafuji/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lucafuji/subscriptions",
      "organizations_url": "https://api.github.com/users/lucafuji/orgs",
      "repos_url": "https://api.github.com/users/lucafuji/repos",
      "events_url": "https://api.github.com/users/lucafuji/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lucafuji/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Just changed according to comments\n",
    "created_at": "2016-03-15T17:27:01Z",
    "updated_at": "2016-03-15T17:27:01Z",
    "html_url": "https://github.com/apache/airflow/pull/1122#discussion_r56204745",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1122",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/56204745"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1122#discussion_r56204745"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1122"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/56204745/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 167,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "NONE",
    "original_position": 30,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/56204758",
    "pull_request_review_id": null,
    "id": 56204758,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MjA0NzU4",
    "diff_hunk": "@@ -863,10 +871,23 @@ def _execute(self):\n         while return_code is None:\n             self.heartbeat()\n             return_code = self.process.poll()\n+        if return_code != 0:\n+            msg = (\"LocalTaskJob process exited with non zero status \"\n+                   \"{return_code}\".format(**locals()))\n+            logging.error(msg)",
    "path": "airflow/jobs.py",
    "commit_id": "e1469ee8fe0f17117ba4e37931211f2280b93ee3",
    "original_commit_id": "e67e68c7f4a0f62c9a0db78d8f136d4b7525f0ac",
    "user": {
      "login": "lucafuji",
      "id": 1295785,
      "node_id": "MDQ6VXNlcjEyOTU3ODU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1295785?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lucafuji",
      "html_url": "https://github.com/lucafuji",
      "followers_url": "https://api.github.com/users/lucafuji/followers",
      "following_url": "https://api.github.com/users/lucafuji/following{/other_user}",
      "gists_url": "https://api.github.com/users/lucafuji/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lucafuji/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lucafuji/subscriptions",
      "organizations_url": "https://api.github.com/users/lucafuji/orgs",
      "repos_url": "https://api.github.com/users/lucafuji/repos",
      "events_url": "https://api.github.com/users/lucafuji/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lucafuji/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Just changed according to comments\n",
    "created_at": "2016-03-15T17:27:05Z",
    "updated_at": "2016-03-15T17:27:05Z",
    "html_url": "https://github.com/apache/airflow/pull/1122#discussion_r56204758",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1122",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/56204758"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1122#discussion_r56204758"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1122"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/56204758/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "NONE",
    "original_position": 45,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/56520827",
    "pull_request_review_id": null,
    "id": 56520827,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NTIwODI3",
    "diff_hunk": "@@ -830,7 +830,7 @@ def are_dependencies_met(\n                 TI.task_id == task.task_id,\n                 TI.execution_date ==\n                     self.task.dag.previous_schedule(self.execution_date),\n-                TI.state == State.SUCCESS,\n+                TI.state.in_(State.SUCCESS, State.SKIPPED),",
    "path": "airflow/models.py",
    "commit_id": "2b10b8c8d5dfe8a29fe8da80d66fd1acc28d9b77",
    "original_commit_id": "2b10b8c8d5dfe8a29fe8da80d66fd1acc28d9b77",
    "user": {
      "login": "r39132",
      "id": 581734,
      "node_id": "MDQ6VXNlcjU4MTczNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/581734?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/r39132",
      "html_url": "https://github.com/r39132",
      "followers_url": "https://api.github.com/users/r39132/followers",
      "following_url": "https://api.github.com/users/r39132/following{/other_user}",
      "gists_url": "https://api.github.com/users/r39132/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/r39132/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/r39132/subscriptions",
      "organizations_url": "https://api.github.com/users/r39132/orgs",
      "repos_url": "https://api.github.com/users/r39132/repos",
      "events_url": "https://api.github.com/users/r39132/events{/privacy}",
      "received_events_url": "https://api.github.com/users/r39132/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Unfortunately, it isn't! This was my first inclination as well. I added a new example dag as part of my commit to exercise  depends_on_past=True with a branch operator that alternates taking one of 2 branches. This change alone did not help. \n",
    "created_at": "2016-03-17T15:15:43Z",
    "updated_at": "2016-03-17T15:19:44Z",
    "html_url": "https://github.com/apache/airflow/pull/1160#discussion_r56520827",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1160",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/56520827"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1160#discussion_r56520827"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1160"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/56520827/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 833,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 5,
    "position": 5,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/56737784",
    "pull_request_review_id": null,
    "id": 56737784,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NzM3Nzg0",
    "diff_hunk": "@@ -115,6 +115,12 @@ def runnable(cls):\n             None, cls.FAILED, cls.UP_FOR_RETRY, cls.UPSTREAM_FAILED,\n             cls.SKIPPED, cls.QUEUED]\n \n+    @classmethod\n+    def failed(cls):\n+        return [",
    "path": "airflow/utils.py",
    "commit_id": "e1469ee8fe0f17117ba4e37931211f2280b93ee3",
    "original_commit_id": "e1469ee8fe0f17117ba4e37931211f2280b93ee3",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "nit: would fit on one line\n",
    "created_at": "2016-03-18T23:59:41Z",
    "updated_at": "2016-03-18T23:59:41Z",
    "html_url": "https://github.com/apache/airflow/pull/1122#discussion_r56737784",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1122",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/56737784"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1122#discussion_r56737784"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1122"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/56737784/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 120,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 6,
    "position": 6,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/56737834",
    "pull_request_review_id": null,
    "id": 56737834,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NzM3ODM0",
    "diff_hunk": "@@ -115,6 +115,12 @@ def runnable(cls):\n             None, cls.FAILED, cls.UP_FOR_RETRY, cls.UPSTREAM_FAILED,\n             cls.SKIPPED, cls.QUEUED]\n \n+    @classmethod\n+    def failed(cls):",
    "path": "airflow/utils.py",
    "commit_id": "e1469ee8fe0f17117ba4e37931211f2280b93ee3",
    "original_commit_id": "e1469ee8fe0f17117ba4e37931211f2280b93ee3",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "`unsuccessful` ?\n",
    "created_at": "2016-03-19T00:00:30Z",
    "updated_at": "2016-03-19T00:00:30Z",
    "html_url": "https://github.com/apache/airflow/pull/1122#discussion_r56737834",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1122",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/56737834"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1122#discussion_r56737834"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1122"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/56737834/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 119,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 5,
    "position": 5,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/56755861",
    "pull_request_review_id": null,
    "id": 56755861,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NzU1ODYx",
    "diff_hunk": "@@ -396,25 +413,35 @@ def table_exists(self, table_name, db='default'):\n \n class HiveServer2Hook(BaseHook):\n     '''\n-    Wrapper around the pyhs2 library\n+    Wrapper around the impala library\n \n-    Note that the default authMechanism is NOSASL, to override it you\n+    Note that the default authMechanism is PLAIN, to override it you\n     can specify it in the ``extra`` of your connection in the UI as in\n-    ``{\"authMechanism\": \"PLAIN\"}``. Refer to the pyhs2 for more details.\n+    ``{\"authMechanism\": \"NOSASL\"}``. Refer to impyla for more details.\n     '''\n     def __init__(self, hiveserver2_conn_id='hiveserver2_default'):\n         self.hiveserver2_conn_id = hiveserver2_conn_id\n \n     def get_conn(self):\n         db = self.get_connection(self.hiveserver2_conn_id)\n-        auth_mechanism = db.extra_dejson.get('authMechanism', 'NOSASL')\n+        auth_mechanism = db.extra_dejson.get('authMechanism', 'PLAIN')",
    "path": "airflow/hooks/hive_hooks.py",
    "commit_id": "b385b7ca7075894d0d3a399c73c1b4d58c92cd3c",
    "original_commit_id": "cd27c939b8ee8c0ab1135b97b32994359780e930",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "That's a better default but it might bite us. @artwr , we'll have to make sure that we set the extra to NOSASL.\n",
    "created_at": "2016-03-19T22:06:37Z",
    "updated_at": "2016-03-20T09:24:47Z",
    "html_url": "https://github.com/apache/airflow/pull/1170#discussion_r56755861",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1170",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/56755861"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1170#discussion_r56755861"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1170"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/56755861/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 424,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 105,
    "position": 105,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/56755887",
    "pull_request_review_id": null,
    "id": 56755887,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NzU1ODg3",
    "diff_hunk": "@@ -55,3 +54,4 @@ bcrypt\n flask-bcrypt\n mock\n hdfs\n+impyla",
    "path": "requirements.txt",
    "commit_id": "b385b7ca7075894d0d3a399c73c1b4d58c92cd3c",
    "original_commit_id": "cd27c939b8ee8c0ab1135b97b32994359780e930",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "that's where the merge conflict is coming from, I decided to remove the `requirements.txt` as it was duplicating information with the setup.py, and was all-or-nothing which won't work for anyone.\n\nI hooked up this new utility which is pretty sweet:\nhttps://requires.io/github/airbnb/airflow/requirements/?branch=pep8\n",
    "created_at": "2016-03-19T22:10:12Z",
    "updated_at": "2016-03-20T09:24:47Z",
    "html_url": "https://github.com/apache/airflow/pull/1170#discussion_r56755887",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1170",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/56755887"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1170#discussion_r56755887"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1170"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/56755887/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 12,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/56755929",
    "pull_request_review_id": null,
    "id": 56755929,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NzU1OTI5",
    "diff_hunk": "@@ -1383,10 +1385,31 @@ def test_send_mime_dryrun(self, mock_smtp, mock_smtp_ssl):\n         assert not mock_smtp_ssl.called\n \n \n-if 'AIRFLOW_RUNALL_TESTS' in os.environ:\n+class HiveServer2Test(unittest.TestCase):",
    "path": "tests/core.py",
    "commit_id": "b385b7ca7075894d0d3a399c73c1b4d58c92cd3c",
    "original_commit_id": "cd27c939b8ee8c0ab1135b97b32994359780e930",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "We may want to run the tests based on what operators are available, so that anyone can run a subset of the suite locally, regardless of if they have Hive set up or not.\n",
    "created_at": "2016-03-19T22:15:11Z",
    "updated_at": "2016-03-20T09:24:47Z",
    "html_url": "https://github.com/apache/airflow/pull/1170#discussion_r56755929",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1170",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/56755929"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1170#discussion_r56755929"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1170"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/56755929/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 364,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/56756022",
    "pull_request_review_id": null,
    "id": 56756022,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NzU2MDIy",
    "diff_hunk": "@@ -396,25 +413,35 @@ def table_exists(self, table_name, db='default'):\n \n class HiveServer2Hook(BaseHook):\n     '''\n-    Wrapper around the pyhs2 library\n+    Wrapper around the impala library\n \n-    Note that the default authMechanism is NOSASL, to override it you\n+    Note that the default authMechanism is PLAIN, to override it you\n     can specify it in the ``extra`` of your connection in the UI as in\n-    ``{\"authMechanism\": \"PLAIN\"}``. Refer to the pyhs2 for more details.\n+    ``{\"authMechanism\": \"NOSASL\"}``. Refer to impyla for more details.\n     '''\n     def __init__(self, hiveserver2_conn_id='hiveserver2_default'):\n         self.hiveserver2_conn_id = hiveserver2_conn_id\n \n     def get_conn(self):\n         db = self.get_connection(self.hiveserver2_conn_id)\n-        auth_mechanism = db.extra_dejson.get('authMechanism', 'NOSASL')\n+        auth_mechanism = db.extra_dejson.get('authMechanism', 'PLAIN')",
    "path": "airflow/hooks/hive_hooks.py",
    "commit_id": "b385b7ca7075894d0d3a399c73c1b4d58c92cd3c",
    "original_commit_id": "cd27c939b8ee8c0ab1135b97b32994359780e930",
    "user": {
      "login": "bolkedebruin",
      "id": 4282712,
      "node_id": "MDQ6VXNlcjQyODI3MTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4282712?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bolkedebruin",
      "html_url": "https://github.com/bolkedebruin",
      "followers_url": "https://api.github.com/users/bolkedebruin/followers",
      "following_url": "https://api.github.com/users/bolkedebruin/following{/other_user}",
      "gists_url": "https://api.github.com/users/bolkedebruin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bolkedebruin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bolkedebruin/subscriptions",
      "organizations_url": "https://api.github.com/users/bolkedebruin/orgs",
      "repos_url": "https://api.github.com/users/bolkedebruin/repos",
      "events_url": "https://api.github.com/users/bolkedebruin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bolkedebruin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "The defaults of impyla differ from pyhs2: as it takes impala as a base for which NOSASL is default while for Hive in a standard setup it is PLAIN. I took hive as default. But yes you should be careful here.\n",
    "created_at": "2016-03-19T22:26:45Z",
    "updated_at": "2016-03-20T09:24:47Z",
    "html_url": "https://github.com/apache/airflow/pull/1170#discussion_r56756022",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1170",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/56756022"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1170#discussion_r56756022"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1170"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/56756022/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 424,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 105,
    "position": 105,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/56756031",
    "pull_request_review_id": null,
    "id": 56756031,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NzU2MDMx",
    "diff_hunk": "@@ -55,3 +54,4 @@ bcrypt\n flask-bcrypt\n mock\n hdfs\n+impyla",
    "path": "requirements.txt",
    "commit_id": "b385b7ca7075894d0d3a399c73c1b4d58c92cd3c",
    "original_commit_id": "cd27c939b8ee8c0ab1135b97b32994359780e930",
    "user": {
      "login": "bolkedebruin",
      "id": 4282712,
      "node_id": "MDQ6VXNlcjQyODI3MTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4282712?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bolkedebruin",
      "html_url": "https://github.com/bolkedebruin",
      "followers_url": "https://api.github.com/users/bolkedebruin/followers",
      "following_url": "https://api.github.com/users/bolkedebruin/following{/other_user}",
      "gists_url": "https://api.github.com/users/bolkedebruin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bolkedebruin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bolkedebruin/subscriptions",
      "organizations_url": "https://api.github.com/users/bolkedebruin/orgs",
      "repos_url": "https://api.github.com/users/bolkedebruin/repos",
      "events_url": "https://api.github.com/users/bolkedebruin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bolkedebruin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Looks cool indeed! But the removal was breaking travis, but you found that out ;-)\n",
    "created_at": "2016-03-19T22:27:21Z",
    "updated_at": "2016-03-20T09:24:47Z",
    "html_url": "https://github.com/apache/airflow/pull/1170#discussion_r56756031",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1170",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/56756031"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1170#discussion_r56756031"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1170"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/56756031/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 12,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/56756040",
    "pull_request_review_id": null,
    "id": 56756040,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NzU2MDQw",
    "diff_hunk": "@@ -1383,10 +1385,31 @@ def test_send_mime_dryrun(self, mock_smtp, mock_smtp_ssl):\n         assert not mock_smtp_ssl.called\n \n \n-if 'AIRFLOW_RUNALL_TESTS' in os.environ:\n+class HiveServer2Test(unittest.TestCase):",
    "path": "tests/core.py",
    "commit_id": "b385b7ca7075894d0d3a399c73c1b4d58c92cd3c",
    "original_commit_id": "cd27c939b8ee8c0ab1135b97b32994359780e930",
    "user": {
      "login": "bolkedebruin",
      "id": 4282712,
      "node_id": "MDQ6VXNlcjQyODI3MTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4282712?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bolkedebruin",
      "html_url": "https://github.com/bolkedebruin",
      "followers_url": "https://api.github.com/users/bolkedebruin/followers",
      "following_url": "https://api.github.com/users/bolkedebruin/following{/other_user}",
      "gists_url": "https://api.github.com/users/bolkedebruin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bolkedebruin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bolkedebruin/subscriptions",
      "organizations_url": "https://api.github.com/users/bolkedebruin/orgs",
      "repos_url": "https://api.github.com/users/bolkedebruin/repos",
      "events_url": "https://api.github.com/users/bolkedebruin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bolkedebruin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Good point, I will make it conditional.\n",
    "created_at": "2016-03-19T22:28:44Z",
    "updated_at": "2016-03-20T09:24:47Z",
    "html_url": "https://github.com/apache/airflow/pull/1170#discussion_r56756040",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1170",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/56756040"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1170#discussion_r56756040"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1170"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/56756040/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 364,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/56766631",
    "pull_request_review_id": null,
    "id": 56766631,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NzY2NjMx",
    "diff_hunk": "@@ -16,17 +16,19 @@ class DatastoreHook(GoogleCloudBaseHook):\n     running Airflow, you can exclude the service_account and key_path\n     parameters.\n \n-    This object is not threads safe. If you want to make multiple requests simultaniously, you will need to create\n-    a hook per thread.\n+    This object is not threads safe. If you want to make multiple requests\n+    simultaniously, you will need to create a hook per thread.\n     \"\"\"\n \n     conn_name_attr = 'datastore_conn_id'\n \n     def __init__(self,\n-                 scope=['https://www.googleapis.com/auth/datastore',\n-                        'https://www.googleapis.com/auth/userinfo.email'],\n+                 scope=None,\n                  datastore_conn_id='google_cloud_datastore_default',\n                  delegate_to=None):\n+        scope = scrope or [",
    "path": "airflow/contrib/hooks/datastore_hook.py",
    "commit_id": "83728b175a2359b1828b768ea2f5886b3e5e3463",
    "original_commit_id": "83728b175a2359b1828b768ea2f5886b3e5e3463",
    "user": {
      "login": "akira",
      "id": 43946,
      "node_id": "MDQ6VXNlcjQzOTQ2",
      "avatar_url": "https://avatars.githubusercontent.com/u/43946?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/akira",
      "html_url": "https://github.com/akira",
      "followers_url": "https://api.github.com/users/akira/followers",
      "following_url": "https://api.github.com/users/akira/following{/other_user}",
      "gists_url": "https://api.github.com/users/akira/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/akira/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/akira/subscriptions",
      "organizations_url": "https://api.github.com/users/akira/orgs",
      "repos_url": "https://api.github.com/users/akira/repos",
      "events_url": "https://api.github.com/users/akira/events{/privacy}",
      "received_events_url": "https://api.github.com/users/akira/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Is this a typo?\n",
    "created_at": "2016-03-20T15:55:38Z",
    "updated_at": "2016-03-20T15:55:38Z",
    "html_url": "https://github.com/apache/airflow/pull/1175#discussion_r56766631",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1175",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/56766631"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1175#discussion_r56766631"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1175"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/56766631/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 29,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "NONE",
    "original_position": 18,
    "position": 18,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/56766876",
    "pull_request_review_id": null,
    "id": 56766876,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NzY2ODc2",
    "diff_hunk": "@@ -16,17 +16,19 @@ class DatastoreHook(GoogleCloudBaseHook):\n     running Airflow, you can exclude the service_account and key_path\n     parameters.\n \n-    This object is not threads safe. If you want to make multiple requests simultaniously, you will need to create\n-    a hook per thread.\n+    This object is not threads safe. If you want to make multiple requests\n+    simultaniously, you will need to create a hook per thread.\n     \"\"\"\n \n     conn_name_attr = 'datastore_conn_id'\n \n     def __init__(self,\n-                 scope=['https://www.googleapis.com/auth/datastore',\n-                        'https://www.googleapis.com/auth/userinfo.email'],\n+                 scope=None,\n                  datastore_conn_id='google_cloud_datastore_default',\n                  delegate_to=None):\n+        scope = scrope or [",
    "path": "airflow/contrib/hooks/datastore_hook.py",
    "commit_id": "83728b175a2359b1828b768ea2f5886b3e5e3463",
    "original_commit_id": "83728b175a2359b1828b768ea2f5886b3e5e3463",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "good catch, I just pushed a fix on master\n",
    "created_at": "2016-03-20T16:13:40Z",
    "updated_at": "2016-03-20T16:13:40Z",
    "html_url": "https://github.com/apache/airflow/pull/1175#discussion_r56766876",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1175",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/56766876"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1175#discussion_r56766876"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1175"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/56766876/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 29,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 18,
    "position": 18,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/56941487",
    "pull_request_review_id": null,
    "id": 56941487,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2OTQxNDg3",
    "diff_hunk": "@@ -0,0 +1,52 @@\n+# Example Twitter DAG\n+\n+<p><strong>Introduction: </strong>This example dag depicts a typical ETL process and is a perfect use case automation scenario for Airflow. <i>Please note that the main scripts associated with the tasks are returning None.</i> The purpose of this DAG is to demonstrate how to write a functional DAG within Airflow.</p>",
    "path": "airflow/example_dags/example_twitter.md",
    "commit_id": "f040e865e3de94e1160d8d2c287b074c276dba62",
    "original_commit_id": "f040e865e3de94e1160d8d2c287b074c276dba62",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "I'm surprised to see raw html in markdown, strong would usually be something like `**this is bold**`\n",
    "created_at": "2016-03-22T06:17:20Z",
    "updated_at": "2016-03-22T06:17:20Z",
    "html_url": "https://github.com/apache/airflow/pull/1181#discussion_r56941487",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1181",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/56941487"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1181#discussion_r56941487"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1181"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/56941487/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 3,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 3,
    "position": 3,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/56941569",
    "pull_request_review_id": null,
    "id": 56941569,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2OTQxNTY5",
    "diff_hunk": "@@ -0,0 +1,152 @@\n+#-------------------------------------------------------------------------------------------------------------------------------------\n+# Caveat: This Dag will not run because of missing scripts.\n+#         The purpose of this is to give you a sample of a real world example DAG!\n+#-------------------------------------------------------------------------------------------------------------------------------------\n+\n+#-------------------------------------------------------------------------------------------------------------------------------------\n+# Load The Dependencies\n+#-------------------------------------------------------------------------------------------------------------------------------------\n+\n+import sys\n+reload(sys)\n+sys.setdefaultencoding(\"utf-8\")\n+import time\n+from airflow import DAG\n+from airflow.operators import BashOperator\n+from airflow.operators import HiveOperator\n+from airflow.operators import PythonOperator\n+from datetime import datetime, timedelta\n+from airflow.hooks import HiveCliHook\n+from datetime import date, timedelta\n+\n+#-------------------------------------------------------------------------------------------------------------------------------------\n+# Import Scripts for Python callable\n+#-------------------------------------------------------------------------------------------------------------------------------------\n+\n+sys.path.append(\"python_scripts/example_twitter/\")",
    "path": "airflow/example_dags/example_twitter_dag.py",
    "commit_id": "f040e865e3de94e1160d8d2c287b074c276dba62",
    "original_commit_id": "f040e865e3de94e1160d8d2c287b074c276dba62",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "it's usually pretty bad to mess with `sys.path`, use relative or absolute imports\n",
    "created_at": "2016-03-22T06:18:34Z",
    "updated_at": "2016-03-22T06:18:34Z",
    "html_url": "https://github.com/apache/airflow/pull/1181#discussion_r56941569",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1181",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/56941569"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1181#discussion_r56941569"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1181"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/56941569/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 26,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 26,
    "position": 26,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/56941585",
    "pull_request_review_id": null,
    "id": 56941585,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2OTQxNTg1",
    "diff_hunk": "@@ -0,0 +1,152 @@\n+#-------------------------------------------------------------------------------------------------------------------------------------\n+# Caveat: This Dag will not run because of missing scripts.\n+#         The purpose of this is to give you a sample of a real world example DAG!\n+#-------------------------------------------------------------------------------------------------------------------------------------\n+\n+#-------------------------------------------------------------------------------------------------------------------------------------\n+# Load The Dependencies\n+#-------------------------------------------------------------------------------------------------------------------------------------\n+\n+import sys\n+reload(sys)\n+sys.setdefaultencoding(\"utf-8\")\n+import time\n+from airflow import DAG\n+from airflow.operators import BashOperator",
    "path": "airflow/example_dags/example_twitter_dag.py",
    "commit_id": "f040e865e3de94e1160d8d2c287b074c276dba62",
    "original_commit_id": "f040e865e3de94e1160d8d2c287b074c276dba62",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "15 to 17 could be a one liner with comas\n",
    "created_at": "2016-03-22T06:18:54Z",
    "updated_at": "2016-03-22T06:18:54Z",
    "html_url": "https://github.com/apache/airflow/pull/1181#discussion_r56941585",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1181",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/56941585"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1181#discussion_r56941585"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1181"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/56941585/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 15,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 15,
    "position": 15,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/56941615",
    "pull_request_review_id": null,
    "id": 56941615,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2OTQxNjE1",
    "diff_hunk": "@@ -0,0 +1,152 @@\n+#-------------------------------------------------------------------------------------------------------------------------------------\n+# Caveat: This Dag will not run because of missing scripts.\n+#         The purpose of this is to give you a sample of a real world example DAG!\n+#-------------------------------------------------------------------------------------------------------------------------------------\n+\n+#-------------------------------------------------------------------------------------------------------------------------------------\n+# Load The Dependencies\n+#-------------------------------------------------------------------------------------------------------------------------------------\n+\n+import sys\n+reload(sys)\n+sys.setdefaultencoding(\"utf-8\")\n+import time\n+from airflow import DAG\n+from airflow.operators import BashOperator\n+from airflow.operators import HiveOperator\n+from airflow.operators import PythonOperator\n+from datetime import datetime, timedelta\n+from airflow.hooks import HiveCliHook\n+from datetime import date, timedelta\n+\n+#-------------------------------------------------------------------------------------------------------------------------------------\n+# Import Scripts for Python callable\n+#-------------------------------------------------------------------------------------------------------------------------------------\n+\n+sys.path.append(\"python_scripts/example_twitter/\")\n+\n+from twitterapi import fetchtweet\n+from cleanapi import cleantweet\n+from analyzeapi import analyzetweet\n+from brokerapi import hivetomysql_tweet\n+\n+#-------------------------------------------------------------------------------------------------------------------------------------\n+# set default arguments\n+#-------------------------------------------------------------------------------------------------------------------------------------\n+\n+default_args = {\n+    'owner': 'airflow',\n+    'depends_on_past': False,\n+    'start_date': datetime(2016, 3, 13),\n+    'email': ['airflow@airflow.com'],\n+    'email_on_failure': False,\n+    'email_on_retry': False,\n+    'retries': 1,\n+    'retry_delay': timedelta(minutes=5),\n+    # 'queue': 'bash_queue',\n+    # 'pool': 'backfill',\n+    # 'priority_weight': 10,\n+    # 'end_date': datetime(2016, 1, 1),\n+}\n+\n+dag = DAG(\n+\t'example_twitter_dag', default_args = default_args, ",
    "path": "airflow/example_dags/example_twitter_dag.py",
    "commit_id": "f040e865e3de94e1160d8d2c287b074c276dba62",
    "original_commit_id": "f040e865e3de94e1160d8d2c287b074c276dba62",
    "user": {
      "login": "mistercrunch",
      "id": 487433,
      "node_id": "MDQ6VXNlcjQ4NzQzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/487433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mistercrunch",
      "html_url": "https://github.com/mistercrunch",
      "followers_url": "https://api.github.com/users/mistercrunch/followers",
      "following_url": "https://api.github.com/users/mistercrunch/following{/other_user}",
      "gists_url": "https://api.github.com/users/mistercrunch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mistercrunch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mistercrunch/subscriptions",
      "organizations_url": "https://api.github.com/users/mistercrunch/orgs",
      "repos_url": "https://api.github.com/users/mistercrunch/repos",
      "events_url": "https://api.github.com/users/mistercrunch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mistercrunch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "I think there are tabs in here, no tabs pls.\n",
    "created_at": "2016-03-22T06:19:28Z",
    "updated_at": "2016-03-22T06:19:28Z",
    "html_url": "https://github.com/apache/airflow/pull/1181#discussion_r56941615",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1181",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/56941615"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1181#discussion_r56941615"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1181"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/56941615/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 53,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 53,
    "position": 53,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/57255971",
    "pull_request_review_id": null,
    "id": 57255971,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3MjU1OTcx",
    "diff_hunk": "@@ -495,6 +495,77 @@ def get_tabledata(self, dataset_id, table_id,\n             .execute()\n         )\n \n+    def run_table_upsert(self, dataset_id,  table_resource):\n+        \"\"\"\n+        creates a new, empty table in the dataset;\n+        If the table already exists, update the existing table.\n+        Since BigQuery does not natively allow table upserts, this is not an atomic operation.\n+        :param dataset_id: the dataset to upsert the table into.\n+        :type dataset_id: str\n+        :param table_resource: a table resource. see https://cloud.google.com/bigquery/docs/reference/v2/tables#resource\n+        :type table_resource: dict\n+        :return:\n+        \"\"\"\n+        # check to see if the table exists\n+        table_id = table_resource['tableReference']['tableId']\n+        table_exists = False\n+        tables_list_resp = self.service.tables().list(projectId=self.project_id, datasetId=dataset_id).execute()",
    "path": "airflow/contrib/hooks/bigquery_hook.py",
    "commit_id": "aa890bb857da004adde0d226945e3111b14c5e48",
    "original_commit_id": "4af352592cd23fc6404702de79d0fcae79708ffc",
    "user": {
      "login": "criccomini",
      "id": 167569,
      "node_id": "MDQ6VXNlcjE2NzU2OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/167569?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/criccomini",
      "html_url": "https://github.com/criccomini",
      "followers_url": "https://api.github.com/users/criccomini/followers",
      "following_url": "https://api.github.com/users/criccomini/following{/other_user}",
      "gists_url": "https://api.github.com/users/criccomini/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/criccomini/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/criccomini/subscriptions",
      "organizations_url": "https://api.github.com/users/criccomini/orgs",
      "repos_url": "https://api.github.com/users/criccomini/repos",
      "events_url": "https://api.github.com/users/criccomini/events{/privacy}",
      "received_events_url": "https://api.github.com/users/criccomini/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Wonder if project_id should be a param, and default to self.project_id? Reason I ask is that I wonder if this has similar problems to the other job APIs, where you might want to insert a table in shared dataset on a project that you don't have view access to. In such a case, it would be impossible to use this. What you'd want to say is use the hook for project-a, but insert the table on project-b.\n",
    "created_at": "2016-03-23T23:44:28Z",
    "updated_at": "2016-03-25T19:13:44Z",
    "html_url": "https://github.com/apache/airflow/pull/1205#discussion_r57255971",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1205",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/57255971"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1205#discussion_r57255971"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1205"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/57255971/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 18,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/57256030",
    "pull_request_review_id": null,
    "id": 57256030,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3MjU2MDMw",
    "diff_hunk": "@@ -495,6 +495,77 @@ def get_tabledata(self, dataset_id, table_id,\n             .execute()\n         )\n \n+    def run_table_upsert(self, dataset_id,  table_resource):\n+        \"\"\"\n+        creates a new, empty table in the dataset;\n+        If the table already exists, update the existing table.\n+        Since BigQuery does not natively allow table upserts, this is not an atomic operation.\n+        :param dataset_id: the dataset to upsert the table into.\n+        :type dataset_id: str\n+        :param table_resource: a table resource. see https://cloud.google.com/bigquery/docs/reference/v2/tables#resource\n+        :type table_resource: dict\n+        :return:\n+        \"\"\"\n+        # check to see if the table exists\n+        table_id = table_resource['tableReference']['tableId']\n+        table_exists = False\n+        tables_list_resp = self.service.tables().list(projectId=self.project_id, datasetId=dataset_id).execute()\n+        for table in tables_list_resp['tables']:\n+            if table['tableReference']['tableId'] == table_id:\n+                table_exists = True\n+                break\n+\n+        # do update if table exists\n+        if table_exists:",
    "path": "airflow/contrib/hooks/bigquery_hook.py",
    "commit_id": "aa890bb857da004adde0d226945e3111b14c5e48",
    "original_commit_id": "4af352592cd23fc6404702de79d0fcae79708ffc",
    "user": {
      "login": "criccomini",
      "id": 167569,
      "node_id": "MDQ6VXNlcjE2NzU2OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/167569?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/criccomini",
      "html_url": "https://github.com/criccomini",
      "followers_url": "https://api.github.com/users/criccomini/followers",
      "following_url": "https://api.github.com/users/criccomini/following{/other_user}",
      "gists_url": "https://api.github.com/users/criccomini/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/criccomini/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/criccomini/subscriptions",
      "organizations_url": "https://api.github.com/users/criccomini/orgs",
      "repos_url": "https://api.github.com/users/criccomini/repos",
      "events_url": "https://api.github.com/users/criccomini/events{/privacy}",
      "received_events_url": "https://api.github.com/users/criccomini/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Nit: some logging here would be nice.\n",
    "created_at": "2016-03-23T23:45:15Z",
    "updated_at": "2016-03-25T19:13:44Z",
    "html_url": "https://github.com/apache/airflow/pull/1205#discussion_r57256030",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1205",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/57256030"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1205#discussion_r57256030"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1205"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/57256030/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 25,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/57256116",
    "pull_request_review_id": null,
    "id": 57256116,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3MjU2MTE2",
    "diff_hunk": "@@ -495,6 +495,77 @@ def get_tabledata(self, dataset_id, table_id,\n             .execute()\n         )\n \n+    def run_table_upsert(self, dataset_id,  table_resource):\n+        \"\"\"\n+        creates a new, empty table in the dataset;\n+        If the table already exists, update the existing table.\n+        Since BigQuery does not natively allow table upserts, this is not an atomic operation.\n+        :param dataset_id: the dataset to upsert the table into.\n+        :type dataset_id: str\n+        :param table_resource: a table resource. see https://cloud.google.com/bigquery/docs/reference/v2/tables#resource\n+        :type table_resource: dict\n+        :return:\n+        \"\"\"\n+        # check to see if the table exists\n+        table_id = table_resource['tableReference']['tableId']\n+        table_exists = False\n+        tables_list_resp = self.service.tables().list(projectId=self.project_id, datasetId=dataset_id).execute()\n+        for table in tables_list_resp['tables']:\n+            if table['tableReference']['tableId'] == table_id:\n+                table_exists = True\n+                break\n+\n+        # do update if table exists\n+        if table_exists:\n+            return self.service.tables().update(projectId=self.project_id,\n+                                                datasetId=dataset_id,\n+                                                tableId=table_id,\n+                                                body=table_resource).execute()\n+        # do insert if table does not exist\n+        else:\n+            return self.service.tables().insert(projectId=self.project_id,\n+                                                dataset_id=dataset_id,\n+                                                body=table_resource).execute()\n+\n+    def run_grant_dataset_view_access(self,\n+                                      source_project,\n+                                      source_dataset,\n+                                      view_project,\n+                                      view_dataset,\n+                                      view_table):\n+        \"\"\"\n+        Grant view access to a view of a given dataset.",
    "path": "airflow/contrib/hooks/bigquery_hook.py",
    "commit_id": "aa890bb857da004adde0d226945e3111b14c5e48",
    "original_commit_id": "4af352592cd23fc6404702de79d0fcae79708ffc",
    "user": {
      "login": "criccomini",
      "id": 167569,
      "node_id": "MDQ6VXNlcjE2NzU2OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/167569?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/criccomini",
      "html_url": "https://github.com/criccomini",
      "followers_url": "https://api.github.com/users/criccomini/followers",
      "following_url": "https://api.github.com/users/criccomini/following{/other_user}",
      "gists_url": "https://api.github.com/users/criccomini/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/criccomini/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/criccomini/subscriptions",
      "organizations_url": "https://api.github.com/users/criccomini/orgs",
      "repos_url": "https://api.github.com/users/criccomini/repos",
      "events_url": "https://api.github.com/users/criccomini/events{/privacy}",
      "received_events_url": "https://api.github.com/users/criccomini/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Nit: I think the technical nomenclature is 'authorized view' access.\n",
    "created_at": "2016-03-23T23:46:16Z",
    "updated_at": "2016-03-25T19:13:44Z",
    "html_url": "https://github.com/apache/airflow/pull/1205#discussion_r57256116",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1205",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/57256116"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1205#discussion_r57256116"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1205"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/57256116/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 43,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/57313837",
    "pull_request_review_id": null,
    "id": 57313837,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3MzEzODM3",
    "diff_hunk": "@@ -0,0 +1,52 @@\n+# Example Twitter DAG\n+\n+<p><strong>Introduction: </strong>This example dag depicts a typical ETL process and is a perfect use case automation scenario for Airflow. <i>Please note that the main scripts associated with the tasks are returning None.</i> The purpose of this DAG is to demonstrate how to write a functional DAG within Airflow.</p>\n+\n+<p><strong>Background:</strong> Twitter is a social networking platform that enables users to send or broadcast short messages (140 Characters). A user has a user ID, i.e. JohnDoe, which is also known as a Twitter Handle. A short message, or tweet, can either be sent directed at another user using the @ symbol (i.e. @JohnDoe) or can be broadcast with a hashtag # followed by the topic name. <i>As most of the data on twitter is public, and twitter provides a generous API to retrieve these data, Twitter is the so called Gold Mine for Text Mining based data analytic.</i> This example DAG was driven out of our real use case, where we have used the SEARCH API from twitter to retrieve tweets from yesterday. The DAG is scheduled to run each day, and therefore works in an ETL fashion.</p>\n+\n+\n+<p><strong>Overview:</strong> At first, we need tasks that will get the tweets of our interest and save them on the hard-disk. Then, we need subsequent tasks that will clean and analyze the tweets. Then we want to store these files into HDFS, and load them into a Data Warehousing platform like Hive or HBase. The main reason we have selected Hive here is because it gives us a familiar SQL like interface, and makes our life of writing different queries a lot easier. Finally, the DAG needs to store a summarized result to a traditional database, i.e. MySQL or PostgreSQL, which is used by a reporting or business intelligence application. In other words, we basically want to achieve the following steps:</p>\n+\n+1. Fetch Tweets\n+2. Clean Tweets \n+3. Analyze Tweets \n+4. Put Tweets to HDFS \n+5. Load data to Hive \n+6. Save Summary to MySQL \n+\n+<p><strong>Screenshot:</strong></p>\n+<img src=\"http://i.imgur.com/rRpSO12.png\" width=\"99%\"/>\n+\n+<p><strong>Example Structure:</strong> <u>In this example dag, we are collecting tweets for four users account or twitter handle. Each twitter handle has two channels, incoming tweets and outgoing tweets. Hence, in this example, by running the fetch_tweet task, we should have eight output files.</u> For better management, each of the eight output files should be saved with the yesterday's date (we are collecting tweets from yesterday), i.e. toTwitter_A_2016-03-21.csv. We are using three kind of operators: PythonOperator, BashOperator, and HiveOperator. However, for this example only the Python scripts are stored externally. Hence this example DAG only has the following directory structure: </p>\n+\n+```\n+example_dags\n+\u2502   example_twitter.md\n+\u2502   example_twitter_dag.py.txt    \n+\u2502\n+\u2514\u2500\u2500\u2500python_scripts\n+    \u2502\n+    \u251c\u2500\u2500\u2500example_twitter\n+    \u2502   \u2502   __init__.py\n+    \u2502   \u2502   analyzeapi.py\n+    \u2502   \u2502   brokerapi.py\n+\t\u2502   \u2502   cleanapi.py\n+\t\u2502   \u2502   twitterapi.py\n+```\n+\n+<p>The python scripts here are just placeholders, ensuring the DAG loads and doesn't break the start up process of Airflow server. In case you are interested to actually make this DAG fully functional, first start with filling out the scripts in chronological order. My approach was to store the retrieved data in memory using Pandas dataframe first, and then use the built in method to save the CSV file on hard-disk.</p>\n+<p>The eight different CSV files are then put into eight different folders within HDFS. Each of the newly inserted files are then loaded into eight different external hive tables. Hive tables can be external or internal. In this case, we are inserting the data right into the table, and so we are making our tables internal. Each file is inserted into the respected Hive table named after the twitter channel, i.e. toTwitter_A or fromTwitter_A. It is also important to note that when we created the tables, we facilitated for partitioning by date using the variable dt and declared comma as the row deliminator. The partitioning is very handy and ensures our query execution time remains constant even with growing volume of data.</p>\n+<p>As most probably these folders and hive tables doesn't exist in your system, you will get an error for these tasks within the DAG. If you rebuild a function DAG from this example, make sure those folders and hive tables exists. When you create the table, keep the consideration of table partitioning and declaring comma as the row deliminator in your mind. Furthermore, you may also need to skip headers on each read and ensure that the user under which you have Airflow running has the right permission access. Below is a sample HQL snippet on creating such table:</p>\n+```\n+CREATE TABLE toTwitter_A(id BIGINT, id_str STRING<br/>",
    "path": "airflow/example_dags/example_twitter.md",
    "commit_id": "f040e865e3de94e1160d8d2c287b074c276dba62",
    "original_commit_id": "f040e865e3de94e1160d8d2c287b074c276dba62",
    "user": {
      "login": "underyx",
      "id": 1060436,
      "node_id": "MDQ6VXNlcjEwNjA0MzY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1060436?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/underyx",
      "html_url": "https://github.com/underyx",
      "followers_url": "https://api.github.com/users/underyx/followers",
      "following_url": "https://api.github.com/users/underyx/following{/other_user}",
      "gists_url": "https://api.github.com/users/underyx/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/underyx/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/underyx/subscriptions",
      "organizations_url": "https://api.github.com/users/underyx/orgs",
      "repos_url": "https://api.github.com/users/underyx/repos",
      "events_url": "https://api.github.com/users/underyx/events{/privacy}",
      "received_events_url": "https://api.github.com/users/underyx/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "I think that `<br/>` should probably not be present in this code block.\n",
    "created_at": "2016-03-24T13:13:26Z",
    "updated_at": "2016-03-24T13:13:26Z",
    "html_url": "https://github.com/apache/airflow/pull/1181#discussion_r57313837",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1181",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/57313837"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1181#discussion_r57313837"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1181"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/57313837/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 41,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 41,
    "position": 41,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/57639056",
    "pull_request_review_id": null,
    "id": 57639056,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3NjM5MDU2",
    "diff_hunk": "@@ -33,9 +33,14 @@\n from sqlalchemy import Column, Integer, String, DateTime, func, Index, or_\n from sqlalchemy.orm.session import make_transient\n \n-from airflow import executors, models, settings, utils\n+from airflow import executors, models, settings\n from airflow import configuration as conf\n-from airflow.utils import AirflowException, State, LoggingMixin\n+from airflow.exceptions import AirflowException\n+from airflow.utils.state import State\n+from airflow.utils.db import provide_session, pessimistic_connection_handling",
    "path": "airflow/jobs.py",
    "commit_id": "773f52feb9f0dcd29161dc7ec41d5ddc7f69f445",
    "original_commit_id": "773f52feb9f0dcd29161dc7ec41d5ddc7f69f445",
    "user": {
      "login": "aoen",
      "id": 1592778,
      "node_id": "MDQ6VXNlcjE1OTI3Nzg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1592778?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aoen",
      "html_url": "https://github.com/aoen",
      "followers_url": "https://api.github.com/users/aoen/followers",
      "following_url": "https://api.github.com/users/aoen/following{/other_user}",
      "gists_url": "https://api.github.com/users/aoen/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aoen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aoen/subscriptions",
      "organizations_url": "https://api.github.com/users/aoen/orgs",
      "repos_url": "https://api.github.com/users/aoen/repos",
      "events_url": "https://api.github.com/users/aoen/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aoen/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Nit(feel free to ignore): ideally alphasort the depdendencies in all lines like this\n",
    "created_at": "2016-03-28T21:44:16Z",
    "updated_at": "2016-03-28T21:44:16Z",
    "html_url": "https://github.com/apache/airflow/pull/1219#discussion_r57639056",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1219",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/57639056"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1219#discussion_r57639056"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1219"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/57639056/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 40,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 10,
    "position": 10,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/57639619",
    "pull_request_review_id": null,
    "id": 57639619,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3NjM5NjE5",
    "diff_hunk": "@@ -33,9 +33,14 @@\n from sqlalchemy import Column, Integer, String, DateTime, func, Index, or_\n from sqlalchemy.orm.session import make_transient\n \n-from airflow import executors, models, settings, utils\n+from airflow import executors, models, settings\n from airflow import configuration as conf\n-from airflow.utils import AirflowException, State, LoggingMixin\n+from airflow.exceptions import AirflowException\n+from airflow.utils.state import State\n+from airflow.utils.db import provide_session, pessimistic_connection_handling",
    "path": "airflow/jobs.py",
    "commit_id": "773f52feb9f0dcd29161dc7ec41d5ddc7f69f445",
    "original_commit_id": "773f52feb9f0dcd29161dc7ec41d5ddc7f69f445",
    "user": {
      "login": "artwr",
      "id": 1518713,
      "node_id": "MDQ6VXNlcjE1MTg3MTM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1518713?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/artwr",
      "html_url": "https://github.com/artwr",
      "followers_url": "https://api.github.com/users/artwr/followers",
      "following_url": "https://api.github.com/users/artwr/following{/other_user}",
      "gists_url": "https://api.github.com/users/artwr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/artwr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/artwr/subscriptions",
      "organizations_url": "https://api.github.com/users/artwr/orgs",
      "repos_url": "https://api.github.com/users/artwr/repos",
      "events_url": "https://api.github.com/users/artwr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/artwr/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "I will make sure I do in a following PR. At this point, I would rather merge while it works, because rebasing on that scale is a little bit of a PITA.\n",
    "created_at": "2016-03-28T21:48:30Z",
    "updated_at": "2016-03-28T21:48:30Z",
    "html_url": "https://github.com/apache/airflow/pull/1219#discussion_r57639619",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1219",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/57639619"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1219#discussion_r57639619"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1219"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/57639619/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 40,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 10,
    "position": 10,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/57641788",
    "pull_request_review_id": null,
    "id": 57641788,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3NjQxNzg4",
    "diff_hunk": "@@ -1,6 +1,6 @@\n from airflow.models import BaseOperator\n-from airflow.utils import send_email\n-from airflow.utils import apply_defaults\n+from airflow.utils.email import send_email\n+from airflow.utils.decorators import apply_defaults",
    "path": "airflow/operators/email_operator.py",
    "commit_id": "773f52feb9f0dcd29161dc7ec41d5ddc7f69f445",
    "original_commit_id": "773f52feb9f0dcd29161dc7ec41d5ddc7f69f445",
    "user": {
      "login": "aoen",
      "id": 1592778,
      "node_id": "MDQ6VXNlcjE1OTI3Nzg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1592778?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aoen",
      "html_url": "https://github.com/aoen",
      "followers_url": "https://api.github.com/users/aoen/followers",
      "following_url": "https://api.github.com/users/aoen/following{/other_user}",
      "gists_url": "https://api.github.com/users/aoen/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aoen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aoen/subscriptions",
      "organizations_url": "https://api.github.com/users/aoen/orgs",
      "repos_url": "https://api.github.com/users/aoen/repos",
      "events_url": "https://api.github.com/users/aoen/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aoen/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Nit: alphasort (and some of the other imports are out of order too)\n",
    "created_at": "2016-03-28T22:05:01Z",
    "updated_at": "2016-03-28T22:05:20Z",
    "html_url": "https://github.com/apache/airflow/pull/1219#discussion_r57641788",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1219",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/57641788"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1219#discussion_r57641788"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1219"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/57641788/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 3,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 5,
    "position": 5,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/57643752",
    "pull_request_review_id": null,
    "id": 57643752,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3NjQzNzUy",
    "diff_hunk": "@@ -0,0 +1,35 @@\n+# -*- coding: utf-8 -*-\n+#\n+# Licensed under the Apache License, Version 2.0 (the \"License\");\n+# you may not use this file except in compliance with the License.\n+# You may obtain a copy of the License at\n+#\n+# http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing, software\n+# distributed under the License is distributed on an \"AS IS\" BASIS,\n+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+# See the License for the specific language governing permissions and\n+# limitations under the License.\n+#\n+from __future__ import absolute_import\n+\n+import warnings\n+\n+from .decorators import apply_defaults as _apply_defaults",
    "path": "airflow/utils/__init__.py",
    "commit_id": "773f52feb9f0dcd29161dc7ec41d5ddc7f69f445",
    "original_commit_id": "773f52feb9f0dcd29161dc7ec41d5ddc7f69f445",
    "user": {
      "login": "aoen",
      "id": 1592778,
      "node_id": "MDQ6VXNlcjE1OTI3Nzg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1592778?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aoen",
      "html_url": "https://github.com/aoen",
      "followers_url": "https://api.github.com/users/aoen/followers",
      "following_url": "https://api.github.com/users/aoen/following{/other_user}",
      "gists_url": "https://api.github.com/users/aoen/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aoen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aoen/subscriptions",
      "organizations_url": "https://api.github.com/users/aoen/orgs",
      "repos_url": "https://api.github.com/users/aoen/repos",
      "events_url": "https://api.github.com/users/aoen/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aoen/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Consider avoiding relative imports: https://mail.python.org/pipermail/python-dev/2013-July/127401.html\n",
    "created_at": "2016-03-28T22:22:29Z",
    "updated_at": "2016-03-28T22:22:29Z",
    "html_url": "https://github.com/apache/airflow/pull/1219#discussion_r57643752",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1219",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/57643752"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1219#discussion_r57643752"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1219"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/57643752/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 19,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 19,
    "position": 19,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/57658610",
    "pull_request_review_id": null,
    "id": 57658610,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3NjU4NjEw",
    "diff_hunk": "@@ -0,0 +1,35 @@\n+# -*- coding: utf-8 -*-\n+#\n+# Licensed under the Apache License, Version 2.0 (the \"License\");\n+# you may not use this file except in compliance with the License.\n+# You may obtain a copy of the License at\n+#\n+# http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing, software\n+# distributed under the License is distributed on an \"AS IS\" BASIS,\n+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+# See the License for the specific language governing permissions and\n+# limitations under the License.\n+#\n+from __future__ import absolute_import\n+\n+import warnings\n+\n+from .decorators import apply_defaults as _apply_defaults",
    "path": "airflow/utils/__init__.py",
    "commit_id": "773f52feb9f0dcd29161dc7ec41d5ddc7f69f445",
    "original_commit_id": "773f52feb9f0dcd29161dc7ec41d5ddc7f69f445",
    "user": {
      "login": "artwr",
      "id": 1518713,
      "node_id": "MDQ6VXNlcjE1MTg3MTM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1518713?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/artwr",
      "html_url": "https://github.com/artwr",
      "followers_url": "https://api.github.com/users/artwr/followers",
      "following_url": "https://api.github.com/users/artwr/following{/other_user}",
      "gists_url": "https://api.github.com/users/artwr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/artwr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/artwr/subscriptions",
      "organizations_url": "https://api.github.com/users/artwr/orgs",
      "repos_url": "https://api.github.com/users/artwr/repos",
      "events_url": "https://api.github.com/users/artwr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/artwr/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "@aeon : I see your Python mailing list, and I raise you a [PEP](https://www.python.org/dev/peps/pep-0328/). If the BDFL says it is ok, it's fine by me. Here, I want to make sure I import from the decorators file and not any other package that might name clash.\n",
    "created_at": "2016-03-29T00:51:15Z",
    "updated_at": "2016-03-29T00:51:15Z",
    "html_url": "https://github.com/apache/airflow/pull/1219#discussion_r57658610",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1219",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/57658610"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1219#discussion_r57658610"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1219"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/57658610/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 19,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 19,
    "position": 19,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/58501697",
    "pull_request_review_id": null,
    "id": 58501697,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4NTAxNjk3",
    "diff_hunk": "@@ -42,7 +42,7 @@\n DEFAULT_DATE_ISO = DEFAULT_DATE.isoformat()\n DEFAULT_DATE_DS = DEFAULT_DATE_ISO[:10]\n TEST_DAG_ID = 'unit_tests'\n-configuration.test_mode()\n+",
    "path": "tests/core.py",
    "commit_id": "b2844af020cb5a470bd83ead09ddb121923084ca",
    "original_commit_id": "f036abc747fec415c7d219dd93a8368b514b4568",
    "user": {
      "login": "bolkedebruin",
      "id": 4282712,
      "node_id": "MDQ6VXNlcjQyODI3MTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4282712?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bolkedebruin",
      "html_url": "https://github.com/bolkedebruin",
      "followers_url": "https://api.github.com/users/bolkedebruin/followers",
      "following_url": "https://api.github.com/users/bolkedebruin/following{/other_user}",
      "gists_url": "https://api.github.com/users/bolkedebruin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bolkedebruin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bolkedebruin/subscriptions",
      "organizations_url": "https://api.github.com/users/bolkedebruin/orgs",
      "repos_url": "https://api.github.com/users/bolkedebruin/repos",
      "events_url": "https://api.github.com/users/bolkedebruin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bolkedebruin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "configuration.test_mode() is used through out core.py. Should these all be replaced?\n",
    "created_at": "2016-04-05T08:10:36Z",
    "updated_at": "2016-04-05T18:51:35Z",
    "html_url": "https://github.com/apache/airflow/pull/1290#discussion_r58501697",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1290",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/58501697"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1290#discussion_r58501697"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1290"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/58501697/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 46,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 5,
    "position": 5,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/58519687",
    "pull_request_review_id": null,
    "id": 58519687,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4NTE5Njg3",
    "diff_hunk": "@@ -122,6 +122,7 @@ def run(self):\n         'flask-cache>=0.13.1, <0.14',\n         'flask-login==0.2.11',\n         'future>=0.15.0, <0.16',\n+        'funcsigs>=0.4, <1'",
    "path": "setup.py",
    "commit_id": "5d959f695c7b0f4dd1477ede2bccf1cbfb0b9f55",
    "original_commit_id": "5d959f695c7b0f4dd1477ede2bccf1cbfb0b9f55",
    "user": {
      "login": "bolkedebruin",
      "id": 4282712,
      "node_id": "MDQ6VXNlcjQyODI3MTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4282712?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bolkedebruin",
      "html_url": "https://github.com/bolkedebruin",
      "followers_url": "https://api.github.com/users/bolkedebruin/followers",
      "following_url": "https://api.github.com/users/bolkedebruin/following{/other_user}",
      "gists_url": "https://api.github.com/users/bolkedebruin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bolkedebruin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bolkedebruin/subscriptions",
      "organizations_url": "https://api.github.com/users/bolkedebruin/orgs",
      "repos_url": "https://api.github.com/users/bolkedebruin/repos",
      "events_url": "https://api.github.com/users/bolkedebruin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bolkedebruin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "This missed a \",\" @jlowin \n",
    "created_at": "2016-04-05T11:05:46Z",
    "updated_at": "2016-04-05T11:05:46Z",
    "html_url": "https://github.com/apache/airflow/pull/1285#discussion_r58519687",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1285",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/58519687"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1285#discussion_r58519687"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1285"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/58519687/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 125,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 4,
    "position": 4,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/58527902",
    "pull_request_review_id": null,
    "id": 58527902,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4NTI3OTAy",
    "diff_hunk": "@@ -122,6 +122,7 @@ def run(self):\n         'flask-cache>=0.13.1, <0.14',\n         'flask-login==0.2.11',\n         'future>=0.15.0, <0.16',\n+        'funcsigs>=0.4, <1'",
    "path": "setup.py",
    "commit_id": "5d959f695c7b0f4dd1477ede2bccf1cbfb0b9f55",
    "original_commit_id": "5d959f695c7b0f4dd1477ede2bccf1cbfb0b9f55",
    "user": {
      "login": "jlowin",
      "id": 153965,
      "node_id": "MDQ6VXNlcjE1Mzk2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/153965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jlowin",
      "html_url": "https://github.com/jlowin",
      "followers_url": "https://api.github.com/users/jlowin/followers",
      "following_url": "https://api.github.com/users/jlowin/following{/other_user}",
      "gists_url": "https://api.github.com/users/jlowin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jlowin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jlowin/subscriptions",
      "organizations_url": "https://api.github.com/users/jlowin/orgs",
      "repos_url": "https://api.github.com/users/jlowin/repos",
      "events_url": "https://api.github.com/users/jlowin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jlowin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "`setup.py` is my kryptonite... Fixed in 6581858703211bad60793f4b278871edb842fd46\n",
    "created_at": "2016-04-05T12:22:31Z",
    "updated_at": "2016-04-05T12:22:32Z",
    "html_url": "https://github.com/apache/airflow/pull/1285#discussion_r58527902",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1285",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/58527902"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1285#discussion_r58527902"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1285"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/58527902/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 125,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 4,
    "position": 4,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/58532210",
    "pull_request_review_id": null,
    "id": 58532210,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4NTMyMjEw",
    "diff_hunk": "@@ -42,7 +42,7 @@\n DEFAULT_DATE_ISO = DEFAULT_DATE.isoformat()\n DEFAULT_DATE_DS = DEFAULT_DATE_ISO[:10]\n TEST_DAG_ID = 'unit_tests'\n-configuration.test_mode()\n+",
    "path": "tests/core.py",
    "commit_id": "b2844af020cb5a470bd83ead09ddb121923084ca",
    "original_commit_id": "f036abc747fec415c7d219dd93a8368b514b4568",
    "user": {
      "login": "jlowin",
      "id": 153965,
      "node_id": "MDQ6VXNlcjE1Mzk2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/153965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jlowin",
      "html_url": "https://github.com/jlowin",
      "followers_url": "https://api.github.com/users/jlowin/followers",
      "following_url": "https://api.github.com/users/jlowin/following{/other_user}",
      "gists_url": "https://api.github.com/users/jlowin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jlowin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jlowin/subscriptions",
      "organizations_url": "https://api.github.com/users/jlowin/orgs",
      "repos_url": "https://api.github.com/users/jlowin/repos",
      "events_url": "https://api.github.com/users/jlowin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jlowin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "@bolkedebruin I deleted this one because it was already called on line 22 of `tests/core.py` -- but to be completely honest, I'm not sure if `configuration.test_mode()` actually does anything?\n\nThis is the entire function:\n\n``` python\n\ndef test_mode():\n    conf = ConfigParserWithDefaults(defaults)\n    conf.read(TEST_CONFIG)\n```\n\nIt creates a new `conf` object with the test parameters, but doesn't return it or overwrite the existing one. And it doesn't change values that were already read-in at the module level (like `DAGS_FOLDER` at the top of `models.py`)\n",
    "created_at": "2016-04-05T12:55:03Z",
    "updated_at": "2016-04-05T18:51:35Z",
    "html_url": "https://github.com/apache/airflow/pull/1290#discussion_r58532210",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1290",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/58532210"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1290#discussion_r58532210"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1290"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/58532210/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 46,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 5,
    "position": 5,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/58693699",
    "pull_request_review_id": null,
    "id": 58693699,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4NjkzNjk5",
    "diff_hunk": "@@ -244,3 +268,67 @@ def test_depends_on_past(self):\n             ignore_first_depends_on_past=True)\n         ti.refresh_from_db()\n         self.assertEqual(ti.state, State.SUCCESS)\n+\n+    @parameterized.expand([\n+        #",
    "path": "tests/models.py",
    "commit_id": "81b93d378f34bad6b70fb2686839982a08dba091",
    "original_commit_id": "6a56b4957b7045b3db9a3f4c4f9043e107f1cc02",
    "user": {
      "login": "jlowin",
      "id": 153965,
      "node_id": "MDQ6VXNlcjE1Mzk2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/153965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jlowin",
      "html_url": "https://github.com/jlowin",
      "followers_url": "https://api.github.com/users/jlowin/followers",
      "following_url": "https://api.github.com/users/jlowin/following{/other_user}",
      "gists_url": "https://api.github.com/users/jlowin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jlowin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jlowin/subscriptions",
      "organizations_url": "https://api.github.com/users/jlowin/orgs",
      "repos_url": "https://api.github.com/users/jlowin/repos",
      "events_url": "https://api.github.com/users/jlowin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jlowin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Could you add a header comment here listing all the fields, maybe abbreviated? I know they're in the function signature but at first glance it's hard to tell which of the numbers (`5, 0, 0, 0, 0, 0`) goes with which field. A header would help.\n",
    "created_at": "2016-04-06T12:12:57Z",
    "updated_at": "2016-04-06T16:19:19Z",
    "html_url": "https://github.com/apache/airflow/pull/1292#discussion_r58693699",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1292",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/58693699"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1292#discussion_r58693699"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1292"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/58693699/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 279,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 61,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/58693759",
    "pull_request_review_id": null,
    "id": 58693759,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4NjkzNzU5",
    "diff_hunk": "@@ -31,7 +31,7 @@\n from airflow.models import DAG\n from flask_admin import BaseView\n from importlib import import_module\n-from airflow.exceptions import AirflowException\n+from airflow.exceptions import AirflowException, AirflowSkipException",
    "path": "airflow/__init__.py",
    "commit_id": "81b93d378f34bad6b70fb2686839982a08dba091",
    "original_commit_id": "6a56b4957b7045b3db9a3f4c4f9043e107f1cc02",
    "user": {
      "login": "jlowin",
      "id": 153965,
      "node_id": "MDQ6VXNlcjE1Mzk2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/153965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jlowin",
      "html_url": "https://github.com/jlowin",
      "followers_url": "https://api.github.com/users/jlowin/followers",
      "following_url": "https://api.github.com/users/jlowin/following{/other_user}",
      "gists_url": "https://api.github.com/users/jlowin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jlowin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jlowin/subscriptions",
      "organizations_url": "https://api.github.com/users/jlowin/orgs",
      "repos_url": "https://api.github.com/users/jlowin/repos",
      "events_url": "https://api.github.com/users/jlowin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jlowin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "I don't think we need to import this at the root level because it's scope is relatively narrow.\n",
    "created_at": "2016-04-06T12:13:35Z",
    "updated_at": "2016-04-06T16:19:19Z",
    "html_url": "https://github.com/apache/airflow/pull/1292#discussion_r58693759",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1292",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/58693759"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1292#discussion_r58693759"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1292"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/58693759/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 5,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/59008207",
    "pull_request_review_id": null,
    "id": 59008207,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5MDA4MjA3",
    "diff_hunk": "@@ -0,0 +1,52 @@\n+# Example Twitter DAG\n+\n+<p><strong>Introduction: </strong>This example dag depicts a typical ETL process and is a perfect use case automation scenario for Airflow. <i>Please note that the main scripts associated with the tasks are returning None.</i> The purpose of this DAG is to demonstrate how to write a functional DAG within Airflow.</p>\n+\n+<p><strong>Background:</strong> Twitter is a social networking platform that enables users to send or broadcast short messages (140 Characters). A user has a user ID, i.e. JohnDoe, which is also known as a Twitter Handle. A short message, or tweet, can either be sent directed at another user using the @ symbol (i.e. @JohnDoe) or can be broadcast with a hashtag # followed by the topic name. <i>As most of the data on twitter is public, and twitter provides a generous API to retrieve these data, Twitter is the so called Gold Mine for Text Mining based data analytic.</i> This example DAG was driven out of our real use case, where we have used the SEARCH API from twitter to retrieve tweets from yesterday. The DAG is scheduled to run each day, and therefore works in an ETL fashion.</p>\n+\n+\n+<p><strong>Overview:</strong> At first, we need tasks that will get the tweets of our interest and save them on the hard-disk. Then, we need subsequent tasks that will clean and analyze the tweets. Then we want to store these files into HDFS, and load them into a Data Warehousing platform like Hive or HBase. The main reason we have selected Hive here is because it gives us a familiar SQL like interface, and makes our life of writing different queries a lot easier. Finally, the DAG needs to store a summarized result to a traditional database, i.e. MySQL or PostgreSQL, which is used by a reporting or business intelligence application. In other words, we basically want to achieve the following steps:</p>\n+\n+1. Fetch Tweets\n+2. Clean Tweets \n+3. Analyze Tweets \n+4. Put Tweets to HDFS \n+5. Load data to Hive \n+6. Save Summary to MySQL \n+\n+<p><strong>Screenshot:</strong></p>\n+<img src=\"http://i.imgur.com/rRpSO12.png\" width=\"99%\"/>\n+\n+<p><strong>Example Structure:</strong> <u>In this example dag, we are collecting tweets for four users account or twitter handle. Each twitter handle has two channels, incoming tweets and outgoing tweets. Hence, in this example, by running the fetch_tweet task, we should have eight output files.</u> For better management, each of the eight output files should be saved with the yesterday's date (we are collecting tweets from yesterday), i.e. toTwitter_A_2016-03-21.csv. We are using three kind of operators: PythonOperator, BashOperator, and HiveOperator. However, for this example only the Python scripts are stored externally. Hence this example DAG only has the following directory structure: </p>\n+\n+```\n+example_dags\n+\u2502   example_twitter.md\n+\u2502   example_twitter_dag.py.txt    \n+\u2502\n+\u2514\u2500\u2500\u2500python_scripts\n+    \u2502\n+    \u251c\u2500\u2500\u2500example_twitter\n+    \u2502   \u2502   __init__.py\n+    \u2502   \u2502   analyzeapi.py\n+    \u2502   \u2502   brokerapi.py\n+\t\u2502   \u2502   cleanapi.py\n+\t\u2502   \u2502   twitterapi.py\n+```\n+\n+<p>The python scripts here are just placeholders, ensuring the DAG loads and doesn't break the start up process of Airflow server. In case you are interested to actually make this DAG fully functional, first start with filling out the scripts in chronological order. My approach was to store the retrieved data in memory using Pandas dataframe first, and then use the built in method to save the CSV file on hard-disk.</p>\n+<p>The eight different CSV files are then put into eight different folders within HDFS. Each of the newly inserted files are then loaded into eight different external hive tables. Hive tables can be external or internal. In this case, we are inserting the data right into the table, and so we are making our tables internal. Each file is inserted into the respected Hive table named after the twitter channel, i.e. toTwitter_A or fromTwitter_A. It is also important to note that when we created the tables, we facilitated for partitioning by date using the variable dt and declared comma as the row deliminator. The partitioning is very handy and ensures our query execution time remains constant even with growing volume of data.</p>\n+<p>As most probably these folders and hive tables doesn't exist in your system, you will get an error for these tasks within the DAG. If you rebuild a function DAG from this example, make sure those folders and hive tables exists. When you create the table, keep the consideration of table partitioning and declaring comma as the row deliminator in your mind. Furthermore, you may also need to skip headers on each read and ensure that the user under which you have Airflow running has the right permission access. Below is a sample HQL snippet on creating such table:</p>\n+```\n+CREATE TABLE toTwitter_A(id BIGINT, id_str STRING<br/>",
    "path": "airflow/example_dags/example_twitter.md",
    "commit_id": "f040e865e3de94e1160d8d2c287b074c276dba62",
    "original_commit_id": "f040e865e3de94e1160d8d2c287b074c276dba62",
    "user": {
      "login": "ekhtiar",
      "id": 4267081,
      "node_id": "MDQ6VXNlcjQyNjcwODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4267081?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ekhtiar",
      "html_url": "https://github.com/ekhtiar",
      "followers_url": "https://api.github.com/users/ekhtiar/followers",
      "following_url": "https://api.github.com/users/ekhtiar/following{/other_user}",
      "gists_url": "https://api.github.com/users/ekhtiar/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ekhtiar/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ekhtiar/subscriptions",
      "organizations_url": "https://api.github.com/users/ekhtiar/orgs",
      "repos_url": "https://api.github.com/users/ekhtiar/repos",
      "events_url": "https://api.github.com/users/ekhtiar/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ekhtiar/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Thank you for pointing our the <br/>\n",
    "created_at": "2016-04-08T10:46:22Z",
    "updated_at": "2016-04-08T10:46:22Z",
    "html_url": "https://github.com/apache/airflow/pull/1181#discussion_r59008207",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1181",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/59008207"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1181#discussion_r59008207"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1181"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/59008207/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 41,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 41,
    "position": 41,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/59011394",
    "pull_request_review_id": null,
    "id": 59011394,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5MDExMzk0",
    "diff_hunk": "@@ -0,0 +1,174 @@\n+# -*- coding: utf-8 -*-\n+#\n+# Licensed under the Apache License, Version 2.0 (the \"License\");\n+# you may not use this file except in compliance with the License.\n+# You may obtain a copy of the License at\n+#\n+# http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing, software\n+# distributed under the License is distributed on an \"AS IS\" BASIS,\n+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+# See the License for the specific language governing permissions and\n+# limitations under the License.\n+# ----------------------------------------------------------------------------------------------------------------------\n+# Written By: Ekhtiar Syed\n+# Last Update: 8th April 2016\n+# Caveat: This Dag will not run because of missing scripts.\n+# The purpose of this is to give you a sample of a real world example DAG!\n+# ----------------------------------------------------------------------------------------------------------------------\n+\n+# ----------------------------------------------------------------------------------------------------------------------\n+# Load The Dependencies\n+# ----------------------------------------------------------------------------------------------------------------------\n+\n+import sys\n+\n+reload(sys)",
    "path": "airflow/example_dags/example_twitter_dag.py",
    "commit_id": "dbfe828d547faf9ff03e524f5bc89f2ad6e77773",
    "original_commit_id": "c58ca6a28e956a6096842abf90e7b2b353489cd3",
    "user": {
      "login": "bolkedebruin",
      "id": 4282712,
      "node_id": "MDQ6VXNlcjQyODI3MTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4282712?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bolkedebruin",
      "html_url": "https://github.com/bolkedebruin",
      "followers_url": "https://api.github.com/users/bolkedebruin/followers",
      "following_url": "https://api.github.com/users/bolkedebruin/following{/other_user}",
      "gists_url": "https://api.github.com/users/bolkedebruin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bolkedebruin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bolkedebruin/subscriptions",
      "organizations_url": "https://api.github.com/users/bolkedebruin/orgs",
      "repos_url": "https://api.github.com/users/bolkedebruin/repos",
      "events_url": "https://api.github.com/users/bolkedebruin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bolkedebruin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Why are you doing this?\n",
    "created_at": "2016-04-08T11:24:05Z",
    "updated_at": "2016-04-09T13:23:14Z",
    "html_url": "https://github.com/apache/airflow/pull/1331#discussion_r59011394",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1331",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/59011394"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1331#discussion_r59011394"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1331"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/59011394/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 27,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/59041028",
    "pull_request_review_id": null,
    "id": 59041028,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5MDQxMDI4",
    "diff_hunk": "@@ -0,0 +1,24 @@\n+{% extends \"airflow/task_instance.html\" %}\n+{% block title %}Airflow - DAGs{% endblock %}\n+\n+{% block body %}\n+    {{ super() }}\n+    <h4>{{ title }}</h4>\n+    <div>\n+\n+        <h5>Variables</h5>",
    "path": "airflow/www/templates/airflow/xcom.html",
    "commit_id": "5e28807b2b20f87cc211d4faa8070083cc9db2f7",
    "original_commit_id": "c386e2d8f431c31d55da3f0411733b4a6667a022",
    "user": {
      "login": "r39132",
      "id": 581734,
      "node_id": "MDQ6VXNlcjU4MTczNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/581734?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/r39132",
      "html_url": "https://github.com/r39132",
      "followers_url": "https://api.github.com/users/r39132/followers",
      "following_url": "https://api.github.com/users/r39132/following{/other_user}",
      "gists_url": "https://api.github.com/users/r39132/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/r39132/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/r39132/subscriptions",
      "organizations_url": "https://api.github.com/users/r39132/orgs",
      "repos_url": "https://api.github.com/users/r39132/repos",
      "events_url": "https://api.github.com/users/r39132/events{/privacy}",
      "received_events_url": "https://api.github.com/users/r39132/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "You may not need the \"Variables\" subheading here - does it add anything?\n\n\"Variables\" may also refer to Airflow Variables -- Airflow Variables is a bit of an unfortunate name.\n",
    "created_at": "2016-04-08T15:18:18Z",
    "updated_at": "2016-04-14T17:15:48Z",
    "html_url": "https://github.com/apache/airflow/pull/1328#discussion_r59041028",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1328",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/59041028"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1328#discussion_r59041028"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1328"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/59041028/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 9,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/59076578",
    "pull_request_review_id": null,
    "id": 59076578,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5MDc2NTc4",
    "diff_hunk": "@@ -0,0 +1,24 @@\n+{% extends \"airflow/task_instance.html\" %}\n+{% block title %}Airflow - DAGs{% endblock %}\n+\n+{% block body %}\n+    {{ super() }}\n+    <h4>{{ title }}</h4>\n+    <div>\n+\n+        <h5>Variables</h5>",
    "path": "airflow/www/templates/airflow/xcom.html",
    "commit_id": "5e28807b2b20f87cc211d4faa8070083cc9db2f7",
    "original_commit_id": "c386e2d8f431c31d55da3f0411733b4a6667a022",
    "user": {
      "login": "jlowin",
      "id": 153965,
      "node_id": "MDQ6VXNlcjE1Mzk2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/153965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jlowin",
      "html_url": "https://github.com/jlowin",
      "followers_url": "https://api.github.com/users/jlowin/followers",
      "following_url": "https://api.github.com/users/jlowin/following{/other_user}",
      "gists_url": "https://api.github.com/users/jlowin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jlowin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jlowin/subscriptions",
      "organizations_url": "https://api.github.com/users/jlowin/orgs",
      "repos_url": "https://api.github.com/users/jlowin/repos",
      "events_url": "https://api.github.com/users/jlowin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jlowin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Good point... Airflow Variables are sort of like global XComs.\n",
    "created_at": "2016-04-08T19:24:10Z",
    "updated_at": "2016-04-14T17:15:48Z",
    "html_url": "https://github.com/apache/airflow/pull/1328#discussion_r59076578",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1328",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/59076578"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1328#discussion_r59076578"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1328"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/59076578/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 9,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/59236870",
    "pull_request_review_id": null,
    "id": 59236870,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5MjM2ODcw",
    "diff_hunk": "@@ -93,6 +93,9 @@ def run_command(command):\n         'sql_alchemy_pool_recycle': 3600,\n         'dagbag_import_timeout': 30,\n     },\n+    'operators': {\n+        'default_owner': 'Airflow'",
    "path": "airflow/configuration.py",
    "commit_id": "9b6c84df13be33e36b07adf7a528a57cc80e045f",
    "original_commit_id": "fd36e562ccfa43d085263c3e549bb8f6479bcea6",
    "user": {
      "login": "criccomini",
      "id": 167569,
      "node_id": "MDQ6VXNlcjE2NzU2OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/167569?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/criccomini",
      "html_url": "https://github.com/criccomini",
      "followers_url": "https://api.github.com/users/criccomini/followers",
      "following_url": "https://api.github.com/users/criccomini/following{/other_user}",
      "gists_url": "https://api.github.com/users/criccomini/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/criccomini/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/criccomini/subscriptions",
      "organizations_url": "https://api.github.com/users/criccomini/orgs",
      "repos_url": "https://api.github.com/users/criccomini/repos",
      "events_url": "https://api.github.com/users/criccomini/events{/privacy}",
      "received_events_url": "https://api.github.com/users/criccomini/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Since this is supposed to be a unix-y thing, perhaps `airflow` instead of `Airflow`?\n",
    "created_at": "2016-04-11T16:36:07Z",
    "updated_at": "2016-04-12T18:28:37Z",
    "html_url": "https://github.com/apache/airflow/pull/1318#discussion_r59236870",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1318",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/59236870"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1318#discussion_r59236870"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1318"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/59236870/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 5,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/59237184",
    "pull_request_review_id": null,
    "id": 59237184,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5MjM3MTg0",
    "diff_hunk": "@@ -3057,8 +3190,8 @@ def delete(cls, xcoms, session=None):\n             xcoms = [xcoms]\n         for xcom in xcoms:\n             if not isinstance(xcom, XCom):\n-                raise TypeError(\n-                    'Expected XCom; received {}'.format(type(xcom)))\n+                raise TypeError('Expected XCom; received {}'.format(\n+                    xcom.__class__.__name__))",
    "path": "airflow/models.py",
    "commit_id": "9b6c84df13be33e36b07adf7a528a57cc80e045f",
    "original_commit_id": "fd36e562ccfa43d085263c3e549bb8f6479bcea6",
    "user": {
      "login": "criccomini",
      "id": 167569,
      "node_id": "MDQ6VXNlcjE2NzU2OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/167569?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/criccomini",
      "html_url": "https://github.com/criccomini",
      "followers_url": "https://api.github.com/users/criccomini/followers",
      "following_url": "https://api.github.com/users/criccomini/following{/other_user}",
      "gists_url": "https://api.github.com/users/criccomini/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/criccomini/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/criccomini/subscriptions",
      "organizations_url": "https://api.github.com/users/criccomini/orgs",
      "repos_url": "https://api.github.com/users/criccomini/repos",
      "events_url": "https://api.github.com/users/criccomini/events{/privacy}",
      "received_events_url": "https://api.github.com/users/criccomini/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Nit: PEP8 enforces alignment like this, I think:\n\n```\n            raise TypeError('Expected XCom; received {}'.format(\n                            xcom.__class__.__name__))\n```\n",
    "created_at": "2016-04-11T16:38:10Z",
    "updated_at": "2016-04-12T18:28:37Z",
    "html_url": "https://github.com/apache/airflow/pull/1318#discussion_r59237184",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1318",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/59237184"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1318#discussion_r59237184"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1318"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/59237184/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 255,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/59237310",
    "pull_request_review_id": null,
    "id": 59237310,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5MjM3MzEw",
    "diff_hunk": "@@ -1,49 +0,0 @@\n-# -*- coding: utf-8 -*-",
    "path": "tests/dags/test_raise_executor_error.py",
    "commit_id": "9b6c84df13be33e36b07adf7a528a57cc80e045f",
    "original_commit_id": "fd36e562ccfa43d085263c3e549bb8f6479bcea6",
    "user": {
      "login": "criccomini",
      "id": 167569,
      "node_id": "MDQ6VXNlcjE2NzU2OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/167569?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/criccomini",
      "html_url": "https://github.com/criccomini",
      "followers_url": "https://api.github.com/users/criccomini/followers",
      "following_url": "https://api.github.com/users/criccomini/following{/other_user}",
      "gists_url": "https://api.github.com/users/criccomini/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/criccomini/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/criccomini/subscriptions",
      "organizations_url": "https://api.github.com/users/criccomini/orgs",
      "repos_url": "https://api.github.com/users/criccomini/repos",
      "events_url": "https://api.github.com/users/criccomini/events{/privacy}",
      "received_events_url": "https://api.github.com/users/criccomini/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Why is this deleted?\n",
    "created_at": "2016-04-11T16:38:57Z",
    "updated_at": "2016-04-12T18:28:37Z",
    "html_url": "https://github.com/apache/airflow/pull/1318#discussion_r59237310",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1318",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/59237310"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1318#discussion_r59237310"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1318"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/59237310/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 1,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 1,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/59275592",
    "pull_request_review_id": null,
    "id": 59275592,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5Mjc1NTky",
    "diff_hunk": "@@ -12,6 +12,13 @@\n from airflow.models import Connection\n from airflow.exceptions import AirflowException\n \n+import airflow.configuration as conf\n+\n+import json\n+import requests\n+\n+base_url = \"http://localhost:8080/api/v1/\"",
    "path": "airflow/hooks/base_hook.py",
    "commit_id": "d19f79ec0753869cc096f17d6f1c2891e5ffbac1",
    "original_commit_id": "33773be75b1a52eeea2f3d69824e0791d35f8694",
    "user": {
      "login": "r39132",
      "id": 581734,
      "node_id": "MDQ6VXNlcjU4MTczNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/581734?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/r39132",
      "html_url": "https://github.com/r39132",
      "followers_url": "https://api.github.com/users/r39132/followers",
      "following_url": "https://api.github.com/users/r39132/following{/other_user}",
      "gists_url": "https://api.github.com/users/r39132/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/r39132/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/r39132/subscriptions",
      "organizations_url": "https://api.github.com/users/r39132/orgs",
      "repos_url": "https://api.github.com/users/r39132/repos",
      "events_url": "https://api.github.com/users/r39132/events{/privacy}",
      "received_events_url": "https://api.github.com/users/r39132/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Shouldn't the port come from conf?\n",
    "created_at": "2016-04-11T20:30:26Z",
    "updated_at": "2016-04-12T14:23:48Z",
    "html_url": "https://github.com/apache/airflow/pull/1340#discussion_r59275592",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1340",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/59275592"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1340#discussion_r59275592"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1340"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/59275592/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 20,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 9,
    "position": 9,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/59283376",
    "pull_request_review_id": null,
    "id": 59283376,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5MjgzMzc2",
    "diff_hunk": "@@ -607,6 +615,11 @@ class CLIFactory(object):\n             (\"--stdout\", ), \"Redirect stdout to this file\"),\n         'log_file': Arg(\n             (\"-l\", \"--log-file\"), \"Location of the log file\"),\n+        'yes': Arg(\n+            (\"-y\", \"--yes\"),\n+            \"Do not prompt to confirm. Use with care!\",\n+            \"store_true\",",
    "path": "airflow/bin/cli.py",
    "commit_id": "9a584ee8f777e0b0d3633e3de770de2f11fb1ae8",
    "original_commit_id": "9a584ee8f777e0b0d3633e3de770de2f11fb1ae8",
    "user": {
      "login": "r39132",
      "id": 581734,
      "node_id": "MDQ6VXNlcjU4MTczNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/581734?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/r39132",
      "html_url": "https://github.com/r39132",
      "followers_url": "https://api.github.com/users/r39132/followers",
      "following_url": "https://api.github.com/users/r39132/following{/other_user}",
      "gists_url": "https://api.github.com/users/r39132/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/r39132/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/r39132/subscriptions",
      "organizations_url": "https://api.github.com/users/r39132/orgs",
      "repos_url": "https://api.github.com/users/r39132/repos",
      "events_url": "https://api.github.com/users/r39132/events{/privacy}",
      "received_events_url": "https://api.github.com/users/r39132/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "What does store_true mean?\n",
    "created_at": "2016-04-11T21:18:11Z",
    "updated_at": "2016-04-11T21:18:11Z",
    "html_url": "https://github.com/apache/airflow/pull/1344#discussion_r59283376",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1344",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/59283376"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1344#discussion_r59283376"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1344"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/59283376/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 621,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 31,
    "position": 31,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/59283894",
    "pull_request_review_id": null,
    "id": 59283894,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5MjgzODk0",
    "diff_hunk": "@@ -607,6 +615,11 @@ class CLIFactory(object):\n             (\"--stdout\", ), \"Redirect stdout to this file\"),\n         'log_file': Arg(\n             (\"-l\", \"--log-file\"), \"Location of the log file\"),\n+        'yes': Arg(\n+            (\"-y\", \"--yes\"),\n+            \"Do not prompt to confirm. Use with care!\",\n+            \"store_true\",",
    "path": "airflow/bin/cli.py",
    "commit_id": "9a584ee8f777e0b0d3633e3de770de2f11fb1ae8",
    "original_commit_id": "9a584ee8f777e0b0d3633e3de770de2f11fb1ae8",
    "user": {
      "login": "artwr",
      "id": 1518713,
      "node_id": "MDQ6VXNlcjE1MTg3MTM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1518713?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/artwr",
      "html_url": "https://github.com/artwr",
      "followers_url": "https://api.github.com/users/artwr/followers",
      "following_url": "https://api.github.com/users/artwr/following{/other_user}",
      "gists_url": "https://api.github.com/users/artwr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/artwr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/artwr/subscriptions",
      "organizations_url": "https://api.github.com/users/artwr/orgs",
      "repos_url": "https://api.github.com/users/artwr/repos",
      "events_url": "https://api.github.com/users/artwr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/artwr/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "it means that you do not need to specify a value after the flag, the presence of the CLI flag will set the associated value to `True`\n",
    "created_at": "2016-04-11T21:21:54Z",
    "updated_at": "2016-04-11T21:21:54Z",
    "html_url": "https://github.com/apache/airflow/pull/1344#discussion_r59283894",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1344",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/59283894"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1344#discussion_r59283894"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1344"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/59283894/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 621,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 31,
    "position": 31,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/59284046",
    "pull_request_review_id": null,
    "id": 59284046,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5Mjg0MDQ2",
    "diff_hunk": "@@ -2805,6 +2805,32 @@ def cli(self):\n         args = parser.parse_args()\n         args.func(args, self)\n \n+    @provide_session\n+    def delete(self, confirm_prompt=True, session=None):\n+        \"\"\"\n+        Deletes the DAG and all related information from the database\n+        \"\"\"\n+        if confirm_prompt:",
    "path": "airflow/models.py",
    "commit_id": "9a584ee8f777e0b0d3633e3de770de2f11fb1ae8",
    "original_commit_id": "9a584ee8f777e0b0d3633e3de770de2f11fb1ae8",
    "user": {
      "login": "bolkedebruin",
      "id": 4282712,
      "node_id": "MDQ6VXNlcjQyODI3MTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4282712?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bolkedebruin",
      "html_url": "https://github.com/bolkedebruin",
      "followers_url": "https://api.github.com/users/bolkedebruin/followers",
      "following_url": "https://api.github.com/users/bolkedebruin/following{/other_user}",
      "gists_url": "https://api.github.com/users/bolkedebruin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bolkedebruin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bolkedebruin/subscriptions",
      "organizations_url": "https://api.github.com/users/bolkedebruin/orgs",
      "repos_url": "https://api.github.com/users/bolkedebruin/repos",
      "events_url": "https://api.github.com/users/bolkedebruin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bolkedebruin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "I think this is a really weird place for a confirmation prompt\n",
    "created_at": "2016-04-11T21:22:45Z",
    "updated_at": "2016-04-11T21:22:45Z",
    "html_url": "https://github.com/apache/airflow/pull/1344#discussion_r59284046",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1344",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/59284046"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1344#discussion_r59284046"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1344"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/59284046/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 2813,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 9,
    "position": 9,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/59287144",
    "pull_request_review_id": null,
    "id": 59287144,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5Mjg3MTQ0",
    "diff_hunk": "@@ -2805,6 +2805,32 @@ def cli(self):\n         args = parser.parse_args()\n         args.func(args, self)\n \n+    @provide_session\n+    def delete(self, confirm_prompt=True, session=None):\n+        \"\"\"\n+        Deletes the DAG and all related information from the database\n+        \"\"\"\n+        if confirm_prompt:\n+            question = (\n+                'This will completely delete DAG {} and all associated '\n+                'tasks/data from the database, but it will NOT delete the file '\n+                'that defines the DAG. Are you sure you want to '\n+                'proceed? (y/n)'.format(self.dag_id))\n+            if not utils.helpers.ask_yesno(question):\n+                print('Delete canceled.')\n+                return\n+\n+        from airflow.jobs import BaseJob\n+        session.query(XCom).filter(XCom.dag_id == self.dag_id).delete()\n+        session.query(SlaMiss).filter(SlaMiss.dag_id == self.dag_id).delete()\n+        session.query(TaskInstance).filter(\n+            TaskInstance.dag_id == self.dag_id).delete()\n+        session.query(Log).filter(Log.dag_id == self.dag_id).delete()\n+        session.query(BaseJob).filter(BaseJob.dag_id == self.dag_id).delete()\n+        session.query(DagRun).filter(DagRun.dag_id == self.dag_id).delete()\n+        session.query(DagModel).filter(DagModel.dag_id == self.dag_id).delete()\n+        session.commit()\n+",
    "path": "airflow/models.py",
    "commit_id": "9a584ee8f777e0b0d3633e3de770de2f11fb1ae8",
    "original_commit_id": "9a584ee8f777e0b0d3633e3de770de2f11fb1ae8",
    "user": {
      "login": "r39132",
      "id": 581734,
      "node_id": "MDQ6VXNlcjU4MTczNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/581734?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/r39132",
      "html_url": "https://github.com/r39132",
      "followers_url": "https://api.github.com/users/r39132/followers",
      "following_url": "https://api.github.com/users/r39132/following{/other_user}",
      "gists_url": "https://api.github.com/users/r39132/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/r39132/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/r39132/subscriptions",
      "organizations_url": "https://api.github.com/users/r39132/orgs",
      "repos_url": "https://api.github.com/users/r39132/repos",
      "events_url": "https://api.github.com/users/r39132/events{/privacy}",
      "received_events_url": "https://api.github.com/users/r39132/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "We also need to move the files so that they don't keep getting reimported\n",
    "created_at": "2016-04-11T21:44:32Z",
    "updated_at": "2016-04-11T21:44:32Z",
    "html_url": "https://github.com/apache/airflow/pull/1344#discussion_r59287144",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1344",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/59287144"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1344#discussion_r59287144"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1344"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/59287144/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 2833,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 29,
    "position": 29,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/59292857",
    "pull_request_review_id": null,
    "id": 59292857,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5MjkyODU3",
    "diff_hunk": "@@ -607,6 +615,11 @@ class CLIFactory(object):\n             (\"--stdout\", ), \"Redirect stdout to this file\"),\n         'log_file': Arg(\n             (\"-l\", \"--log-file\"), \"Location of the log file\"),\n+        'yes': Arg(\n+            (\"-y\", \"--yes\"),\n+            \"Do not prompt to confirm. Use with care!\",\n+            \"store_true\",",
    "path": "airflow/bin/cli.py",
    "commit_id": "9a584ee8f777e0b0d3633e3de770de2f11fb1ae8",
    "original_commit_id": "9a584ee8f777e0b0d3633e3de770de2f11fb1ae8",
    "user": {
      "login": "r39132",
      "id": 581734,
      "node_id": "MDQ6VXNlcjU4MTczNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/581734?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/r39132",
      "html_url": "https://github.com/r39132",
      "followers_url": "https://api.github.com/users/r39132/followers",
      "following_url": "https://api.github.com/users/r39132/following{/other_user}",
      "gists_url": "https://api.github.com/users/r39132/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/r39132/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/r39132/subscriptions",
      "organizations_url": "https://api.github.com/users/r39132/orgs",
      "repos_url": "https://api.github.com/users/r39132/repos",
      "events_url": "https://api.github.com/users/r39132/events{/privacy}",
      "received_events_url": "https://api.github.com/users/r39132/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Thx @artwr \n",
    "created_at": "2016-04-11T22:28:56Z",
    "updated_at": "2016-04-11T22:28:56Z",
    "html_url": "https://github.com/apache/airflow/pull/1344#discussion_r59292857",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1344",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/59292857"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1344#discussion_r59292857"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1344"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/59292857/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 621,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 31,
    "position": 31,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/59384982",
    "pull_request_review_id": null,
    "id": 59384982,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5Mzg0OTgy",
    "diff_hunk": "@@ -12,6 +12,13 @@\n from airflow.models import Connection\n from airflow.exceptions import AirflowException\n \n+import airflow.configuration as conf\n+\n+import json\n+import requests\n+\n+base_url = \"http://localhost:8080/api/v1/\"",
    "path": "airflow/hooks/base_hook.py",
    "commit_id": "d19f79ec0753869cc096f17d6f1c2891e5ffbac1",
    "original_commit_id": "33773be75b1a52eeea2f3d69824e0791d35f8694",
    "user": {
      "login": "bolkedebruin",
      "id": 4282712,
      "node_id": "MDQ6VXNlcjQyODI3MTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4282712?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bolkedebruin",
      "html_url": "https://github.com/bolkedebruin",
      "followers_url": "https://api.github.com/users/bolkedebruin/followers",
      "following_url": "https://api.github.com/users/bolkedebruin/following{/other_user}",
      "gists_url": "https://api.github.com/users/bolkedebruin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bolkedebruin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bolkedebruin/subscriptions",
      "organizations_url": "https://api.github.com/users/bolkedebruin/orgs",
      "repos_url": "https://api.github.com/users/bolkedebruin/repos",
      "events_url": "https://api.github.com/users/bolkedebruin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bolkedebruin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "@r39132 sure, this really is experimental, ie. trying out new stuff quick 'n dirty. Nothing you want to merge, but maybe make spinoffs in separate PRs (as with the ZIP functionality)\n",
    "created_at": "2016-04-12T14:25:50Z",
    "updated_at": "2016-04-12T14:25:50Z",
    "html_url": "https://github.com/apache/airflow/pull/1340#discussion_r59384982",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1340",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/59384982"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1340#discussion_r59384982"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1340"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/59384982/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 20,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 9,
    "position": 9,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/59479350",
    "pull_request_review_id": null,
    "id": 59479350,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5NDc5MzUw",
    "diff_hunk": "@@ -2804,9 +2805,8 @@ def has_task(self, task_id):\n         return task_id in (t.task_id for t in self.tasks)\n \n     def get_task(self, task_id):\n-        for task in self.tasks:\n-            if task.task_id == task_id:\n-                return task\n+        if task_id in self.task_map:",
    "path": "airflow/models.py",
    "commit_id": "be0b8ae2ae9c72158da2e3ae3fd42d0752296e52",
    "original_commit_id": "be0b8ae2ae9c72158da2e3ae3fd42d0752296e52",
    "user": {
      "login": "r39132",
      "id": 581734,
      "node_id": "MDQ6VXNlcjU4MTczNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/581734?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/r39132",
      "html_url": "https://github.com/r39132",
      "followers_url": "https://api.github.com/users/r39132/followers",
      "following_url": "https://api.github.com/users/r39132/following{/other_user}",
      "gists_url": "https://api.github.com/users/r39132/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/r39132/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/r39132/subscriptions",
      "organizations_url": "https://api.github.com/users/r39132/orgs",
      "repos_url": "https://api.github.com/users/r39132/repos",
      "events_url": "https://api.github.com/users/r39132/events{/privacy}",
      "received_events_url": "https://api.github.com/users/r39132/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Looks good but is task_map pythonic? I'd expect this in the Java world. Maybe task_dict?\n",
    "created_at": "2016-04-13T00:59:55Z",
    "updated_at": "2016-04-13T00:59:55Z",
    "html_url": "https://github.com/apache/airflow/pull/1367#discussion_r59479350",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1367",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/59479350"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1367#discussion_r59479350"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1367"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/59479350/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 2808,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 15,
    "position": 15,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/59543995",
    "pull_request_review_id": null,
    "id": 59543995,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5NTQzOTk1",
    "diff_hunk": "@@ -198,53 +200,93 @@ def get_dag(self, dag_id):\n \n     def process_file(self, filepath, only_if_updated=True, safe_mode=True):\n         \"\"\"\n-        Given a path to a python module, this method imports the module and\n-        look for dag objects within it.\n+        Given a path to a python module or zip file, this method imports\n+        the module and look for dag objects within it.\n         \"\"\"\n         found_dags = []\n+\n+        # todo: raise exception?\n+        if not os.path.isfile(filepath):\n+            return found_dags\n+\n         try:\n             # This failed before in what may have been a git sync\n             # race condition\n             dttm = datetime.fromtimestamp(os.path.getmtime(filepath))\n-            mod_name, file_ext = os.path.splitext(os.path.split(filepath)[-1])\n-            mod_name = 'unusual_prefix_' + mod_name\n+            if only_if_updated \\\n+                    and filepath in self.file_last_changed \\\n+                    and dttm == self.file_last_changed[filepath]:\n+                return found_dags\n+\n         except Exception as e:\n             logging.exception(e)\n             return found_dags\n \n-        if safe_mode and os.path.isfile(filepath):\n-            # Skip file if no obvious references to airflow or DAG are found.\n-            with open(filepath, 'rb') as f:\n-                content = f.read()\n-                if not all([s in content for s in (b'DAG', b'airflow')]):\n-                    return found_dags\n+        mods = []\n+        if not zipfile.is_zipfile(filepath):\n+            if safe_mode and os.path.isfile(filepath):\n+                with open(filepath, 'rb') as f:\n+                    content = f.read()\n+                    if not all([s in content for s in (b'DAG', b'airflow')]):\n+                        return found_dags\n \n-        if (not only_if_updated or\n-                filepath not in self.file_last_changed or\n-                dttm != self.file_last_changed[filepath]):\n-            try:\n-                self.logger.debug(\"Importing \" + filepath)\n-                if mod_name in sys.modules:\n-                    del sys.modules[mod_name]\n-                with timeout(\n-                        configuration.getint('core', \"DAGBAG_IMPORT_TIMEOUT\")):\n+            self.logger.debug(\"Importing {}\".format(filepath))\n+            org_mod_name, file_ext = os.path.splitext(os.path.split(filepath)[-1])\n+            mod_name = 'unusual_prefix_' + org_mod_name\n+\n+            if mod_name in sys.modules:\n+                del sys.modules[mod_name]\n+\n+            with timeout(configuration.getint('core', \"DAGBAG_IMPORT_TIMEOUT\")):\n+                try:\n                     m = imp.load_source(mod_name, filepath)\n-            except Exception as e:\n-                self.logger.exception(\"Failed to import: \" + filepath)\n-                self.import_errors[filepath] = str(e)\n-                self.file_last_changed[filepath] = dttm\n-                return\n+                    mods.append(m)\n+                except Exception as e:\n+                    self.logger.exception(\"Failed to import: \" + filepath)\n+                    self.import_errors[filepath] = str(e)\n+                    self.file_last_changed[filepath] = dttm\n+\n+        else:\n+            zip_file = zipfile.ZipFile(filepath)\n+            for mod in zip_file.infolist():\n+                head, tail = os.path.split(mod.filename)\n+                mod_name, ext = os.path.splitext(mod.filename)\n+                if not head and (ext == '.py' or ext == '.pyc'):\n+                    if mod_name == '__init__':\n+                        self.logger.warning(\"Found __init_.py at root of \".format(filepath))",
    "path": "airflow/models.py",
    "commit_id": "b07dab2953efa1bf849eef5bae1ea90dd2de5f76",
    "original_commit_id": "2c3f5fa519ea6df2c0868c2883f7671196089ecc",
    "user": {
      "login": "jlowin",
      "id": 153965,
      "node_id": "MDQ6VXNlcjE1Mzk2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/153965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jlowin",
      "html_url": "https://github.com/jlowin",
      "followers_url": "https://api.github.com/users/jlowin/followers",
      "following_url": "https://api.github.com/users/jlowin/following{/other_user}",
      "gists_url": "https://api.github.com/users/jlowin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jlowin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jlowin/subscriptions",
      "organizations_url": "https://api.github.com/users/jlowin/orgs",
      "repos_url": "https://api.github.com/users/jlowin/repos",
      "events_url": "https://api.github.com/users/jlowin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jlowin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "`\"Found __init__.py at root of {}\"` (add one underscore and curly braces)\n",
    "created_at": "2016-04-13T13:09:08Z",
    "updated_at": "2016-04-14T07:03:25Z",
    "html_url": "https://github.com/apache/airflow/pull/1352#discussion_r59543995",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1352",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/59543995"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1352#discussion_r59543995"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1352"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/59543995/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 90,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/59563859",
    "pull_request_review_id": null,
    "id": 59563859,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5NTYzODU5",
    "diff_hunk": "@@ -411,6 +411,32 @@ which are used to populate the run schedule with task instances from this dag.\n     # start your backfill on a date range\n     airflow backfill tutorial -s 2015-06-01 -e 2015-06-07\n \n+Packaging dags\n+''''''''''''''\n+While often you will specify dags in a single ``.py`` file it might sometimes",
    "path": "docs/tutorial.rst",
    "commit_id": "b07dab2953efa1bf849eef5bae1ea90dd2de5f76",
    "original_commit_id": "9f9e1c700071a4f7eba8bbadad679264581e7649",
    "user": {
      "login": "criccomini",
      "id": 167569,
      "node_id": "MDQ6VXNlcjE2NzU2OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/167569?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/criccomini",
      "html_url": "https://github.com/criccomini",
      "followers_url": "https://api.github.com/users/criccomini/followers",
      "following_url": "https://api.github.com/users/criccomini/following{/other_user}",
      "gists_url": "https://api.github.com/users/criccomini/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/criccomini/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/criccomini/subscriptions",
      "organizations_url": "https://api.github.com/users/criccomini/orgs",
      "repos_url": "https://api.github.com/users/criccomini/repos",
      "events_url": "https://api.github.com/users/criccomini/events{/privacy}",
      "received_events_url": "https://api.github.com/users/criccomini/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Could you add some docs about how to install dependencies into a ZIP?\n",
    "created_at": "2016-04-13T14:58:26Z",
    "updated_at": "2016-04-14T07:03:25Z",
    "html_url": "https://github.com/apache/airflow/pull/1352#discussion_r59563859",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1352",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/59563859"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1352#discussion_r59563859"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1352"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/59563859/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 6,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/59617825",
    "pull_request_review_id": null,
    "id": 59617825,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5NjE3ODI1",
    "diff_hunk": "@@ -0,0 +1,22 @@\n+{% extends \"airflow/task_instance.html\" %}\n+{% block title %}Airflow - DAGs{% endblock %}\n+\n+{% block body %}\n+    {{ super() }}\n+    <h4>{{ title }}</h4>\n+    <div>\n+        <table class=\"table table-striped table-bordered\">\n+            <tr>\n+                <th>Key</th>\n+                <th>Value</th>\n+            </tr>\n+            {% for attr, value in attributes %}\n+                <tr>\n+                    <td>{{ attr }}</td>\n+                    <td class='code'>{{ value }}</td>\n+                </tr>\n+            {% endfor %}\n+        </table>\n+        {{ html_code|safe }}\n+    </div>\n+{% endblock %}",
    "path": "airflow/www/templates/airflow/xcom.html",
    "commit_id": "5e28807b2b20f87cc211d4faa8070083cc9db2f7",
    "original_commit_id": "46dd920e26a71cecdef2057ac013a153e4dd0b18",
    "user": {
      "login": "r39132",
      "id": 581734,
      "node_id": "MDQ6VXNlcjU4MTczNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/581734?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/r39132",
      "html_url": "https://github.com/r39132",
      "followers_url": "https://api.github.com/users/r39132/followers",
      "following_url": "https://api.github.com/users/r39132/following{/other_user}",
      "gists_url": "https://api.github.com/users/r39132/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/r39132/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/r39132/subscriptions",
      "organizations_url": "https://api.github.com/users/r39132/orgs",
      "repos_url": "https://api.github.com/users/r39132/repos",
      "events_url": "https://api.github.com/users/r39132/events{/privacy}",
      "received_events_url": "https://api.github.com/users/r39132/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "This file needs an apache license header too. Please add and squash commits.\n",
    "created_at": "2016-04-13T20:19:26Z",
    "updated_at": "2016-04-14T17:15:48Z",
    "html_url": "https://github.com/apache/airflow/pull/1328#discussion_r59617825",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1328",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/59617825"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1328#discussion_r59617825"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1328"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/59617825/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 37,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 22,
    "position": 37,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/59727614",
    "pull_request_review_id": null,
    "id": 59727614,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5NzI3NjE0",
    "diff_hunk": "@@ -440,13 +440,23 @@ def serve_logs(filename):  # noqa\n             filename,\n             mimetype=\"application/json\",\n             as_attachment=False)\n+\n     WORKER_LOG_SERVER_PORT = \\\n         int(conf.get('celery', 'WORKER_LOG_SERVER_PORT'))\n     flask_app.run(\n         host='0.0.0.0', port=WORKER_LOG_SERVER_PORT)\n \n \n def worker(args):\n+    \"\"\"\n+    Spawn Celery workers for using the CeleryExecutor\n+    \"\"\"\n+\n+    # only applied when using the CeleryExecutor\n+    executor_type = conf.get('core', 'executor')\n+    if executor_type != 'CeleryExecutor':",
    "path": "airflow/bin/cli.py",
    "commit_id": "6067cd18ccb3af11162a877a38535d31d0ae74ba",
    "original_commit_id": "b8ea5927c4a0ea82c37c4a32b8adf298aabce2df",
    "user": {
      "login": "jlowin",
      "id": 153965,
      "node_id": "MDQ6VXNlcjE1Mzk2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/153965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jlowin",
      "html_url": "https://github.com/jlowin",
      "followers_url": "https://api.github.com/users/jlowin/followers",
      "following_url": "https://api.github.com/users/jlowin/following{/other_user}",
      "gists_url": "https://api.github.com/users/jlowin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jlowin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jlowin/subscriptions",
      "organizations_url": "https://api.github.com/users/jlowin/orgs",
      "repos_url": "https://api.github.com/users/jlowin/repos",
      "events_url": "https://api.github.com/users/jlowin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jlowin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Maybe do a case-insensitive check:\n`if conf.get('core', 'executor').lower() != 'celeryexecutor':`\n",
    "created_at": "2016-04-14T14:32:57Z",
    "updated_at": "2016-04-15T17:36:02Z",
    "html_url": "https://github.com/apache/airflow/pull/1379#discussion_r59727614",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1379",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/59727614"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1379#discussion_r59727614"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1379"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/59727614/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 29,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/59727892",
    "pull_request_review_id": null,
    "id": 59727892,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5NzI3ODky",
    "diff_hunk": "@@ -4,19 +4,19 @@\n from airflow.executors.base_executor import BaseExecutor\n from airflow.executors.local_executor import LocalExecutor\n from airflow.executors.sequential_executor import SequentialExecutor\n-\n-try:\n-    from airflow.executors.celery_executor import CeleryExecutor\n-except:\n-    pass\n-\n from airflow.exceptions import AirflowException\n \n _EXECUTOR = configuration.get('core', 'EXECUTOR')",
    "path": "airflow/executors/__init__.py",
    "commit_id": "6067cd18ccb3af11162a877a38535d31d0ae74ba",
    "original_commit_id": "b8ea5927c4a0ea82c37c4a32b8adf298aabce2df",
    "user": {
      "login": "jlowin",
      "id": 153965,
      "node_id": "MDQ6VXNlcjE1Mzk2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/153965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jlowin",
      "html_url": "https://github.com/jlowin",
      "followers_url": "https://api.github.com/users/jlowin/followers",
      "following_url": "https://api.github.com/users/jlowin/following{/other_user}",
      "gists_url": "https://api.github.com/users/jlowin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jlowin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jlowin/subscriptions",
      "organizations_url": "https://api.github.com/users/jlowin/orgs",
      "repos_url": "https://api.github.com/users/jlowin/repos",
      "events_url": "https://api.github.com/users/jlowin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jlowin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "I didn't realize until my previous comment that Airflow is enforcing capitalization for executor configuration. While you're working in this file, do you mind making that more lenient? Store `_EXECUTOR` as all lower case and do lower case comparisons thereafter.\n",
    "created_at": "2016-04-14T14:34:42Z",
    "updated_at": "2016-04-15T17:36:02Z",
    "html_url": "https://github.com/apache/airflow/pull/1379#discussion_r59727892",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1379",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/59727892"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1379#discussion_r59727892"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1379"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/59727892/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 12,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/59738911",
    "pull_request_review_id": null,
    "id": 59738911,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5NzM4OTEx",
    "diff_hunk": "@@ -422,7 +424,7 @@ def schedule_dag(self, dag):\n \n             # don't ever schedule prior to the dag's start_date\n             if dag.start_date:\n-                next_run_date = max(next_run_date, dag.start_date)\n+                next_run_date = max(next_run_date or dag.start_date, dag.start_date)",
    "path": "airflow/jobs.py",
    "commit_id": "a36861a5f7f296656302942db83dd65a66dd5949",
    "original_commit_id": "95ad9d0c388f36545e4cb2372e5049ee4fd0fb1e",
    "user": {
      "login": "criccomini",
      "id": 167569,
      "node_id": "MDQ6VXNlcjE2NzU2OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/167569?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/criccomini",
      "html_url": "https://github.com/criccomini",
      "followers_url": "https://api.github.com/users/criccomini/followers",
      "following_url": "https://api.github.com/users/criccomini/following{/other_user}",
      "gists_url": "https://api.github.com/users/criccomini/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/criccomini/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/criccomini/subscriptions",
      "organizations_url": "https://api.github.com/users/criccomini/orgs",
      "repos_url": "https://api.github.com/users/criccomini/repos",
      "events_url": "https://api.github.com/users/criccomini/events{/privacy}",
      "received_events_url": "https://api.github.com/users/criccomini/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Nice catch. Perhaps a little more intelligible (though more verbose) would be:\n\n```\ndag.start_date if not next_run_date else max(next_run_date, dag.start_date)\n```\n",
    "created_at": "2016-04-14T15:32:52Z",
    "updated_at": "2016-04-16T11:04:29Z",
    "html_url": "https://github.com/apache/airflow/pull/1376#discussion_r59738911",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1376",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/59738911"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1376#discussion_r59738911"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1376"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/59738911/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 14,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/59738980",
    "pull_request_review_id": null,
    "id": 59738980,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5NzM4OTgw",
    "diff_hunk": "@@ -657,6 +659,23 @@ def prioritize_queued(self, session, executor, dagbag):\n \n                 session.commit()\n \n+    def _split_dags(self, dags, size):",
    "path": "airflow/jobs.py",
    "commit_id": "a36861a5f7f296656302942db83dd65a66dd5949",
    "original_commit_id": "95ad9d0c388f36545e4cb2372e5049ee4fd0fb1e",
    "user": {
      "login": "criccomini",
      "id": 167569,
      "node_id": "MDQ6VXNlcjE2NzU2OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/167569?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/criccomini",
      "html_url": "https://github.com/criccomini",
      "followers_url": "https://api.github.com/users/criccomini/followers",
      "following_url": "https://api.github.com/users/criccomini/following{/other_user}",
      "gists_url": "https://api.github.com/users/criccomini/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/criccomini/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/criccomini/subscriptions",
      "organizations_url": "https://api.github.com/users/criccomini/orgs",
      "repos_url": "https://api.github.com/users/criccomini/repos",
      "events_url": "https://api.github.com/users/criccomini/events{/privacy}",
      "received_events_url": "https://api.github.com/users/criccomini/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Pydocs would be helpful. This stuff is getting a little gnarly.\n",
    "created_at": "2016-04-14T15:33:19Z",
    "updated_at": "2016-04-16T11:04:29Z",
    "html_url": "https://github.com/apache/airflow/pull/1376#discussion_r59738980",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1376",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/59738980"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1376#discussion_r59738980"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1376"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/59738980/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 674,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 22,
    "position": 91,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/59738992",
    "pull_request_review_id": null,
    "id": 59738992,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5NzM4OTky",
    "diff_hunk": "@@ -657,6 +659,23 @@ def prioritize_queued(self, session, executor, dagbag):\n \n                 session.commit()\n \n+    def _split_dags(self, dags, size):\n+        size = max(1, size)\n+        return [dags[i:i + size] for i in range(0, len(dags), size)]\n+\n+    def _do_dags(self, dagbag, dags):",
    "path": "airflow/jobs.py",
    "commit_id": "a36861a5f7f296656302942db83dd65a66dd5949",
    "original_commit_id": "95ad9d0c388f36545e4cb2372e5049ee4fd0fb1e",
    "user": {
      "login": "criccomini",
      "id": 167569,
      "node_id": "MDQ6VXNlcjE2NzU2OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/167569?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/criccomini",
      "html_url": "https://github.com/criccomini",
      "followers_url": "https://api.github.com/users/criccomini/followers",
      "following_url": "https://api.github.com/users/criccomini/following{/other_user}",
      "gists_url": "https://api.github.com/users/criccomini/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/criccomini/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/criccomini/subscriptions",
      "organizations_url": "https://api.github.com/users/criccomini/orgs",
      "repos_url": "https://api.github.com/users/criccomini/repos",
      "events_url": "https://api.github.com/users/criccomini/events{/privacy}",
      "received_events_url": "https://api.github.com/users/criccomini/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Pydocs would be helpful. This stuff is getting a little gnarly.\n",
    "created_at": "2016-04-14T15:33:22Z",
    "updated_at": "2016-04-16T11:04:29Z",
    "html_url": "https://github.com/apache/airflow/pull/1376#discussion_r59738992",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1376",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/59738992"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1376#discussion_r59738992"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1376"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/59738992/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 26,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/59739279",
    "pull_request_review_id": null,
    "id": 59739279,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5NzM5Mjc5",
    "diff_hunk": "@@ -695,18 +714,19 @@ def _execute(self):\n                     dags = [\n                         dag for dag in dagbag.dags.values()\n                         if not dag.parent_dag]\n+\n                 paused_dag_ids = dagbag.paused_dags()\n-                for dag in dags:\n-                    self.logger.debug(\"Scheduling {}\".format(dag.dag_id))\n-                    dag = dagbag.get_dag(dag.dag_id)\n-                    if not dag or (dag.dag_id in paused_dag_ids):\n-                        continue\n-                    try:\n-                        self.schedule_dag(dag)\n-                        self.process_dag(dag, executor)\n-                        self.manage_slas(dag)\n-                    except Exception as e:\n-                        self.logger.exception(e)\n+                dags = [x for x in dags if x.dag_id not in paused_dag_ids]",
    "path": "airflow/jobs.py",
    "commit_id": "a36861a5f7f296656302942db83dd65a66dd5949",
    "original_commit_id": "95ad9d0c388f36545e4cb2372e5049ee4fd0fb1e",
    "user": {
      "login": "criccomini",
      "id": 167569,
      "node_id": "MDQ6VXNlcjE2NzU2OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/167569?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/criccomini",
      "html_url": "https://github.com/criccomini",
      "followers_url": "https://api.github.com/users/criccomini/followers",
      "following_url": "https://api.github.com/users/criccomini/following{/other_user}",
      "gists_url": "https://api.github.com/users/criccomini/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/criccomini/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/criccomini/subscriptions",
      "organizations_url": "https://api.github.com/users/criccomini/orgs",
      "repos_url": "https://api.github.com/users/criccomini/repos",
      "events_url": "https://api.github.com/users/criccomini/events{/privacy}",
      "received_events_url": "https://api.github.com/users/criccomini/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "I think you can use [filter()](https://docs.python.org/2/library/functions.html#filter) to this a little more pythonically.\n",
    "created_at": "2016-04-14T15:34:49Z",
    "updated_at": "2016-04-16T11:04:29Z",
    "html_url": "https://github.com/apache/airflow/pull/1376#discussion_r59739279",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1376",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/59739279"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1376#discussion_r59739279"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1376"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/59739279/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 738,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 59,
    "position": 172,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/59739446",
    "pull_request_review_id": null,
    "id": 59739446,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5NzM5NDQ2",
    "diff_hunk": "@@ -695,18 +714,19 @@ def _execute(self):\n                     dags = [\n                         dag for dag in dagbag.dags.values()\n                         if not dag.parent_dag]\n+\n                 paused_dag_ids = dagbag.paused_dags()\n-                for dag in dags:\n-                    self.logger.debug(\"Scheduling {}\".format(dag.dag_id))\n-                    dag = dagbag.get_dag(dag.dag_id)\n-                    if not dag or (dag.dag_id in paused_dag_ids):\n-                        continue\n-                    try:\n-                        self.schedule_dag(dag)\n-                        self.process_dag(dag, executor)\n-                        self.manage_slas(dag)\n-                    except Exception as e:\n-                        self.logger.exception(e)\n+                dags = [x for x in dags if x.dag_id not in paused_dag_ids]\n+                self.logger.info(\"CPU: {} DAGs:{}\".format(multiprocessing.cpu_count(), len(dags)))",
    "path": "airflow/jobs.py",
    "commit_id": "a36861a5f7f296656302942db83dd65a66dd5949",
    "original_commit_id": "95ad9d0c388f36545e4cb2372e5049ee4fd0fb1e",
    "user": {
      "login": "criccomini",
      "id": 167569,
      "node_id": "MDQ6VXNlcjE2NzU2OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/167569?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/criccomini",
      "html_url": "https://github.com/criccomini",
      "followers_url": "https://api.github.com/users/criccomini/followers",
      "following_url": "https://api.github.com/users/criccomini/following{/other_user}",
      "gists_url": "https://api.github.com/users/criccomini/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/criccomini/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/criccomini/subscriptions",
      "organizations_url": "https://api.github.com/users/criccomini/orgs",
      "repos_url": "https://api.github.com/users/criccomini/repos",
      "events_url": "https://api.github.com/users/criccomini/events{/privacy}",
      "received_events_url": "https://api.github.com/users/criccomini/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Nit: \"Total CPUs: {}\" would be a little more intelligible. At first, I thought this was saying \"I am CPU number N, I'm going to process DAGs 1-10\"\n",
    "created_at": "2016-04-14T15:35:50Z",
    "updated_at": "2016-04-16T11:04:29Z",
    "html_url": "https://github.com/apache/airflow/pull/1376#discussion_r59739446",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1376",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/59739446"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1376#discussion_r59739446"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1376"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/59739446/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 60,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/59739578",
    "pull_request_review_id": null,
    "id": 59739578,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5NzM5NTc4",
    "diff_hunk": "@@ -695,18 +714,19 @@ def _execute(self):\n                     dags = [\n                         dag for dag in dagbag.dags.values()\n                         if not dag.parent_dag]\n+\n                 paused_dag_ids = dagbag.paused_dags()\n-                for dag in dags:\n-                    self.logger.debug(\"Scheduling {}\".format(dag.dag_id))\n-                    dag = dagbag.get_dag(dag.dag_id)\n-                    if not dag or (dag.dag_id in paused_dag_ids):\n-                        continue\n-                    try:\n-                        self.schedule_dag(dag)\n-                        self.process_dag(dag, executor)\n-                        self.manage_slas(dag)\n-                    except Exception as e:\n-                        self.logger.exception(e)\n+                dags = [x for x in dags if x.dag_id not in paused_dag_ids]\n+                self.logger.info(\"CPU: {} DAGs:{}\".format(multiprocessing.cpu_count(), len(dags)))",
    "path": "airflow/jobs.py",
    "commit_id": "a36861a5f7f296656302942db83dd65a66dd5949",
    "original_commit_id": "95ad9d0c388f36545e4cb2372e5049ee4fd0fb1e",
    "user": {
      "login": "criccomini",
      "id": 167569,
      "node_id": "MDQ6VXNlcjE2NzU2OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/167569?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/criccomini",
      "html_url": "https://github.com/criccomini",
      "followers_url": "https://api.github.com/users/criccomini/followers",
      "following_url": "https://api.github.com/users/criccomini/following{/other_user}",
      "gists_url": "https://api.github.com/users/criccomini/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/criccomini/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/criccomini/subscriptions",
      "organizations_url": "https://api.github.com/users/criccomini/orgs",
      "repos_url": "https://api.github.com/users/criccomini/repos",
      "events_url": "https://api.github.com/users/criccomini/events{/privacy}",
      "received_events_url": "https://api.github.com/users/criccomini/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "How expensive is cpu_count? I notice we're calling it multiple times in the scheduler loop.\n",
    "created_at": "2016-04-14T15:36:23Z",
    "updated_at": "2016-04-16T11:04:29Z",
    "html_url": "https://github.com/apache/airflow/pull/1376#discussion_r59739578",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1376",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/59739578"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1376#discussion_r59739578"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1376"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/59739578/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 60,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/59742778",
    "pull_request_review_id": null,
    "id": 59742778,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5NzQyNzc4",
    "diff_hunk": "@@ -83,6 +83,23 @@ def merge_conn(conn, session=None):\n         session.commit()\n \n \n+@event.listens_for(settings.engine, \"connect\")",
    "path": "airflow/utils/db.py",
    "commit_id": "a36861a5f7f296656302942db83dd65a66dd5949",
    "original_commit_id": "95ad9d0c388f36545e4cb2372e5049ee4fd0fb1e",
    "user": {
      "login": "criccomini",
      "id": 167569,
      "node_id": "MDQ6VXNlcjE2NzU2OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/167569?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/criccomini",
      "html_url": "https://github.com/criccomini",
      "followers_url": "https://api.github.com/users/criccomini/followers",
      "following_url": "https://api.github.com/users/criccomini/following{/other_user}",
      "gists_url": "https://api.github.com/users/criccomini/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/criccomini/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/criccomini/subscriptions",
      "organizations_url": "https://api.github.com/users/criccomini/orgs",
      "repos_url": "https://api.github.com/users/criccomini/repos",
      "events_url": "https://api.github.com/users/criccomini/events{/privacy}",
      "received_events_url": "https://api.github.com/users/criccomini/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "What are these? MySQLAlchemy foo is lacking.\n",
    "created_at": "2016-04-14T15:55:52Z",
    "updated_at": "2016-04-16T11:04:29Z",
    "html_url": "https://github.com/apache/airflow/pull/1376#discussion_r59742778",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1376",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/59742778"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1376#discussion_r59742778"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1376"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/59742778/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 86,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 4,
    "position": 4,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/59757269",
    "pull_request_review_id": null,
    "id": 59757269,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5NzU3MjY5",
    "diff_hunk": "@@ -440,13 +440,23 @@ def serve_logs(filename):  # noqa\n             filename,\n             mimetype=\"application/json\",\n             as_attachment=False)\n+\n     WORKER_LOG_SERVER_PORT = \\\n         int(conf.get('celery', 'WORKER_LOG_SERVER_PORT'))\n     flask_app.run(\n         host='0.0.0.0', port=WORKER_LOG_SERVER_PORT)\n \n \n def worker(args):\n+    \"\"\"\n+    Spawn Celery workers for using the CeleryExecutor\n+    \"\"\"\n+\n+    # only applied when using the CeleryExecutor\n+    executor_type = conf.get('core', 'executor')\n+    if executor_type != 'CeleryExecutor':",
    "path": "airflow/bin/cli.py",
    "commit_id": "6067cd18ccb3af11162a877a38535d31d0ae74ba",
    "original_commit_id": "b8ea5927c4a0ea82c37c4a32b8adf298aabce2df",
    "user": {
      "login": "yyyyyyuanfei",
      "id": 705367,
      "node_id": "MDQ6VXNlcjcwNTM2Nw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/705367?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yyyyyyuanfei",
      "html_url": "https://github.com/yyyyyyuanfei",
      "followers_url": "https://api.github.com/users/yyyyyyuanfei/followers",
      "following_url": "https://api.github.com/users/yyyyyyuanfei/following{/other_user}",
      "gists_url": "https://api.github.com/users/yyyyyyuanfei/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yyyyyyuanfei/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yyyyyyuanfei/subscriptions",
      "organizations_url": "https://api.github.com/users/yyyyyyuanfei/orgs",
      "repos_url": "https://api.github.com/users/yyyyyyuanfei/repos",
      "events_url": "https://api.github.com/users/yyyyyyuanfei/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yyyyyyuanfei/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Sure, added a helper in configuration to get the executor type and cast it to lowercase. \n",
    "created_at": "2016-04-14T17:27:45Z",
    "updated_at": "2016-04-15T17:36:02Z",
    "html_url": "https://github.com/apache/airflow/pull/1379#discussion_r59757269",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1379",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/59757269"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1379#discussion_r59757269"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1379"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/59757269/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "NONE",
    "original_position": 29,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/59760541",
    "pull_request_review_id": null,
    "id": 59760541,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5NzYwNTQx",
    "diff_hunk": "@@ -695,18 +714,19 @@ def _execute(self):\n                     dags = [\n                         dag for dag in dagbag.dags.values()\n                         if not dag.parent_dag]\n+\n                 paused_dag_ids = dagbag.paused_dags()\n-                for dag in dags:\n-                    self.logger.debug(\"Scheduling {}\".format(dag.dag_id))\n-                    dag = dagbag.get_dag(dag.dag_id)\n-                    if not dag or (dag.dag_id in paused_dag_ids):\n-                        continue\n-                    try:\n-                        self.schedule_dag(dag)\n-                        self.process_dag(dag, executor)\n-                        self.manage_slas(dag)\n-                    except Exception as e:\n-                        self.logger.exception(e)\n+                dags = [x for x in dags if x.dag_id not in paused_dag_ids]",
    "path": "airflow/jobs.py",
    "commit_id": "a36861a5f7f296656302942db83dd65a66dd5949",
    "original_commit_id": "95ad9d0c388f36545e4cb2372e5049ee4fd0fb1e",
    "user": {
      "login": "bolkedebruin",
      "id": 4282712,
      "node_id": "MDQ6VXNlcjQyODI3MTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4282712?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bolkedebruin",
      "html_url": "https://github.com/bolkedebruin",
      "followers_url": "https://api.github.com/users/bolkedebruin/followers",
      "following_url": "https://api.github.com/users/bolkedebruin/following{/other_user}",
      "gists_url": "https://api.github.com/users/bolkedebruin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bolkedebruin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bolkedebruin/subscriptions",
      "organizations_url": "https://api.github.com/users/bolkedebruin/orgs",
      "repos_url": "https://api.github.com/users/bolkedebruin/repos",
      "events_url": "https://api.github.com/users/bolkedebruin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bolkedebruin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "with a lambda? I personally don't like to read that stuff so much\n",
    "created_at": "2016-04-14T17:47:51Z",
    "updated_at": "2016-04-16T11:04:29Z",
    "html_url": "https://github.com/apache/airflow/pull/1376#discussion_r59760541",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1376",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/59760541"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1376#discussion_r59760541"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1376"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/59760541/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 738,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 59,
    "position": 172,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/59769654",
    "pull_request_review_id": null,
    "id": 59769654,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5NzY5NjU0",
    "diff_hunk": "@@ -83,6 +83,23 @@ def merge_conn(conn, session=None):\n         session.commit()\n \n \n+@event.listens_for(settings.engine, \"connect\")",
    "path": "airflow/utils/db.py",
    "commit_id": "a36861a5f7f296656302942db83dd65a66dd5949",
    "original_commit_id": "95ad9d0c388f36545e4cb2372e5049ee4fd0fb1e",
    "user": {
      "login": "bolkedebruin",
      "id": 4282712,
      "node_id": "MDQ6VXNlcjQyODI3MTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4282712?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bolkedebruin",
      "html_url": "https://github.com/bolkedebruin",
      "followers_url": "https://api.github.com/users/bolkedebruin/followers",
      "following_url": "https://api.github.com/users/bolkedebruin/following{/other_user}",
      "gists_url": "https://api.github.com/users/bolkedebruin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bolkedebruin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bolkedebruin/subscriptions",
      "organizations_url": "https://api.github.com/users/bolkedebruin/orgs",
      "repos_url": "https://api.github.com/users/bolkedebruin/repos",
      "events_url": "https://api.github.com/users/bolkedebruin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bolkedebruin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "It basically checks when a new connecting is made. You cannot use the same db connection in a fork so we force the db logic to make a new connection when it detects that the pid of the process that created the connection is not the same as it is currently in.\n",
    "created_at": "2016-04-14T18:41:24Z",
    "updated_at": "2016-04-16T11:04:29Z",
    "html_url": "https://github.com/apache/airflow/pull/1376#discussion_r59769654",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1376",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/59769654"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1376#discussion_r59769654"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1376"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/59769654/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 86,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 4,
    "position": 4,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/59770045",
    "pull_request_review_id": null,
    "id": 59770045,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5NzcwMDQ1",
    "diff_hunk": "@@ -695,18 +714,19 @@ def _execute(self):\n                     dags = [\n                         dag for dag in dagbag.dags.values()\n                         if not dag.parent_dag]\n+\n                 paused_dag_ids = dagbag.paused_dags()\n-                for dag in dags:\n-                    self.logger.debug(\"Scheduling {}\".format(dag.dag_id))\n-                    dag = dagbag.get_dag(dag.dag_id)\n-                    if not dag or (dag.dag_id in paused_dag_ids):\n-                        continue\n-                    try:\n-                        self.schedule_dag(dag)\n-                        self.process_dag(dag, executor)\n-                        self.manage_slas(dag)\n-                    except Exception as e:\n-                        self.logger.exception(e)\n+                dags = [x for x in dags if x.dag_id not in paused_dag_ids]\n+                self.logger.info(\"CPU: {} DAGs:{}\".format(multiprocessing.cpu_count(), len(dags)))",
    "path": "airflow/jobs.py",
    "commit_id": "a36861a5f7f296656302942db83dd65a66dd5949",
    "original_commit_id": "95ad9d0c388f36545e4cb2372e5049ee4fd0fb1e",
    "user": {
      "login": "bolkedebruin",
      "id": 4282712,
      "node_id": "MDQ6VXNlcjQyODI3MTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4282712?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bolkedebruin",
      "html_url": "https://github.com/bolkedebruin",
      "followers_url": "https://api.github.com/users/bolkedebruin/followers",
      "following_url": "https://api.github.com/users/bolkedebruin/following{/other_user}",
      "gists_url": "https://api.github.com/users/bolkedebruin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bolkedebruin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bolkedebruin/subscriptions",
      "organizations_url": "https://api.github.com/users/bolkedebruin/orgs",
      "repos_url": "https://api.github.com/users/bolkedebruin/repos",
      "events_url": "https://api.github.com/users/bolkedebruin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bolkedebruin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "don't know to be honest. I haven't seen any impact though\n",
    "created_at": "2016-04-14T18:44:05Z",
    "updated_at": "2016-04-16T11:04:29Z",
    "html_url": "https://github.com/apache/airflow/pull/1376#discussion_r59770045",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1376",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/59770045"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1376#discussion_r59770045"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1376"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/59770045/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 60,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/59911838",
    "pull_request_review_id": null,
    "id": 59911838,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5OTExODM4",
    "diff_hunk": "@@ -414,6 +420,7 @@ def run_command(command):\n job_heartbeat_sec = 1\n scheduler_heartbeat_sec = 5\n authenticate = true\n+max_threads = 2",
    "path": "airflow/configuration.py",
    "commit_id": "a36861a5f7f296656302942db83dd65a66dd5949",
    "original_commit_id": "680de4d5811c084836a836da28b21cc63e07965a",
    "user": {
      "login": "r39132",
      "id": 581734,
      "node_id": "MDQ6VXNlcjU4MTczNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/581734?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/r39132",
      "html_url": "https://github.com/r39132",
      "followers_url": "https://api.github.com/users/r39132/followers",
      "following_url": "https://api.github.com/users/r39132/following{/other_user}",
      "gists_url": "https://api.github.com/users/r39132/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/r39132/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/r39132/subscriptions",
      "organizations_url": "https://api.github.com/users/r39132/orgs",
      "repos_url": "https://api.github.com/users/r39132/repos",
      "events_url": "https://api.github.com/users/r39132/events{/privacy}",
      "received_events_url": "https://api.github.com/users/r39132/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Nit  : maybe we should call this max_proc?\n",
    "created_at": "2016-04-15T17:40:46Z",
    "updated_at": "2016-04-16T11:04:29Z",
    "html_url": "https://github.com/apache/airflow/pull/1376#discussion_r59911838",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1376",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/59911838"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1376#discussion_r59911838"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1376"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/59911838/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 423,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 24,
    "position": 24,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/59911953",
    "pull_request_review_id": null,
    "id": 59911953,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5OTExOTUz",
    "diff_hunk": "@@ -422,7 +435,7 @@ def schedule_dag(self, dag):\n \n             # don't ever schedule prior to the dag's start_date\n             if dag.start_date:\n-                next_run_date = max(next_run_date, dag.start_date)\n+                next_run_date = dag.start_date if not next_run_date else max(next_run_date, dag.start_date)",
    "path": "airflow/jobs.py",
    "commit_id": "a36861a5f7f296656302942db83dd65a66dd5949",
    "original_commit_id": "680de4d5811c084836a836da28b21cc63e07965a",
    "user": {
      "login": "r39132",
      "id": 581734,
      "node_id": "MDQ6VXNlcjU4MTczNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/581734?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/r39132",
      "html_url": "https://github.com/r39132",
      "followers_url": "https://api.github.com/users/r39132/followers",
      "following_url": "https://api.github.com/users/r39132/following{/other_user}",
      "gists_url": "https://api.github.com/users/r39132/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/r39132/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/r39132/subscriptions",
      "organizations_url": "https://api.github.com/users/r39132/orgs",
      "repos_url": "https://api.github.com/users/r39132/repos",
      "events_url": "https://api.github.com/users/r39132/events{/privacy}",
      "received_events_url": "https://api.github.com/users/r39132/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "This is an important bug fix :-) Should be a stand-alone commit or PR.\n\nIt looks like the cause of this is that a `TaskInstance` has not yet been inserted for the first run. As a result, even though `last_scheduled_run` is `None`, then `latest_run` is also `None`.  If `latest_run` is `None`, then the logic above picks the min start date for all of the tasks in the dag. This should never be None -- this is where there might be a bug. \n\nThe logic flow above, for others looking at this code for the first time is \n1) look at dagruns (which the scheduler inserts into - `airflow run` and `airflow backfill` do not currently insert into this table) \n2) look at task_instance (which is presumably inserted after dag_runs) \n3) look at the dag bag for a start date\n\nIt seems counterintuitive that the tasks in the dagbag would not have a start date\n",
    "created_at": "2016-04-15T17:41:37Z",
    "updated_at": "2016-04-16T11:04:29Z",
    "html_url": "https://github.com/apache/airflow/pull/1376#discussion_r59911953",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1376",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/59911953"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1376#discussion_r59911953"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1376"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/59911953/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 438,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 47,
    "position": 47,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/59918003",
    "pull_request_review_id": null,
    "id": 59918003,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5OTE4MDAz",
    "diff_hunk": "@@ -414,6 +420,7 @@ def run_command(command):\n job_heartbeat_sec = 1\n scheduler_heartbeat_sec = 5\n authenticate = true\n+max_threads = 2",
    "path": "airflow/configuration.py",
    "commit_id": "a36861a5f7f296656302942db83dd65a66dd5949",
    "original_commit_id": "680de4d5811c084836a836da28b21cc63e07965a",
    "user": {
      "login": "bolkedebruin",
      "id": 4282712,
      "node_id": "MDQ6VXNlcjQyODI3MTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4282712?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bolkedebruin",
      "html_url": "https://github.com/bolkedebruin",
      "followers_url": "https://api.github.com/users/bolkedebruin/followers",
      "following_url": "https://api.github.com/users/bolkedebruin/following{/other_user}",
      "gists_url": "https://api.github.com/users/bolkedebruin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bolkedebruin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bolkedebruin/subscriptions",
      "organizations_url": "https://api.github.com/users/bolkedebruin/orgs",
      "repos_url": "https://api.github.com/users/bolkedebruin/repos",
      "events_url": "https://api.github.com/users/bolkedebruin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bolkedebruin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "I was thinking \"threads\" is better understood as a concept. The executor uses `parallelism` but that is also a bit unclear.\n",
    "created_at": "2016-04-15T18:20:58Z",
    "updated_at": "2016-04-16T11:04:29Z",
    "html_url": "https://github.com/apache/airflow/pull/1376#discussion_r59918003",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1376",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/59918003"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1376#discussion_r59918003"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1376"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/59918003/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 423,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 24,
    "position": 24,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/59940943",
    "pull_request_review_id": null,
    "id": 59940943,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5OTQwOTQz",
    "diff_hunk": "@@ -668,8 +706,8 @@ def _execute(self):\n         dagbag = models.DagBag(self.subdir, sync_to_db=True)\n         executor = self.executor = dagbag.executor\n         executor.start()\n-        i = 0\n-        while not self.num_runs or self.num_runs > i:\n+        self.runs = 0",
    "path": "airflow/jobs.py",
    "commit_id": "a36861a5f7f296656302942db83dd65a66dd5949",
    "original_commit_id": "680de4d5811c084836a836da28b21cc63e07965a",
    "user": {
      "login": "jlowin",
      "id": 153965,
      "node_id": "MDQ6VXNlcjE1Mzk2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/153965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jlowin",
      "html_url": "https://github.com/jlowin",
      "followers_url": "https://api.github.com/users/jlowin/followers",
      "following_url": "https://api.github.com/users/jlowin/following{/other_user}",
      "gists_url": "https://api.github.com/users/jlowin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jlowin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jlowin/subscriptions",
      "organizations_url": "https://api.github.com/users/jlowin/orgs",
      "repos_url": "https://api.github.com/users/jlowin/repos",
      "events_url": "https://api.github.com/users/jlowin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jlowin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Is there an advantage to making this `self.runs` instead of just `runs`?\n",
    "created_at": "2016-04-15T21:06:14Z",
    "updated_at": "2016-04-16T11:04:29Z",
    "html_url": "https://github.com/apache/airflow/pull/1376#discussion_r59940943",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1376",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/59940943"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1376#discussion_r59940943"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1376"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/59940943/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 709,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "MEMBER",
    "original_position": 127,
    "position": 127,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/59963493",
    "pull_request_review_id": null,
    "id": 59963493,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5OTYzNDkz",
    "diff_hunk": "@@ -733,6 +733,15 @@ def test_trigger_dag(self):\n                 '-c', 'NOT JSON'])\n         )\n \n+    def test_variables(self):\n+        cli.variables(self.parser.parse_args([\n+            'variables', '-s', 'foo', '{\"foo\":\"bar\"}']))\n+        cli.variables(self.parser.parse_args([\n+            'variables', '-g', 'foo']))\n+        cli.variables(self.parser.parse_args([\n+            'variables'\n+        ]))",
    "path": "tests/core.py",
    "commit_id": "a5ad871a36389d930f25a94e537475c6c15797fd",
    "original_commit_id": "af5596ae4490c405bc5c43003bd5dfa3cb04bfcb",
    "user": {
      "login": "r39132",
      "id": 581734,
      "node_id": "MDQ6VXNlcjU4MTczNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/581734?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/r39132",
      "html_url": "https://github.com/r39132",
      "followers_url": "https://api.github.com/users/r39132/followers",
      "following_url": "https://api.github.com/users/r39132/following{/other_user}",
      "gists_url": "https://api.github.com/users/r39132/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/r39132/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/r39132/subscriptions",
      "organizations_url": "https://api.github.com/users/r39132/orgs",
      "repos_url": "https://api.github.com/users/r39132/repos",
      "events_url": "https://api.github.com/users/r39132/events{/privacy}",
      "received_events_url": "https://api.github.com/users/r39132/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Can you add an example here for default?\n",
    "created_at": "2016-04-16T06:37:59Z",
    "updated_at": "2016-04-16T07:12:33Z",
    "html_url": "https://github.com/apache/airflow/pull/1387#discussion_r59963493",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1387",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/59963493"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1387#discussion_r59963493"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1387"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/59963493/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 11,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/59965793",
    "pull_request_review_id": null,
    "id": 59965793,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5OTY1Nzkz",
    "diff_hunk": "@@ -668,8 +706,8 @@ def _execute(self):\n         dagbag = models.DagBag(self.subdir, sync_to_db=True)\n         executor = self.executor = dagbag.executor\n         executor.start()\n-        i = 0\n-        while not self.num_runs or self.num_runs > i:\n+        self.runs = 0",
    "path": "airflow/jobs.py",
    "commit_id": "a36861a5f7f296656302942db83dd65a66dd5949",
    "original_commit_id": "680de4d5811c084836a836da28b21cc63e07965a",
    "user": {
      "login": "bolkedebruin",
      "id": 4282712,
      "node_id": "MDQ6VXNlcjQyODI3MTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4282712?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bolkedebruin",
      "html_url": "https://github.com/bolkedebruin",
      "followers_url": "https://api.github.com/users/bolkedebruin/followers",
      "following_url": "https://api.github.com/users/bolkedebruin/following{/other_user}",
      "gists_url": "https://api.github.com/users/bolkedebruin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bolkedebruin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bolkedebruin/subscriptions",
      "organizations_url": "https://api.github.com/users/bolkedebruin/orgs",
      "repos_url": "https://api.github.com/users/bolkedebruin/repos",
      "events_url": "https://api.github.com/users/bolkedebruin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bolkedebruin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Yes, that it actually counts :-).  When I kept it a local variable it would not properly increase. I am not sure why.\n",
    "created_at": "2016-04-16T10:44:19Z",
    "updated_at": "2016-04-16T11:04:29Z",
    "html_url": "https://github.com/apache/airflow/pull/1376#discussion_r59965793",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1376",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/59965793"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1376#discussion_r59965793"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1376"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/59965793/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 709,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 127,
    "position": 127,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/59965991",
    "pull_request_review_id": null,
    "id": 59965991,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5OTY1OTkx",
    "diff_hunk": "@@ -422,7 +435,7 @@ def schedule_dag(self, dag):\n \n             # don't ever schedule prior to the dag's start_date\n             if dag.start_date:\n-                next_run_date = max(next_run_date, dag.start_date)\n+                next_run_date = dag.start_date if not next_run_date else max(next_run_date, dag.start_date)",
    "path": "airflow/jobs.py",
    "commit_id": "a36861a5f7f296656302942db83dd65a66dd5949",
    "original_commit_id": "680de4d5811c084836a836da28b21cc63e07965a",
    "user": {
      "login": "bolkedebruin",
      "id": 4282712,
      "node_id": "MDQ6VXNlcjQyODI3MTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4282712?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bolkedebruin",
      "html_url": "https://github.com/bolkedebruin",
      "followers_url": "https://api.github.com/users/bolkedebruin/followers",
      "following_url": "https://api.github.com/users/bolkedebruin/following{/other_user}",
      "gists_url": "https://api.github.com/users/bolkedebruin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bolkedebruin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bolkedebruin/subscriptions",
      "organizations_url": "https://api.github.com/users/bolkedebruin/orgs",
      "repos_url": "https://api.github.com/users/bolkedebruin/repos",
      "events_url": "https://api.github.com/users/bolkedebruin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bolkedebruin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Ok it is a separate commit now. Real fix should be in another PR I guess.\n",
    "created_at": "2016-04-16T11:05:24Z",
    "updated_at": "2016-04-16T11:05:44Z",
    "html_url": "https://github.com/apache/airflow/pull/1376#discussion_r59965991",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1376",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/59965991"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1376#discussion_r59965991"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1376"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/59965991/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 438,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 47,
    "position": 47,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/59992207",
    "pull_request_review_id": null,
    "id": 59992207,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5OTkyMjA3",
    "diff_hunk": "@@ -467,7 +467,7 @@ def serve_logs(filename):  # noqa\n \n def worker(args):\n     env = os.environ.copy()\n-    env['AIRFLOW_HOME'] = settings.AIRFLOW_HOME\n+    env['AIRFLOW_HOME'] = conf.get_airflow_home()",
    "path": "airflow/bin/cli.py",
    "commit_id": "11f70f44ed50b6020c8f133cc0cd7b4cde8faf47",
    "original_commit_id": "11f70f44ed50b6020c8f133cc0cd7b4cde8faf47",
    "user": {
      "login": "thoralf-gutierrez",
      "id": 5640848,
      "node_id": "MDQ6VXNlcjU2NDA4NDg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5640848?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thoralf-gutierrez",
      "html_url": "https://github.com/thoralf-gutierrez",
      "followers_url": "https://api.github.com/users/thoralf-gutierrez/followers",
      "following_url": "https://api.github.com/users/thoralf-gutierrez/following{/other_user}",
      "gists_url": "https://api.github.com/users/thoralf-gutierrez/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thoralf-gutierrez/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thoralf-gutierrez/subscriptions",
      "organizations_url": "https://api.github.com/users/thoralf-gutierrez/orgs",
      "repos_url": "https://api.github.com/users/thoralf-gutierrez/repos",
      "events_url": "https://api.github.com/users/thoralf-gutierrez/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thoralf-gutierrez/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Use the configuration convenience method that evaluates the current `AIRFLOW_HOME` rather than the one that's evaluated once when `settings.py` gets loaded.\n",
    "created_at": "2016-04-17T20:41:47Z",
    "updated_at": "2016-04-17T20:41:47Z",
    "html_url": "https://github.com/apache/airflow/pull/748#discussion_r59992207",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/748",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/59992207"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/748#discussion_r59992207"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/748"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/59992207/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 470,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 5,
    "position": 5,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/59992216",
    "pull_request_review_id": null,
    "id": 59992216,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5OTkyMjE2",
    "diff_hunk": "@@ -681,18 +674,78 @@ def remove_option(section, option):\n     return conf.remove_option(section, option)\n \n \n+def set(section, option, value):  # noqa\n+    return conf.set(section, option, value)\n+\n+\n+########################\n+# Convenience method to access config entries.\n+\n+\n+def get_dags_folder():\n+    return os.path.expanduser(get('core', 'DAGS_FOLDER'))\n+\n+\n+def get_airflow_home():\n+    return os.path.expanduser(get('core', 'AIRFLOW_HOME'))\n+\n+\n+def get_sql_alchemy_conn():\n+    return get('core', 'SQL_ALCHEMY_CONN')\n+\n+\n+################\n+# global config init\n+\n+conf = None\n+\n+\n+def test_mode():\n+    conf = ConfigParserWithDefaults(defaults)\n+    conf.read(TEST_CONFIG_FILE)\n+\n+\n+def load_config():\n+    \"\"\"\n+    loads the config and triggers the connection to the SQL-alchemy backend\n+    \"\"\"\n+    global conf\n+    conf = ConfigParserWithDefaults(defaults)\n+    conf.read(AIRFLOW_CONFIG)\n+    settings.connect(get_sql_alchemy_conn(),\n+                     conf.getint('core', 'SQL_ALCHEMY_POOL_SIZE'),\n+                     conf.getint('core', 'SQL_ALCHEMY_POOL_RECYCLE'))\n+\n+load_config()",
    "path": "airflow/configuration.py",
    "commit_id": "11f70f44ed50b6020c8f133cc0cd7b4cde8faf47",
    "original_commit_id": "11f70f44ed50b6020c8f133cc0cd7b4cde8faf47",
    "user": {
      "login": "thoralf-gutierrez",
      "id": 5640848,
      "node_id": "MDQ6VXNlcjU2NDA4NDg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5640848?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thoralf-gutierrez",
      "html_url": "https://github.com/thoralf-gutierrez",
      "followers_url": "https://api.github.com/users/thoralf-gutierrez/followers",
      "following_url": "https://api.github.com/users/thoralf-gutierrez/following{/other_user}",
      "gists_url": "https://api.github.com/users/thoralf-gutierrez/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thoralf-gutierrez/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thoralf-gutierrez/subscriptions",
      "organizations_url": "https://api.github.com/users/thoralf-gutierrez/orgs",
      "repos_url": "https://api.github.com/users/thoralf-gutierrez/repos",
      "events_url": "https://api.github.com/users/thoralf-gutierrez/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thoralf-gutierrez/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Create load_config() that loads the config from AIRFLOW_CONFIG and calls settings.py to open the sql alchemy connection. This is useful to reload the config when the AIRFLOW_CONFIG will be modified during tests.\n",
    "created_at": "2016-04-17T20:42:10Z",
    "updated_at": "2016-04-17T20:42:10Z",
    "html_url": "https://github.com/apache/airflow/pull/748#discussion_r59992216",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/748",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/59992216"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/748#discussion_r59992216"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/748"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/59992216/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 719,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 69,
    "position": 69,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/59992221",
    "pull_request_review_id": null,
    "id": 59992221,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5OTkyMjIx",
    "diff_hunk": "@@ -681,18 +674,78 @@ def remove_option(section, option):\n     return conf.remove_option(section, option)\n \n \n+def set(section, option, value):  # noqa\n+    return conf.set(section, option, value)\n+\n+\n+########################\n+# Convenience method to access config entries.\n+\n+\n+def get_dags_folder():\n+    return os.path.expanduser(get('core', 'DAGS_FOLDER'))\n+\n+\n+def get_airflow_home():\n+    return os.path.expanduser(get('core', 'AIRFLOW_HOME'))\n+\n+\n+def get_sql_alchemy_conn():\n+    return get('core', 'SQL_ALCHEMY_CONN')\n+\n+\n+################\n+# global config init\n+\n+conf = None\n+\n+\n+def test_mode():\n+    conf = ConfigParserWithDefaults(defaults)\n+    conf.read(TEST_CONFIG_FILE)\n+\n+\n+def load_config():\n+    \"\"\"\n+    loads the config and triggers the connection to the SQL-alchemy backend\n+    \"\"\"\n+    global conf\n+    conf = ConfigParserWithDefaults(defaults)\n+    conf.read(AIRFLOW_CONFIG)\n+    settings.connect(get_sql_alchemy_conn(),\n+                     conf.getint('core', 'SQL_ALCHEMY_POOL_SIZE'),\n+                     conf.getint('core', 'SQL_ALCHEMY_POOL_RECYCLE'))\n+\n+load_config()\n+\n+\n def as_dict(display_source=False, display_sensitive=False):\n     return conf.as_dict(\n         display_source=display_source, display_sensitive=display_sensitive)\n as_dict.__doc__ = conf.as_dict.__doc__\n \n \n-def set(section, option, value):  # noqa\n-    return conf.set(section, option, value)\n+class DummyStatsLogger(object):\n+    @classmethod\n+    def incr(cls, stat, count=1, rate=1):\n+        pass\n \n-########################\n-# convenience method to access config entries\n+    @classmethod\n+    def decr(cls, stat, count=1, rate=1):\n+        pass\n \n+    @classmethod\n+    def gauge(cls, stat, value, rate=1, delta=False):\n+        pass\n \n-def get_dags_folder():\n-    return os.path.expanduser(get('core', 'DAGS_FOLDER'))\n+Stats = DummyStatsLogger\n+\n+if conf.getboolean('scheduler', 'statsd_on'):\n+    from statsd import StatsClient\n+    statsd = StatsClient(\n+        host=conf.get('scheduler', 'statsd_host'),\n+        port=conf.getint('scheduler', 'statsd_port'),\n+        prefix=conf.get('scheduler', 'statsd_prefix'))\n+    Stats = statsd\n+else:\n+    Stats = DummyStatsLogger",
    "path": "airflow/configuration.py",
    "commit_id": "11f70f44ed50b6020c8f133cc0cd7b4cde8faf47",
    "original_commit_id": "11f70f44ed50b6020c8f133cc0cd7b4cde8faf47",
    "user": {
      "login": "thoralf-gutierrez",
      "id": 5640848,
      "node_id": "MDQ6VXNlcjU2NDA4NDg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5640848?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thoralf-gutierrez",
      "html_url": "https://github.com/thoralf-gutierrez",
      "followers_url": "https://api.github.com/users/thoralf-gutierrez/followers",
      "following_url": "https://api.github.com/users/thoralf-gutierrez/following{/other_user}",
      "gists_url": "https://api.github.com/users/thoralf-gutierrez/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thoralf-gutierrez/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thoralf-gutierrez/subscriptions",
      "organizations_url": "https://api.github.com/users/thoralf-gutierrez/orgs",
      "repos_url": "https://api.github.com/users/thoralf-gutierrez/repos",
      "events_url": "https://api.github.com/users/thoralf-gutierrez/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thoralf-gutierrez/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Move DummyStatsLogger from settings.py to configuration.py to avoid import loop between both files.\n",
    "created_at": "2016-04-17T20:42:30Z",
    "updated_at": "2016-04-17T20:42:30Z",
    "html_url": "https://github.com/apache/airflow/pull/748#discussion_r59992221",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/748",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/59992221"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/748#discussion_r59992221"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/748"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/59992221/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 751,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 107,
    "position": 107,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/59992305",
    "pull_request_review_id": null,
    "id": 59992305,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5OTkyMzA1",
    "diff_hunk": "@@ -9,16 +9,21 @@\n \n class BaseExecutor(LoggingMixin):\n \n-    def __init__(self, parallelism=PARALLELISM):\n+    def __init__(self, parallelism=PARALLELISM, env=None):\n         \"\"\"\n         Class to derive in order to interface with executor-type systems\n         like Celery, Mesos, Yarn and the likes.\n \n         :param parallelism: how many jobs should run at one time. Set to\n             ``0`` for infinity\n         :type parallelism: int\n+\n+        :param env: environment variables to provide to the child process (\n+        defaults to environment of current process)\n         \"\"\"\n         self.parallelism = parallelism\n+        self.env = env\n+",
    "path": "airflow/executors/base_executor.py",
    "commit_id": "11f70f44ed50b6020c8f133cc0cd7b4cde8faf47",
    "original_commit_id": "11f70f44ed50b6020c8f133cc0cd7b4cde8faf47",
    "user": {
      "login": "thoralf-gutierrez",
      "id": 5640848,
      "node_id": "MDQ6VXNlcjU2NDA4NDg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5640848?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thoralf-gutierrez",
      "html_url": "https://github.com/thoralf-gutierrez",
      "followers_url": "https://api.github.com/users/thoralf-gutierrez/followers",
      "following_url": "https://api.github.com/users/thoralf-gutierrez/following{/other_user}",
      "gists_url": "https://api.github.com/users/thoralf-gutierrez/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thoralf-gutierrez/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thoralf-gutierrez/subscriptions",
      "organizations_url": "https://api.github.com/users/thoralf-gutierrez/orgs",
      "repos_url": "https://api.github.com/users/thoralf-gutierrez/repos",
      "events_url": "https://api.github.com/users/thoralf-gutierrez/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thoralf-gutierrez/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "We add this `env` option to pass custom environment variables to the subprocesses that the executor will launch. The subprocess environment is updated only when `env` is not `None`. We use this functionality to update the `AIRFLOW_CONFIG` environment variable of the subprocesses during tests, without touching the real environment.\n",
    "created_at": "2016-04-17T20:45:58Z",
    "updated_at": "2016-04-17T20:45:58Z",
    "html_url": "https://github.com/apache/airflow/pull/748#discussion_r59992305",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/748",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/59992305"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/748#discussion_r59992305"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/748"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/59992305/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 26,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 19,
    "position": 19,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/59992352",
    "pull_request_review_id": null,
    "id": 59992352,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5OTkyMzUy",
    "diff_hunk": "@@ -704,7 +704,7 @@ def _execute(self):\n         self.logger.info(\"Starting the scheduler\")\n \n         dagbag = models.DagBag(self.subdir, sync_to_db=True)\n-        executor = self.executor = dagbag.executor\n+        executor = self.executor",
    "path": "airflow/jobs.py",
    "commit_id": "11f70f44ed50b6020c8f133cc0cd7b4cde8faf47",
    "original_commit_id": "11f70f44ed50b6020c8f133cc0cd7b4cde8faf47",
    "user": {
      "login": "thoralf-gutierrez",
      "id": 5640848,
      "node_id": "MDQ6VXNlcjU2NDA4NDg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5640848?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thoralf-gutierrez",
      "html_url": "https://github.com/thoralf-gutierrez",
      "followers_url": "https://api.github.com/users/thoralf-gutierrez/followers",
      "following_url": "https://api.github.com/users/thoralf-gutierrez/following{/other_user}",
      "gists_url": "https://api.github.com/users/thoralf-gutierrez/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thoralf-gutierrez/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thoralf-gutierrez/subscriptions",
      "organizations_url": "https://api.github.com/users/thoralf-gutierrez/orgs",
      "repos_url": "https://api.github.com/users/thoralf-gutierrez/repos",
      "events_url": "https://api.github.com/users/thoralf-gutierrez/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thoralf-gutierrez/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Previous behavior was using the DagBag executor, but that one is always set to the default executor. (By the way, it looks like the executor of the DagBag is never used.)\n",
    "created_at": "2016-04-17T20:47:41Z",
    "updated_at": "2016-04-17T20:49:16Z",
    "html_url": "https://github.com/apache/airflow/pull/748#discussion_r59992352",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/748",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/59992352"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/748#discussion_r59992352"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/748"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/59992352/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 707,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 14,
    "position": 14,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/59992448",
    "pull_request_review_id": null,
    "id": 59992448,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5OTkyNDQ4",
    "diff_hunk": "@@ -69,8 +69,6 @@\n \n Base = declarative_base()\n ID_LEN = 250\n-SQL_ALCHEMY_CONN = configuration.get('core', 'SQL_ALCHEMY_CONN')\n-DAGS_FOLDER = os.path.expanduser(configuration.get('core', 'DAGS_FOLDER'))",
    "path": "airflow/models.py",
    "commit_id": "11f70f44ed50b6020c8f133cc0cd7b4cde8faf47",
    "original_commit_id": "11f70f44ed50b6020c8f133cc0cd7b4cde8faf47",
    "user": {
      "login": "thoralf-gutierrez",
      "id": 5640848,
      "node_id": "MDQ6VXNlcjU2NDA4NDg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5640848?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thoralf-gutierrez",
      "html_url": "https://github.com/thoralf-gutierrez",
      "followers_url": "https://api.github.com/users/thoralf-gutierrez/followers",
      "following_url": "https://api.github.com/users/thoralf-gutierrez/following{/other_user}",
      "gists_url": "https://api.github.com/users/thoralf-gutierrez/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thoralf-gutierrez/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thoralf-gutierrez/subscriptions",
      "organizations_url": "https://api.github.com/users/thoralf-gutierrez/orgs",
      "repos_url": "https://api.github.com/users/thoralf-gutierrez/repos",
      "events_url": "https://api.github.com/users/thoralf-gutierrez/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thoralf-gutierrez/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Replace one-time retrieval of the setting by the configuration convenience method that checks the `DAGS_FOLDER` of the current configuration. (Important because the configuration will be changed during tests).\n",
    "created_at": "2016-04-17T20:51:02Z",
    "updated_at": "2018-10-08T16:02:05Z",
    "html_url": "https://github.com/apache/airflow/pull/748#discussion_r59992448",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/748",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/59992448"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/748#discussion_r59992448"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/748"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/59992448/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 73,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 5,
    "position": 7,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/59992481",
    "pull_request_review_id": null,
    "id": 59992481,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5OTkyNDgx",
    "diff_hunk": "@@ -18,40 +18,11 @@\n from __future__ import unicode_literals\n \n import logging\n-import os\n import sys\n \n from sqlalchemy import create_engine\n from sqlalchemy.orm import scoped_session, sessionmaker\n \n-from airflow import configuration as conf\n-\n-\n-class DummyStatsLogger(object):\n-    @classmethod\n-    def incr(cls, stat, count=1, rate=1):\n-        pass\n-    @classmethod\n-    def decr(cls, stat, count=1, rate=1):\n-        pass\n-    @classmethod\n-    def gauge(cls, stat, value, rate=1, delta=False):\n-        pass\n-\n-Stats = DummyStatsLogger\n-\n-if conf.getboolean('scheduler', 'statsd_on'):\n-    from statsd import StatsClient\n-    statsd = StatsClient(\n-        host=conf.get('scheduler', 'statsd_host'),\n-        port=conf.getint('scheduler', 'statsd_port'),\n-        prefix=conf.get('scheduler', 'statsd_prefix'))\n-    Stats = statsd\n-else:\n-    Stats = DummyStatsLogger",
    "path": "airflow/settings.py",
    "commit_id": "11f70f44ed50b6020c8f133cc0cd7b4cde8faf47",
    "original_commit_id": "11f70f44ed50b6020c8f133cc0cd7b4cde8faf47",
    "user": {
      "login": "thoralf-gutierrez",
      "id": 5640848,
      "node_id": "MDQ6VXNlcjU2NDA4NDg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5640848?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thoralf-gutierrez",
      "html_url": "https://github.com/thoralf-gutierrez",
      "followers_url": "https://api.github.com/users/thoralf-gutierrez/followers",
      "following_url": "https://api.github.com/users/thoralf-gutierrez/following{/other_user}",
      "gists_url": "https://api.github.com/users/thoralf-gutierrez/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thoralf-gutierrez/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thoralf-gutierrez/subscriptions",
      "organizations_url": "https://api.github.com/users/thoralf-gutierrez/orgs",
      "repos_url": "https://api.github.com/users/thoralf-gutierrez/repos",
      "events_url": "https://api.github.com/users/thoralf-gutierrez/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thoralf-gutierrez/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Move DummyStatsLogger from settings.py to configuration.py to avoid import loop between both files.\n",
    "created_at": "2016-04-17T20:52:20Z",
    "updated_at": "2018-10-08T16:02:05Z",
    "html_url": "https://github.com/apache/airflow/pull/748#discussion_r59992481",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/748",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/59992481"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/748#discussion_r59992481"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/748"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/59992481/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 51,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 34,
    "position": 75,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/59992496",
    "pull_request_review_id": null,
    "id": 59992496,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5OTkyNDk2",
    "diff_hunk": "@@ -61,28 +32,38 @@ def gauge(cls, stat, value, rate=1, delta=False):\n  \"\"\"\n \n BASE_LOG_URL = '/admin/airflow/log'\n-AIRFLOW_HOME = os.path.expanduser(conf.get('core', 'AIRFLOW_HOME'))\n-SQL_ALCHEMY_CONN = conf.get('core', 'SQL_ALCHEMY_CONN')\n LOGGING_LEVEL = logging.INFO\n-DAGS_FOLDER = os.path.expanduser(conf.get('core', 'DAGS_FOLDER'))",
    "path": "airflow/settings.py",
    "commit_id": "11f70f44ed50b6020c8f133cc0cd7b4cde8faf47",
    "original_commit_id": "11f70f44ed50b6020c8f133cc0cd7b4cde8faf47",
    "user": {
      "login": "thoralf-gutierrez",
      "id": 5640848,
      "node_id": "MDQ6VXNlcjU2NDA4NDg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5640848?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thoralf-gutierrez",
      "html_url": "https://github.com/thoralf-gutierrez",
      "followers_url": "https://api.github.com/users/thoralf-gutierrez/followers",
      "following_url": "https://api.github.com/users/thoralf-gutierrez/following{/other_user}",
      "gists_url": "https://api.github.com/users/thoralf-gutierrez/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thoralf-gutierrez/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thoralf-gutierrez/subscriptions",
      "organizations_url": "https://api.github.com/users/thoralf-gutierrez/orgs",
      "repos_url": "https://api.github.com/users/thoralf-gutierrez/repos",
      "events_url": "https://api.github.com/users/thoralf-gutierrez/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thoralf-gutierrez/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "These should be accessed through the configuration convenience methods to make sure they correspond to the current config.\n",
    "created_at": "2016-04-17T20:53:23Z",
    "updated_at": "2018-10-08T16:02:05Z",
    "html_url": "https://github.com/apache/airflow/pull/748#discussion_r59992496",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/748",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/59992496"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/748#discussion_r59992496"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/748"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/59992496/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 67,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 48,
    "position": 91,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/59992512",
    "pull_request_review_id": null,
    "id": 59992512,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5OTkyNTEy",
    "diff_hunk": "@@ -61,28 +32,38 @@ def gauge(cls, stat, value, rate=1, delta=False):\n  \"\"\"\n \n BASE_LOG_URL = '/admin/airflow/log'\n-AIRFLOW_HOME = os.path.expanduser(conf.get('core', 'AIRFLOW_HOME'))\n-SQL_ALCHEMY_CONN = conf.get('core', 'SQL_ALCHEMY_CONN')\n LOGGING_LEVEL = logging.INFO\n-DAGS_FOLDER = os.path.expanduser(conf.get('core', 'DAGS_FOLDER'))\n-\n-engine_args = {}\n-if 'sqlite' not in SQL_ALCHEMY_CONN:\n-    # Engine args not supported by sqlite\n-    engine_args['pool_size'] = conf.getint('core', 'SQL_ALCHEMY_POOL_SIZE')\n-    engine_args['pool_recycle'] = conf.getint('core',\n-                                              'SQL_ALCHEMY_POOL_RECYCLE')\n-\n-engine = create_engine(SQL_ALCHEMY_CONN, **engine_args)\n-Session = scoped_session(\n-    sessionmaker(autocommit=False, autoflush=False, bind=engine))\n \n # can't move this to conf due to ConfigParser interpolation\n LOG_FORMAT = (\n     '[%(asctime)s] {%(filename)s:%(lineno)d} %(levelname)s - %(message)s')\n SIMPLE_LOG_FORMAT = '%(asctime)s %(levelname)s - %(message)s'\n \n \n+engine = None\n+Session = None\n+\n+\n+def connect(sql_alchemy_conn, pool_size, pool_recycle):\n+    \"\"\"\n+    builds the Session object to connect to the SQL-alchemy backend.\n+    \"\"\"\n+    global Session, engine\n+\n+    if Session:\n+        Session.remove()\n+\n+    engine_args = {}\n+    if 'sqlite' not in sql_alchemy_conn:\n+        # Engine args not supported by sqlite\n+        engine_args['pool_size'] = pool_size\n+        engine_args['pool_recycle'] = pool_recycle\n+\n+    engine = create_engine(sql_alchemy_conn, **engine_args)\n+    Session = scoped_session(sessionmaker(autocommit=False, autoflush=False,\n+                                          bind=engine))\n+",
    "path": "airflow/settings.py",
    "commit_id": "11f70f44ed50b6020c8f133cc0cd7b4cde8faf47",
    "original_commit_id": "11f70f44ed50b6020c8f133cc0cd7b4cde8faf47",
    "user": {
      "login": "thoralf-gutierrez",
      "id": 5640848,
      "node_id": "MDQ6VXNlcjU2NDA4NDg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5640848?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thoralf-gutierrez",
      "html_url": "https://github.com/thoralf-gutierrez",
      "followers_url": "https://api.github.com/users/thoralf-gutierrez/followers",
      "following_url": "https://api.github.com/users/thoralf-gutierrez/following{/other_user}",
      "gists_url": "https://api.github.com/users/thoralf-gutierrez/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thoralf-gutierrez/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thoralf-gutierrez/subscriptions",
      "organizations_url": "https://api.github.com/users/thoralf-gutierrez/orgs",
      "repos_url": "https://api.github.com/users/thoralf-gutierrez/repos",
      "events_url": "https://api.github.com/users/thoralf-gutierrez/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thoralf-gutierrez/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Move the creation of the sql alchemy connection inside this method, which get called whenever a new configuration is loaded (in the `load_config()`method of `airflow/configuration.py`)\n",
    "created_at": "2016-04-17T20:54:41Z",
    "updated_at": "2016-04-17T20:54:41Z",
    "html_url": "https://github.com/apache/airflow/pull/748#discussion_r59992512",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/748",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/59992512"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/748#discussion_r59992512"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/748"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/59992512/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 65,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 89,
    "position": 89,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/59992761",
    "pull_request_review_id": null,
    "id": 59992761,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5OTkyNzYx",
    "diff_hunk": "@@ -0,0 +1,310 @@\n+\"\"\"\n+General entry point for testing end to end dags",
    "path": "tests_dags/dag_tester.py",
    "commit_id": "11f70f44ed50b6020c8f133cc0cd7b4cde8faf47",
    "original_commit_id": "11f70f44ed50b6020c8f133cc0cd7b4cde8faf47",
    "user": {
      "login": "thoralf-gutierrez",
      "id": 5640848,
      "node_id": "MDQ6VXNlcjU2NDA4NDg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5640848?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thoralf-gutierrez",
      "html_url": "https://github.com/thoralf-gutierrez",
      "followers_url": "https://api.github.com/users/thoralf-gutierrez/followers",
      "following_url": "https://api.github.com/users/thoralf-gutierrez/following{/other_user}",
      "gists_url": "https://api.github.com/users/thoralf-gutierrez/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thoralf-gutierrez/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thoralf-gutierrez/subscriptions",
      "organizations_url": "https://api.github.com/users/thoralf-gutierrez/orgs",
      "repos_url": "https://api.github.com/users/thoralf-gutierrez/repos",
      "events_url": "https://api.github.com/users/thoralf-gutierrez/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thoralf-gutierrez/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "This is the dag testing framework.\n\n![image](https://www.lucidchart.com/publicSegments/view/f398403a-729c-40b1-bbeb-51f6d5c3f4d7/image.png)\n\n`AbstractEndToEndTest` is the abstract test super class that is extended by `EndToEndBackfillJobTest` and `EndToEndSchedulerJobTest`.\n\nActual tests classes that developers will write should extend `EndToEndBackfillJobTest` and/or `EndToEndSchedulerJobTest` depending on whether their scenario should be tested through a `BackfillJob`, a `SchedulerJob` or both.\n\nWhen a class enherits from `EndToEndBackfillJobTest` or `EndToEndSchedulerJobTest`, nose automatically detects the `test_backfilljob` and `test_schedulerjob` methods and adds them to the list of tests to execute.\n\nThe `test_backfilljob` and `test_schedulerjob` methods respectively use a `BackFillJobRunner` and a `SchedulerJobRunner`. They each extend the `Runner` class which contains the test context preparation. They each then respectively run a `BackfillJob` and a `SchedulerJob` with the test context.\n",
    "created_at": "2016-04-17T21:08:16Z",
    "updated_at": "2016-04-17T21:08:16Z",
    "html_url": "https://github.com/apache/airflow/pull/748#discussion_r59992761",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/748",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/59992761"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/748#discussion_r59992761"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/748"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/59992761/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 2,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 2,
    "position": 2,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/59994328",
    "pull_request_review_id": null,
    "id": 59994328,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5OTk0MzI4",
    "diff_hunk": "@@ -146,19 +152,19 @@ def trigger_dag(args):\n def variables(args):\n     if args.get:\n         try:\n-            var = Variable.get(args.get,\n-                               deserialize_json=args.json,\n-                               default_var=args.default)\n+            var = client.get_var(args.get,\n+                                 deserialize_json=args.json,\n+                                 default_var=args.default)\n             print(var)\n         except ValueError as e:\n             print(e)\n     if args.set:\n-        Variable.set(args.set[0], args.set[1])\n+        # and serialize_json as an option?",
    "path": "airflow/bin/cli.py",
    "commit_id": "c3072e67eba1885b95d989e847f36ba32589bbbc",
    "original_commit_id": "c3072e67eba1885b95d989e847f36ba32589bbbc",
    "user": {
      "login": "jgao54",
      "id": 17896160,
      "node_id": "MDQ6VXNlcjE3ODk2MTYw",
      "avatar_url": "https://avatars.githubusercontent.com/u/17896160?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jgao54",
      "html_url": "https://github.com/jgao54",
      "followers_url": "https://api.github.com/users/jgao54/followers",
      "following_url": "https://api.github.com/users/jgao54/following{/other_user}",
      "gists_url": "https://api.github.com/users/jgao54/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jgao54/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jgao54/subscriptions",
      "organizations_url": "https://api.github.com/users/jgao54/orgs",
      "repos_url": "https://api.github.com/users/jgao54/repos",
      "events_url": "https://api.github.com/users/jgao54/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jgao54/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "I lefted out serialize_json as a option because CLI input is already str type and will be serialized as a string by the JSON encoder, which is then deserialized into str/unicode instead of a dict. \n",
    "created_at": "2016-04-17T22:15:11Z",
    "updated_at": "2016-04-17T22:15:11Z",
    "html_url": "https://github.com/apache/airflow/pull/1391#discussion_r59994328",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1391",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/59994328"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1391#discussion_r59994328"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1391"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/59994328/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 162,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "NONE",
    "original_position": 28,
    "position": 28,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/59995627",
    "pull_request_review_id": null,
    "id": 59995627,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5OTk1NjI3",
    "diff_hunk": "@@ -29,9 +29,11 @@\n from airflow.exceptions import AirflowException\n \n # make this configurable\n-from airflow.common.client.local_client import LocalClient\n-client = LocalClient()\n+from airflow.api.client.local_client import LocalClient\n+from airflow.api.client.api_client import ApiClient\n \n+#client = LocalClient()\n+client = ApiClient(\"http://localhost:8080\")",
    "path": "airflow/bin/cli.py",
    "commit_id": "c3072e67eba1885b95d989e847f36ba32589bbbc",
    "original_commit_id": "c3072e67eba1885b95d989e847f36ba32589bbbc",
    "user": {
      "login": "r39132",
      "id": 581734,
      "node_id": "MDQ6VXNlcjU4MTczNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/581734?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/r39132",
      "html_url": "https://github.com/r39132",
      "followers_url": "https://api.github.com/users/r39132/followers",
      "following_url": "https://api.github.com/users/r39132/following{/other_user}",
      "gists_url": "https://api.github.com/users/r39132/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/r39132/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/r39132/subscriptions",
      "organizations_url": "https://api.github.com/users/r39132/orgs",
      "repos_url": "https://api.github.com/users/r39132/repos",
      "events_url": "https://api.github.com/users/r39132/events{/privacy}",
      "received_events_url": "https://api.github.com/users/r39132/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Why is the port fixed at 8080? Let's pass this via config.\n",
    "created_at": "2016-04-17T23:44:02Z",
    "updated_at": "2016-04-17T23:44:02Z",
    "html_url": "https://github.com/apache/airflow/pull/1391#discussion_r59995627",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1391",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/59995627"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1391#discussion_r59995627"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1391"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/59995627/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 36,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 10,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/60027723",
    "pull_request_review_id": null,
    "id": 60027723,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMDI3NzIz",
    "diff_hunk": "@@ -29,9 +29,11 @@\n from airflow.exceptions import AirflowException\n \n # make this configurable\n-from airflow.common.client.local_client import LocalClient\n-client = LocalClient()\n+from airflow.api.client.local_client import LocalClient\n+from airflow.api.client.api_client import ApiClient\n \n+#client = LocalClient()\n+client = ApiClient(\"http://localhost:8080\")",
    "path": "airflow/bin/cli.py",
    "commit_id": "c3072e67eba1885b95d989e847f36ba32589bbbc",
    "original_commit_id": "c3072e67eba1885b95d989e847f36ba32589bbbc",
    "user": {
      "login": "bolkedebruin",
      "id": 4282712,
      "node_id": "MDQ6VXNlcjQyODI3MTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4282712?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bolkedebruin",
      "html_url": "https://github.com/bolkedebruin",
      "followers_url": "https://api.github.com/users/bolkedebruin/followers",
      "following_url": "https://api.github.com/users/bolkedebruin/following{/other_user}",
      "gists_url": "https://api.github.com/users/bolkedebruin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bolkedebruin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bolkedebruin/subscriptions",
      "organizations_url": "https://api.github.com/users/bolkedebruin/orgs",
      "repos_url": "https://api.github.com/users/bolkedebruin/repos",
      "events_url": "https://api.github.com/users/bolkedebruin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bolkedebruin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Of course, will be when the PR is finalized\n",
    "created_at": "2016-04-18T09:17:46Z",
    "updated_at": "2016-04-18T09:17:46Z",
    "html_url": "https://github.com/apache/airflow/pull/1391#discussion_r60027723",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1391",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/60027723"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1391#discussion_r60027723"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1391"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/60027723/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 36,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 10,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/60081332",
    "pull_request_review_id": null,
    "id": 60081332,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMDgxMzMy",
    "diff_hunk": "@@ -28,6 +28,12 @@\n from airflow.utils.state import State\n from airflow.exceptions import AirflowException\n \n+# make this configurable\n+from airflow.api.client.local_client import LocalClient\n+from airflow.api.client.api_client import ApiClient\n+\n+#client = LocalClient()\n+client = ApiClient(\"http://localhost:8080\")",
    "path": "airflow/bin/cli.py",
    "commit_id": "c3072e67eba1885b95d989e847f36ba32589bbbc",
    "original_commit_id": "c3072e67eba1885b95d989e847f36ba32589bbbc",
    "user": {
      "login": "r39132",
      "id": 581734,
      "node_id": "MDQ6VXNlcjU4MTczNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/581734?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/r39132",
      "html_url": "https://github.com/r39132",
      "followers_url": "https://api.github.com/users/r39132/followers",
      "following_url": "https://api.github.com/users/r39132/following{/other_user}",
      "gists_url": "https://api.github.com/users/r39132/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/r39132/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/r39132/subscriptions",
      "organizations_url": "https://api.github.com/users/r39132/orgs",
      "repos_url": "https://api.github.com/users/r39132/repos",
      "events_url": "https://api.github.com/users/r39132/events{/privacy}",
      "received_events_url": "https://api.github.com/users/r39132/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "This assumes a web-server is running on the same machine as the CLI? it assumes a port? The port and host need to be in the config. However, that alone is not enough. This has operational implications for existing users that need to be thought through. I know of a few companies running on AWS that have security group-based access to the DB, but not to the webserver from nodes running the CLI. \n",
    "created_at": "2016-04-18T15:39:19Z",
    "updated_at": "2016-04-18T15:39:19Z",
    "html_url": "https://github.com/apache/airflow/pull/1391#discussion_r60081332",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1391",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/60081332"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1391#discussion_r60081332"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1391"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/60081332/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 36,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 9,
    "position": 9,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/60086084",
    "pull_request_review_id": null,
    "id": 60086084,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMDg2MDg0",
    "diff_hunk": "@@ -28,6 +28,12 @@\n from airflow.utils.state import State\n from airflow.exceptions import AirflowException\n \n+# make this configurable\n+from airflow.api.client.local_client import LocalClient\n+from airflow.api.client.api_client import ApiClient\n+\n+#client = LocalClient()",
    "path": "airflow/bin/cli.py",
    "commit_id": "c3072e67eba1885b95d989e847f36ba32589bbbc",
    "original_commit_id": "c3072e67eba1885b95d989e847f36ba32589bbbc",
    "user": {
      "login": "r39132",
      "id": 581734,
      "node_id": "MDQ6VXNlcjU4MTczNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/581734?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/r39132",
      "html_url": "https://github.com/r39132",
      "followers_url": "https://api.github.com/users/r39132/followers",
      "following_url": "https://api.github.com/users/r39132/following{/other_user}",
      "gists_url": "https://api.github.com/users/r39132/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/r39132/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/r39132/subscriptions",
      "organizations_url": "https://api.github.com/users/r39132/orgs",
      "repos_url": "https://api.github.com/users/r39132/repos",
      "events_url": "https://api.github.com/users/r39132/events{/privacy}",
      "received_events_url": "https://api.github.com/users/r39132/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Why is the LocalClient commented out? Is it either/or for the LocalClient and APIClient?\n",
    "created_at": "2016-04-18T16:06:25Z",
    "updated_at": "2016-04-18T16:06:25Z",
    "html_url": "https://github.com/apache/airflow/pull/1391#discussion_r60086084",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1391",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/60086084"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1391#discussion_r60086084"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1391"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/60086084/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 35,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 8,
    "position": 8,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/60086767",
    "pull_request_review_id": null,
    "id": 60086767,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMDg2NzY3",
    "diff_hunk": "@@ -28,6 +28,12 @@\n from airflow.utils.state import State\n from airflow.exceptions import AirflowException\n \n+# make this configurable\n+from airflow.api.client.local_client import LocalClient\n+from airflow.api.client.api_client import ApiClient\n+\n+#client = LocalClient()",
    "path": "airflow/bin/cli.py",
    "commit_id": "c3072e67eba1885b95d989e847f36ba32589bbbc",
    "original_commit_id": "c3072e67eba1885b95d989e847f36ba32589bbbc",
    "user": {
      "login": "r39132",
      "id": 581734,
      "node_id": "MDQ6VXNlcjU4MTczNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/581734?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/r39132",
      "html_url": "https://github.com/r39132",
      "followers_url": "https://api.github.com/users/r39132/followers",
      "following_url": "https://api.github.com/users/r39132/following{/other_user}",
      "gists_url": "https://api.github.com/users/r39132/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/r39132/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/r39132/subscriptions",
      "organizations_url": "https://api.github.com/users/r39132/orgs",
      "repos_url": "https://api.github.com/users/r39132/repos",
      "events_url": "https://api.github.com/users/r39132/events{/privacy}",
      "received_events_url": "https://api.github.com/users/r39132/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Consider a clearer naming scheme : LocalAPIClient vs RemoteAPIClient\n",
    "created_at": "2016-04-18T16:10:44Z",
    "updated_at": "2016-04-18T16:10:44Z",
    "html_url": "https://github.com/apache/airflow/pull/1391#discussion_r60086767",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1391",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/60086767"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1391#discussion_r60086767"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1391"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/60086767/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 35,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 8,
    "position": 8,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/60089172",
    "pull_request_review_id": null,
    "id": 60089172,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMDg5MTcy",
    "diff_hunk": "@@ -0,0 +1,14 @@\n+syntax = \"proto2\";\n+\n+package airflow;\n+\n+message Variable {",
    "path": "airflow/api/common/proto/variable.proto",
    "commit_id": "c3072e67eba1885b95d989e847f36ba32589bbbc",
    "original_commit_id": "c3072e67eba1885b95d989e847f36ba32589bbbc",
    "user": {
      "login": "r39132",
      "id": 581734,
      "node_id": "MDQ6VXNlcjU4MTczNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/581734?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/r39132",
      "html_url": "https://github.com/r39132",
      "followers_url": "https://api.github.com/users/r39132/followers",
      "following_url": "https://api.github.com/users/r39132/following{/other_user}",
      "gists_url": "https://api.github.com/users/r39132/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/r39132/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/r39132/subscriptions",
      "organizations_url": "https://api.github.com/users/r39132/orgs",
      "repos_url": "https://api.github.com/users/r39132/repos",
      "events_url": "https://api.github.com/users/r39132/events{/privacy}",
      "received_events_url": "https://api.github.com/users/r39132/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Why are we using protobufs? What is the implication of adding new fields to the Variables table with respect to the IDL and API version?\n",
    "created_at": "2016-04-18T16:25:54Z",
    "updated_at": "2016-04-18T16:25:54Z",
    "html_url": "https://github.com/apache/airflow/pull/1391#discussion_r60089172",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1391",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/60089172"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1391#discussion_r60089172"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1391"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/60089172/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 5,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 5,
    "position": 5,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/60090179",
    "pull_request_review_id": null,
    "id": 60090179,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMDkwMTc5",
    "diff_hunk": "@@ -0,0 +1,14 @@\n+syntax = \"proto2\";",
    "path": "airflow/api/common/proto/variable.proto",
    "commit_id": "c3072e67eba1885b95d989e847f36ba32589bbbc",
    "original_commit_id": "c3072e67eba1885b95d989e847f36ba32589bbbc",
    "user": {
      "login": "r39132",
      "id": 581734,
      "node_id": "MDQ6VXNlcjU4MTczNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/581734?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/r39132",
      "html_url": "https://github.com/r39132",
      "followers_url": "https://api.github.com/users/r39132/followers",
      "following_url": "https://api.github.com/users/r39132/following{/other_user}",
      "gists_url": "https://api.github.com/users/r39132/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/r39132/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/r39132/subscriptions",
      "organizations_url": "https://api.github.com/users/r39132/orgs",
      "repos_url": "https://api.github.com/users/r39132/repos",
      "events_url": "https://api.github.com/users/r39132/events{/privacy}",
      "received_events_url": "https://api.github.com/users/r39132/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Where is the IDL?\n",
    "created_at": "2016-04-18T16:32:23Z",
    "updated_at": "2016-04-18T16:32:23Z",
    "html_url": "https://github.com/apache/airflow/pull/1391#discussion_r60090179",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1391",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/60090179"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1391#discussion_r60090179"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1391"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/60090179/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 1,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 1,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/60116431",
    "pull_request_review_id": null,
    "id": 60116431,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMTE2NDMx",
    "diff_hunk": "@@ -0,0 +1,14 @@\n+syntax = \"proto2\";",
    "path": "airflow/api/common/proto/variable.proto",
    "commit_id": "c3072e67eba1885b95d989e847f36ba32589bbbc",
    "original_commit_id": "c3072e67eba1885b95d989e847f36ba32589bbbc",
    "user": {
      "login": "bolkedebruin",
      "id": 4282712,
      "node_id": "MDQ6VXNlcjQyODI3MTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4282712?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bolkedebruin",
      "html_url": "https://github.com/bolkedebruin",
      "followers_url": "https://api.github.com/users/bolkedebruin/followers",
      "following_url": "https://api.github.com/users/bolkedebruin/following{/other_user}",
      "gists_url": "https://api.github.com/users/bolkedebruin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bolkedebruin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bolkedebruin/subscriptions",
      "organizations_url": "https://api.github.com/users/bolkedebruin/orgs",
      "repos_url": "https://api.github.com/users/bolkedebruin/repos",
      "events_url": "https://api.github.com/users/bolkedebruin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bolkedebruin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "That is the idl. You can compile it by downloading protoc from Google. \n",
    "created_at": "2016-04-18T19:08:59Z",
    "updated_at": "2016-04-18T19:08:59Z",
    "html_url": "https://github.com/apache/airflow/pull/1391#discussion_r60116431",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1391",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/60116431"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1391#discussion_r60116431"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1391"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/60116431/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 1,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 1,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/60116729",
    "pull_request_review_id": null,
    "id": 60116729,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMTE2NzI5",
    "diff_hunk": "@@ -0,0 +1,14 @@\n+syntax = \"proto2\";\n+\n+package airflow;\n+\n+message Variable {",
    "path": "airflow/api/common/proto/variable.proto",
    "commit_id": "c3072e67eba1885b95d989e847f36ba32589bbbc",
    "original_commit_id": "c3072e67eba1885b95d989e847f36ba32589bbbc",
    "user": {
      "login": "bolkedebruin",
      "id": 4282712,
      "node_id": "MDQ6VXNlcjQyODI3MTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4282712?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bolkedebruin",
      "html_url": "https://github.com/bolkedebruin",
      "followers_url": "https://api.github.com/users/bolkedebruin/followers",
      "following_url": "https://api.github.com/users/bolkedebruin/following{/other_user}",
      "gists_url": "https://api.github.com/users/bolkedebruin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bolkedebruin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bolkedebruin/subscriptions",
      "organizations_url": "https://api.github.com/users/bolkedebruin/orgs",
      "repos_url": "https://api.github.com/users/bolkedebruin/repos",
      "events_url": "https://api.github.com/users/bolkedebruin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bolkedebruin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Nothing is added to the variable table. This is the message scheme description. Protobufs are used to have a schema and to be really fast. \n",
    "created_at": "2016-04-18T19:10:32Z",
    "updated_at": "2016-04-18T19:10:32Z",
    "html_url": "https://github.com/apache/airflow/pull/1391#discussion_r60116729",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1391",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/60116729"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1391#discussion_r60116729"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1391"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/60116729/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 5,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 5,
    "position": 5,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/60116779",
    "pull_request_review_id": null,
    "id": 60116779,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMTE2Nzc5",
    "diff_hunk": "@@ -28,6 +28,12 @@\n from airflow.utils.state import State\n from airflow.exceptions import AirflowException\n \n+# make this configurable\n+from airflow.api.client.local_client import LocalClient\n+from airflow.api.client.api_client import ApiClient\n+\n+#client = LocalClient()",
    "path": "airflow/bin/cli.py",
    "commit_id": "c3072e67eba1885b95d989e847f36ba32589bbbc",
    "original_commit_id": "c3072e67eba1885b95d989e847f36ba32589bbbc",
    "user": {
      "login": "bolkedebruin",
      "id": 4282712,
      "node_id": "MDQ6VXNlcjQyODI3MTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4282712?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bolkedebruin",
      "html_url": "https://github.com/bolkedebruin",
      "followers_url": "https://api.github.com/users/bolkedebruin/followers",
      "following_url": "https://api.github.com/users/bolkedebruin/following{/other_user}",
      "gists_url": "https://api.github.com/users/bolkedebruin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bolkedebruin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bolkedebruin/subscriptions",
      "organizations_url": "https://api.github.com/users/bolkedebruin/orgs",
      "repos_url": "https://api.github.com/users/bolkedebruin/repos",
      "events_url": "https://api.github.com/users/bolkedebruin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bolkedebruin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Will do\n",
    "created_at": "2016-04-18T19:10:48Z",
    "updated_at": "2016-04-18T19:10:48Z",
    "html_url": "https://github.com/apache/airflow/pull/1391#discussion_r60116779",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1391",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/60116779"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1391#discussion_r60116779"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1391"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/60116779/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 35,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 8,
    "position": 8,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/60148032",
    "pull_request_review_id": null,
    "id": 60148032,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMTQ4MDMy",
    "diff_hunk": "@@ -0,0 +1,14 @@\n+syntax = \"proto2\";",
    "path": "airflow/api/common/proto/variable.proto",
    "commit_id": "c3072e67eba1885b95d989e847f36ba32589bbbc",
    "original_commit_id": "c3072e67eba1885b95d989e847f36ba32589bbbc",
    "user": {
      "login": "r39132",
      "id": 581734,
      "node_id": "MDQ6VXNlcjU4MTczNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/581734?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/r39132",
      "html_url": "https://github.com/r39132",
      "followers_url": "https://api.github.com/users/r39132/followers",
      "following_url": "https://api.github.com/users/r39132/following{/other_user}",
      "gists_url": "https://api.github.com/users/r39132/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/r39132/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/r39132/subscriptions",
      "organizations_url": "https://api.github.com/users/r39132/orgs",
      "repos_url": "https://api.github.com/users/r39132/repos",
      "events_url": "https://api.github.com/users/r39132/events{/privacy}",
      "received_events_url": "https://api.github.com/users/r39132/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Sorry, I meant the compiled IDL. We need to commit the compiled IDL to the repo as well.  \n",
    "created_at": "2016-04-18T22:50:53Z",
    "updated_at": "2016-04-18T22:51:13Z",
    "html_url": "https://github.com/apache/airflow/pull/1391#discussion_r60148032",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1391",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/60148032"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1391#discussion_r60148032"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1391"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/60148032/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 1,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 1,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/60195245",
    "pull_request_review_id": null,
    "id": 60195245,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMTk1MjQ1",
    "diff_hunk": "@@ -0,0 +1,14 @@\n+syntax = \"proto2\";",
    "path": "airflow/api/common/proto/variable.proto",
    "commit_id": "c3072e67eba1885b95d989e847f36ba32589bbbc",
    "original_commit_id": "c3072e67eba1885b95d989e847f36ba32589bbbc",
    "user": {
      "login": "bolkedebruin",
      "id": 4282712,
      "node_id": "MDQ6VXNlcjQyODI3MTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4282712?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bolkedebruin",
      "html_url": "https://github.com/bolkedebruin",
      "followers_url": "https://api.github.com/users/bolkedebruin/followers",
      "following_url": "https://api.github.com/users/bolkedebruin/following{/other_user}",
      "gists_url": "https://api.github.com/users/bolkedebruin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bolkedebruin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bolkedebruin/subscriptions",
      "organizations_url": "https://api.github.com/users/bolkedebruin/orgs",
      "repos_url": "https://api.github.com/users/bolkedebruin/repos",
      "events_url": "https://api.github.com/users/bolkedebruin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bolkedebruin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "That is also in :-) variable_pb2.py \n",
    "created_at": "2016-04-19T09:01:58Z",
    "updated_at": "2016-04-19T09:01:58Z",
    "html_url": "https://github.com/apache/airflow/pull/1391#discussion_r60195245",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1391",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/60195245"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1391#discussion_r60195245"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1391"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/60195245/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 1,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 1,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/60331639",
    "pull_request_review_id": null,
    "id": 60331639,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMzMxNjM5",
    "diff_hunk": "@@ -1122,6 +1129,7 @@ def run(\n                 \"Task {self} previously succeeded\"\n                 \" on {self.end_date}\".format(**locals())\n             )\n+            Stats.incr('previously_succeeded', 1, 1)",
    "path": "airflow/models.py",
    "commit_id": "211a85907e6def416b9f7465b4e3e488a226b46b",
    "original_commit_id": "211a85907e6def416b9f7465b4e3e488a226b46b",
    "user": {
      "login": "aoen",
      "id": 1592778,
      "node_id": "MDQ6VXNlcjE1OTI3Nzg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1592778?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aoen",
      "html_url": "https://github.com/aoen",
      "followers_url": "https://api.github.com/users/aoen/followers",
      "following_url": "https://api.github.com/users/aoen/following{/other_user}",
      "gists_url": "https://api.github.com/users/aoen/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aoen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aoen/subscriptions",
      "organizations_url": "https://api.github.com/users/aoen/orgs",
      "repos_url": "https://api.github.com/users/aoen/repos",
      "events_url": "https://api.github.com/users/aoen/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aoen/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "maybe attempts_to_rerun_succeeded_tasks or something a bit more clear\n",
    "created_at": "2016-04-19T23:50:39Z",
    "updated_at": "2016-04-19T23:50:39Z",
    "html_url": "https://github.com/apache/airflow/pull/1406#discussion_r60331639",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1406",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/60331639"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1406#discussion_r60331639"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1406"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/60331639/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 1132,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 32,
    "position": 32,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/60331649",
    "pull_request_review_id": null,
    "id": 60331649,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMzMxNjQ5",
    "diff_hunk": "@@ -403,6 +406,10 @@ def collect_dags(\n                                 filepath, only_if_updated=only_if_updated)\n                     except Exception as e:\n                         logging.warning(e)\n+        Stats.gauge(\n+            'collect_dags', (datetime.now() - start_dttm).total_seconds(), 1)",
    "path": "airflow/models.py",
    "commit_id": "211a85907e6def416b9f7465b4e3e488a226b46b",
    "original_commit_id": "211a85907e6def416b9f7465b4e3e488a226b46b",
    "user": {
      "login": "aoen",
      "id": 1592778,
      "node_id": "MDQ6VXNlcjE1OTI3Nzg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1592778?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aoen",
      "html_url": "https://github.com/aoen",
      "followers_url": "https://api.github.com/users/aoen/followers",
      "following_url": "https://api.github.com/users/aoen/following{/other_user}",
      "gists_url": "https://api.github.com/users/aoen/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aoen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aoen/subscriptions",
      "organizations_url": "https://api.github.com/users/aoen/orgs",
      "repos_url": "https://api.github.com/users/aoen/repos",
      "events_url": "https://api.github.com/users/aoen/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aoen/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "maybe collect_dags_seconds so that it's clear it's a time measurement\n",
    "created_at": "2016-04-19T23:50:44Z",
    "updated_at": "2016-04-19T23:50:44Z",
    "html_url": "https://github.com/apache/airflow/pull/1406#discussion_r60331649",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1406",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/60331649"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1406#discussion_r60331649"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1406"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/60331649/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 410,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 22,
    "position": 22,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/60333628",
    "pull_request_review_id": null,
    "id": 60333628,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMzMzNjI4",
    "diff_hunk": "@@ -403,6 +406,10 @@ def collect_dags(\n                                 filepath, only_if_updated=only_if_updated)\n                     except Exception as e:\n                         logging.warning(e)\n+        Stats.gauge(\n+            'collect_dags', (datetime.now() - start_dttm).total_seconds(), 1)",
    "path": "airflow/models.py",
    "commit_id": "211a85907e6def416b9f7465b4e3e488a226b46b",
    "original_commit_id": "211a85907e6def416b9f7465b4e3e488a226b46b",
    "user": {
      "login": "plypaul",
      "id": 5704934,
      "node_id": "MDQ6VXNlcjU3MDQ5MzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5704934?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/plypaul",
      "html_url": "https://github.com/plypaul",
      "followers_url": "https://api.github.com/users/plypaul/followers",
      "following_url": "https://api.github.com/users/plypaul/following{/other_user}",
      "gists_url": "https://api.github.com/users/plypaul/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/plypaul/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/plypaul/subscriptions",
      "organizations_url": "https://api.github.com/users/plypaul/orgs",
      "repos_url": "https://api.github.com/users/plypaul/repos",
      "events_url": "https://api.github.com/users/plypaul/events{/privacy}",
      "received_events_url": "https://api.github.com/users/plypaul/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "dag_collection_time_seconds? Also, I'm not too familiar with how these metrics appear on the user end. Is it just this string or is there any additional context about which module it came from?\n",
    "created_at": "2016-04-20T00:12:08Z",
    "updated_at": "2016-04-20T00:12:08Z",
    "html_url": "https://github.com/apache/airflow/pull/1406#discussion_r60333628",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1406",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/60333628"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1406#discussion_r60333628"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1406"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/60333628/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 410,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 22,
    "position": 22,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/60356119",
    "pull_request_review_id": null,
    "id": 60356119,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMzU2MTE5",
    "diff_hunk": "@@ -607,6 +636,10 @@ class CLIFactory(object):\n         'execution_date': Arg(\n             (\"execution_date\",), help=\"The execution date of the DAG\",\n             type=parsedate),\n+        'execution_date_enhanced': Arg(",
    "path": "airflow/bin/cli.py",
    "commit_id": "c1f485f8475300d5fd26a02af751f376ad21909b",
    "original_commit_id": "0670f16a1ebd06f9cc1882540cd60c045c3a2ca9",
    "user": {
      "login": "criccomini",
      "id": 167569,
      "node_id": "MDQ6VXNlcjE2NzU2OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/167569?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/criccomini",
      "html_url": "https://github.com/criccomini",
      "followers_url": "https://api.github.com/users/criccomini/followers",
      "following_url": "https://api.github.com/users/criccomini/following{/other_user}",
      "gists_url": "https://api.github.com/users/criccomini/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/criccomini/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/criccomini/subscriptions",
      "organizations_url": "https://api.github.com/users/criccomini/orgs",
      "repos_url": "https://api.github.com/users/criccomini/repos",
      "events_url": "https://api.github.com/users/criccomini/events{/privacy}",
      "received_events_url": "https://api.github.com/users/criccomini/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Why not support this as part of `execution_date`, rather than having two different params?\n",
    "created_at": "2016-04-20T06:35:47Z",
    "updated_at": "2016-04-28T01:35:53Z",
    "html_url": "https://github.com/apache/airflow/pull/1408#discussion_r60356119",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1408",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/60356119"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1408#discussion_r60356119"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1408"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/60356119/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 49,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/60356229",
    "pull_request_review_id": null,
    "id": 60356229,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMzU2MjI5",
    "diff_hunk": "@@ -336,6 +336,34 @@ def list_tasks(args, dag=None):\n         print(\"\\n\".join(sorted(tasks)))\n \n \n+def parsedate_enhanced(args, dag, task):\n+    '''\n+    In addition to supporting date parsing, this also supports\n+    @now,\n+    @start_date (i.e. dag start date),\n+    @end_date (i.e. dag end date if one exists), and\n+    @latest (i.e. run closest to and before now that honors the schedule interval)\n+    '''\n+    timestr = args.execution_date\n+    now = datetime.now()\n+    effective_start_date = dag.default_args['start_date'] if (dag.default_args and 'start_date' in dag.default_args) else now\n+    effective_end_date = dag.default_args['end_date'] if (dag.default_args and 'end_date' in dag.default_args) else now\n+\n+    if timestr == '@now':\n+        return now\n+    elif timestr == '@start_date':",
    "path": "airflow/bin/cli.py",
    "commit_id": "c1f485f8475300d5fd26a02af751f376ad21909b",
    "original_commit_id": "0670f16a1ebd06f9cc1882540cd60c045c3a2ca9",
    "user": {
      "login": "criccomini",
      "id": 167569,
      "node_id": "MDQ6VXNlcjE2NzU2OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/167569?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/criccomini",
      "html_url": "https://github.com/criccomini",
      "followers_url": "https://api.github.com/users/criccomini/followers",
      "following_url": "https://api.github.com/users/criccomini/following{/other_user}",
      "gists_url": "https://api.github.com/users/criccomini/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/criccomini/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/criccomini/subscriptions",
      "organizations_url": "https://api.github.com/users/criccomini/orgs",
      "repos_url": "https://api.github.com/users/criccomini/repos",
      "events_url": "https://api.github.com/users/criccomini/events{/privacy}",
      "received_events_url": "https://api.github.com/users/criccomini/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Rather than this, wonder if `@start_date/@end_date` are set, but not defined for the DAG, should it throw an exception rather than returning `now`?\n",
    "created_at": "2016-04-20T06:37:20Z",
    "updated_at": "2016-04-28T01:35:53Z",
    "html_url": "https://github.com/apache/airflow/pull/1408#discussion_r60356229",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1408",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/60356229"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1408#discussion_r60356229"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1408"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/60356229/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 19,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/60356239",
    "pull_request_review_id": null,
    "id": 60356239,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMzU2MjM5",
    "diff_hunk": "@@ -336,6 +336,34 @@ def list_tasks(args, dag=None):\n         print(\"\\n\".join(sorted(tasks)))\n \n \n+def parsedate_enhanced(args, dag, task):\n+    '''\n+    In addition to supporting date parsing, this also supports\n+    @now,\n+    @start_date (i.e. dag start date),\n+    @end_date (i.e. dag end date if one exists), and\n+    @latest (i.e. run closest to and before now that honors the schedule interval)\n+    '''\n+    timestr = args.execution_date\n+    now = datetime.now()\n+    effective_start_date = dag.default_args['start_date'] if (dag.default_args and 'start_date' in dag.default_args) else now\n+    effective_end_date = dag.default_args['end_date'] if (dag.default_args and 'end_date' in dag.default_args) else now\n+\n+    if timestr == '@now':\n+        return now\n+    elif timestr == '@start_date':\n+        return effective_start_date\n+    elif timestr == '@end_date':\n+        return effective_end_date\n+    elif timestr == '@latest':\n+        if dag.schedule_interval == '@once' or dag.schedule_interval == 'None':",
    "path": "airflow/bin/cli.py",
    "commit_id": "c1f485f8475300d5fd26a02af751f376ad21909b",
    "original_commit_id": "0670f16a1ebd06f9cc1882540cd60c045c3a2ca9",
    "user": {
      "login": "criccomini",
      "id": 167569,
      "node_id": "MDQ6VXNlcjE2NzU2OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/167569?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/criccomini",
      "html_url": "https://github.com/criccomini",
      "followers_url": "https://api.github.com/users/criccomini/followers",
      "following_url": "https://api.github.com/users/criccomini/following{/other_user}",
      "gists_url": "https://api.github.com/users/criccomini/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/criccomini/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/criccomini/subscriptions",
      "organizations_url": "https://api.github.com/users/criccomini/orgs",
      "repos_url": "https://api.github.com/users/criccomini/repos",
      "events_url": "https://api.github.com/users/criccomini/events{/privacy}",
      "received_events_url": "https://api.github.com/users/criccomini/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Same question as for `@start_date/@end_date`\n",
    "created_at": "2016-04-20T06:37:34Z",
    "updated_at": "2016-04-28T01:35:53Z",
    "html_url": "https://github.com/apache/airflow/pull/1408#discussion_r60356239",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1408",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/60356239"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1408#discussion_r60356239"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1408"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/60356239/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 24,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/60357076",
    "pull_request_review_id": null,
    "id": 60357076,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMzU3MDc2",
    "diff_hunk": "@@ -607,6 +636,10 @@ class CLIFactory(object):\n         'execution_date': Arg(\n             (\"execution_date\",), help=\"The execution date of the DAG\",\n             type=parsedate),\n+        'execution_date_enhanced': Arg(",
    "path": "airflow/bin/cli.py",
    "commit_id": "c1f485f8475300d5fd26a02af751f376ad21909b",
    "original_commit_id": "0670f16a1ebd06f9cc1882540cd60c045c3a2ca9",
    "user": {
      "login": "r39132",
      "id": 581734,
      "node_id": "MDQ6VXNlcjU4MTczNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/581734?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/r39132",
      "html_url": "https://github.com/r39132",
      "followers_url": "https://api.github.com/users/r39132/followers",
      "following_url": "https://api.github.com/users/r39132/following{/other_user}",
      "gists_url": "https://api.github.com/users/r39132/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/r39132/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/r39132/subscriptions",
      "organizations_url": "https://api.github.com/users/r39132/orgs",
      "repos_url": "https://api.github.com/users/r39132/repos",
      "events_url": "https://api.github.com/users/r39132/events{/privacy}",
      "received_events_url": "https://api.github.com/users/r39132/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "I went that way first. At the point where the type converter (e.g. int, parsedate, etc...) is used from the argparse module, I don't have access to the dag. Hence, I need to execute these conversions later in code execution\n",
    "created_at": "2016-04-20T06:48:02Z",
    "updated_at": "2016-04-28T01:35:53Z",
    "html_url": "https://github.com/apache/airflow/pull/1408#discussion_r60357076",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1408",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/60357076"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1408#discussion_r60357076"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1408"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/60357076/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 49,
    "position": 1,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/apache/airflow/pulls/comments/60359283",
    "pull_request_review_id": null,
    "id": 60359283,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMzU5Mjgz",
    "diff_hunk": "@@ -336,6 +336,34 @@ def list_tasks(args, dag=None):\n         print(\"\\n\".join(sorted(tasks)))\n \n \n+def parsedate_enhanced(args, dag, task):\n+    '''\n+    In addition to supporting date parsing, this also supports\n+    @now,\n+    @start_date (i.e. dag start date),\n+    @end_date (i.e. dag end date if one exists), and\n+    @latest (i.e. run closest to and before now that honors the schedule interval)\n+    '''\n+    timestr = args.execution_date\n+    now = datetime.now()\n+    effective_start_date = dag.default_args['start_date'] if (dag.default_args and 'start_date' in dag.default_args) else now\n+    effective_end_date = dag.default_args['end_date'] if (dag.default_args and 'end_date' in dag.default_args) else now\n+\n+    if timestr == '@now':\n+        return now\n+    elif timestr == '@start_date':",
    "path": "airflow/bin/cli.py",
    "commit_id": "c1f485f8475300d5fd26a02af751f376ad21909b",
    "original_commit_id": "0670f16a1ebd06f9cc1882540cd60c045c3a2ca9",
    "user": {
      "login": "r39132",
      "id": 581734,
      "node_id": "MDQ6VXNlcjU4MTczNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/581734?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/r39132",
      "html_url": "https://github.com/r39132",
      "followers_url": "https://api.github.com/users/r39132/followers",
      "following_url": "https://api.github.com/users/r39132/following{/other_user}",
      "gists_url": "https://api.github.com/users/r39132/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/r39132/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/r39132/subscriptions",
      "organizations_url": "https://api.github.com/users/r39132/orgs",
      "repos_url": "https://api.github.com/users/r39132/repos",
      "events_url": "https://api.github.com/users/r39132/events{/privacy}",
      "received_events_url": "https://api.github.com/users/r39132/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "Makes sense. Better than hiding a possible bug like a start_date missing from a DAG.\n",
    "created_at": "2016-04-20T07:13:52Z",
    "updated_at": "2016-04-28T01:35:53Z",
    "html_url": "https://github.com/apache/airflow/pull/1408#discussion_r60359283",
    "pull_request_url": "https://api.github.com/repos/apache/airflow/pulls/1408",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/comments/60359283"
      },
      "html": {
        "href": "https://github.com/apache/airflow/pull/1408#discussion_r60359283"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/apache/airflow/pulls/1408"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/apache/airflow/pulls/comments/60359283/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": null,
    "side": "RIGHT",
    "author_association": "CONTRIBUTOR",
    "original_position": 19,
    "position": 1,
    "subject_type": "line"
  }
]